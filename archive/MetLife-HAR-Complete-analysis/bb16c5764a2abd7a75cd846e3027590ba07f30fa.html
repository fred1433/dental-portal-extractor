<!DOCTYPE html>


<!-- template name: us-mis-login.html -->


<!-- Configurable default behavior for the Remember Username checkbox -->
<!-- set the checkbox to unchecked -->


<html lang="en" dir="ltr">

<head>
    <title>Sign On</title>
    <base href="https://federate.sso.metlife.com/" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="assets/css/us-main.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/us-metlife-branding-new.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/us-common.css" />
    
    <!-- Support Promises in Internet Explorer -->
    <!-- <script type="text/javascript">
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf("MSIE ");
        if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))
            document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Promise%2CPromise.prototype.finally"><\/script>');
    </script> -->

    <script type="text/javascript" src="assets/data/appid_data_us.json"></script>
    <script language="javascript" src="assets/scripts/jquery-3.5.1.min.js"></script>

    <script language="javascript" type="text/javascript">
        function setPFLangCookie() {
            var localestr = document.getElementById("lang").value;
            document.cookie = "pf-accept-language=" + localestr + ";path=/";
            sessionStorage.setItem("Language-custom", localestr);
            window.location.reload();
        }
    </script>
    <script charset="UTF-8" type="text/javascript">
        window["adrum-start-time"] = new Date().getTime();
        (function (config) {
            config.appKey = "AD-AAB-ACB-UFC";
            config.adrumExtUrlHttp = "http://cdn.appdynamics.com";
            config.adrumExtUrlHttps = "https://cdn.appdynamics.com";
            config.beaconUrlHttp = "http://pdx-col.eum-appdynamics.com";
            config.beaconUrlHttps = "https://pdx-col.eum-appdynamics.com";
            config.useHTTPSAlways = true;
            config.xd = { "enable": true };
            config.resTiming = { "bufSize": 200, "clearResTimingOnBeaconSend": true };
            config.maxUrlLength = 512;
        })(window["adrum-config"] || (window["adrum-config"] = {}));
    </script>
    <script src="//cdn.appdynamics.com/adrum/adrum-latest.js"></script>

</head>

<body class="bd-overflow body-bgcolor" onload="met_initialize();setFocus();">

    <!--
    if there is a logo present in the 'company-logo' container,
    then 'has-logo' class should be added to 'ping-header' container.
    -->
    <div class="met_navbar has-logo">
        <span class="company-logo">
            <nav class="navbar navbar-default">
                <img class="logo" title="Metlife logo" src="assets/images/logo.svg" alt="Metlife logo" />

            </nav>
        </span>

    </div>
    <!-- .ping-header -->
    <div class="login-logo-header bodyContent" id="test1">

        <div>
            <div id="ml_warning" title="" aria-label="" class="ml-msg ml-msg-error ml-msg-mfa ml_hide err-new">
                <span class="ml-msg-txt">
                    <span class="fa fa-exclamation-circle high-priority"></span>
                    Please check the information below.
                </span>
            </div>
            <div class="top-strip"></div>
            <form method="POST" action="/as/Le5ShUgIPZ/resume/as/authorization.ping" autocomplete="off" data-forms="floating-label"
                class="ml-form ml-form-mfa form-width-strip" id="LoginForm">
                <h1 class="h2-align title-align h-align-left"> Log in to your account</h1>
                <p aria-label="Enter your username and password." class="header-sub-text p-login-align" style="margin-top: -15px !important;">
                    Enter your Username and Password.</p>
                <input type="hidden" name="pf.alternateAuthnSystem" id="pf.alternateAuthnSystem" value="" />

                <div class="ping-messages ping-msg-login">
                                        
                                        
                </div>

                                        <p aria-label="All fields are required." class="login-mandatory-text">
                            <!-- All fields are required. -->
                        </p>
                        <div class="clear"></div>
                        <fieldset id="username_field" class="ml-form-field">
                            <label for="field">
                                                                <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
                                <input style="display: none" type="text" name="fakeusernameremembered" />
                                <input class="loginInput new-input-css" id="username" placeholder="username"
                                    autocomplete="chrome-off" type="text" size="36" name="pf.username" value=""
                                    autocorrect="off" autocapitalize="off" onKeyPress="return postOnReturn(event)" />
                                                                <span
                                    class="loginSpanFieldClass">Username</span>
                            </label>
                        </fieldset>
                        <fieldset id="password_field" class="ml-form-field">
                            <label for="PasswordField">
                                <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
                                <input style="display: none" type="password" name="fakepasswordremembered" />
                                <input class="loginInput new-input-css" placeholder="password" id="password"
                                    autocomplete="chrome-off" type="password" size="36" name="pf.pass"
                                    onKeyPress="return postOnReturn(event)" />
                                <span class="loginSpanFieldClass">Password</span>
                            </label>
                            <img id="showEyeButton" class="showEyeButton" role="img" title="Show Password"
                                aria-label="Show Password" alt="Eye icon"
                                src="assets/images/ml-toggle-visibility-hide.png" />
                        </fieldset>

                        <!--        
                          -->

                        <div class="ping-buttons">
                            <input type="hidden" name="pf.ok" value="" />
                            <input type="hidden" name="pf.cancel" value="" />
                            <button onclick="postOk();" id="signOnButtonSpan" class="ml-button-primary m-a-0"
                                type="button">Log in</button>

                        </div><!-- .ping-buttons -->

                        <div class="ping-input-link ping-pass-change account-actions">

                            
                                                        <span class="forgotCredentialsLink ml_hide">
                                <input type="hidden" name="pf.usernamerecovery" value="" />
                                <a onclick="postRecoverUsername();"
                                    class="forgot-password">Forgot Username </a>
                            </span>
                            
                            		

                                                        <input type="hidden" name="pf.passwordreset" value="" />

                            <a onclick="postForgotPassword();"
                                class="forgot-password">Forgot Password</a>
                                                        

                                                    <span id="changepass" class="ml_hide">
                          <span class="divider">|</span>
                            <a href="/as/Le5ShUgIPZ/resume/as/authorization.ping?ChangePassword=true" onClick="launchForgotChangePassword()" class="password-change">Change Password</a>
                            </span>
							 

                                                    </div>
                        <div class="ping-register ml_hide">
                            <span class="fs-14">Don't have an account?</span>
                            <a href="javascript:void(0)" class="username" id="request_access"
                                onclick="registerOnClick();">Register Now</a>
                        </div>

                        <!-- 
                <!-- #recaptcha -->
                
                <input type="hidden" name="pf.adapterId" id="pf.adapterId" value="HTMLFormPDAdapterUSMDWeb" />
                <input type="hidden" name="[]" id="[]" value="[]" />

            </form>
        </div><!-- .ping-body// blank div -->
    </div>
    <div class="footer-strip"></div>
    <footer class="login-footer log-footer-align">
        <div>
            <div>
                <div class="footerDiv">
                    <div class="links-align">
                        <span><a target="_blank" class="privacy-link privacy-link-align"
                                href="https://www.metlife.com/about-us/privacy-policy/">Privacy
                                Policy</a></span>
                        <span class="footer-link-sep"> | </span>
                        <span><a target="_blank" class="privacy-link privacy-link-align"
                                href="https://www.metlife.com/about-us/terms-and-conditions/">Legal Notice</a></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="links-align-bottom">
            <img class="logo logo-img" title="Metlife logo" src="assets/images/logo.svg" alt="Metlife logo">
            <p aria-label="© 2024 MetLife, Inc. All rights reserved." class="footer-text footer-txt-align">© <span
                    id="year"></span>
                MetLife Services and Solutions, LLC.</p>
        </div>
    </footer>
    <!-- .ping-container -->

    <script type="text/javascript" src="../assets/scripts/id_dataweb_device_profiling.js"></script>
    <script type="text/javascript">

        // window.onload = function () {
        //     var cuurentLangCookie = document.cookie.split("; ").find(row => row.startsWith("pf-accept-language="))?.split('=')[1];

        //     if (!cuurentLangCookie) {
        //         var defaultLang = sessionStorage.getItem("Language-custom") || navigator.language || "en";
        //         document.cookie = "pf-accept-language=" + defaultLang + ";path=/;SamSite=Lax"
        //         document.getElementById("lang").value = defaultLang;

        //     } else {
        //         document.getElementById("lang").value = cuurentLangCookie;

        //     }
        //     setFocus();
        //     met_initialize();
        // }


        function postForgotPassword() {
            setCookie("resumeURL", "/as/Le5ShUgIPZ/resume/as/authorization.ping");
            document.forms[0]['pf.passwordreset'].value = 'clicked';
            document.forms[0].submit();
        }

        function postRecoverUsername() {
            setCookie("resumeURL", "/as/Le5ShUgIPZ/resume/as/authorization.ping");
            document.forms[0]['pf.usernamerecovery'].value = 'clicked';
            document.forms[0].submit();
        }

        function launchForgotChangePassword() {
            setCookie("resumeURL", "/as/Le5ShUgIPZ/resume/as/authorization.ping");
            window.location.replace("/as/Le5ShUgIPZ/resume/as/authorization.ping?ChangePassword=true");
        }

        function setCookie(cname, cvalue) {
            document.cookie = cname + "=" + cvalue + ";path=/";
        }

        function postAlternateAuthnSystem(system) {
            var variants = ["Biometrics", "Windows Hello", "Face ID", "Touch ID"];
            for (i = 0; i < variants.length; i++) {
                if (variants[i] == system) {
                    system = "FIDO";
                }
            }
            document.forms[0]['pf.alternateAuthnSystem'].value = system;
            document.forms[0].submit();
        }


        function postRegistration() {
            document.forms[0]['pf.registration'].value = true;
            document.forms[0].submit();
        }

        function postOk() {

            if (false) {
                grecaptcha.execute();
            }
            else {

                var unameError = false;
                var pswdError = false;

                // remove error tips
                document.getElementById('username_field').className = 'ml-form-field';
                document.getElementById('password_field').className = 'ml-form-field';
                document.getElementById('ml_warning').className = 'ml-msg ml-msg-error ml_hide';
                //document.getElementById('ml-form-field-errortext').className = 'ml-form-field-errortext ml_hide';

                // Add back
                if (document.forms[0]['username'].value == '') {
                    document.getElementById('username_field').className += ' error';
                    document.getElementById('ml_warning').className = 'ml-msg ml-msg-error ml_show';
                    // document.getElementById('ml-form-field-errortext').className = 'ml-form-field-errortext ml_show';
                    unameError = true;
                }
                if (document.forms[0]['password'].value == '') {
                    document.getElementById('password_field').className += ' error';
                    document.getElementById('ml_warning').className = 'ml-msg ml-msg-error ml_show';
                    // document.getElementById('ml-form-field-errortext').className = 'ml-form-field-errortext ml_show';
                    pswdError = true;
                }

                if (!unameError && !pswdError) {

                    submitForm();
                }
            }
        }

        function submitForm() {

            document.forms[0]['pf.ok'].value = 'clicked';
            document.forms[0].submit();
            if (false) {
                grecaptcha.reset();
            }
        }

        function postCancel() {
            document.forms[0]['pf.cancel'].value = 'clicked';
            document.forms[0].submit();
        }

        function postOnReturn(e) {
            var keycode;
            if (window.event) keycode = window.event.keyCode;
            else if (e) keycode = e.which;
            else return true;

            if (keycode == 13) {
                postOk();
                return false;
            } else {
                return true;
            }
        }
        // window.onload = function () {
        //     var cuurentLangCookie = document.cookie.split("; ").find(row => row.startsWith("pf-accept-language="))?.split('=')[1];

        //     console.log(cuurentLangCookie);

        //     if (!cuurentLangCookie) {
        //         var defaultLang = sessionStorage.getItem("Language-custom") || navigator.language || "en";
        //         document.cookie = "pf-accept-language=" + defaultLang + ";path=/;SamSite=Lax"
        //         document.getElementById("lang").value = defaultLang;
        //         console.log(defaultLang);


        //     } else {
        //         document.getElementById("lang").value = cuurentLangCookie;

        //     }
        //     console.log(document.cookie);

        // }

        function setFocus() {
            sessionStorage.removeItem('countDownExpiry');
            var platform = navigator.platform;
            if (platform != null && platform.indexOf("iPhone") == -1) {
                                document.getElementById('username').focus();
                            }
            if (null != sessionStorage.getItem("Language-custom")) {
                $('#lang').val(sessionStorage.getItem("Language-custom"));
            } else if ("en" == document.cookie.split(`;`)[0].split('=')[1]) {
                $('#lang').val(document.cookie.split(`;`)[0].split('=')[1]);
            } else {
                if (null != navigator.language) {
                    $('#lang').val(navigator.language.substring(0, 2));
                    sessionStorage.setItem("Language-custom", navigator.language.substring(0, 2));
                }
            }
            const search = new URLSearchParams(window.location.search);
            const vnd_pi_application_name = search.has('vnd_pi_application_name') ? decodeURIComponent(search.get('vnd_pi_application_name')) : "";
            if (vnd_pi_application_name !== "") {
                clearCookie("appId")
                setCookie("appId", vnd_pi_application_name);
                sessionStorage.setItem("appId", vnd_pi_application_name);
            } 
            unHideLinks()
            sessionStorage.setItem("entityId_connection", '$entityId');
        }

        function unHideLinks() {
            if(sessionStorage.getItem("appId") === "US:DentalProvider_Parent:1750") {
                document.getElementById("request_access").textContent = "Request Access";
            }
            const appLinkInfo = getData();
            const flag = appLinkInfo ? true : false;
            //Unhide Registration Link
            if (flag && appLinkInfo?.registrationUrl !== "") {
                document.getElementsByClassName('ping-register')[0].classList.remove('ml_hide');
            }
            //Unhide Forgot Username Link
             if (flag && appLinkInfo?.forgotusername) {
                 document.getElementsByClassName('forgotCredentialsLink')[0].classList.remove('ml_hide');
             }

             if (flag && appLinkInfo?.changePassword) {
                 document.getElementById("changepass").classList.remove('ml_hide');
             }
        }

        function setMobile(mobile) {
            var className = ' mobile',
                hasClass = (bodyTag.className.indexOf(className) !== -1);

            if (mobile && !hasClass) {
                bodyTag.className += className;

            } else if (!mobile && hasClass) {
                bodyTag.className = bodyTag.className.replace(className, '');
            }

            
            <!-- Check if this is the PingOne Mobile App -->
                    }

        function getScreenWidth() {
            return (window.outerHeight) ? window.outerWidth : document.body.clientWidth;
        }

        var bodyTag = document.getElementsByTagName('body')[0],
            width = getScreenWidth(),
            remember = false && false;

        
        if (/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            setMobile(true);
        } else {
            setMobile((width <= 480));
            window.onresize = function () {
                width = getScreenWidth();
                setMobile((width <= 480));
            }
        }
        

        var showEyeButton = document.querySelector('#showEyeButton');
        var password = document.querySelector('#password');

        showEyeButton.addEventListener('click', function (e) {
            // toggle the type attribute
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);
            // toggle the eye slash icon
            const src = this.getAttribute('src') === 'assets/images/ml-toggle-visibility-show.png' ? 'assets/images/ml-toggle-visibility-hide.png' : 'assets/images/ml-toggle-visibility-show.png';
            this.setAttribute('src', src);
        });

        init();
        function getQueryParam(param) {
        let searchParams = new URLSearchParams(window.location.search);
        return searchParams.has(param) ? searchParams.get(param) : null;
      }
        function met_initialize() {
                let requestedResource = getQueryParam("vnd_pi_requested_resource");
            if (requestedResource) {
          sessionStorage.setItem("vnd_pi_requested_resource",decodeURIComponent(requestedResource))
        }
            clearCookie("resumeURL");
            clearCookie("showRegistrationLink");

        }

        //test reg link

        function registerOnClick() {
            const obj = getData();
            const url = obj && obj?.registrationUrl ? obj?.registrationUrl : "";
            if (url !== "" && url === "local") {
                document.getElementById("pf.alternateAuthnSystem").value = "identity.registration";
                document.getElementById("LoginForm").submit();
            } else if (url !== "") {
                window.location.replace(url)
            }
        }

        function getData() {
            let retValue = "";
            const appids = JSON.parse(appid);
            const id = sessionStorage.getItem('appId') ? sessionStorage.getItem('appId') : "";

            if (id !== "") {
                for (var i = 0; i < appids.length; i++) {
                    if (appids[i].name == id) {
                        retValue = appids[i];
                        break;
                    }
                }
            }
            return retValue;
        }
        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1);
                if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
            }
            return "";
        }

        function clearCookie(cname) {
            document.cookie = cname + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }
    </script>
    <script>
        document.getElementById("year").innerHTML = new Date().getFullYear();
    </script>

</body>

</html>
