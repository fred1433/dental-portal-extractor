!function(e){function t(t){for(var i,o,r=t[0],l=t[1],c=t[2],u=0,h=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);h.length;)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={1:0},a={1:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[];o[e]?t.push(o[e]):0!==o[e]&&{2:1,3:1,4:1,5:1,6:1,7:1,8:1,10:1,11:1}[e]&&t.push(o[e]=new Promise((function(t,n){for(var i=e+"."+{2:"7ae87817bb83b34f8031",3:"8524fa8740cc042e819e",4:"3edf644af30c6b3f2bba",5:"4492c71ea17318e1e31b",6:"7061a501e76c367e3bb3",7:"f29dfe6b37259e40394c",8:"986bf7f5cc2d0d0aca76",9:"31d6cfe0d16ae931b73c",10:"47ae81e17ad64f7d4b23",11:"92998bf8d8d27e473d30",12:"31d6cfe0d16ae931b73c",13:"31d6cfe0d16ae931b73c",14:"31d6cfe0d16ae931b73c",15:"31d6cfe0d16ae931b73c",16:"31d6cfe0d16ae931b73c",17:"31d6cfe0d16ae931b73c",18:"31d6cfe0d16ae931b73c",19:"31d6cfe0d16ae931b73c",20:"31d6cfe0d16ae931b73c",21:"31d6cfe0d16ae931b73c",22:"31d6cfe0d16ae931b73c",23:"31d6cfe0d16ae931b73c",24:"31d6cfe0d16ae931b73c",25:"31d6cfe0d16ae931b73c",26:"31d6cfe0d16ae931b73c",27:"31d6cfe0d16ae931b73c",28:"31d6cfe0d16ae931b73c",29:"31d6cfe0d16ae931b73c",30:"31d6cfe0d16ae931b73c",31:"31d6cfe0d16ae931b73c",32:"31d6cfe0d16ae931b73c",33:"31d6cfe0d16ae931b73c",34:"31d6cfe0d16ae931b73c",35:"31d6cfe0d16ae931b73c",36:"31d6cfe0d16ae931b73c",37:"31d6cfe0d16ae931b73c",38:"31d6cfe0d16ae931b73c",39:"31d6cfe0d16ae931b73c",40:"31d6cfe0d16ae931b73c",41:"31d6cfe0d16ae931b73c",42:"31d6cfe0d16ae931b73c",43:"31d6cfe0d16ae931b73c",44:"31d6cfe0d16ae931b73c",45:"31d6cfe0d16ae931b73c",46:"31d6cfe0d16ae931b73c",47:"31d6cfe0d16ae931b73c",48:"31d6cfe0d16ae931b73c",49:"31d6cfe0d16ae931b73c",50:"31d6cfe0d16ae931b73c",51:"31d6cfe0d16ae931b73c",52:"31d6cfe0d16ae931b73c",53:"31d6cfe0d16ae931b73c",54:"31d6cfe0d16ae931b73c",55:"31d6cfe0d16ae931b73c",56:"31d6cfe0d16ae931b73c",57:"31d6cfe0d16ae931b73c",58:"31d6cfe0d16ae931b73c",59:"31d6cfe0d16ae931b73c",60:"31d6cfe0d16ae931b73c",61:"31d6cfe0d16ae931b73c",62:"31d6cfe0d16ae931b73c",63:"31d6cfe0d16ae931b73c"}[e]+".css",a=r.p+i,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(d=s[l]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===i||c===a))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){var d;if((c=(d=u[l]).getAttribute("data-href"))===i||c===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.request=i,delete o[e],h.parentNode.removeChild(h),n(s)},h.href=a,document.getElementsByTagName("head")[0].appendChild(h)})).then((function(){o[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=function(e){return r.p+""+e+".netomi_sdk.ba24740a41bba0e96770.js"}(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}a[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;s.push([305,0]),n()}({0:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"o",(function(){return a})),n.d(t,"c",(function(){return s.a})),n.d(t,"f",(function(){return l})),n.d(t,"w",(function(){return c})),n.d(t,"v",(function(){return u})),n.d(t,"h",(function(){return d.a})),n.d(t,"A",(function(){return h.a})),n.d(t,"z",(function(){return p})),n.d(t,"x",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f.a})),n.d(t,"i",(function(){return E})),n.d(t,"y",(function(){return v})),n.d(t,"n",(function(){return T})),n.d(t,"t",(function(){return _})),n.d(t,"k",(function(){return S})),n.d(t,"e",(function(){return b})),n.d(t,"p",(function(){return O})),n.d(t,"a",(function(){return I})),n.d(t,"B",(function(){return y})),n.d(t,"j",(function(){return A.a})),n.d(t,"m",(function(){return C})),n.d(t,"r",(function(){return N})),n.d(t,"q",(function(){return D})),n.d(t,"l",(function(){return R.a})),n.d(t,"s",(function(){return w})),n.d(t,"u",(function(){return L}));var i,o={"ai.msg.domain.responses.core.Text":["TextResponse"],"ai.msg.domain.responses.core.Image":["ImageResponse"],"ai.msg.domain.responses.core.Video":["VideoResponse"],"ai.msg.domain.responses.core.Card":["ButtonCardResponse"],"ai.msg.domain.responses.core.Carousel":["CarouselResponse"],"ai.msg.domain.responses.core.Audio":["AudioResponse"],"ai.msg.domain.responses.core.MessageInfoAttachment":["HumanHandoffForm","EmbeddedForm","SchemaForm","SurveyForm","LLMSchemaForm"],"ai.msg.domain.responses.core.GenericFileAttachment":["FileAttachment"],"ai.msg.domain.responses.core.MultiSource":["MultiSource"],"ai.msg.domain.responses.core.NBAAttachment":["NBAAttachment"],"ai.msg.domain.formBuilder.Form":["LLMSchemaForm"],"ai.msg.domain.responses.core.Email":["EmailResponse"],"ai.msg.domain.responses.core.FillerText":["FillerText"],"ai.msg.domain.responses.core.SecureForm":["SecureForm"]},a={UPDATE_USER_ID:"UPDATE_USER_ID",UPDATE_PARENT_WINDOW_STYLE:"UPDATE_PARENT_WINDOW_STYLE",EXPAND_MEDIA_ON_PARENT_WINDOW:"EXPAND_MEDIA_ON_PARENT_WINDOW",NETOMI_FORM_SUBMIT_EVENT:"NETOMI_FORM_SUBMIT_EVENT",LEARN_PARSED_ARGUMENTS:"LEARN_PARSED_ARGUMENTS",SEND_MESSAGE_IN_WIDGET:"SEND_MESSAGE_IN_WIDGET",SEND_LOG_TO_DATADOG:"SEND_LOG_TO_DATADOG",CHANGE_BOT_CONFIG:"CHANGE_BOT_CONFIG",HIDE_SUPPORT_ICON:"HIDE_SUPPORT_ICON",END_SESSION:"END_SESSION",OPEN_WIDGET:"OPEN_WIDGET",CLOSE_WIDGET:"CLOSE_WIDGET",ACCEPT_TOKEN_IN_WIDGET:"ACCEPT_TOKEN_IN_WIDGET",ACCEPT_VISITOR_INFO:"ACCEPT_VISITOR_INFO",TRIGGER_PENDING_EVENTS_BEFORE_INIT:"TRIGGER_PENDING_EVENTS_BEFORE_INIT",TRIGGER_PENDING_EVENTS:"TRIGGER_PENDING_EVENTS",HIDE_CHAT_WIDGET:"HIDE_CHAT_WIDGET",INVALID_JWT_TOKEN_FALLBACK:"INVALID_JWT_TOKEN_FALLBACK",SHOW_CALLOUT_BUBBLE:"SHOW_CALLOUT_BUBBLE",CHANGE_LOCALE:"CHANGE_LOCALE",TRIGGER_PENDING_EVENTS_ON_MQTT_CONNECT:"TRIGGER_PENDING_EVENTS_ON_MQTT_CONNECT",TRIGGER_PENDING_EVENTS_ON_HUMAN_HANDOFF:"TRIGGER_PENDING_EVENTS_ON_HUMAN_HANDOFF",TRIGGER_PENDING_EVENTS_ON_OAUTH:"TRIGGER_PENDING_EVENTS_ON_OAUTH",NO_SCROLL_ALLOWED:"NO_SCROLL_ALLOWED",BACK_TO_BOT:"BACK_TO_BOT",SHOW_EXTERNAL_HEADER_TEXT:"SHOW_EXTERNAL_HEADER_TEXT",HIDE_HEADER_MENU_BUTTONS:"HIDE_HEADER_MENU_BUTTONS",PROMPT_TEST_DETAILS:"PROMPT_TEST_DETAILS",RESPONSE_RECEIVED:"RESPONSE_RECEIVED",MESSAGE_ERROR:"MESSAGE_ERROR",USER_QUERY_SENT:"USER_QUERY_SENT",CLEAR_CONVERSATION:"CLEAR_CONVERSATION",REMOVE_WIDGET:"REMOVE_WIDGET",REMOVE_WIDGET_FROM_PARENT_WINDOW:"REMOVE_WIDGET_FROM_PARENT_WINDOW",SHOW_AISTUDIO_ICON_POPOVER:"SHOW_AISTUDIO_ICON_POPOVER",CLOSE_CHAT_WIDGET:"CLOSE_CHAT_WIDGET",MINIMIZE_CHAT_WIDGET:"MINIMIZE_CHAT_WIDGET",USER_OPEN_WIDGET:"USER_OPEN_WIDGET",MAXIMIZE_CHAT_WIDGET:"MAXIMIZE_CHAT_WIDGET",RESTORE_CHAT_WIDGET:"RESTORE_CHAT_WIDGET",END_CHAT_CONFIRM:"END_CHAT_CONFIRM",END_CHAT_CANCEL:"END_CHAT_CANCEL",DOWNLOAD_TRANSCRIPT:"DOWNLOAD_TRANSCRIPT",END_CHAT_WITH_TRANSCRIPT:"END_CHAT_WITH_TRANSCRIPT",SURVEY_SKIPPED:"SURVEY_SKIPPED",SURVEY_SUBMITTED:"SURVEY_SUBMITTED",END_CHAT_PILL:"CHAT_END_PILL",SESSION_EXPIRE_PILL:"SESSION_EXPIRE_PILL",SET_CALLOUT_BUBBLE_CONFIG:"SET_CALLOUT_BUBBLE_CONFIG",SHOW_VISITOR_INFO_BUTTON:"SHOW_VISITOR_INFO_BUTTON",RA_SHOW_VISITOR_INFO_FORM:"RA_SHOW_VISITOR_INFO_FORM",RA_UPDATE_VISITOR_INFO_FORM:"RA_UPDATE_VISITOR_INFO_FORM",TERMS_AND_CONDITION_LOADED:"TERMS_AND_CONDITION_LOADED",TERMS_AND_CONDITION_ACCEPTED:"TERMS_AND_CONDITION_ACCEPTED",TERMS_AND_CONDITION_REFUSED:"TERMS_AND_CONDITION_REFUSED",OPEN_SECURE_FORM_OVERLAY:"OPEN_SECURE_FORM_OVERLAY",CLOSE_SECURE_FORM_OVERLAY:"CLOSE_SECURE_FORM_OVERLAY"},s=n(170);const r="right"===((null===(i=window.parent.document.getElementById("netomiChatWindow"))||void 0===i?void 0:i.getAttribute("position"))||"right")?"position:fixed; right:10px; max-height: 704px; bottom:10px; z-index:2147483647; transition: 0.3s all ease-in-out;":"position:fixed; left:10px; max-height: 704px; bottom:10px; z-index:2147483647; transition: 0.3s all ease-in-out;";var l={SMALL_SCREEN_DEVICES:{height:"100%",width:"100%",style:"position:fixed; right:0px; bottom:0px; z-index:2147483647; transition: 0.3s all ease-in-out;"},LARGE_SCREEN_DEVICES:{height:"90%",width:"386px",style:r},SHOW_SUPPORT_ICON_ONLY:{height:"68px",width:"70px",style:r},SHOW_SUPPORT_ICON_TEXT:{height:"68px",width:"290px",style:r},HIDE:{height:"0px",width:"0px",style:"display: none;"}},c={IMAGE:{element:function(){return`<img \n                alt="chat-image" \n                style = ${this.style}\n                src = ${this.src} \n            />`},src:"",style:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:90%;max-height:90% ",setSrc:function(e){this.src=e}},VIDEO:{element:function(){return`<video \n                style = ${this.style}\n                src = ${this.src}\n                muted\n                autoplay\n                controls \n                disablepictureinpicture \n                controlslist="nodownload noplaybackrate"\n                > \n                </video>`},src:"",style:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:auto;height:auto;max-width:90%;max-height:90% ",setSrc:function(e){this.src=e}}},u={"['ImageResponse', 'ai.msg.domain.responses.core.Image']":"IMAGE","['VideoResponse', 'ai.msg.domain.responses.core.Video']":"VIDEO"},d=n(19),h=n(33),p={CHECKED:"CHECKED",DISABLED:"DISABLED",DEFAULT:"DEFAULT",STYLE:"STYLE",LENGTH:"LENGTH",REGEX:"REGEX",REQUIRED:"REQUIRED",RADIO:"RADIO",CHECKBOX:"CHECKBOX",DATE:"DATE",ARRAY_TO_STRING:"ARRAY_TO_STRING",STRING:"STRING",CHECKED_TO_STRING:"CHECKED_TO_STRING",PLACEHOLDER:"PLACEHOLDER",PILLS:"PILLS",INPUT:"INPUT",TEXTAREA:"TEXTAREA",SELECT:"SELECT",DEFAULT_OUTPUT_KEY:"DEFAULT_OUTPUT_KEY",DEFAULT_OUTPUT_KEY_INPUT:"DEFAULT_OUTPUT_KEY_INPUT",DEFAULT_OUTPUT_KEY_SELECT:"DEFAULT_OUTPUT_KEY_SELECT",DEFAULT_OUTPUT_KEY_TEXTAREA:"DEFAULT_OUTPUT_KEY_TEXTAREA",DEFAULT_OUTPUT_KEY_PILL:"DEFAULT_OUTPUT_KEY_PILL",DEFAULT_FORM_QUESTION_LABEL:"You have submitted the form",CHOICE:"choice",V2:"v2",DELIMITER:"&",FORM_SUBMISSION_ERROR:"FORM_SUBMISSION_ERROR",FORM_SUBMISSION_SUCCESS:"FORM_SUBMISSION_SUCCESS"},g=(n(173),{TEXT_RESPONSE:"TextResponse",IMAGE_RESPONSE:"ImageResponse",VIDEO_RESPONSE:"VideoResponse",CAROUSEL_RESPONSE:"CarouselResponse",CARD_RESPONSE:"ButtonCardResponse",SCHEMA_FORM_RESPONSE:"SchemaForm",SURVEY_FORM_RESPONSE:"SurveyForm",HUMAN_HANDOFF_FORM:"HumanHandoffForm",FILE_ATTACHMENT:"FileAttachment",MULTI_SOURCE:"MultiSource",LLM_SCHEMA_FORM_RESPONSE:"LLMSchemaForm",SECURE_FORM_RESPONSE:"SecureForm"}),m={LOGIN_WIDGET:"LOGIN_WIDGET",LOGOUT_WIDGET:"LOGOUT_WIDGET",LOGIN_USING_OAUTH:"LOGIN_USING_OAUTH",LOGOUT_USING_OAUTH:"LOGOUT_USING_OAUTH"},f=n(41),E={SESSION:{CREATED_AT:"createdAt",CONVERSATION_ID:"conversationId",USER_ID:"userId",CONVERSATION_INITIATED:"conversationInitiated"},AGENT_DESK:{ZENDESK_KEY:"__zlcmid",DEPT_HANDOFF_CODE_SENT:"deptHandoffCodeSent"},GREETING:{CALLOUT_BUBBLE_GREETING_COOKIE_LABEL:"calloutBubbleGreetingsTriggered",PROACTIVE_GREETING_COOKIE_LABEL:"proActiveGreetingsTriggered"},AUTH:{USER_LOGGED_IN:"userLoggedIn",AUTH_TOKEN:"auth_token"},OAUTH:{LOGGED_IN:"oauth"},SPEECH:{TOKEN:"speechToken"}},v={TOGGLE:"TOGGLE",DEFAULT:"DEFAULT",BOT_MESSAGE:"BOT_MESSAGE",USER_MESSAGE:"USER_MESSAGE"},T={[d.a.CHAT_ENDED]:"Chat Ended",[d.a.SESSION_HAS_EXPIRED]:"Session has expired",[d.a.BACK]:"Back",[d.a.RESTART]:"Restart",[d.a.SKIP]:"Skip",[d.a.USER_LAST_MESSAGE_STATUS]:" . Seen",[d.a.INCORRECT_INPUT_VALUE]:"Incorrect input value",[d.a.INVALID_VALIDATION]:"Invalid validation.",[d.a.QUICK_MENU]:"Quick Menu",[d.a.END_CHAT]:"End chat",[d.a.SOUND]:"Sound",[d.a.INPUT_PLACEHOLDER]:"Type your message..",[d.a.OFFLINE_BANNER_TEXT]:"No Internet Connection",[d.a.OFFLINE_MESSAGE_ERROR]:"Not Sent",[d.a.CHAT_RESTART]:"Chat Restarted"},_={TITLE:"TITLE",SUBTITLE:"SUBTITLE",SUPPORT_TEXT:"SUPPORT_TEXT",INITIAL_FLOWS_HEADER:"INITIAL_FLOWS.HEADER",INITIAL_FLOWS_FLOWS_LABEL:"INITIAL_FLOWS.FLOWS.LABEL_",INITIAL_FLOWS_FLOWS_NAME:"INITIAL_FLOWS.FLOWS.NAME_",AGENT_DESK_FORM_HEADER:"AGENT_DESK_FORM.HEADER",AGENT_DESK_FORM_FORM_FIELDS_LABEL:"AGENT_DESK_FORM.FORM_FIELDS.LABEL_",AGENT_DESK_FORM_FORM_FIELDS_NAME:"AGENT_DESK_FORM.FORM_FIELDS.NAME_",AGENT_DESK_FORM_FORM_FIELDS_PLACEHOLDER:"AGENT_DESK_FORM.FORM_FIELDS.PLACEHOLDER_",AGENT_DESK_FORM_SUBMIT_BUTTON_TEXT:"AGENT_DESK_FORM.SUBMIT_BUTTON_TEXT",AGENT_DESK_FORM_FORM_TITLE:"AGENT_DESK_FORM.FORM_TITLE",AGENT_DESK_FORM_REJECT_FORM_TEXT:"AGENT_DESK_FORM.REJECT_FORM_TEXT",AGENT_DESK_FORM_FORM_SUBMISSION_TEXT:"AGENT_DESK_FORM.FORM_SUBMISSION_TEXT",END_CHAT_SEND_TRANSCRIPT_CTA:"END_CHAT.SEND_TRANSCRIPT_CTA",END_CHAT_BUTTON_CTA:"END_CHAT.END_CHAT_BUTTON_CTA",END_CHAT_QUERY:"END_CHAT.END_CHAT_QUERY",SUPPORT_ICON_DETAILS_VALUE:"SUPPORT_ICON_DETAILS.VALUE",SUPPORT_ICON_DETAILS_TEXT:"SUPPORT_ICON_DETAILS.TEXT",INACTIVE_OVERLAY_DESCRIPTION_TEXT:"INACTIVE_OVERLAY.DESCRIPTION_TEXT",INACTIVE_OVERLAY_RESUME_BUTTON_TEXT:"INACTIVE_OVERLAY.RESUME_BUTTON_TEXT",INACTIVE_OVERLAY_RESTART_BUTTON_TEXT:"INACTIVE_OVERLAY.RESTART_BUTTON_TEXT",CALLOUT_BUBBLE_INTENT:"CALLOUT_BUBBLE.INTENT",CALLOUT_BUBBLE_ATTACHMENTS_TEXT:"CALLOUT_BUBBLE.ATTACHMENTS.TEXT_",CALLOUT_BUBBLE_OPTIONS_LABEL:"CALLOUT_BUBBLE.OPTIONS.LABEL_",CALLOUT_BUBBLE_OPTIONS_METADATA:"CALLOUT_BUBBLE.OPTIONS.METADATA_",QUICK_MENU_OPTIONS_LABEL:"QUICK_MENU_OPTIONS.LABEL_",QUICK_MENU_OPTIONS_TEXT:"QUICK_MENU_OPTIONS.TEXT_",RESTART_CHAT_WARNING_PRIMARY_CTA:"SHOW_WARNING.RESTART_BUTTON_TEXT",RESTART_CHAT_WARNING_SECONDARY_CTA:"SHOW_WARNING.CANCEL_BUTTON_TEXT",RESTART_CHAT_DESCRIPTION:"SHOW_WARNING.WARNING_TEXT"},S={NETOMI_HANDOVER_DEPARTMENT_NAME:"NETOMI_HANDOVER_DEPARTMENT_NAME",ZD_CHAT_VISITOR_NAME:"ZD_CHAT_visitor_name",ZD_CHAT_VISITOR_EMAIL:"ZD_CHAT_visitor_email",ZD_CHAT_VISITOR_PHONE:"ZD_CHAT_visitor_phone",ZD_LIVE_HANDOFF_TAGS:"Zendesk_live_handoff_tags",ZD_CHAT_CLEAR_TAGS:"ZD_CHAT_clear_tags",DISABLE_CHAT_INPUT_FIELD:"DISABLE_CHAT_INPUT",DISABLE_INPUT_FIELD:"DISABLE_INPUT_FIELD",END_CHAT_FIELD:"END_CHAT",FORM_URL:"FORM_URL",FORM_ID:"FORM_ID",FORMID:"FORMID",CALLBACK_EVENT:"CALLBACK_EVENT",CALLBACKEVENT:"CALLBACKEVENT",FORM_SCHEMA:"FORM_SCHEMA",SURVEY_SCHEMA:"SURVEY_SCHEMA",PRIMARY_LANGUAGE:"PRIMARY_LANGUAGE"},b={REQUEST:"REQUEST",RESPONSE:"RESPONSE",EVENT:"EVENT",INFO_PILL:"INFO_PILL",INFO:"INFO",AGENT_EVENT:"AGENT_EVENT",QUEUE_POSITION:"QUEUE_POSITION",FEEDBACK:"FEEDBACK",REVIEW:"REVIEW",FORM:"FORM",WIDGET_EVENT:"WIDGET_EVENT",CHAT_END:"CHAT_END",SESSON_EXPIRE:"SESSON_EXPIRE",CSAT_SURVEY:"CSAT_SURVEY",PERSISTENT_SURVEY:"PERSISTENT_SURVEY",SURVEY:"SURVEY",SUBMIT:"SUBMIT",AGENTDESK_FEEDBACK:"AGENTDESK_FEEDBACK",ENABLE_INPUT_FIELD:"ENABLE_INPUT_FIELD",ENABLE_CHAT_INPUT_FIELD:"ENABLE_CHAT_INPUT_FIELD",GENERIC:"GENERIC",SECURE_FORM:"SECURE_FORM",CARD_INFO:"CARD_INFO",LINK_GENERATION:"LINK_GENERATION",SECURE_LINK:"SECURE_LINK",FORM_STATUS:"FORM_STATUS"},O={POSITIVE:"POSITIVE",NEGATIVE:"NEGATIVE",THUMBS_UP:"👍",THUMBS_DOWN:"👎"},I={RESIZING_WIDGET:"Resizing widget to",FULL_SCREEN:"full screen",STANDARD_SCREEN:"normal mode",ENABLED:"enabled",DISABLED:"disabled"},y={WIDGET_EVENT_IDLE_USER:"WIDGET_EVENT_IDLE_USER",WIDGET_EVENT_CHAT_END:"WIDGET_EVENT_CHAT_END",WIDGET_EVENT_PERSISTENT_SURVEY:"WIDGET_EVENT_PERSISTENT_SURVEY",AGENTDESK_FEEDBACK_REVIEW:"AGENTDESK_FEEDBACK_REVIEW",SURVEY:"REJECTED",SUBMITTED:"SUBMITTED",NEGATIVE_MAP_KEY:"negativeSuggestionMap",POSITIVE_MAP_KEY:"positiveSuggestionMap",NEGATIVE:"NEGATIVE",POSITIVE:"POSITIVE",SURVEY_FORM:"SurveyForm",SKIP_EVENT:"event://;SKIP_EVENT;",DISABLE_RESUME_WORKFLOW:"resumeWorkflow::value=false",ENABLE_RESUME_WORKFLOW:"resumeWorkflow::value=true",CLOSE:"CLOSE",SKIP:"SKIP",GOOD:"Good",BAD:"Bad",YES:"Yes",NO:"No",SURVEY_DOT:"SURVEY.",DOT:".",BASIC_INFO:"BASIC_INFO",POSITIVE_FEEDBACK_HEADER:"POSITIVE_FEEDBACK.HEADER",NEGATIVE_FEEDBACK_HEADER:"NEGATIVE_FEEDBACK.HEADER",POSITIVE_CHOICES_CHOICE_:"POSITIVE_FEEDBACK.Choices.CHOICE_",NEGATIVE_CHOICES_CHOICE_:"NEGATIVE_FEEDBACK.Choices.CHOICE_",ISSUE_RESOLUTION_FEEDBACK:"ISSUE_RESOLUTION_FEEDBACK",BUTTON_YES:"BUTTON_YES",BUTTON_NO:"BUTTON_NO",BUTTON_ADD:"BUTTON_ADD",ADD:"+",ADDITIONAL_FEEDBACK:"ADDITIONAL_FEEDBACK",ADDITIONAL_FEEDBACK_TEXT:"ADDITIONAL_FEEDBACK_TEXT",ADDITIONAL_FEEDBACK_CONTEXT:"Add additional feedback",SUBMIT:"SUBMIT",START_TYPING:"START_TYPING",THANK_YOU:"Thank You!",FOR_YOUR_FEEDBACK:"for your feedback",OVERALL_RATING:"Over all how would you rate?",VIEW_RESPONSE:"VIEW_RESPONSE"},A=n(45),C={TRANSLATE_LANGUAGE:"TRANSLATE_LANGUAGE"},N={gradientDirectionConfig:{defaultGradientDirection:8,shadeValue:20,linearGradientDirection:["-45deg","0deg","45deg","-90deg","","90deg","-135deg","180deg","135deg"]}},D={TEXT:"labels",DATE:"labels",RADIO:"optionList"},R=n(80),w={RESPONSE_ANALYZER:"response-analyzer"},L={ENABLE_SECURITY_TRANSCRIPT:"ENABLE_SECURITY_TRANSCRIPT",IS_CHAT_WIDGET_LLM_ENABLED:"IS_CHAT_WIDGET_LLM_ENABLED"}},1:function(e,t,n){"use strict";var i=n(14),o=n(168),a=n(54),s=n(9),r=n.n(s),l=n(21),c=n.n(l),u=n(5),d=n(33),h=n(2),p=n(0),g=n(37),m=n(30),f=n(94),E=n(117),v=n.n(E),T=n(38);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={UPDATE_BROWSER_FONT_SIZE_SETTING(e,t){e.browserFontSizeSetting=t},UPDATE_SUPPORT_ICON_STATE(e,t){e.supportIconState=t},UPDATE_BLANK_SCREEN_STATE(e,t){e.blankScreen=S(S({},e.blankScreen),t)},UPDATE_TERMS_AND_CONDITIONS_STATE(e,t){e.termsAndConditions=t},UPDATE_HIGH_PRIORITY_ALERT_STATE(e,t){e.alerts.highPriorityAlert=t},UPDATE_MEDIUM_PRIORITY_ALERT_STATE(e,t){e.alerts.mediumPriorityAlert=t},UPDATE_GREETING_TRIGGER_ON_ALERT_CLOSURE_STATE(e,t){e.alerts.triggerGreeting=t},UPDATE_GREETING_TRIGGER_ON_TERMS_CLOSURE_STATE(e,t){e.termsAndConditions.triggerGreeting=t},UPDATE_QUICK_REPLY_ON_TERMS_CLOSURE_STATE(e,t){e.termsAndConditions.quickReply=t},UPDATE_USER_DEVICE_DETAILS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.deviceDetails=S(S({},t),e.deviceDetails)},UPDATE_FALLBACK_MECHANISM_STATE(e,t){e.fallbackMechanismState=S(S({},e.fallbackMechanismState),t)},UPDATE_COOKIE_VALUES_COPY_STATE(e,t){e.cookieValuesCopy=S(S({},e.cookieValuesCopy),t),e.cookieValuesCopy=Object.entries(e.cookieValuesCopy).reduce((function(e,t){let[n,i]=t;return void 0===i&&null===i||(e[n]=i),e}),{})},UPDATE_SURVEY_FORM_STATE(e,t){e.surveyFormState=t},UPDATE_TRIGGER_MINIMIZE_VALID_STATE(e,t){e.isTriggerMinimizeValid=t||!1},UPDATE_UNREAD_MESSAGES_STATUS(e,t){e.unreadMessagesState=t,u.a.setLocalStorageData(p.h.UNREAD_MESSAGES_STATE,t)},UPDATE_MQTT_CONNECTION_STATUS(e,t){e.isMqttConnected=t},UPDATE_CALLOUT_BUBBLE_LOADED(e,t){e.isCalloutBubbleLoaded=t},UPDATE_WIDGET_STATUS(e,t){e.widgetStatus=t},UPDATE_CURRENT_SCOPED_FORM_ID(e,t){e.currentScopedFormID=t},UPDATE_CSAT_STATE(e,t){e.csat=S(S({},e.csat),t)},UPDATE_SURVEY_RULES(e,t){let{type:n,rule:i,timerId:o}=t;switch(n){case p.B.WIDGET_EVENT_IDLE_USER:i&&(e.surveyRule.idleTimeoutRule.rule=i),o&&(e.surveyRule.idleTimeoutRule.timerId=o);break;case p.B.WIDGET_EVENT_CHAT_END:i&&(e.surveyRule.endChatRule.rule=i)}},UPDATE_SCHEMA_FORM_LABELS(e,t){e.schemaFormLabels=t},UPDATE_CLEAR_CONVERSATION_STATUS(e,t){e.clearConversationState.clearConversation=t},UPDATE_CLEAR_CONVERSATION_STATUS_TO_PENDING(e,t){e.clearConversationState.status=t},UPDATE_OVERLAY_STATUS(e,t){e.isOverlayActive=t},UPDATE_END_CHAT_STATUS(e,t){e.endChatCustomFieldStatus=t},UPDATE_INPUT_FIELD_DISABLE_STATUS(e,t){e.inputFieldDisableStatus=t},UPDATE_INPUT_FIELD_TEMP_DISABLE_STATUS(e,t){e.inputFieldTempDisableStatus=t},UPDATE_INPUT_FIELD_TEMP_DISABLE_STATUS_TIMER(e,t){e.inputFieldTempDisableStatusTimer=t},UPDATE_INPUT_FIELD_ON_SEND_DISABLE_TIMER(e,t){e.inputFieldOnSendDisableTimer=t},UPDATE_INPUT_FIELD_HIDDEN_STATUS(e,t){e.inputFieldHiddenStatus=t},UPDATE_FORM_CONTROLS_BUTTON_STATE(e,t){e.formControlsButtonState=t},UPDATE_PRIMARY_LANGUAGE(e,t){e.primaryLanguage=t},UPDATE_CONNECTION_STATUS(e,t){e.connectionStatus=t},FORM_CONTROLS_CLICKED_MESSAGE_ID(e){let t=e.chats,n=t.length,i=t[n-1].messages.length;e.formControlsClickedMessageId=t[n-1].messages[i-1].messageId},SANITIZE_CHAT_HISTORY_FOR_FORMS(e){let t=e.chats,n=t.length;for(let l=0;l<n;l++){var i;let c=t[l],u=(null==c||null===(i=c.messages)||void 0===i?void 0:i.length)||0;if(O(l,n,c,u,"EmbeddedForm")){var o,a;c.messages[u-1].messageValue.status[0]=d.a.SUBMITTED;const e="true"===new URL(c.messages[u-1].messageValue.source).searchParams.get(d.a.PERSISTENT.toLowerCase());c.messages[u-1].hide=!e;let n=t[l+1],i=(null===(o=n.messages)||void 0===o?void 0:o.length)||0;C(n,c,u,i);const s=n.messages.find((function(e){var t;return null==e||null===(t=e.messageValue)||void 0===t?void 0:t.iframeHeightWithOnlyQuestions})),r=null==s||null===(a=s.messageValue)||void 0===a?void 0:a.iframeHeightWithOnlyQuestions;c.messages[u-1].messageValue.iframeHeightWithOnlyQuestions[0]=r}else if(O(l,n,c,u,"SchemaForm")){const t=e.formsSubmittedInfo,n=e.formSkipInfo,i=c.messages[u-1].requestId;i in t?(c.messages[u-1].messageValue.status[0]=d.a.SUBMITTED,I(c,e.formsSubmittedInfo[i],u)):i in n&&(c.messages[u-1].messageValue.status[0]=d.a.SUBMITTED,c.messages[u-1].hide=!0)}else if(O(l,n,c,u,"LLMSchemaForm")){const t=e.formsSubmittedInfo,n=e.formSkipInfo;let i=u-1;for(let e=u-1;e>=0;e--){var s;if("LLMSchemaForm"===(null===(s=c.messages[e])||void 0===s?void 0:s.type)){i=e;break}}const o=c.messages[i].requestId;o in t?(c.messages[i].messageValue.status=[d.a.SUBMITTED],y(c,e.formsSubmittedInfo[o],u,i)):o in n&&(c.messages[u-1].messageValue.status=[d.a.SUBMITTED],c.messages[u-1].hide=!0)}else if(O(l,n,c,u,"SurveyForm")){var r;c.messages[u-1].messageValue.status[0]=d.a.SUBMITTED;let e=t[l+1],n=(null==e||null===(r=e.messages)||void 0===r?void 0:r.length)||0;C(e,c,u,n)}else c.isAgent&&Object(m.g)(p.h.ZENDESK)&&A(u,c,"SurveyForm")&&(c.messages[u-1].messageValue.status[0]=d.a.SUBMITTED)}},FORM_CONTROLS_CLICKED(e,t){e.formControlsClicked=t},SHOW_FORM_CONTROLS(e,t){e.showFormControls=t},UPDATE_CHAT_WIDGET_FULLSCREEN_STATUS(e,t){var n,i,o,a;null!==(n=e.widgetConfig)&&void 0!==n&&null!==(i=n.brandGPT)&&void 0!==i&&i.enable&&null!==(o=e.widgetConfig)&&void 0!==o&&null!==(a=o.brandGPT)&&void 0!==a&&a.isResizeOff&&!t||(e.isChatWidgetFullScreen=t)},UPDATE_KNOWLEDGE_AI_SOURCES(e,t){e.knowledgeAISourcesState=t},UPDATE_FILE_ATTACHMENT_ICON(e,t){e.isFileAttachmentIconDisabled=t},UPDATE_ACTIONABLE_NBA_OPTIONS(e,t){e.actionableNBAOptions=t},UPDATE_NON_ACTIONABLE_NBA_OPTIONS(e,t){e.nonActionableNBAOptions=t},UPDATE_NON_ACTIONABLE_NBA_OVERLAY_ENABLED(e,t){e.nonActionableNBAOverlayEnabled=t},UPDATE_BOT_REF_ID(e,t){e.botRefId=t},UPDATE_WIDGET_ID(e,t){e.widgetId=t},UPDATE_USER_ID(e,t){e.user.id=t},UPDATE_EMAIL_ID(e,t){e.user.email=t},UPDATE_WIDGET_CONFIG(e,t){var n,i;e.widgetConfig=t,Object(h.updateIframeHeaderTitle)(null===(n=e.widgetConfig)||void 0===n||null===(i=n.supportIconConfig)||void 0===i?void 0:i.ariaLabel)},UPDATE_FORM_ENCRYPTION_PUBLIC_KEY(e,t){e.formEncryptionPublicKey=t},UPDATE_BOT_PCI_POLICY(e,t){e.botPCIPolicy=t},UPDATE_BOT_DETAILS(e,t){for(let n in e.botDetails)null!=t&&t.config&&(e.botDetails[n]=t[n])},UPDATE_LD_FLAGS(e,t){for(let n in e.launchDarklyFlags)t.flag&&(e.launchDarklyFlags[n]="*"===t[n]||t[n])},UPDATE_USER_MESSAGE(e,t){e.userMessage=t},UPDATE_CONTROL_TYPE(e,t){e.controlType=t,u.a.setLocalStorageData("controlType",t)},UPDATE_AGENT_INFO(e,t){e.agentInfo=t},UPDATE_HANDOFF_DEPARTMENT(e,t){e.customHandoffDepartment=t},UPDATE_VISITOR_INFO(e,t){e.visitorInfo=S(S({},e.visitorInfo),t)},CLEAR_VISITOR_INFO(e){e.visitorInfo={}},TOGGLE_CHAT_WINDOW_STATUS(e,t){var n,i,o,a;let{data:s,getters:r}=t;null!==(n=e.widgetConfig)&&void 0!==n&&null!==(i=n.brandGPT)&&void 0!==i&&i.enable&&null!==(o=e.widgetConfig)&&void 0!==o&&null!==(a=o.brandGPT)&&void 0!==a&&a.isResizeOff&&!s||(e.isWindowMaximized=s,e.widgetStatus.status=s?d.a.OPEN:d.a.CLOSE,r.isKnowledgeAiEnabled&&s&&(e.widgetStatus.isFullScreen=!0))},SORT_CHATS_ACC_TO_TIMESTAMP(e){e.chats=e.chats.sort((function(e,t){return e.timestamp-t.timestamp}))},UPDATE_CHATS(e,t){var n;!Array.isArray(t)&&t.initiator!==p.h.WEBHOOK_HISTORY&&!t.hide&&(t.isMessageSeparator||t.userMessage||(null===(n=t.messages)||void 0===n?void 0:n.length)>0)&&Object(h.playNotificationSound)(e,t),delete t.initiator,e.chats.push(t)},UPDATE_CHAT_AT_ITH_POS(e,t){const n=e.chats,{position:i,chatBlock:o}=t;e.chats=[...n.slice(0,i),o,...n.slice(i+1)]},INSERT_CHAT_AT_ITH_POS(e,t){const n=e.chats,{position:i,chatBlock:o}=t;e.chats=[...n.slice(0,i),o,...n.slice(i)]},INSERT_MULTIPLE_CHATS_AT_TOP(e){e.chats=[...e.previousChats,...e.chats],e.previousChats=[]},UPDATE_PREVIOUS_CHAT(e,t){let{chatBlock:n}=t;e.previousChats.unshift(n)},DELETE_CHAT_AT_ITH_POS(e,t){const n=[...e.chats];n.splice(t,1),e.chats=[...n]},CLEAR_CHATS(e){e.chats=[]},UPDATE_DISPLAY_NAME_FOR_AGENTDESK(e,t){e.visitorDisplayNameForAgentDesk=t},UPDATE_MESSAGE_TAGS(e,t){e.messageTags=t?[...e.messageTags,...t]:[]},UPDATE_PROGRESSIVE_TYPING_INDICATOR_CONFIG(e,t){var n;t?e.progressiveTypingIndicatorConfig=t:e.progressiveTypingIndicatorConfig=(null===(n=e.widgetConfig.progressiveTypingIndicator)||void 0===n?void 0:n.config)||[{duration:2e3,text:""},{duration:3e3,text:"Looking into that now..."},{duration:5e3,text:"Gathering relevant information..."},{duration:2e4,text:"Almost there, just wrapping it up"}]},UPDATE_LAST_CHAT_MESSAGE(e,t){var n;const i=e.chats.slice(-1)[0],o=null==i||null===(n=i.messages)||void 0===n?void 0:n.slice(-1)[0];var a;null!=o&&o.isUser?e.chats.push(t):null==i||null===(a=i.messages)||void 0===a||a.push(t);!t.hide&&Object(h.playNotificationSound)(e,t)},UPDATE_FIRST_CHAT_MESSAGE(e,t){var n;const i=e.previousChats.slice[0],o=null==i||null===(n=i.messages)||void 0===n?void 0:n.slice(-1)[0];var a;null!=o&&o.isUser?e.previousChats=[...e.previousChats.slice(0,1),t,...e.previousChats.slice(1)]:null==i||null===(a=i.messages)||void 0===a||a.push(t);!t.hide&&Object(h.playNotificationSound)(e,t)},UPDATE_LAST_CHUNK_MESSAGE(e,t){var n;const i=e.chats,o=i.slice(-1)[0],a=null==o||null===(n=o.messages)||void 0===n?void 0:n.find((function(e){var n,i,o;return"ANSWER_AI_RESPONSE"===(null==e||null===(n=e.messageValue)||void 0===n?void 0:n.attachmentResponseType)&&(null==e||null===(i=e.messageValue)||void 0===i?void 0:i.timestamp)===(null==t||null===(o=t.attachment)||void 0===o?void 0:o.timestamp)}));if(a){var s,r,l,c,u,d;if(a.messageValue.text){if(a.messageValue.text+=null==t||null===(s=t.attachment)||void 0===s?void 0:s.text,a.messageValue.isReviewEnabled=(null==t||null===(r=t.attachment)||void 0===r?void 0:r.isReviewEnabled)||(null==a||null===(l=a.messageValue)||void 0===l?void 0:l.isReviewEnabled),t.attachment&&"isStreaming"in t.attachment)a.messageValue.isStreaming=Boolean(null==t||null===(c=t.attachment)||void 0===c?void 0:c.isStreaming),a.messageValue.isPartialStreaming=Boolean(null==t||null===(u=t.attachment)||void 0===u?void 0:u.isPartialStreaming)}else a.messageValue.text=null==t||null===(d=t.attachment)||void 0===d?void 0:d.text;e.chats[e.chats.length-1]=S({},o),e.chats=i}},UPDATE_LAST_CHUNK_MESSAGE_V2(e,t){const n=e.chats,i=n.slice(-1)[0],o=v()(null==i?void 0:i.messages,(function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.messageValue)||void 0===t?void 0:t.attachmentResponseType)}));if(o){var a,s,r,l,c,u,d,h,p;if(o.messageValue.text){if(o.messageValue.text+=null==t||null===(a=t.attachment)||void 0===a?void 0:a.text,o.messageValue.isReviewEnabled=(null==t||null===(s=t.attachment)||void 0===s?void 0:s.isReviewEnabled)||(null==o||null===(r=o.messageValue)||void 0===r?void 0:r.isReviewEnabled),o.messageValue.quickReply=null==t||null===(l=t.messageValue)||void 0===l?void 0:l.quickReply,t.attachment&&"isStreaming"in t.attachment)o.messageValue.isStreaming=Boolean(null==t||null===(c=t.attachment)||void 0===c?void 0:c.isStreaming),o.messageValue.isPartialStreaming=Boolean(null==t||null===(u=t.attachment)||void 0===u?void 0:u.isPartialStreaming)}else o.messageValue.text=null==t||null===(d=t.attachment)||void 0===d?void 0:d.text,o.messageValue.quickReply=null==t||null===(h=t.messageValue)||void 0===h?void 0:h.quickReply,null!=t&&null!==(p=t.attachment)&&void 0!==p&&p.text&&(o.hide=!1);e.chats[e.chats.length-1]=S({},i),e.chats=n}},UPDATE_TEXT_CHUNK_MESSAGE(e,t){var n;const i=e.chats,o=i.slice(-1)[0];(null==o||null===(n=o.messages)||void 0===n?void 0:n.filter((function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.messageValue)||void 0===t?void 0:t.attachmentResponseType)}))).forEach((function(e){var n,i;e&&e.messageValue.text&&t.attachment&&"isStreaming"in t.attachment&&(e.messageValue.isStreaming=Boolean(null==t||null===(n=t.attachment)||void 0===n?void 0:n.isStreaming),e.messageValue.isPartialStreaming=Boolean(null==t||null===(i=t.attachment)||void 0===i?void 0:i.isPartialStreaming))})),e.chats[e.chats.length-1]=S({},o),e.chats=i},UPDATE_LAST_CHUNK_CAROUSEL_MESSAGE(e,t){var n;const i=e.chats,o=i.slice(-1)[0],a=v()(null==o?void 0:o.messages,(function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.messageValue)||void 0===t?void 0:t.attachmentResponseType)}));var s,r;a&&"CarouselResponse"===a.type&&null!=a&&null!==(n=a.messageValue)&&void 0!==n&&n.elements&&(a.messageValue.elements.push(...t.messageValue.elements),t.messageValue.isReviewEnabled&&(a.messageValue.isReviewEnabled=!0),null!==(s=t.messageValue.quickReply)&&void 0!==s&&null!==(r=s.options)&&void 0!==r&&r.length&&(a.messageValue.quickReply=t.messageValue.quickReply),e.chats[e.chats.length-1]=S({},o),e.chats=i)},ADD_FEEDBACK_FOR_LAST_ATTACHMENT(e){const t=e.chats.slice(-1)[0],n=v()(null==t?void 0:t.messages,(function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.messageValue)||void 0===t?void 0:t.attachmentResponseType)&&!e.hide}));n&&(n.messageValue.isReviewEnabled=!0)},UPDATE_IDLE_TIMEOUT_ID(e,t){e.showEndChatFlow.timerId=t},UPDATE_AGENT_DESK_IDLE_TIMEOUT_ID(e,t){e.agentDesk.idleTimeoutTimerId=t},UPDATE_OVERLAY_IDLE_TIMEOUT_ID(e,t){e.overlayTimerId=t},REPLACE_LAST_IMAGE_SKELETON(e,t){const n=e.chats.reduceRight((function(e,t,n){return-1===e&&t.isAppStateOnly?n:e}),-1);-1!==n&&e.chats.splice(n,1,t)},UPDATE_QUICK_REPLY_OPTIONS(e,t){e.quickReplyOptions=t},UPDATE_INDICATOR_STATUS(e,t){e.showTypingIndicator=t},UPDATE_FORM_STATUS(e,t){const n=c()(e.chats),i=n.length;for(let e=i-1;i-e<=5;e--){var o;const i=n[e];let a=!1;if(!i)return;if(i.messages=null==i||null===(o=i.messages)||void 0===o?void 0:o.map((function(e){var n,o;if("HumanHandoffForm"===e.type&&((null===(n=e.messageValue)||void 0===n||null===(o=n.values)||void 0===o?void 0:o.status[0])===d.a.PENDING||e.type===t.type&&t.updateAcrossTabs))e.messageValue.values.status[0]=t.values.status[0],e.hide=t.values.status[0]===d.a.REJECTED,a=!0;else if("EmbeddedForm"===e.type&&(e.messageId===t.messageId||e.type===t.type&&t.updateAcrossTabs))e.messageValue.status[0]=d.a.SUBMITTED,t.iframeHeightWithOnlyQuestions&&(e.messageValue.iframeHeightWithOnlyQuestions=t.iframeHeightWithOnlyQuestions),t.hideFormUponControlsAction&&(e.hide=!0,i.messages.map((function(e){return e.hide=!0}))),t.iframeHidden&&(e.hide=!0),a=!0;else if("SchemaForm"===e.type&&(e.messageId===t.messageId||e.type===t.type&&t.updateAcrossTabs))e.messageValue.status[0]=d.a.SUBMITTED,t.hideFormUponControlsAction&&(e.hide=!0,i.messages.map((function(e){return e.hide=!0}))),a=!0;else if("SurveyForm"===e.type&&(e.messageId===t.messageId||e.type===t.type&&t.updateAcrossTabs)){var s;if(e.hide=null==t?void 0:t.hide,e.messageValue.status[0]=t.messageValue.status[0],null!==(s=t.messageValue)&&void 0!==s&&s.submitSurveyInfo){var r;const n=JSON.parse(null===(r=t.messageValue)||void 0===r?void 0:r.schema);n.submitSurveyInfo=t.messageValue.submitSurveyInfo,e.messageValue.schema=JSON.stringify(n)}a=!0}else if("LLMSchemaForm"===e.type&&(e.messageId===t.messageId||e.type===t.type&&t.updateAcrossTabs)){var l;const n=(null==t||null===(l=t.labels)||void 0===l?void 0:l.split("\n"))||[],i=e.messageValue.schema,o=i.length;for(let e=0;e<o;e++)i[e].responseValue=n[e];e.messageValue.status[0]=d.a.SUBMITTED,a=!0}return e})),a){n[e]=i;break}}e.chats=n},UPDATE_HISTORY_LOADING_STATUS(e,t){e.isHistoryLoading=t},UPDATE_END_CHAT_MODAL_STATUS(e,t){e.showEndChatFlow.enableWidget=t},UPDATE_END_CHAT_MODAL_ON_CHAT_RESTART(e,t){e.showEndChatFlow.isChatRestart=t},UPDATE_CALLOUT_BUBBLE_CONFIG_PUBSUB(e,t){e.calloutBubblePubsubConfig=t},UPDATE_CALLOUT_BUBBLE(e,t){const n=u.a.getLocalStorageData("showCalloutBubblePubsub");null!=n&&n.enabled&&null!=n&&n.data?e.widgetConfig.calloutBubble=null==n?void 0:n.data:e.widgetConfig.calloutBubble=t,g.a.loadBotJsonConfigLocaleMessages()},UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG(e){var t,n,i,o,a,s,r;let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const c=!(null!==(t=e.widgetConfig)&&void 0!==t&&null!==(n=t.calloutBubble)&&void 0!==n&&null!==(i=n.config)&&void 0!==i&&i.exposedFnWidthRange)&&(null===(o=u.a.getLocalStorageData("showCalloutBubblePubsub"))||void 0===o?void 0:o.enabled),d=l&&N(e,null===(a=e.widgetConfig)||void 0===a?void 0:a.calloutBubble)&&c;e.isCalloutBubbleEnabled=d,null!==(s=e.widgetConfig)&&void 0!==s&&null!==(r=s.calloutBubble)&&void 0!==r&&r.calloutBubbleEnabled&&(f.a.sendMessage({eventType:"TOGGLE_CALLOUT_BUBBLE",data:{show:d}}),d||Object(h.removeCalloutBubbleContainer)())},UPDATE_CALLOUT_BUBBLE_FLAG_FROM_PUBSUB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0};const n=(null==t?void 0:t.enabled)&&N(e,null==t?void 0:t.data);e.isCalloutBubbleEnabled=n,u.a.setLocalStorageData("showCalloutBubblePubsub",t),f.a.sendMessage({eventType:"TOGGLE_CALLOUT_BUBBLE",data:{show:n}}),n||Object(h.removeCalloutBubbleContainer)()},UPDATE_USER_MESSAGE_SYNC(e){var t;const n=null===(t=e.widgetConfig)||void 0===t?void 0:t.userMessageSyncAcrossTabs;n&&(e.userMessageSyncAcrossTabs=n)},UPDATE_TOKEN_IN_WIDGET(e,t){e.authToken=t},UPDATE_WIDGET_VISITOR_INFO(e,t){e.widgetVisitorInfo=t},UPDATE_USER_IP_ADDRESS(e,t){e.userIPAddress=t},UPDATE_DEFAULT_ATTRIBUTES(e,t){e.defaultAttributes=t},UPDATE_AUTHENTICATED_CONVERSATION_ID(e,t){e.authenticatedConversationId=t},UPDATE_EXTERNAL_ID(e,t){e.externalId=t},UPDATE_NOTIFICATION_SOUND(e,t){e.notificationSound=t},UPDATE_AGENT_DESK_CONNECTION_STATUS(e,t){e.agentDeskConnectionStatus=t},UPDATE_PRE_LOADER_ENABLED_STATUS(e,t){e.preLoaderEnabled=t},UPDATE_PREVIOUS_CONVERSATION_LOADER(e,t){e.previousCoversationLoader=t},UPDATE_QUICK_MENU_STATE(e,t){e.quickMenuState=t},UPDATE_QUICK_MENU_VISIBILITY(e,t){const n=e.quickMenuState;e.quickMenuState=S(S({},n),{},{visible:t})},UPDATE_QUICK_MENU_HANDLER(e,t){e.quickMenuClickHandler=t},UPDATE_CURRENT_LOCALE(e,t){e.currentLocale=t},UPDATE_FOCUS_ENABLE(e,t){e.focusEnable=t},UPDATE_FOCUS_NODE(e,t){e.focusNode=t},TOGGLE_SHOW_HEADER_DRAWER(e){e.headerDrawerState.show=!e.headerDrawerState.show},UPDATE_INPUT_FIELD_STREAMING_DISABLE_STATUS(e,t){e.inputFieldStreamingDisableStatus=t},UPDATE_INPUT_FIELD_ON_SEND_DISABLE_STATUS(e,t){e.footer.disableInputOnSend.state=t},SHOW_EXTERNAL_HEADER_TEXT(e,t){e.showExternalHeaderText=t},SHOW_HEADER_MENU_BUTTONS(e,t){e.showHeaderMenuButtons=t},UPDATE_PROMPT_TEST_DETAILS(e,t){e.promptTestDetails=t},UPDATE_VOICE_MODE(e,t){e.isVoiceModeActive=t,e.currentVoiceState=T.a.NONE},UPDATE_VOICE_STATE(e,t){e.currentVoiceState=t},UPDATE_CSAT_SURVEY_TIME(e,t){e.csatSurveyStartTime=t},SHOW_VISITOR_INFO_BUTTON(e,t){e.showVisitorInfoButton=t},SHOW_VISITOR_INFO_FORM(e,t){e.visitorInfoForm.isOpen=t},UPDATE_VISITOR_INFO_FORM(e,t){e.visitorInfoForm.visitorInfoDetails=t},UPDATE_MASKED_VALUE_MAP(e,t){let{text:n,maskedText:i,label:o,maskedLabel:a}=t;e.maskedValueMap[i]=n,e.maskedValueMap[a]=o},SET_CLIENT_CONFIG(e,t){e.clientConfig=t}};const O=function(e,t,n,i,o){var a,s;if("SurveyForm"===o&&"SurveyForm"===(null==n||null===(a=n.messages)||void 0===a||null===(s=a[i-1])||void 0===s?void 0:s.type)){var r,l,c;let e=null==n||null===(r=n.messages)||void 0===r||null===(l=r[i-1])||void 0===l||null===(c=l.messageValue)||void 0===c?void 0:c.schema;return!!e&&(e=JSON.parse(e),"submitSurveyInfo"in e||"isSurveySkipped"in e)}if("LLMSchemaForm"===o){for(let e=i-1;e>=0;e--){var u;if("LLMSchemaForm"===(null==n||null===(u=n.messages[e])||void 0===u?void 0:u.type))return!0}return!1}return e<t-1&&i>=2&&(null==n?void 0:n.messages[i-1].type)===o},I=function(e,t,n){const i=p.h.FORM_FIELDS_SPECIAL_CHARS,o=t.split(i[0]);let a=[];if(o[0]+i[0]+o[1]+i[0]===p.h.EVENT_LEARN_ATTRIBUTE){const e=/(::value=)([^&]*)/g;a=o[2].match(e).map((function(e){return decodeURIComponent(e.replace("::value=","").replace(/\+/g," "))}))}const s=e.messages[n-1].messageValue.schema;let r=JSON.parse(s),l=r[0].schema;const c=l.length;for(let e=0;e<c;e++)l[e].responseValue=a[e];r[0].schema=l;const u=JSON.stringify(r);e.messages[n-1].messageValue.schema=u},y=function(e,t,n,i){const o=(null==t?void 0:t.split("\n"))||[],a=e.messages[i].messageValue.schema,s=a.length;for(let e=0;e<s;e++)a[e].responseValue=o[e];e.messages[i].messageValue.schema=a},A=function(e,t,n){return e>0&&(null==t?void 0:t.messages[e-1].type)===n},C=function(e,t,n,i){var o;(null==e||null===(o=e.messages)||void 0===o?void 0:o.length)>=2&&t.messages[n-1].type===e.messages[i-1].type&&t.messages.map((function(e){return e.hide=!0}))},N=function(e,t){const n=null==e?void 0:e.isChatWidgetFullScreen,i=null==e?void 0:e.isWindowMaximized,o=Object(h.hasConversationInitiated)(),a=!Object(h.isTypeBOT)();return(null==t?void 0:t.calloutBubbleEnabled)&&!n&&!i&&!o&&!a&&e.isMqttConnected&&!Object(h.isDismissCalloutBubbleOnCrossEnabled)()};var D=n(36),R=n(66),w=n(6),L=n(16),P=n(27),U={renderBroadcastMessage(e,t){let{commit:n,dispatch:i,rootState:o}=e;0==o.chats.length&&(new L.a({name:"Render Broadcast Message",message:`ConversationId inside the fn renderBroadcastMessage: ${null==t?void 0:t.conversationId}, conversationId inside cookie: ${Object(w.a)(p.i.SESSION.CONVERSATION_ID)}`,logLevel:"info",service:"BroadcastChannel_Ac"}),D.a.createSubscription(t.conversationId));const a=Object(R.a)(t);i("updateQuickReplyOptions",[]),t.updateLastChatBlock?n("REPLACE_LAST_IMAGE_SKELETON",a):n("UPDATE_CHATS",a)},endChatAcrossTabs(e,t){var n,o,a,s;let{dispatch:r,rootState:l}=e;Object(h.clearTimersUponEndChat)(),l.controlType===p.h.AGENT&&i.a.prototype.$liveAgent.endChatWithLiveAgent(),r("clearChatsWithAgentDesk"),Object(h.showMessageSeparatorPill)({message:t.message,isEndChatSeparator:!0}),r("handleClearConversationStatus",null===(n=l.widgetConfig)||void 0===n?void 0:n.endChatClearConversation);const{footerStatus:c}=l.widgetConfig;c||r("handleInputFieldStatusOnEndChat"),r("updateShowFormControls",!1),r("updateQuickReplyOptions",[]),null!==(o=l.widgetConfig)&&void 0!==o&&null!==(a=o.inactiveOverlay)&&void 0!==a&&a.showButtons&&r("updateOverlayStatus",!1),r("overlayIdleChatTimeout"),c&&c===p.h.DISABLED&&r("updateInputFieldDisableStatus",!0),c&&c===p.h.HIDDEN&&r("updateInputFieldHiddenStatus",!0);const u=null===(s=l.widgetConfig)||void 0===s?void 0:s.endChatClearConversation;u&&(r("clearChats"),r("updateClearConversationStatus",u)),null!=t&&t.restartChat?P.a.restartConversation():(D.a.unsubscribe(),P.a.endConversation())},updateLastFormSubmission(e,t){let{commit:n}=e;n("UPDATE_FORM_STATUS",t)}},F=n(3),M=n.n(F),k=n(13),B=n(11),j={updateSchemaFormLabels(e,t){let{commit:n}=e;n("UPDATE_SCHEMA_FORM_LABELS",t)},updateFormControlsButtonState(e,t){let{commit:n}=e;n("UPDATE_FORM_CONTROLS_BUTTON_STATE",t)},updateFormControlsClicked(e,t){let{commit:n}=e;n("FORM_CONTROLS_CLICKED_MESSAGE_ID"),n("FORM_CONTROLS_CLICKED",t)},updateShowFormControls(e,t){let{commit:n}=e;n("SHOW_FORM_CONTROLS",t)},updateFormStatus(e,t){let{commit:n}=e;n("UPDATE_FORM_STATUS",t)},updateLastPendingFormStatus(e){var t,n,i,o;let{rootState:a}=e;const s=a.chats,r=s[s.length-2],l=null==r||null===(t=r.messages)||void 0===t?void 0:t.length;if(!l)return;const c=null==r||null===(n=r.messages[l-1])||void 0===n?void 0:n.type,u=(null==r||null===(i=r.messages[l-1])||void 0===i||null===(o=i.messageValue)||void 0===o?void 0:o.status)&&r.messages[l-1].messageValue.status[0]===p.A.PENDING;l>=2&&["EmbeddedForm","SchemaForm","HumanHandoffForm"].includes(c)&&u&&(r.messages[l-1].messageValue.status[0]=p.A.SUBMITTED)},updateCurrentScopedFormID(e,t){let{commit:n}=e;n("UPDATE_CURRENT_SCOPED_FORM_ID",t)},FormControlActions(e,t){return M()((function(e,t){let{rootState:n}=e;return function*(){const e=Object(h.requestFormatter)(n,t);try{yield Object(k.h)({botRefId:n.botRefId,requestBody:e})}catch(e){throw new B.a({message:"Error sending form response",err:e})}}()})).apply(this,arguments)}},x=n(116),$=n(15);function V(){return(V=M()((function*(){try{var e;return(null===(e=(yield $.a.get("/api/client-config",{cancelToken:Object(h.cancelHTTPRequests)()})).data)||void 0===e?void 0:e.payload)||{}}catch(e){throw new B.a({name:"Get Client Config",message:"Error while getting client config. "+e.message})}}))).apply(this,arguments)}var H=n(83),G=n(19);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(){return z.apply(this,arguments)}function z(){return(z=M()((function*(){let e="";try{var t;e=null===(t=(yield $.a.request({method:"get",url:"/api/version",headers:K({"Cache-Control":"no-cache"},Object(k.a)()),cancelToken:Object(h.cancelHTTPRequests)()})).data)||void 0===t?void 0:t.version}catch(e){throw new B.a({name:"Get Version",message:"Error while fetching version. "+e.message})}return e}))).apply(this,arguments)}var Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"250",t=arguments.length>1?arguments[1]:void 0;const n=e?"net-updating":"net-updating-small";return`<div class='net-main-loader-wrapper'>\n    <style>\n        @keyframes fade-in-down {\n          from {\n              opacity:0;\n              transform: translatey(10px);\n          }\n          to {\n              opacity:1;\n              transform: translatey(0);\n          }\n      }\n  \n      @keyframes fade-out {\n        from {\n            opacity:1;\n            transform: translatey(10px);\n        }\n        to {\n            opacity:0;\n            transform: translatey(0);\n        }\n      }\n  \n      .net-main-loader-wrapper{\n        height: 100%;\n        border-radius: 10px;\n        background: #fff;\n        margin: 0 5px 20px;\n        box-shadow: 0 1px 5px rgb(0 0 0 / 30%);\n        overflow: hidden;\n        font-family: 'proxima-nova', sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: 16px;\n        line-height: 19px;\n        color: #000000;\n      }\n      .net-loader-add {\n        animation-name: fade-in-down;\n        animation-fill-mode: both;\n        animation-duration: 1.0s;\n      }\n      .net-loader-remove {\n        animation-name: fade-out;\n        animation-fill-mode: both;\n        animation-duration: 1.0s;\n      }\n  \n    .net-removed {\n        opacity: 0;\n    }\n      .net-loading-wrapper{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        height:100%;\n        flex-direction: column;\n      }\n      .net-updating{\n        margin-top:10px;\n      }\n      div.net-updating-small{\n        font-size: 9px;\n        margin-top: 0px;\n      }\n    </style>\n    <div class="net-loading-wrapper net-loader-add">\n      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background: rgb(255, 255, 255); display: block; shape-rendering: auto;" width="40px" height="40px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n      <circle cx="50" cy="50" fill="none" stroke="${t}" stroke-width="8" r="40" stroke-dasharray="160.22122533307947 55.40707511102649">\n        <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.9615384615384615s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n      </circle>\n      </svg>\n      <div class=${n}>Updating...</div>\n    </div>\n  </div>`};var Q=new class{constructor(){this.version="",this.updateScript=this.updateScript.bind(this),this.init=this.init.bind(this)}init(){var e=this;return M()((function*(){e.version=yield q();const t=window.parent.document.getElementById(G.a.NETOMI_LOADER);return t&&setTimeout((function(){t.classList.add("net-removed"),t.remove(),Bt.dispatch("toggleChatWindowStatus",u.a.getSessionStorageData(G.a.SESSION_BOT_STATUS)),u.a.removeSessionStorageData(G.a.SESSION_BOT_STATUS),Bt.dispatch("fetchHistory")}),100),e.updateScript}))()}updateScript(){var e=this;return M()((function*(){var t,n,i;const o=yield q();if(!o||o===e.version)return;const a=window.parent,s=null==Bt||null===(t=Bt.state)||void 0===t?void 0:t.botRefId,r=a.document.querySelectorAll(`[botRefId="${s}"]`)[0],l=document.createElement("script");let c=null==r?void 0:r.attributes;for(let e in c)"function"!=typeof c[e]&&l.setAttribute(c[e].name,c[e].value);l.type="text/javascript",l.onload=function(){return resolve()};const d=(null===(n=Bt.state.widgetConfig)||void 0===n||null===(i=n.theme)||void 0===i?void 0:i.color)||G.a.DEFAULT_COLOR,h=a.document.getElementById("netomiChatWindow"),p=window.document.getElementsByClassName("widget-header")[0].offsetHeight,g=null==h?void 0:h.attributes,m=h.offsetWidth,f=h.offsetHeight;u.a.setSessionStorageData(G.a.SESSION_BOT_STATUS,Bt.state.isWindowMaximized);const E=(new Date).getTime();u.a.setSessionStorageData(G.a.SESSION_BOT_UPDATED,E);let v=document.createElement("div");v.setAttribute("id",G.a.NETOMI_LOADER),v.innerHTML=Y(p,d),v.setAttribute(g.style.name,g.style.value),v.style.width=m+"px",v.style.height=f+"px",r.remove(),h.remove(),a.document.body.appendChild(v),a.document.body.appendChild(l)}))()}},X=n(114),J=n(60);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(){return(te=M()((function*(e){let t={};try{var n;t=null===(n=(yield $.a.request({method:"get",url:"/api/launchdarkly",headers:ee({"Cache-Control":"no-cache"},Object(k.a)(e)),cancelToken:Object(h.cancelHTTPRequests)()})).data)||void 0===n?void 0:n.payload}catch(e){throw new B.a({name:"Get Launch Darkly Flags",message:"Error while fetching flags. "+e.message})}return t}))).apply(this,arguments)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(){return ae.apply(this,arguments)}function ae(){return(ae=M()((function*(){let e="";try{var t;e=null===(t=(yield $.a.request({method:"get",url:"/api/ip",headers:ie({"Cache-Control":"no-cache"},Object(k.a)()),cancelToken:Object(h.cancelHTTPRequests)()})).data)||void 0===t?void 0:t.ip}catch(e){throw new B.a({name:"Get IP",message:"Error while fetching IP Address. "+e.message})}return e}))).apply(this,arguments)}var se=n(47);const re=function(){var e=M()((function*(e){try{Bt.dispatch("setIsCalloutBubbleEnabled",!1),Bt.dispatch("toggleChatWindowStatus",!Bt.state.isWindowMaximized),Bt.dispatch("updateQuickReplyOptions",[]),Object(h.isUserLoggedIn)()&&(yield Bt.dispatch("fetchHistory")),Bt.dispatch("sendQuickReplyMessage",{userMessage:{payload:Object(h.getTranslation)(`${p.t.CALLOUT_BUBBLE_OPTIONS_METADATA}${e+1}`),label:Object(h.getTranslation)(`${p.t.CALLOUT_BUBBLE_OPTIONS_LABEL}${e+1}`)}})}catch(e){console.log("Error Sending Quick Reply Bubble Message",e.message),new B.a({message:"Error Sending Quick Reply Bubble Message",err:e})}}));return function(t){return e.apply(this,arguments)}}(),le=function(e){u.a.setSessionStorageData("userInteracted",!0),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,p.f.LARGE_SCREEN_DEVICES);let t=setTimeout((function(){re(e),clearTimeout(t)}),0)},ce=function(){var e=M()((function*(){try{var e,t;Bt.dispatch("setIsCalloutBubbleEnabled",!1),Bt.dispatch("toggleChatWindowStatus",!Bt.state.isWindowMaximized),Object(h.isUserLoggedIn)()&&(yield Bt.dispatch("fetchHistory")),null!==(e=Bt.state)&&void 0!==e&&null!==(t=e.widgetConfig)&&void 0!==t&&t.proActiveGreetings?Bt.dispatch("triggerProActiveGreetings"):Bt.dispatch("triggerCalloutBubbleGreetings")}catch(e){console.log("Error Sending Text Callout Bubble Message",e.message),new B.a({message:"Error Sending Text Callout Bubble Message",err:e})}}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e,t,n,i,o,a;if(!((null===(e=Bt.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.proActiveGreetings)||void 0===n?void 0:n[0])||(null===(i=Bt.state)||void 0===i||null===(o=i.widgetConfig)||void 0===o||null===(a=o.calloutBubble)||void 0===a?void 0:a.intent)||!1))return!1;u.a.setSessionStorageData("userInteracted",!0),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,p.f.LARGE_SCREEN_DEVICES);let s=setTimeout((function(){ce(),clearTimeout(s)}),0)};var de=n(93);function he(){return(he=M()((function*(){var e,t;Object(h.setBrowserAndDeviceDetailsInStore)();const n=me(),i=yield _e();let o;if(o=window.parent.document.getElementById("netomiChatWindow").getAttribute("isResponseAnalyzerWidget")?yield Te():yield ve(n),null!==(e=o)&&void 0!==e&&e.eventAnalyticsMP&&x.a.loadSegmentScript(null==i?void 0:i.cwSegmentTokenId),null!==(t=o)&&void 0!==t&&t.isSensitiveDataMaskingEnabled){const e=yield Object(de.b)();Bt.dispatch("updateBotPCIPolicy",e)}const a=yield Object(J.d)();Bt.dispatch("updateFormEncryptionPublicKey",a),Bt.dispatch("updateAlerts"),Bt.dispatch("updateTermsAndConditions"),ye()&&Se();const s=yield oe();Bt.dispatch("updateUserIPAddress",s);const r=u.a.getLocalStorageData(p.h.CURRENT_LOCALE);X.a.init(o),Q.init(),Object(h.updateCalloutBubble)(),yield Promise.all([g.a.loadBotJsonConfigLocaleMessages(Bt.state.defaultLocale),g.a.loadBotConstantLocaleMessages(r),g.a.loadBotJsonConfigLocaleMessages(u.a.getLocalStorageData(p.h.CURRENT_LOCALE)||Bt.state.defaultLocale)]),pe(o),ge(),fe();const l=be(o);window.addEventListener("message",function(){var e=M()((function*(e){var t,n,i,o;switch(e.data.eventType){case"HANDLE_TEXT_BUBBLE_CLICK":ue(),Object(h.removeCalloutBubbleContainer)();break;case"HANDLE_QUICK_REPLY_BUBBLE_CLICK":le(null==e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.index),Object(h.removeCalloutBubbleContainer)();break;case"HANDLE_CALLOUT_BUBBLE_CLOSE":null!==(i=Bt.state.widgetConfig)&&void 0!==i&&null!==(o=i.calloutBubble)&&void 0!==o&&o.dismissCalloutBubbleOnCross&&u.a.setLocalStorageData(p.h.DISMISS_CB_ON_CROSS,Object(w.a)(p.i.SESSION.CONVERSATION_ID)),Object(h.removeCalloutBubbleContainer)()}}));return function(t){return e.apply(this,arguments)}}()),Object(h.renderCalloutBubble)(),l?Bt.getters.isKnowledgeAiEnabled&&Object(h.emitEventToParentWindow)(p.o.NO_SCROLL_ALLOWED):Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,p.f.HIDE),Oe(o),se.a.init(),u.a.setSessionStorageData("userInteracted",!1),u.a.setSessionStorageData("tabId",Object(H.a)()),u.a.setLocalStorageData(p.h.CONNECTION_STATUS_LABEL,{status:navigator.onLine?p.A.ONLINE:p.A.OFFLINE,lastUpdatedTime:Date.now()}),Ie()}))).apply(this,arguments)}const pe=function(e){const t=window.parent.document.getElementById("netomiChatWindow").getAttribute("themeColor"),n=window.parent.document.getElementById("netomiChatWindow").getAttribute("botTitle");t&&Object(h.validateHexCode)(t)&&(e.theme.color=t),n&&(e.botHeader&&e.botHeader.hasOwnProperty("title")?e.botHeader.title=n:e.title=n),Bt.dispatch("updateWidgetConfig",e)},ge=function(){let e=u.a.getLocalStorageData("widgetConfig"),t=null==e?void 0:e.widgetId;return Bt.dispatch("updateWidgetId",t),t},me=function(){let e="";try{let t=u.a.getLocalStorageData("widgetConfig");if(!t)throw new Error("WidgetConfig not found, Storage access denied.");e=null==t?void 0:t.botRefId}catch{e=window.parent.document.getElementById("netomiChatWindow").getAttribute("botRefId")}finally{Bt.dispatch("updateBotRefId",e)}return e},fe=function(){let e=Object(w.a)(p.i.SESSION.USER_ID);return e||(e=Ee(),Object(w.f)(p.i.SESSION.USER_ID,e,{expires:"Fri, 31 Dec 9999 23:59:59 GMT"})),Bt.dispatch("updateUserId",e),e},Ee=function(){return Object(H.a)()},ve=function(){var e=M()((function*(e){const t=yield Object(J.b)(e);return Bt.dispatch("updateWidgetConfig",t),Boolean(null==t?void 0:t.dynamicSource)&&new L.a({name:"dynamicSource",message:{dynamicSource:null==t?void 0:t.dynamicSource},logLevel:"info",service:"Init"}),t}));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=M()((function*(){const e=yield Object(J.b)(p.s.RESPONSE_ANALYZER);return Bt.dispatch("updateWidgetConfig",e),e}));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=M()((function*(){const e=yield function(){return V.apply(this,arguments)}();return Bt.dispatch("setClientConfig",e),e}));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=M()((function*(){const e=[];var t;Bt.getters.isPromptTestingEnable&&e.push({key:"x-bot-id",value:null===(t=Bt.state.promptTestDetails)||void 0===t?void 0:t.botId});const n=yield function(e){return te.apply(this,arguments)}(e);Bt.dispatch("updateLDFlags",n),Object(h.logImportantLDFlags)(n)}));return function(){return e.apply(this,arguments)}}(),be=function(e){if(!e.whitelisting||!e.whitelisting.enabled)return!0;let t=document.referrer||window.parent.location.origin;t=new URL(t).origin;const n=e.whitelisting.domains.map((function(e){return e.name}));let i=!1;return n.forEach((function(e){e.startsWith(t)&&(i=!0)})),i},Oe=function(e){const t=Object(w.a)(p.i.SESSION.CONVERSATION_ID)||null;t&&(new L.a({name:"Init Session",message:`ConversationId inside the fn initSession: ${t}, conversationId inside cookie: ${Object(w.a)(p.i.SESSION.CONVERSATION_ID)}`,logLevel:"info",service:"Init"}),D.a.createSubscription(t));const n=Object(w.a)(p.i.SESSION.CREATED_AT)||null;return P.a.init(t,n),P.a.getConversationId(e)},Ie=function(){window.addEventListener("offline",h.updateConnectionStatus),window.addEventListener("online",h.updateConnectionStatus)},ye=function(){var e;return(null===(e=Object.keys(Bt.state.launchDarklyFlags))||void 0===e?void 0:e.length)>0};var Ae=n(77),Ce={updateMqttConnectionStatus(e,t){let{commit:n}=e;n("UPDATE_MQTT_CONNECTION_STATUS",t),n("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG")},updateBotRefId(e,t){let{commit:n}=e;n("UPDATE_BOT_REF_ID",t)},updateWidgetId(e,t){let{commit:n}=e;n("UPDATE_WIDGET_ID",t)},updateUserId(e,t){let{commit:n}=e;n("UPDATE_USER_ID",t)},updateUserEmail(e,t){let{commit:n}=e;n("UPDATE_EMAIL_ID",t)},updateWidgetConfig(e,t){let{commit:n}=e;n("UPDATE_WIDGET_CONFIG",t)},updateFormEncryptionPublicKey(e,t){let{commit:n}=e;n("UPDATE_FORM_ENCRYPTION_PUBLIC_KEY",t)},updateBotPCIPolicy(e,t){let{commit:n}=e;n("UPDATE_BOT_PCI_POLICY",t)},updateCalloutBubble(e,t){let{commit:n}=e;n("UPDATE_CALLOUT_BUBBLE",t)},updateLDFlags(e,t){let{commit:n}=e;n("UPDATE_LD_FLAGS",t)},updateWidgetStatus(e,t){let{commit:n}=e;n("UPDATE_WIDGET_STATUS",t)},updateUserMessage(e,t){let{commit:n}=e;n("UPDATE_USER_MESSAGE",t)},updatePrimaryLanguage(e,t){let{commit:n}=e;n("UPDATE_PRIMARY_LANGUAGE",t)},updateUserMessageSync(e){let{commit:t,rootState:n}=e;t("UPDATE_USER_MESSAGE_SYNC");n.userMessageSyncAcrossTabs&&i.a.prototype.broadcastChannel.addEventListener("message",(function(e){const t="netomiWebWidget_"+n.botRefId;if(e.currentTarget.name===t){(0,Object(Ae.b)()[e.data.type])(e.data.data)}}))},minimizeCW(e){var t;let{dispatch:n,rootState:o}=e;((null===(t=o.widgetConfig)||void 0===t?void 0:t.eventAnalyticsMP)||!1)&&i.a.prototype.$segment.global.sendEvent("minimize_button_click");const a=o.isChatWidgetFullScreen;a&&n("updateChatWindowFullScreenState",!a),n("toggleChatWindowStatus",!1),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,p.f.SHOW_SUPPORT_ICON_ONLY)},init(e){return M()((function(e){let{dispatch:t,rootState:n}=e;return function*(e,i,o){yield function(){return he.apply(this,arguments)}(),void 0===(null===(e=u.a.getLocalStorageData("showCalloutBubblePubsub"))||void 0===e?void 0:e.enabled)&&t("updateCalloutBubbleFlagFromPubsub",{enabled:!0}),t("setIsCalloutBubbleEnabled"),u.a.getLocalStorageData("overlayStatus")&&null!==(i=n.widgetConfig)&&void 0!==i&&null!==(o=i.inactiveOverlay)&&void 0!==o&&o.inactiveOverlayTimeout&&t("updateOverlayStatus",!0),Object(h.isTypeBOT)(a.a.controlType)||Object(h.lazyLoadLiveAgent)(),u.a.getLocalStorageData("endChatGreetingTriggered")&&t("endChat",{message:p.h.CHAT_ENDED,showSessionRestartGreeting:!0,hideEndChatGreeting:!1,publishEventToIoT:!1}),t("reinitializeCSATRateLimit")}()})).apply(this,arguments)},removeChatWidget(e){let{rootState:t}=e;const n=t.widgetConfig.removeWidgetOnHide;for(let e=0;e<(null==n?void 0:n.length);++e){var i,o,a;null!==(i=window.parent)&&void 0!==i&&null!==(o=i.location)&&void 0!==o&&null!==(a=o.href)&&void 0!==a&&a.includes(n[e])&&Object(h.emitEventToParentWindow)(p.o.REMOVE_WIDGET_FROM_PARENT_WINDOW)}},setClientConfig(e,t){let{commit:n}=e;n("SET_CLIENT_CONFIG",t)}},Ne={setCalloutBubbleConfig(e,t){let{commit:n}=e;n("UPDATE_CALLOUT_BUBBLE_CONFIG_PUBSUB",t),Object(h.renderCalloutBubble)()},triggerProActiveGreetings(e){var t;let{dispatch:n,rootState:i}=e,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Bt.getters.isPromptTestingEnable||!o&&"staticMenu"===(null==i||null===(t=i.widgetConfig)||void 0===t?void 0:t.proactiveTriggerType))return;let a=[];const s=Object(h.getIdleTimeout)();var r;if(o)return a=i.widgetConfig.sessionRestartGreeting,!!De(null===(r=i.widgetConfig)||void 0===r?void 0:r.proActiveGreetingsProtocols)&&(n("sendProactiveGreetingUtterancesWithEndGreeting",a),!0);if(!Object(h.hasProActiveGreetingsTriggered)()){var l,c;if(we("proactive",i,n))return;a=null===(l=i.widgetConfig)||void 0===l?void 0:l.proActiveGreetings,a&&De(null===(c=i.widgetConfig)||void 0===c?void 0:c.proActiveGreetingsProtocols)&&Re()&&(Object(h.isUserLoggedIn)()&&n("showMessageSeparator",{isMessageSeparator:!0,content:{component:"EndChatSeparator",message:"New Conversation Started",isEndChatSeparator:!0},timestamp:Date.now()}),Object(w.f)(p.i.GREETING.PROACTIVE_GREETING_COOKIE_LABEL,!0,{SameSite:"None",Secure:"true","max-age":s/1e3}),n("sendProactiveGreetingUtterances",a),Object(h.blankScreenCheck)(p.h.EMPTY_PROACTIVE_RESPONSE))}},triggerCalloutBubbleGreetings(e){var t,n;let{dispatch:i,rootState:o}=e;if(Bt.getters.isKnowledgeAiEnabled)return;let a=null===(t=o.widgetConfig)||void 0===t||null===(n=t.calloutBubble)||void 0===n?void 0:n.intent;if(a&&!Object(h.hasCalloutBubbleGreetingsTriggered)()&&Object(h.isChatNotStarted)()){if(we("calloutbubble",o,i))return;Object(w.f)(p.i.GREETING.CALLOUT_BUBBLE_GREETING_COOKIE_LABEL,!0,{}),i("sendMessage",{userMessage:{payload:a,label:p.h.CALLOUT_BUBBLE_TEXT}}),Object(h.blankScreenCheck)(p.h.EMPTY_CALLOUT_RESPONSE)}},sendProactiveGreetingUtterances(e,t){let{dispatch:n}=e;t.map((function(e){n("sendMessage",{userMessage:{payload:e,label:p.h.PROACTIVE_GREETING_LABEL,hideMessage:!0}})}))},sendProactiveGreetingUtterancesWithEndGreeting(e,t){let{dispatch:n}=e;t.map((function(e){n("sendMessage",{userMessage:{payload:e,label:p.h.PROACTIVE_GREETING_LABEL,hideMessage:!0},isEndGreeting:!0})}))},DELETE_PROACTIVE_GREETING_COOKIE(){Object(w.c)(p.i.GREETING.PROACTIVE_GREETING_COOKIE_LABEL,{SameSite:"None",Secure:"true"})}};const De=function(e){const t=window.parent.location.protocol;return e?e.includes(t):t===p.h.HTTPS},Re=function(){return Object(h.isChatNotStarted)()||Object(h.isUserLoggedIn)()},we=function(e,t,n){const i=Object.keys(t.alerts.highPriorityAlert).length,o=Object.keys(t.alerts.mediumPriorityAlert).length,a=Object.keys(t.termsAndConditions.terms).length;return!!(i||o||a)&&((i&&!a||o)&&n("updateGreetingTriggerOnAlertClosureState",e),a&&!o&&n("updateGreetingTriggerOnTermsClosureState",e),!0)};var Le=n(45),Pe=n(42);let Ue=null,Fe=null;var Me={clearChats(e){let{commit:t}=e;t("CLEAR_CHATS")},updateClearConversationToPending(e,t){let{commit:n}=e;n("UPDATE_CLEAR_CONVERSATION_STATUS_TO_PENDING",t)},updateInputFieldDisableStatus(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_DISABLE_STATUS",t)},updateInputFieldTempDisableStatus(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_TEMP_DISABLE_STATUS",t)},updateInputFieldTempDisableStatusTimer(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_TEMP_DISABLE_STATUS_TIMER",t)},updateInputFieldOnSendDisableTimer(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_ON_SEND_DISABLE_TIMER",t)},updateClearConversationStatus(e,t){let{commit:n}=e;n("UPDATE_CLEAR_CONVERSATION_STATUS",t)},updateEndChatModalStatus(e,t){let{commit:n}=e;n("UPDATE_END_CHAT_MODAL_STATUS",t)},updateEndChatModalOnChatRestart(e,t){let{commit:n}=e;n("UPDATE_END_CHAT_MODAL_ON_CHAT_RESTART",t)},toggleShowHeaderDrawer(e){let{commit:t}=e;t("TOGGLE_SHOW_HEADER_DRAWER")},updateInputFieldStreamingDisableStatus(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_STREAMING_DISABLE_STATUS",t)},updateInputFieldOnSendMessage(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_ON_SEND_DISABLE_STATUS",t)},handleEndChat(e){return M()((function(e){let{dispatch:t,rootState:n}=e,{data:i,callback:o=function(){},hidePill:a=!1,endChatClearConversation:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(e){Object(h.emitEventToParentWindow)(p.o.CLOSE_SECURE_FORM_OVERLAY,{}),t("updateTypingIndicatorStatus",!1),t("clearFallbackMechanismTimer"),Object(Ae.c)(i),i&&Object.prototype.hasOwnProperty.call(i,p.h.PUBLISH_EVENT_TO_IOT)&&!i[p.h.PUBLISH_EVENT_TO_IOT]||(yield t("sendIoTEvent",{event_name:"END_CHAT",data:i})),Object(h.clearTimersUponEndChat)(),localStorage.removeItem("user-details"),localStorage.removeItem("isAuth"),Object(w.c)(p.i.OAUTH.LOGGED_IN),Object(w.f)(p.i.GREETING.CALLOUT_BUBBLE_GREETING_COOKIE_LABEL,!1),Object(w.f)(p.i.SESSION.CONVERSATION_INITIATED,!1),t("clearChatsWithAgentDesk"),a||Object(h.showMessageSeparatorPill)({message:i.message,isEndChatSeparator:!0}),o(),u.a.removeLocalStorageData("endChatGreetingTriggered"),u.a.removeLocalStorageData(p.h.DISMISS_CB_ON_CROSS),u.a.removeLocalStorageData(p.h.FILE_NAME_UUID),s&&t("handleClearConversationStatus",(null===(e=n.widgetConfig)||void 0===e?void 0:e.endChatClearConversation)||(null==i?void 0:i.clearConversation)),Pe.a.endAudio(),n.currentVoiceState=T.a.NONE,t("updateVoiceModeActive",!1),null!=i&&i.restartChat?P.a.restartConversation():P.a.endConversation(),t("handleAfterEndChatCases",{showSessionRestartGreeting:null==i?void 0:i.showSessionRestartGreeting,isReset:null==i?void 0:i.restartChat})}()})).apply(this,arguments)},endChat(e,t){return M()((function(e,t){let{dispatch:n,rootState:o}=e;return function*(){Object(h.emitEventToParentWindow)(p.o.CLOSE_SECURE_FORM_OVERLAY,{});if(!Object(h.isTypeBOT)(o.controlType)){const e=Le.a.triggerResponse();yield i.a.prototype.$liveAgent.endChatWithLiveAgent(e)}Bt.getters.isPromptTestingEnable&&Object(h.emitEventToParentWindow)(p.o.CLEAR_CONVERSATION),se.a.endChunkProcessing();const e=Object(h.getEndChatGreetingDelay)()+Object(h.getMinTimeForTypingIndicator)();if(!Object(h.isEndChatSuveyValid)()||null!=t&&t.restartChat||Bt.getters.isPromptTestingEnable)if(!Object(h.isEndChatGreetingValid)(t.hideEndChatGreeting)||null!=t&&t.restartChat||Bt.getters.isPromptTestingEnable)yield n("handleEndChat",{data:t,callback:function(){Bt.getters.isPromptTestingEnable||null!=t&&t.restartChat||Be(n,t.message)},hidePill:t.hidePill||!1});else{var a,s;if(!u.a.getLocalStorageData("endChatGreetingTriggered"))u.a.setLocalStorageData("endChatGreetingTriggered",!0),n("sendMessage",{userMessage:{payload:null===(a=o.widgetConfig)||void 0===a||null===(s=a.endChat)||void 0===s?void 0:s.endChatGreeting,label:p.h.PROACTIVE_GREETING_LABEL}});setTimeout(M()((function*(){yield n("handleEndChat",{data:t,callback:function(){null!=t&&t.restartChat||Be(n,t.message)},hidePill:t.hidePill||!1})})),e)}else Be(n,t.message),n("updateClearConversationToPending","pending"),t.hidePill||Object(h.showMessageSeparatorPill)({message:t.message,isEndChatSeparator:!0}),Fe=t,Ue=setTimeout(M()((function*(){yield ke(Fe),Ue=null,Fe=null})),6e3)}()})).apply(this,arguments)},endChatSurveyFulfilledBeforeTimeout:()=>M()((function*(){Ue&&(clearTimeout(Ue),Ue=null,yield ke(Fe),Fe=null)}))(),handleAfterEndChatCases(e){var t,n,i;let{rootState:o,dispatch:a}=e,{showSessionRestartGreeting:s=!0,isReset:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r&&(Object(w.c)(p.i.GREETING.PROACTIVE_GREETING_COOKIE_LABEL),a("triggerProActiveGreetings"));let l=!1;null!==(t=o.widgetConfig.sessionRestartGreeting)&&void 0!==t&&t.length&&s&&(l=a("triggerProActiveGreetings",!0)),l||r||D.a.unsubscribe();const{footerStatus:c}=o.widgetConfig;c||a("handleInputFieldStatusOnEndChat"),a("updateBlankScreenState",{timerId:""}),a("updateShowFormControls",!1),a("updateLastPendingFormStatus"),!Object(h.isUserLoggedIn)()&&a("DELETE_PROACTIVE_GREETING_COOKIE"),a("updateQuickReplyOptions",[]),a("updateActionableNBAOptions",[]),a("updateUnreadMessagesState",{enabled:!1}),a("updateNonActionableNBAOptions",[]),a("clearCSATState"),null!==(n=o.widgetConfig)&&void 0!==n&&null!==(i=n.inactiveOverlay)&&void 0!==i&&i.showButtons&&(a("updateOverlayStatus",!1),u.a.setLocalStorageData("overlayStatus",!1)),a("overlayIdleChatTimeout"),a("updateInputFieldDisableStatus",c&&c===p.h.DISABLED),c&&c===p.h.HIDDEN&&a("updateInputFieldHiddenStatus",!0),a("updateInputFieldStreamingDisableStatus",!1),a("updateAlerts"),a("updateTermsAndConditions"),a("updateInputFieldOnSendMessage",!1)},handleClearConversationStatus(e){let{dispatch:t}=e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(t("clearChats"),t("updateClearConversationStatus",n))},handleInputFieldStatusOnEndChat(e){let{dispatch:t,rootState:n}=e;const i={botRefId:n.botRefId,widgetId:n.widgetId},o=u.a.getLocalStorageData("widgetConfig"),a=Object(h.isBotRefIdOrWidgetIdChanged)(i,o);t("updateInputFieldDisableStatus",a),a||t("updateInputFieldTempDisableStatus",a)}};const ke=function(){var e=M()((function*(e){yield Bt.dispatch("handleEndChat",{data:e,callback:function(){},hidePill:!0,endChatClearConversation:!1}),Object(h.handleEndChatSurveyError)()}));return function(t){return e.apply(this,arguments)}}(),Be=function(e,t){const n={eventType:p.e.WIDGET_EVENT,subType:t===p.h.SESSION_HAS_EXPIRED?p.e.SESSON_EXPIRE:p.e.CHAT_END};t===p.h.SESSION_HAS_EXPIRED?Object(h.emitEventToParentWindow)(p.o.SESSION_EXPIRE_PILL,Object(h.getEventDataPoints)()):Object(h.emitEventToParentWindow)(p.o.END_CHAT_PILL,Object(h.getEventDataPoints)()),e("sendEvent",{eventData:n})};var je=n(24),xe=n(46),$e=n(53);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={sendAgentEventInfo(e,t){return M()((function(e,t){let{dispatch:n,rootState:i}=e;return function*(){try{var e;n("clearItemsBeforeMessageParsing");const c=t.isAppStateOnly||!1,u=Object(h.generateAttributes)(t),d=He(He({},Object(h.requestFormatter)(i,t)),{},{additionalAttributes:{CUSTOM_ATTRIBUTES:u},messageType:t.messageType});let g;if(n("showDayDateSeparator",d),Bt.getters.isResponseAnalyzerEnabled){var o,a,s,r,l;const e="resp_analyser_"+(null==d||null===(o=d.messagePayload)||void 0===o?void 0:o.messageId);d.messagePayload.messageId=e,g=!c&&(yield Object(k.e)({botRefId:i.botRefId,botId:null===(a=i.promptTestDetails)||void 0===a?void 0:a.botId,requestBody:d,socialChannel:null===(s=i.promptTestDetails)||void 0===s?void 0:s.socialChannel})),Object(h.emitEventToParentWindow)(p.o.USER_QUERY_SENT,{conversationId:null==d?void 0:d.conversationId,userQuery:null==d||null===(r=d.messagePayload)||void 0===r?void 0:r.label,messageId:null==d||null===(l=d.messagePayload)||void 0===l?void 0:l.messageId,backToBotQuery:!0})}else g=!c&&(yield Object(k.f)({botRefId:i.botRefId,requestBody:d}));(null===(e=i.widgetConfig)||void 0===e?void 0:e.isAuthenticationEnabled)&&Object(h.checkRenewTokenRequired)(g.data,n)}catch(e){if(n("updateTypingIndicatorStatus",!1),Object(h.checkForGreetingsAndResetCookie)(t))return void n("clearChats");throw new B.a({name:"Action",message:"Error while sending agent info: "+e.message,error:Object(h.addCustomErrors)(e)||{}})}}()})).apply(this,arguments)},sendSurveyFormData:(e,t)=>M()((function*(){Object(m.g)(p.h.ZENDESK)&&!Object(h.isTypeBOT)(t.ownerType)&&i.a.prototype.$liveAgent.sendFeedbackDataToLiveAgent(t)}))(),receiveAgentDeskEvents:(e,t)=>M()((function*(){i.a.prototype.$liveAgent.processResponseCodes(t)}))(),receiveAgentDeskMessages(e,t){var n=this;return M()((function(e,t){let{rootState:o,commit:a,getters:s,dispatch:r}=e;return function*(){r("updateTypingIndicatorStatus",!1);const e=t.customFields,l=o.controlType===t.ownerType&&!Object(h.isTypeBOT)(t.ownerType),c=Object(xe.a)(t,!0,l);if(Object(m.f)(t.ownerType)){var u;if(Object(h.emitCustomFieldsToParent)(e),Object(m.b)("Live Agent Created","Creating Live agentdesk instance"),r("clearFallbackMechanismTimer"),s.isStreamingEnabled)null==c||null===(u=c.messages)||void 0===u||u.forEach((function(e){e.messageValue.isStreaming=!0}));a("UPDATE_CHATS",c),Object(h.lazyLoadLiveAgent)(),Object(m.g)(p.h.ZENDESK)&&(yield Object(h.loadBotDetails)()),Object(h.isUserLoggedIn)()&&(yield n.updateAgentDeskConnectionStatus({connectionStatus:"connected"})),Object(h.clearIdleTimerForSurveyRule)(),setTimeout((function(){Bt.state.isVoiceModeActive&&$e.a.playLastChunk()}),5e3)}else{var d,g;if(Object(m.g)(p.h.ZENDESK)||i.a.prototype.$liveAgent.processResponseHandlingCodes(e),(null==t||null===(d=t.agentDesk)||void 0===d?void 0:d.toUpperCase())!==p.h.SALESFORCE&&(c.agentInfo=o.agentInfo),s.isStreamingEnabled)null==c||null===(g=c.messages)||void 0===g||g.forEach((function(e){e.messageValue.isStreaming=!0}));a("UPDATE_CHATS",c)}r("throttleIdleChatTimeout")}()})).apply(this,arguments)},throttleAgentDeskConnectionIdleTimeout(e,t){let{commit:n,dispatch:i,rootState:o}=e;const a=Object(h.getIdleTimeout)();if(!Object(h.isTypeBOT)(o.controlType)&&a>t){Object(h.clearTimerForAgentDeskIdleTimeout)();n("UPDATE_AGENT_DESK_IDLE_TIMEOUT_ID",setTimeout((function(){!Object(h.isTypeBOT)(o.controlType)&&i("handleBackToBotTrigger",p.j.triggerResponse())}),t))}},updateAgentDeskConnectionStatus(e,t){let{commit:n}=e;n("UPDATE_AGENT_DESK_CONNECTION_STATUS",t)},updateDisplayNameForAgentDeskSystem(e,t){let{commit:n}=e;n("UPDATE_DISPLAY_NAME_FOR_AGENTDESK",t)},updateControlType(e,t){let{commit:n}=e;n("UPDATE_CONTROL_TYPE",t)},loadChatsWithAgentDesk(e){let{dispatch:t}=e;const n=u.a.getLocalStorageData(je.a.AGENT_DESK_CHATS_STORAGE_KEY);n&&(n.forEach((function(e){return t("updateChats",e)})),t("sortChatsAccToTimestamp"))},clearChatsWithAgentDesk(){u.a.removeLocalStorageData(je.a.AGENT_DESK_CHATS_STORAGE_KEY)},updateChatsWithAgentDesk(e,t){const n=u.a.getLocalStorageData(je.a.AGENT_DESK_CHATS_STORAGE_KEY);u.a.setLocalStorageData(je.a.AGENT_DESK_CHATS_STORAGE_KEY,n?[...n,t]:[t])},updateChats(e,t){let{commit:n}=e;n("UPDATE_CHATS",t)},sortChatsAccToTimestamp(e){let{commit:t}=e;t("SORT_CHATS_ACC_TO_TIMESTAMP")},updateVisitorInfo(e,t){let{commit:n}=e;n("UPDATE_VISITOR_INFO",t)},addTags(e,t){let{commit:n}=e;n("UPDATE_MESSAGE_TAGS",t)},clearTags(e){let{commit:t}=e;t("UPDATE_MESSAGE_TAGS")},updateEndChatCustomFieldStatus(e,t){let{commit:n}=e;n("UPDATE_END_CHAT_STATUS",t)},updateAgentInfo(e,t){let{commit:n}=e;n("UPDATE_AGENT_INFO",t)},clearVisitorInfo(e){let{commit:t}=e;t("CLEAR_VISITOR_INFO")},updateHandoffDepartment(e,t){let{commit:n}=e;n("UPDATE_HANDOFF_DEPARTMENT",t)}},We=n(67),Ke=n(23),qe=n(31),ze={INFO_PILL:{AGENT_EVENT:{SIGNIN:qe.n,JOIN:qe.b,AGENT_JOIN_CONFERENCE:qe.a,LEAVE:qe.c,AGENT_LEFT_CONFERENCE:qe.d,TRANSFER:qe.e},QUEUE_POSITION:{WAIT:qe.k},GENERIC:{GENERIC_INFO:qe.j},OAUTH:{SIGN_OUT:qe.o,SIGN_IN:qe.n},WIDGET_EVENT:{CHAT_END:qe.g,SESSION_EXPIRE:qe.i,TERMS_AND_CONDITION_ACCEPTED:qe.m},CSAT_SURVEY:{SUBMIT:qe.f}},INFO:{ENABLE_INPUT_FIELD:{ENABLE_CHAT_INPUT_FIELD:qe.h},SECURE_FORM:{CARD_INFO:qe.l,LINK_GENERATION:qe.l,SECURE_LINK:qe.l,FORM_STATUS:qe.l}}},Ye=n(81),Qe=n(40),Xe=n(28);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et={receiveHistoryOfMessages(e){return M()((function(e){let{commit:t,dispatch:n,rootState:i}=e;return function*(){try{var e;if(Object(h.isUserLoggedIn)()||Object(h.hasConversationInitiated)()||Object(h.isOauthEnabled)()||null!=i&&null!==(e=i.widgetConfig)&&void 0!==e&&e.fixedConversationId){var o;const{widgetConfig:e}=i,a=e.chatHistory,s=P.a.getConversationId(e)||Object(w.a)(p.i.SESSION.CONVERSATION_ID);Object(h.handleIfConversationIdNull)("ConversationId invalid error is received from history API",!0),ot(s);const r={conversationId:s,requestBody:{numberOfMessages:(null==a?void 0:a.numberOfMessages)||100,numberOfDays:(null==a?void 0:a.numberOfDays)||10},botRefId:i.botRefId};let l={};if(!i.externalId){const e=JSON.parse(localStorage.getItem(Xe.a.USER_DETAILS)||"{}");i.externalId=e.externalId||""}l["x-external-id"]=i.externalId;const c=yield Object(k.d)(p.h.UNMASKED,r,l);if(Object(h.removeConversationBeforeRestart)(c),t("UPDATE_HISTORY_LOADING_STATUS",!0),n("processWebhookHistoryResponse",null==c?void 0:c.data),i.previousTimestamp=Object(h.getPreviousTimestamp)(c,(null==a?void 0:a.numberOfMessages)||100,i.previousTimestamp),Object(h.isfullHistoryLoaded)(c,(null==a?void 0:a.numberOfMessages)||100)){const e=at(c);e?(i.previousConversationId=s,i.currentCoversationId=e):(i.isfullHistoryLoaded=!0,i.currentCoversationId="")}Object(h.blankScreenCheck)(p.h.EMPTY_HISTORY_CALL),t("SANITIZE_CHAT_HISTORY_FOR_FORMS"),Object(w.e)();const u=P.a.createdAt,d=Object(h.getIdleTimeout)()-((new Date).getTime()-u);n("setEndChatTimer",{delay:d,isGuest:!Object(h.isUserLoggedIn)()}),n("throttleAgentDeskConnectionIdleTimeout",Bt.getters.getAgentDeskIdleTimeout-((new Date).getTime()-u)),yield n("setIdleTimerForSurvey"),n("overlayIdleChatTimeout"),null!==(o=i.widgetConfig.persistentSurveyConfig)&&void 0!==o&&o.isPersistentSurveyEnabled&&n("updateCSATState",{isEnabled:!0})}}catch(e){throw console.log("Error Receiving History of Messages",e.message),new Ke.a({name:"Action",message:"Error Receiving History of Messages. "+e.message})}finally{t("UPDATE_HISTORY_LOADING_STATUS",!1),n("updatePreLoaderEnabledStatus",!1)}}()})).apply(this,arguments)},receiveHistoryOfMessagesV3(e){return M()((function(e){let{commit:t,dispatch:n,rootState:i}=e;return function*(){try{var e;if(Object(h.isUserLoggedIn)()||Object(h.hasConversationInitiated)()||Object(h.isOauthEnabled)()||null!=i&&null!==(e=i.widgetConfig)&&void 0!==e&&e.fixedConversationId){var o;const{widgetConfig:e}=i,a=e.chatHistory,s=P.a.getConversationId(e)||Object(w.a)(p.i.SESSION.CONVERSATION_ID);Object(h.handleIfConversationIdNull)("ConversationId invalid error is received from history API",!0),ot(s);let r=s;null!=i&&i.externalId&&null!=i&&i.currentCoversationId&&(r=i.currentCoversationId);const l={conversationId:r,requestBody:{numberOfMessages:(null==a?void 0:a.numberOfMessages)||100,numberOfDays:(null==a?void 0:a.numberOfDays)||10},botRefId:i.botRefId};let c={};if(!i.externalId){const e=JSON.parse(localStorage.getItem(Xe.a.USER_DETAILS)||"{}");i.externalId=e.externalId||""}c["x-external-id"]=i.externalId,i.previousTimestamp&&(l.requestBody.timestamp=i.previousTimestamp);const u=yield Object(k.d)(p.h.UNMASKED,l,c);let d=[...(null==u||null===(o=u.data)||void 0===o?void 0:o.responses)||[]].reverse();if(u.data.responses=d,u.data.isPreviousHistory=!0,n("processWebhookHistoryResponse",null==u?void 0:u.data),Object(h.isfullHistoryLoaded)(u,(null==a?void 0:a.numberOfMessages)||100)){const e=at(u);return e?(i.previousConversationId=i.currentCoversationId,i.currentCoversationId=e,i.previousTimestamp=Object(h.getPreviousTimestamp)(u,(null==a?void 0:a.numberOfMessages)||100,i.previousTimestamp)||i.previousTimestamp,void t("SANITIZE_CHAT_HISTORY_FOR_FORMS")):(i.isfullHistoryLoaded=!0,i.currentCoversationId="",void t("SANITIZE_CHAT_HISTORY_FOR_FORMS"))}i.previousTimestamp=Object(h.getPreviousTimestamp)(u,(null==a?void 0:a.numberOfMessages)||100,i.previousTimestamp),Object(h.blankScreenCheck)(p.h.EMPTY_HISTORY_CALL),t("SANITIZE_CHAT_HISTORY_FOR_FORMS"),i.previousCoversationLoader||t("UPDATE_PREVIOUS_CONVERSATION_LOADER",!0)}}catch(e){throw console.log("Error Receiving History of Messages",e.message),new Ke.a({name:"Action",message:"Error Receiving History of Messages. "+e.message})}finally{t("UPDATE_PREVIOUS_CONVERSATION_LOADER",!1)}}()})).apply(this,arguments)},receiveMaskedHistoryOfMessages(e){return M()((function(e){let{rootState:t,commit:n}=e;return function*(){try{var e;const{widgetConfig:i}=t,o=i.chatHistory,a=P.a.getConversationId(i)||Object(w.a)(p.i.SESSION.CONVERSATION_ID);Object(h.handleIfConversationIdNull)("ConversationId invalid error is received from history API",!0);const s={conversationId:a,requestBody:{numberOfMessages:(null==o?void 0:o.numberOfMessages)||100,numberOfDays:(null==o?void 0:o.numberOfDays)||10},botRefId:t.botRefId},r=yield Object(k.b)(p.h.MASKED,s),l=null==r||null===(e=r.data)||void 0===e?void 0:e.responses,u=[];return l.forEach((function(e,i){const o=e.triggerType;if(o===p.e.REQUEST){const i=e.requestPayload,{messagePayload:o}=i,{text:a,label:s}=o,r=t.botPCIPolicy||{},l=Object(We.b)(t)&&!a.startsWith("event://;");let d=i;if(l){const e=Object(Qe.c)(r,a),t=a!==s?Object(Qe.c)(r,s):e;e===a&&t===s||(d=c()(i),d.messagePayload.text=e,d.messagePayload.label=t,n("UPDATE_MASKED_VALUE_MAP",{messageId:d.messagePayload.messageId,text:a,maskedText:e,label:s,maskedLabel:t}))}const h=Object(R.a)(l?d:i);u.push(h)}else if(o===p.e.RESPONSE){const t=Boolean((null==l?void 0:l.length)-1===i),n=!Object(h.isTypeBOT)(null==e?void 0:e.ownerType);e.timestamp=e.timestamp.toString();const o=Object(xe.a)(e,t,n,!0);u.push(o)}else o===p.e.EVENT&&"INFO_PILL"===e.eventObject.eventName&&u.push(e.eventObject)})),u}catch(e){throw console.log("Error Receiving History of Messages",e.message),new Ke.a({name:"Action",message:"Error Receiving History of Messages. "+e.message})}}()})).apply(this,arguments)},updateMissedMessagesFromHistory(e){return M()((function(e){let{commit:t,rootState:n}=e;return function*(){try{var e;if(!(Object(h.isUserLoggedIn)()||Object(h.hasConversationInitiated)()))return;const i={conversationId:Object(w.a)(p.i.SESSION.CONVERSATION_ID),requestBody:{numberOfMessages:30,numberOfDays:10},botRefId:n.botRefId},o=yield Object(k.c)(p.h.UNMASKED,i),a=null==o||null===(e=o.data)||void 0===e?void 0:e.responses;let s=!1;const r=[];return a.forEach((function(e,n){const i=e.triggerType,o=!Object(h.isTypeBOT)(null==e?void 0:e.ownerType);if(i===p.e.RESPONSE&&o){const i=Boolean((null==a?void 0:a.length)-1===n);e.timestamp=e.timestamp.toString();const l=Object(xe.a)(e,i,o,!0);l.initiator=p.h.WEBHOOK_HISTORY;const c=l.requestId;Object(h.checkIfRequestIdExists)(c)||(t("UPDATE_CHATS",l),r.push(null==l?void 0:l.requestId),s=!0)}})),s&&t("SORT_CHATS_ACC_TO_TIMESTAMP"),r}catch(e){throw console.log("Error Receiving History of Messages",e.message),new Ke.a({name:"Action",message:"Error Receiving History of Messages. "+e.message})}}()})).apply(this,arguments)},processWebhookHistoryResponse(e,t){var n;let{commit:i,dispatch:o,rootState:a}=e;const s=null==t?void 0:t.responses[(null==t||null===(n=t.responses)||void 0===n?void 0:n.length)-1],r=!(null!=t&&t.isPreviousHistory)&&Boolean((null==s?void 0:s.triggerType)===p.e.REQUEST),l=!(null!=t&&t.isPreviousHistory)&&Boolean((null==s?void 0:s.triggerType)===p.e.RESPONSE);t.responses.forEach((function(e,n){var s;try{var c;const u=e.triggerType,d=!(null!=t&&t.isPreviousHistory)&&Boolean((null==t||null===(c=t.responses)||void 0===c?void 0:c.length)-1===n);switch(u){case p.e.REQUEST:tt(i,o,a,e.requestPayload,r);break;case p.e.RESPONSE:nt(i,o,a,e,d,l);break;case p.e.EVENT:it(e.eventObject,(null==t||null===(s=t.responses)||void 0===s?void 0:s.length)-1===n)}}catch(e){console.log(e)}}))},fetchHistory(e){return M()((function(e){let{commit:t,dispatch:n,rootState:i}=e;return function*(){try{n("updatePreLoaderEnabledStatus",!0),Object(h.isChatNotStarted)()&&!i.isHistoryLoading?(t("UPDATE_HISTORY_LOADING_STATUS",!0),yield n("receiveHistoryOfMessages")):u.a.getSessionStorageData("userInteracted")||i.isHistoryLoading||(t("UPDATE_HISTORY_LOADING_STATUS",!0),t("CLEAR_CHATS"),yield n("receiveHistoryOfMessages"))}catch(e){throw new Ke.a({name:"History Fetching",message:"Error in fetching history",error:e})}}()})).apply(this,arguments)},fetchPreviousConversations(e){return M()((function(e){let{commit:t,dispatch:n,rootState:i}=e;return function*(){try{i.isHistoryLoading||i.previousCoversationLoader||(t("UPDATE_PREVIOUS_CONVERSATION_LOADER",!0),yield n("receiveHistoryOfMessagesV3"),t("UPDATE_PREVIOUS_CONVERSATION_LOADER",!1))}catch(e){throw new Ke.a({name:"History Fetching",message:"Error in fetching history",error:e})}finally{t("UPDATE_PREVIOUS_CONVERSATION_LOADER",!1)}}()})).apply(this,arguments)}};const tt=function(e,t,n,i,o){var a;const{messagePayload:s}=i,{text:r,label:l}=s,u=n.botPCIPolicy||{},d=Object(We.b)(n)&&!r.startsWith("event://;");let h=i;if(d){const t=Object(Qe.c)(u,r),n=r!==l?Object(Qe.c)(u,l):t;t===r&&n===l||(h=c()(i),h.messagePayload.text=t,h.messagePayload.label=n,e("UPDATE_MASKED_VALUE_MAP",{messageId:h.messagePayload.messageId,text:r,maskedText:t,label:l,maskedLabel:n}))}const g=Object(R.a)(d?h:i);(null===(a=Object.keys(g))||void 0===a?void 0:a.length)>0&&(g.initiator=p.h.WEBHOOK_HISTORY,n.previousCoversationLoader?e("UPDATE_PREVIOUS_CHAT",{chatBlock:g}):e("UPDATE_CHATS",g)),!n.previousCoversationLoader&&t("showDayDateSeparator",i),o&&n.inputFieldTempDisableStatus&&t("enableTempDisabledInputField")},nt=function(e,t,n,i,o,a){var s;const r=(null==i||null===(s=i.customPayload)||void 0===s?void 0:s.isLastMessageExtension)||!1,l=!Object(h.isTypeBOT)(null==i?void 0:i.ownerType);i.timestamp=i.timestamp.toString();const c=Object(xe.a)(i,o,l,!0);var u;(c.initiator=p.h.WEBHOOK_HISTORY,r)?null===(u=c.messages)||void 0===u||u.forEach((function(t){n.previousCoversationLoader?e("UPDATE_FIRST_CHAT_MESSAGE",t):e("UPDATE_LAST_CHAT_MESSAGE",t)})):n.previousCoversationLoader?e("UPDATE_PREVIOUS_CHAT",{chatBlock:c}):e("UPDATE_CHATS",c);if(a&&!Object(h.isMultiSourceLastExtension)(i,c.messages)){const e=Object(h.extractQuickReplyOptions)(c.messages);t("updateQuickReplyOptions",e)}if(o){const e=Object(h.extractNBAOptions)(c.messages);if(Object.keys(e).length){const{actionableNBAOptions:n=[],nonActionableNBAOptions:i=[]}=e;if(t("updateActionableNBAOptions",n),t("updateNonActionableNBAOptions",i),null!=i&&i.length){var d;const e=i.map((function(e){return e.url}));let n=Object(Ye.a)({requestBody:e});null==n||null===(d=n.then((function(e){const n=null==i?void 0:i.map((function(t,n){var i;const o=null==e||null===(i=e[n])||void 0===i?void 0:i.value,a=(null==o?void 0:o.image)||(null==o?void 0:o.logo),s=null==o?void 0:o.description,r=null==o?void 0:o.title,l=Ze(Ze({},t),{},{image:a,isProcessed:!0});return!l.label&&r&&(l.label=r),!l.longText&&s&&(l.longText=s),l}));(null==n?void 0:n.length)&&t("updateNonActionableNBAOptions",n)})))||void 0===d||d.catch((function(e){console.log(e)}))}else t("updateActionableNBAOptions",[]),t("updateNonActionableNBAOptions",[])}}},it=function(e,t){var n,i;const o=e.eventData.subType,a=null===(n=ze[e.eventName])||void 0===n||null===(i=n[e.eventData.eventType])||void 0===i?void 0:i[o];a&&a(e.eventData.eventInfo,e.timestamp,t,{subType:o})},ot=function(e){if(!e)throw Error("ConversationId not generated properly")},at=function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.previousConversationId};var st=n(110),rt=n(41);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(){return(ut=M()((function*(){try{var e,t,n;const{getBotRefId:i,getEmailId:o}=(null==Bt?void 0:Bt.getters)||{},a={botRefId:i,conversationId:Object(w.a)(p.i.SESSION.CONVERSATION_ID),mail:o,from:null==Bt||null===(e=Bt.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.sendTranscriptEmailSetup)||void 0===n?void 0:n.email};return yield $.a.request({method:"post",url:"/api/sendTranscript",data:a,headers:ct({},dt()),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=rt.a.TRANSCRIPT_HISTORY,t}}))).apply(this,arguments)}const dt=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{getBotRefId:n,getWidgetId:i,getUserId:o}=(null==Bt?void 0:Bt.getters)||{},a={"Content-Type":"application/json","x-bot-ref-id":n,"x-conversation-id":Object(w.a)(p.i.SESSION.CONVERSATION_ID),"x-widget-id":i,"x-user-id":o,"x-cdn-url":Object(h.getCdnBaseUrl)()},s=(null===(e=Bt.state.widgetConfig)||void 0===e?void 0:e.isAuthenticationEnabled)||!1;var r;(ht("x-auth-enabled",s,a),s&&Object(h.isAuthTokenPresent)())&&ht("x-auth-token",(null==Bt||null===(r=Bt.state)||void 0===r?void 0:r.authToken)||Object(w.a)(p.i.AUTH.AUTH_TOKEN),a);return t.forEach((function(e){return ht(e.key,e.value,a)})),a},ht=function(e,t,n){n[e]=t};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt={updateBrowserFontSizeSetting(e,t){let{commit:n}=e;n("UPDATE_BROWSER_FONT_SIZE_SETTING",t)},updateBotConfig(e,t){let{commit:n,rootState:i}=e;const o=i.widgetConfig;o.cssConfig||(o.cssConfig={});["chatWidget","supportIconConfig","launchButton","theme","borderRadius","botResponseBubbleColor"].forEach((function(e){void 0!==t[e]&&("object"!=typeof t[e]||Array.isArray(t[e])?o[e]=t[e]:o[e]=gt(gt({},o[e]||{}),t[e]||{}),delete t[e])})),o.cssConfig=gt(gt({},o.cssConfig),t),n("UPDATE_WIDGET_CONFIG",o)},updateSupportIconState(e,t){let{commit:n}=e;n("UPDATE_SUPPORT_ICON_STATE",t)},updateInputFieldHiddenStatus(e,t){let{commit:n}=e;n("UPDATE_INPUT_FIELD_HIDDEN_STATUS",t)},updateTermsAndConditions(e){let{commit:t,rootState:n}=e;if(!Object(h.hasConversationInitiated)()){var i,o;const e=null===(i=n.widgetConfig)||void 0===i||null===(o=i.termsConfig)||void 0===o?void 0:o.terms,a=null==e?void 0:e.find((function(e){let{isActive:t,isArchived:n}=e;return t&&!n}));null!=e&&e.length&&a&&t("UPDATE_TERMS_AND_CONDITIONS_STATE",gt(gt({},n.termsAndConditions),{},{terms:a}))}},updateAlerts(e){var t;let{rootState:n,commit:i}=e;const o=null===(t=n.widgetConfig)||void 0===t?void 0:t.alertsConfig,a=null==o?void 0:o.highPriorityAlerts;if(null!=a&&a.length){const e=Object(h.getScheduledAlert)(a);if(e)i("UPDATE_HIGH_PRIORITY_ALERT_STATE",e),setTimeout((function(){i("UPDATE_HIGH_PRIORITY_ALERT_STATE",{})}),Math.min(Object(h.convertUTCTimestampToLocalTimestamp)(e.schedule.startEndDateTime[1]-e.schedule.utcOffsetInMs)-Date.now(),2147483647));else{const{upcomingScheduledHighPriorityAlert:e,delay:t}=Object(h.getUpcomingScheduledAlert)(a);e&&setTimeout((function(){i("UPDATE_HIGH_PRIORITY_ALERT_STATE",e),setTimeout((function(){i("UPDATE_HIGH_PRIORITY_ALERT_STATE",{})}),Math.min(Object(h.convertUTCTimestampToLocalTimestamp)(e.schedule.startEndDateTime[1]-e.schedule.utcOffsetInMs)-Date.now(),2147483647))}),Math.min(t,2147483647))}}const s=null==o?void 0:o.mediumPriorityAlerts;if(null!=s&&s.length&&Object(h.isMediumPriorityAlertValid)()){const e=Object(h.getScheduledAlert)(s);e&&(i("UPDATE_MEDIUM_PRIORITY_ALERT_STATE",e),setTimeout((function(){i("UPDATE_MEDIUM_PRIORITY_ALERT_STATE",{})}),Math.min(Object(h.convertUTCTimestampToLocalTimestamp)(e.schedule.startEndDateTime[1]-e.schedule.utcOffsetInMs)-Date.now(),2147483647)))}},updateMediumPriorityAlertState(e,t){let{commit:n}=e;n("UPDATE_MEDIUM_PRIORITY_ALERT_STATE",t)},updateTermsState(e,t){let{commit:n,rootState:i}=e;n("UPDATE_TERMS_AND_CONDITIONS_STATE",gt(gt({},i.termsAndConditions),{},{terms:t}))},updateGreetingTriggerOnAlertClosureState(e,t){let{commit:n}=e;n("UPDATE_GREETING_TRIGGER_ON_ALERT_CLOSURE_STATE",t)},updateGreetingTriggerOnTermsClosureState(e,t){let{commit:n}=e;n("UPDATE_GREETING_TRIGGER_ON_TERMS_CLOSURE_STATE",t)},updateQuickReplyOnTermsClosureState(e,t){let{commit:n}=e;n("UPDATE_QUICK_REPLY_ON_TERMS_CLOSURE_STATE",t)},updateBlankScreenState(e,t){let{commit:n,rootState:i}=e;const o=i.blankScreen.timerId;o&&clearTimeout(o),n("UPDATE_BLANK_SCREEN_STATE",t)},deleteChatAtIthPosition(e,t){let{commit:n}=e;n("DELETE_CHAT_AT_ITH_POS",t)},updateUserDeviceDetails(e,t){let{commit:n}=e;n("UPDATE_USER_DEVICE_DETAILS",t)},updateCookieValuesCopyState(e,t){let{commit:n}=e;n("UPDATE_COOKIE_VALUES_COPY_STATE",t)},updateTriggerMinimizeValidState(e,t){let{commit:n}=e;n("UPDATE_TRIGGER_MINIMIZE_VALID_STATE",t)},updateUnreadMessagesState(e,t){let{commit:n}=e;n("UPDATE_UNREAD_MESSAGES_STATUS",t)},updateKnowledgeAISources(e,t){let{commit:n}=e;n("UPDATE_KNOWLEDGE_AI_SOURCES",t)},updateUserIPAddress(e,t){let{commit:n}=e;n("UPDATE_USER_IP_ADDRESS",t)},updateBotDetails(e,t){let{commit:n}=e;n("UPDATE_BOT_DETAILS",t)},updatePreLoaderEnabledStatus(e,t){let{commit:n}=e;n("UPDATE_PRE_LOADER_ENABLED_STATUS",t)},updateOverlayStatus(e,t){let{commit:n}=e;n("UPDATE_OVERLAY_STATUS",t)},updateChatWindowFullScreenState(e,t){let{commit:n}=e;n("UPDATE_CHAT_WIDGET_FULLSCREEN_STATUS",t),n("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!!Object(h.isUserLoggedIn)()&&!u.a.getSessionStorageData("userInteracted"))},updateFileAttachmentIcon(e,t){let{commit:n}=e;n("UPDATE_FILE_ATTACHMENT_ICON",t)},toggleChatWindowStatus(e,t){let{commit:n,getters:i}=e;n("TOGGLE_CHAT_WINDOW_STATUS",{data:t,getters:i}),n("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",Object(h.isUserLoggedIn)()),n("UPDATE_VOICE_MODE",!1),Pe.a.endAudio()},removeLastChatBlock(e){let{commit:t}=e;t("REMOVE_LAST_CHAT_BLOCK")},updateQuickReplyOptions(e,t){let{commit:n}=e;n("UPDATE_QUICK_REPLY_OPTIONS",t)},updateActionableNBAOptions(e,t){let{commit:n}=e;n("UPDATE_ACTIONABLE_NBA_OPTIONS",t)},updateNonActionableNBAOptions(e,t){let{commit:n}=e;n("UPDATE_NON_ACTIONABLE_NBA_OPTIONS",t)},updateNonActionableNBAOverlayEnabled(e,t){let{commit:n}=e;n("UPDATE_NON_ACTIONABLE_NBA_OVERLAY_ENABLED",t)},updateTypingIndicatorStatus(e,t){let{commit:n}=e;n("UPDATE_INDICATOR_STATUS",t)},showMessageSeparator(e,t){let{commit:n,rootState:i}=e;const o=i.previousCoversationLoader;n(o?"UPDATE_PREVIOUS_CHAT":"UPDATE_CHATS",o?{position:0,chatBlock:t}:t)},showDayDateSeparator(e,t){let{commit:n,dispatch:i,getters:o,rootState:a}=e;const s=Number(t.messagePayload.timestamp),r=o.getLastMessageTimestamp;var l,c;r&&Object(h.isDateEqual)(s,r)&&(null!==(l=a.chats)&&void 0!==l&&null!==(c=l[0])&&void 0!==c&&c.isMessageSeparator||n("UPDATE_PREVIOUS_CHAT",{position:0,chatBlock:{isMessageSeparator:!0,content:{component:"DateSeparator",message:Object(h.formatDayTime)(s)},timestamp:Date.now()}}),i("showMessageSeparator",{isMessageSeparator:!0,content:{component:"DateSeparator",message:Object(h.formatDayTime)(s)},timestamp:Date.now()}))},setEndChatTimer(e,t){let{rootState:n,commit:i,dispatch:o}=e,{delay:a,isGuest:s}=t;if(Object(h.clearTimerForEndChat)(),s){i("UPDATE_IDLE_TIMEOUT_ID",setTimeout((function(){var e,t;const i=Object(h.isEndChatSuveyValid)(),a=!n.widgetConfig.endChat||(null===(e=n.widgetConfig)||void 0===e||null===(t=e.endChat)||void 0===t?void 0:t.isSendTranscriptEnabled),s=!i&&!Object(h.isEndChatGreetingValid)(a);i&&o("updateTriggerMinimizeValidState",!0),o("endChat",{message:p.h.SESSION_HAS_EXPIRED,hideEndChatGreeting:a}),s&&o("minimizeCW"),Q.updateScript()}),a))}},overlayIdleChatTimeout(e){var t,n,i,o;let{commit:a,dispatch:s,rootState:r}=e;if(null===(t=r.widgetConfig)||void 0===t||null===(n=t.inactiveOverlay)||void 0===n||!n.inactiveOverlayTimeout)return;let l=r.overlayTimerId;const c=null===(i=r.widgetConfig)||void 0===i||null===(o=i.inactiveOverlay)||void 0===o?void 0:o.inactiveOverlayTimeout;l&&clearTimeout(l),l=setTimeout(M()((function*(){s("updateOverlayStatus",!0),u.a.setLocalStorageData("overlayStatus",!0),yield s("sendIoTEvent",{event_name:"SHOW_OVERLAY"})})),c),a("UPDATE_OVERLAY_IDLE_TIMEOUT_ID",l)},uploadOnS3:(e,t)=>M()((function*(){var e,n,i;if(Bt.getters.scanFileForMalwareEnabled){if((yield st.a.scanFileForMalware(t.file)).isInfected)throw new Error("Failed to upload file. File is infected with malware")}let o,a;try{const e=yield st.a.getPreSignedPostURL({fileType:t.file.type,uploadKeyPrefix:t.uploadKeyPrefix});o=e.url,a=e.fields}catch(e){throw console.log("Error while uploading file",e.message),new B.a({name:"Action",message:"Error occurred while uploading file. "+e.message})}finally{yield st.a.uploadFileToS3ByPreSignedURL(t.file,o,a)}let s=null===(e=a)||void 0===e?void 0:e.key;return s=null===(n=s)||void 0===n?void 0:n.substring(null===(i=s)||void 0===i?void 0:i.indexOf("/media")),s&&`${Object(h.getCdnBaseUrl)()}${s}`}))(),setIsCalloutBubbleEnabled(e){let{commit:t}=e;t("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},updateCalloutBubbleFlagFromPubsub(e){let{commit:t}=e;t("UPDATE_CALLOUT_BUBBLE_FLAG_FROM_PUBSUB",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0})},showCalloutBubbleFromPubsub(e,t){let{commit:n,dispatch:i}=e;"boolean"==typeof t?i("updateCalloutBubbleFlagFromPubsub",{enabled:t}):"object"==typeof t&&(i("updateCalloutBubbleFlagFromPubsub",{enabled:!0,data:t}),n("UPDATE_CALLOUT_BUBBLE",t))},updateQuickMenuState(e,t){var n,i;let o,{commit:a,dispatch:s,rootState:r}=e,l=t.type===p.h.QUICK_MENU?null===(n=r.widgetConfig)||void 0===n?void 0:n.quickMenuOptions:{};switch(t.type){case p.h.QUICK_MENU:l=null===(i=r.widgetConfig)||void 0===i?void 0:i.quickMenuOptions.map((function(e,t){return{label:`${p.t.QUICK_MENU_OPTIONS_LABEL}${t+1}`,text:Object(h.getTranslation)(`${p.t.QUICK_MENU_OPTIONS_TEXT}${t+1}`)}})),o=function(e,t){s("sendMessage",{userMessage:{payload:Object(h.getTranslation)(`${p.t.QUICK_MENU_OPTIONS_TEXT}${t+1}`),label:Object(h.getTranslation)(`${p.t.QUICK_MENU_OPTIONS_LABEL}${t+1}`)}})}}a("UPDATE_QUICK_MENU_STATE",{type:t.type,options:l}),a("UPDATE_QUICK_MENU_HANDLER",o)},updateQuickMenuVisibility(e,t){let{commit:n}=e;n("UPDATE_QUICK_MENU_VISIBILITY",t)},updateLocale(e,t){g.a.updateLocaleAndMessages(t),u.a.setLocalStorageData(p.h.CURRENT_LOCALE,t)},updateWidgetVisitorInfo(e,t){let{commit:n}=e;n("UPDATE_WIDGET_VISITOR_INFO",t)},updateDefaultAttributes(e,t){let{commit:n}=e;n("UPDATE_DEFAULT_ATTRIBUTES",t)},updateNotificationSound(e,t){let{commit:n}=e;n("UPDATE_NOTIFICATION_SOUND",t)},updateInternetConnectionStatus(e){let{commit:t}=e;t("UPDATE_CONNECTION_STATUS",!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},updateIsCalloutBubbleLoadedStatus(e,t){let{commit:n}=e;n("UPDATE_CALLOUT_BUBBLE_LOADED",t)},updateFocusEnable(e,t){let{commit:n}=e;n("UPDATE_FOCUS_ENABLE",t)},updateFocusNode(e,t){let{commit:n}=e;n("UPDATE_FOCUS_NODE",t)},showExternalHeaderText(e,t){let{commit:n}=e;n("SHOW_EXTERNAL_HEADER_TEXT",t)},showHeaderMenuButtons(e,t){let{commit:n}=e;n("SHOW_HEADER_MENU_BUTTONS",t)},updateCsatSurveyTime(e,t){let{commit:n}=e;n("UPDATE_CSAT_SURVEY_TIME",t)},updatePromptTestDetails(e,t){let{commit:n}=e;n("UPDATE_PROMPT_TEST_DETAILS",t)},updateVoiceModeActive(e,t){let{commit:n}=e;n("UPDATE_VOICE_MODE",t)},updateVoiceState(e,t){let{commit:n}=e;n("UPDATE_VOICE_STATE",t)},showVisitorInfoButton(e,t){let{commit:n}=e;n("SHOW_VISITOR_INFO_BUTTON",t)},showVisitorInfoForm(e,t){let{commit:n}=e;n("SHOW_VISITOR_INFO_FORM",t)},updateVisitorInfoForm(e,t){let{commit:n,getters:i}=e;n("UPDATE_VISITOR_INFO_FORM",t),i.isResponseAnalyzerEnabled&&Object(h.emitEventToParentWindow)(p.o.RA_UPDATE_VISITOR_INFO_FORM,{data:t})},backToBotAction:()=>M()((function*(){Object(h.isTypeBOT)()||(yield i.a.prototype.$liveAgent.endChatWithLiveAgent())}))(),transcriptMessage:()=>M()((function*(){yield function(){return ut.apply(this,arguments)}()}))()},ft=n(111);function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e){return _t.apply(this,arguments)}function _t(){return(_t=M()((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){try{const{getBotRefId:n}=(null==Bt?void 0:Bt.getters)||{},i=vt({botRefId:n,conversationId:Object(w.a)(p.i.SESSION.CONVERSATION_ID)},t);return yield $.a.request({method:"get",url:"/api/oauth/"+e,params:i,headers:vt({"Cache-Control":"no-cache"},Object(k.a)()),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){throw new B.a({name:"oauth request service",message:"Error while request for oauth "+e.message})}}()}))).apply(this,arguments)}var St={updateTokenInWidget(e,t){let{commit:n}=e;Object(w.f)(p.i.AUTH.AUTH_TOKEN,t),n("UPDATE_TOKEN_IN_WIDGET",t)},setUserLoggedIn(e,t){return M()((function(e,t){let{commit:n,dispatch:i,rootState:o}=e;return function*(){if(i("updateTokenInWidget",t),o.widgetConfig.isAuthenticationEnabled){var e;const s=yield Object(ft.b)(t),r=200===s.data.statusCode,l=null===(e=s.data)||void 0===e?void 0:e.authenticatedConversationId;if(r){var a;const e=null===(a=s.data)||void 0===a?void 0:a.externalId;localStorage.setItem(Xe.a.USER_DETAILS,JSON.stringify(s.data)),n("UPDATE_EXTERNAL_ID",e),n("UPDATE_AUTHENTICATED_CONVERSATION_ID",l),Object(h.refreshStorageAndClearChats)(r),i("setEndChatTimer",{delay:0,isGuest:!1}),Object(w.f)(p.i.AUTH.USER_LOGGED_IN,r),P.a.createAuthenticatedConversationID(l),(o.isWindowMaximized||o.isChatWidgetFullScreen)&&(i("toggleChatWindowStatus",!1),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,Object(h.getSupportIconWidthAndHeight)())),n("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!0),i("reinitialiseLiveAgent")}}}()})).apply(this,arguments)},logoutWidget(e){return M()((function(e){let{commit:t,dispatch:n}=e;return function*(){new L.a({name:"NET-57075 logoutWidget authentcation.js - entry",message:"User logout widget called",logLevel:"info",service:"Action"}),n("toggleChatWindowStatus",!1),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,Object(h.getSupportIconWidthAndHeight)()),Object(h.isTypeBOT)()||(new L.a({name:"NET-57075 logoutWidget authentcation.js - not bot",message:"Not BOT control type - ending live agent chat",logLevel:"info",service:"Action"}),yield i.a.prototype.$liveAgent.endChatWithLiveAgent(),yield i.a.prototype.$liveAgent.sendBackToBotUtterance()),yield Object(ft.c)(),Object(h.refreshStorageAndClearChats)(!0),Object(w.c)(p.i.AUTH.AUTH_TOKEN),t("UPDATE_TOKEN_IN_WIDGET",""),Object(w.c)(p.i.AUTH.USER_LOGGED_IN),n("updateQuickReplyOptions",[]),n("updateActionableNBAOptions",[]),n("updateNonActionableNBAOptions",[]),n("updateTypingIndicatorStatus",!1),P.a.endConversation(),D.a.unsubscribe(),t("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!0)}()})).apply(this,arguments)},reinitialiseLiveAgent(e){return M()((function(e){let{dispatch:t,rootState:n}=e;return function*(){const e=Object(h.isUserLoggedIn)(),i=e&&(yield Object(ft.a)());e&&(t("updateAgentDeskConnectionStatus",null==i?void 0:i.data.agentDeskConnectionStatus),"connected"===(null==i?void 0:i.data.agentDeskConnectionStatus)&&t("updateControlType",p.h.AGENT)),Object(h.isTypeBOT)(n.controlType)||Object(h.lazyLoadLiveAgent)()}()})).apply(this,arguments)},setOauthUserLoggedIn(e,t){return M()((function(e,t){let{commit:n,dispatch:i}=e;return function*(){t&&(n("UPDATE_AUTHENTICATED_CONVERSATION_ID",t),Object(h.refreshStorageAndClearChats)(!0),i("setEndChatTimer",{delay:0,isGuest:!1}),Object(w.f)(p.i.OAUTH.LOGGED_IN,"true"),Object(w.f)(p.i.SESSION.CONVERSATION_INITIATED,"true"),P.a.createAuthenticatedConversationID(t),n("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!0),i("fetchHistory"))}()})).apply(this,arguments)},setOauthlogoutWidget(e){return M()((function(e){let{commit:t,dispatch:n}=e;return function*(){new L.a({name:"NET-57075 setOauthlogoutWidget authentcation.js - entry",message:"OAuth logout widget called",logLevel:"info",service:"Action"}),n("toggleChatWindowStatus",!1),Object(h.emitEventToParentWindow)(p.o.UPDATE_PARENT_WINDOW_STYLE,Object(h.getSupportIconWidthAndHeight)()),Object(h.isTypeBOT)()||(new L.a({name:"NET-57075 setOauthlogoutWidget authentcation.js - not bot",message:"Not BOT control type - ending live agent chat",logLevel:"info",service:"Action"}),yield i.a.prototype.$liveAgent.endChatWithLiveAgent(),yield i.a.prototype.$liveAgent.sendBackToBotUtterance()),Object(h.refreshStorageAndClearChats)(!0),Object(w.c)(p.i.SESSION.CONVERSATION_INITIATED),localStorage.removeItem(Xe.a.USER_DETAILS),localStorage.removeItem(Xe.a.ISAUTH),t("UPDATE_TOKEN_IN_WIDGET",""),Object(w.c)(p.i.OAUTH.LOGGED_IN),n("updateQuickReplyOptions",[]),n("updateActionableNBAOptions",[]),n("updateNonActionableNBAOptions",[]),n("updateTypingIndicatorStatus",!1),P.a.endConversation(),D.a.unsubscribe(),t("UPDATE_CALLOUT_BUBBLE_ENABLED_FLAG",!0)}()})).apply(this,arguments)},loginUsingOauth(e,t){return M()((function(e,t){let{messageInfo:n}=t;return function*(){const{authorization_code:e,access_token:t}=n;return yield function(e,t){return Tt("login",{code:e,token:t})}(e,t)}()})).apply(this,arguments)},logoutUsingOauth(e){return M()((function(e){let{dispatch:t}=e;return function*(){yield Tt("logout"),t("setOauthlogoutWidget")}()})).apply(this,arguments)}};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(){return(It=M()((function*(){let e="";try{var t;const n=yield $.a.request({method:"get",url:"/api/survey_rule",headers:Ot({"Cache-Control":"no-cache"},Object(k.a)()),cancelToken:Object(h.cancelHTTPRequests)()});e=null==n||null===(t=n.data)||void 0===t?void 0:t.payload}catch(e){throw new B.a({name:"Get survey rule",message:"Error while fetching survey rules. "+e.message})}return e}))).apply(this,arguments)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct={updateSurveyRules(e,t){let{commit:n}=e;n("UPDATE_SURVEY_RULES",t)},updateCSATState(e,t){let{commit:n}=e;n("UPDATE_CSAT_STATE",t)},clearCSATState(e){let{commit:t,dispatch:n}=e;t("UPDATE_CSAT_STATE",{isEnabled:!1,rating:null,comment:"",thumbUpType:"ThumbUp",thumbDownType:"ThumbDown"}),n("resetCSATRateLimit")},reinitializeCSATRateLimit(e){var t,n;let{commit:i,dispatch:o,rootState:a}=e;if(!u.a.getLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE))return;const s=6e4-((new Date).getTime()-(null===(t=u.a.getLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE))||void 0===t?void 0:t.limitStartTimestamp));if(s<1||s>=6e4)return;i("UPDATE_CSAT_STATE",{rateLimit:{limitLeft:null===(n=a.csat.rateLimit)||void 0===n?void 0:n.limitLeft,timerId:setTimeout((function(){o("resetCSATRateLimit")}),s)}})},resetCSATRateLimit(e){let{commit:t}=e;t("UPDATE_CSAT_STATE",{rateLimit:{limitLeft:p.h.CSAT_RATE_LIMIT,timerId:null}}),u.a.removeLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE)},updateSurveyFormState(e,t){let{commit:n}=e;n("UPDATE_SURVEY_FORM_STATE",t)},updateCSATRateLimit(e){let{dispatch:t,commit:n,rootState:i}=e;const o=i.csat.rateLimit.limitLeft;let a=i.csat.rateLimit.timerId;a||(a=setTimeout((function(){t("resetCSATRateLimit")}),6e4),u.a.setLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE,{limitStartTimestamp:(new Date).getTime()}));const s=o-1;n("UPDATE_CSAT_STATE",{rateLimit:{limitLeft:s,timerId:a}});const r=u.a.getLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE);u.a.setLocalStorageData(p.h.CSAT_RATE_LIMIT_STATE,At(At({},r),{},{limitLeft:s}))},updateCSATQuickReply(e){var t,n,i,o;let{rootState:a,dispatch:s}=e;const r=a.csat.rating===p.p.POSITIVE,l=a.csat.rating===p.p.NEGATIVE;s("updateQuickReplyOptions",[{label:r||l?null===(t=a.widgetConfig.persistentSurveyConfig)||void 0===t||null===(n=t.persistentSurveySettings)||void 0===n?void 0:n.textAfterFeedbackSent:null===(i=a.widgetConfig.persistentSurveyConfig)||void 0===i||null===(o=i.persistentSurveySettings)||void 0===o?void 0:o.textAfterFeedbackRemoved,metadata:p.B.WIDGET_EVENT_PERSISTENT_SURVEY,contentType:p.h.TEXT}])},updateCSATIcons(e,t){let{dispatch:n,rootState:i}=e;const o=i.csat.rating===p.p.POSITIVE,a=i.csat.rating===p.p.NEGATIVE;t?(n("updateCSATState",{thumbDownType:"ThumbDown"}),n("updateCSATState",o?{thumbUpType:"ThumbUp",rating:""}:{thumbUpType:"ThumbUpFilled",rating:p.p.POSITIVE})):(n("updateCSATState",{thumbUpType:"ThumbUp"}),n("updateCSATState",a?{thumbDownType:"ThumbDown",rating:""}:{thumbDownType:"ThumbDownFilled",rating:p.p.NEGATIVE}))},sendCSATSubmissionEvent(e,t){let{dispatch:n}=e;n("sendEvent",{eventData:{eventType:p.e.CSAT_SURVEY,subType:p.e.SUBMIT,eventInfo:t}}),n("throttleIdleChatTimeout"),n("setIdleTimerForSurvey")},sendPersistentSurveyEvent(e){let{dispatch:t}=e;t("sendEvent",{eventData:{eventType:p.e.WIDGET_EVENT,subType:p.e.PERSISTENT_SURVEY},eventName:p.e.INFO})},addPersistentSurveyInChats(e){var t;let{commit:n,rootState:i}=e;const o=null===(t=i.widgetConfig)||void 0===t?void 0:t.persistentSurveyConfig,a=Date.now();n("UPDATE_CHATS",{isUser:!1,hide:!1,messages:[{messageId:Object(H.a)(),type:p.B.SURVEY_FORM,isUser:!1,timestamp:a,conversationId:Object(w.a)(p.i.SESSION.CONVERSATION_ID),messageValue:{schema:JSON.stringify({payload:o}),status:[p.A.PENDING]}}],timestamp:a})},hideSurveyOfPreviousConversation(e){let{rootState:t,commit:n}=e;const i=t.chats;for(let e=0;e<i.length;e++){var o;const t=null===(o=i[e].messages)||void 0===o?void 0:o.length;if(t)for(let o=0;o<t;o++)if("SurveyForm"===i[e].messages[o].type&&!i[e].messages[o].hide)return i[e].messages[o].hide=!0,void n("UPDATE_CHAT_AT_ITH_POS",{position:e,chatBlock:i[e]})}},setScheduleRulesForSuvey(e){return M()((function(e){let{dispatch:t,rootState:n}=e;return function*(){try{if(!n.surveyRule.isPresent){n.surveyRule.isPresent=!0;let e=yield function(){return It.apply(this,arguments)}();if(!e)return;for(const n of e)switch(n.conversationTriggerType){case p.B.WIDGET_EVENT_IDLE_USER:n.expression=1e3*parseInt(n.expression.substring(12)),t("updateSurveyRules",{type:p.B.WIDGET_EVENT_IDLE_USER,rule:n});break;case p.B.WIDGET_EVENT_CHAT_END:t("updateSurveyRules",{type:p.B.WIDGET_EVENT_CHAT_END,rule:n})}}}catch(e){console.log("Error occurred while fetching survey rules config.",e.message)}}()})).apply(this,arguments)},setIdleTimerForSurvey(e){return M()((function(e){let{dispatch:t,rootState:n}=e;return function*(){try{var e;if(!Object(h.isTypeBOT)(n.controlType))return;if(Bt.getters.isPromptTestingEnable)return;yield t("setScheduleRulesForSuvey"),Object(h.clearIdleTimerForSurveyRule)();const i=null===(e=n.surveyRule.idleTimeoutRule.rule)||void 0===e?void 0:e.expression;if(!i)return;const o=setTimeout((function(){t("sendEvent",Object(h.idleTimeSurveyRequestFormatter)(i/1e3)),Q.updateScript()}),i);t("updateSurveyRules",{type:p.B.WIDGET_EVENT_IDLE_USER,timerId:o})}catch(e){new B.a({name:"Action",message:"Error occurred while fetching survey rules config. "+e.message})}}()})).apply(this,arguments)}},Nt={updateFallbackMechanismState(e,t){let{commit:n}=e;n("UPDATE_FALLBACK_MECHANISM_STATE",t)},removeLastFallbackRetryMessage(e){let{commit:t,rootState:n}=e;t("DELETE_CHAT_AT_ITH_POS",n.chats.length-1)},clearFallbackMechanismTimer(e){let{dispatch:t,rootState:n}=e;const i=n.fallbackMechanismState.retryTimerId;i&&(clearTimeout(i),t("updateFallbackMechanismState",{isVisible:!1,retryTimerId:"",message:"",quickReplies:""}))},throttleFallbackMechanism(e,t){let{dispatch:n,rootState:i,getters:o}=e;try{var a,s;if(!o.isFallbackMechanismEnabled||(null!=t&&t.hide||null!=t&&null!==(a=t.userMessage)&&void 0!==a&&a.hideMessage)&&!t.isRetryMessage&&!t.userMessage.isStreaming)return;n("clearFallbackMechanismTimer");const e=setTimeout((function(){var e,a,s,r;const l=(null===(e=t.userMessage)||void 0===e?void 0:e.payload)||"";n("addFallbackRetryMechanismInChats",{messageToTrigger:l,timestamp:null==t?void 0:t.timestamp}),i.fallbackMechanismState.retryLeft>0&&n("addQuickRepliesInFallbackRetryMechanism"),(null===(a=t.userMessage)||void 0===a?void 0:a.isStreaming)&&n("deleteChatAtIthPosition",i.chats.length-2),new L.a({name:"Fallback Retry Mechanism",message:"Fallback Retry Mechanism triggered by the message: "+JSON.stringify(t),logLevel:"info",service:"Action"}),o.isPromptTestingEnable&&Object(h.emitEventToParentWindow)(p.o.MESSAGE_ERROR,{conversationId:Object(w.a)(p.i.SESSION.CONVERSATION_ID),messageId:null==t||null===(s=t.userMessage)||void 0===s||null===(r=s.messageValue)||void 0===r?void 0:r.messageId})}),1e3*o.getFallbackMechanismDuration),r=i.fallbackMechanismState.retryLeft,l=t.isRetryMessage?r-1:null!==(s=t.userMessage)&&void 0!==s&&s.isStreaming?r:o.getFallbackMechanismMaxRetry;n("updateFallbackMechanismState",{isVisible:!1,retryTimerId:e,retryLeft:l})}catch(e){console.log(e),new B.a({name:"Action",message:"Error while sending retry message: "+e.message})}},addFallbackRetryMechanismInChats(e,t){let{dispatch:n,getters:i}=e,{messageToTrigger:o,timestamp:a}=t;const s=n("addFallbackResponseInChats",{text:i.getFallbackMechanismMessage,messageToTrigger:o,timestamp:a});n("updateFallbackMechanismState",{isVisible:!0,message:s})},addQuickRepliesInFallbackRetryMechanism(e){var t;let{dispatch:n,getters:i}=e;const o=null===(t=i.getFallbackMechanismActionButtons)||void 0===t?void 0:t.map((function(e){let{label:t,payload:n}=e;return{label:t,metadata:n,description:t,contentType:p.h.TEXT}}));n("updateQuickReplyOptions",o),n("updateFallbackMechanismState",{quickReplies:o})},addFallbackResponseInChats(e,t){let{commit:n}=e,{text:i,messageToTrigger:o,timestamp:a,hideRetry:s}=t;const r=Dt({text:i,messageToTrigger:o,hideRetry:s,timestamp:a||Date.now()});return n("UPDATE_CHATS",r),r}};const Dt=function(e){let{text:t,messageToTrigger:n,hideRetry:i,timestamp:o}=e;return{isUser:!1,hide:!1,messages:[{messageId:Object(H.a)(),type:"FallbackMechanism",isUser:!1,messageValue:{text:t,messageToTrigger:n,hideRetry:i},timestamp:o}]}};function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lt={handleSecureForm(e,t){let{commit:n,rootState:i}=e;const{subType:o,eventInfo:a,timestamp:s}=t||{},r=null==a?void 0:a.payload;switch(o){case p.e.CARD_INFO:{const e=s||Date.now(),t=Object(w.a)(p.i.SESSION.CONVERSATION_ID);n("UPDATE_CHATS",{isUser:!1,hide:!1,messages:[{messageId:Object(H.a)(),type:p.x.SECURE_FORM_RESPONSE,isUser:!1,timestamp:e,conversationId:t,messageValue:{formId:(null==r?void 0:r.formId)||String(e),heading:null==r?void 0:r.heading,description:null==r?void 0:r.body,ctaText:null==r?void 0:r.ctaText,maxWaitTime:(null==r?void 0:r.maxWaitTime)||2e4,status:"PENDING",isClicked:!1}}],timestamp:e})}break;case p.e.LINK_GENERATION:{const{formId:e}=r||{};if(!e)break;const t=i.chats||[];for(let i=t.length-1;i>=0;i--){const o=t[i],a=((null==o?void 0:o.messages)||[]).findIndex((function(t){var n;return(null==t?void 0:t.type)===p.x.SECURE_FORM_RESPONSE&&(null==t||null===(n=t.messageValue)||void 0===n?void 0:n.formId)===e}));if(-1!==a){const e=c()(o);e.messages[a].messageValue=wt(wt({},e.messages[a].messageValue),{},{isClicked:!0}),n("UPDATE_CHAT_AT_ITH_POS",{position:i,chatBlock:e});break}}}break;case p.e.SECURE_LINK:{const{formId:e,link:t,openIn:o}=r||{};if(!e||!t)break;const a=i.chats||[];for(let i=a.length-1;i>=0;i--){const s=a[i],r=((null==s?void 0:s.messages)||[]).findIndex((function(t){var n;return(null==t?void 0:t.type)===p.x.SECURE_FORM_RESPONSE&&(null==t||null===(n=t.messageValue)||void 0===n?void 0:n.formId)===e}));if(-1!==r){var l;const e=c()(s);e.messages[r].messageValue=wt(wt({},e.messages[r].messageValue),{},{link:Object(h.decodeBase64UrlSafe)(t),openIn:(o||(null===(l=e.messages[r].messageValue)||void 0===l?void 0:l.openIn)||"cw-iframe").toLowerCase(),isClicked:!0}),n("UPDATE_CHAT_AT_ITH_POS",{position:i,chatBlock:e});break}}}break;case p.e.FORM_STATUS:{var u;const{formId:e,heading:t,body:o,ctaText:a,status:s}=r||{};if(!e||!s)break;const l=null===(u=Array.isArray(s)?null==s?void 0:s[0]:s)||void 0===u?void 0:u.toUpperCase(),d=i.chats||[];for(let i=d.length-1;i>=0;i--){const s=d[i],r=((null==s?void 0:s.messages)||[]).findIndex((function(t){var n;return(null==t?void 0:t.type)===p.x.SECURE_FORM_RESPONSE&&(null==t||null===(n=t.messageValue)||void 0===n?void 0:n.formId)===e}));if(-1!==r){const e=c()(s),u=wt({},e.messages[r].messageValue||{});delete u.link,delete u.openIn,e.messages[r].messageValue=wt(wt(wt(wt(wt({},u),t?{finalHeading:t}:{}),o?{finalBody:o}:{}),a?{finalCtaText:a}:{}),{},{isClicked:!0,status:l}),n("UPDATE_CHAT_AT_ITH_POS",{position:i,chatBlock:e});break}}}}}};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft=Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut(Ut({},Ce),U),Ne),We.a),j),Me),Ge),mt),St),et),Ct),Nt),Lt),Mt={getColor(e){var t,n;return"dark"===(null==e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n?void 0:n.current)?"#FFFFFF":"#000000"},getTextColor(e){var t,n;const i=e.widgetConfig.textColor||"#ffffff",o="dark"===(null==e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n?void 0:n.current)?"#FFFFFF":"#000000";return"#ffffff"===(null==i?void 0:i.toLowerCase())?o:i},isGradientEnabled(e){var t,n;return null==e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n?void 0:n.gradient},getPendingForm(e){const t=e.chats.slice(-1)[0];return t&&t.messages&&t.messages.filter((function(e){var t,n,i;return"HumanHandoffForm"===e.type&&"PENDING"===(null===(t=e.messageValue)||void 0===t||null===(n=t.values)||void 0===n||null===(i=n.status)||void 0===i?void 0:i[0])}))||[]},getLastUserMessage(e){const t=e.chats;for(let e=t.length-1;e>=0;e--)if(t[e].isUser)return t[e];return null},getLastMessageTimestamp(e){const t=e.chats;for(let e=t.length-1;e>=0;e--)if(t[e].timestamp)return t[e].timestamp;return null},getBotRefId:e=>e.botRefId,getWidgetId:e=>e.widgetId,getUserId:e=>e.user.id,getEmailId:e=>e.user.email,isSoundEnable(e){var t;return(null==e||null===(t=e.widgetConfig)||void 0===t?void 0:t.sound)&&"enabled"===e.widgetConfig.sound.status},isSoundOnByDefault:(e,t)=>t.isSoundEnable&&e.widgetConfig.sound.defaultSound,isKnowledgeAiEnabled(e){var t,n;return Boolean(null==e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.knowledgeAI)||void 0===n?void 0:n.isEnabled)},knowledgeAiLaunchButtonData(e){var t,n;return null==e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.knowledgeAI)||void 0===n?void 0:n.launchButton},getAgentDeskIdleTimeout(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.endChat)||void 0===n?void 0:n.agentDeskIdleTimeout)||p.h.DEFAUlT_IDLE_TIMEOUT},getBotIdleTimeout(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.endChat)||void 0===n?void 0:n.idleTimeout)||p.h.DEFAUlT_IDLE_TIMEOUT},isDynamicSourcesDisabled(e){var t;return!1===(null===(t=e.widgetConfig)||void 0===t?void 0:t.dynamicSource)},dynamicChatWidgetWidth(e){var t,n;return null===(t=e.widgetConfig)||void 0===t||null===(n=t.chatWidget)||void 0===n?void 0:n.width},dynamicChatWidgetHeight(e){var t,n;return null===(t=e.widgetConfig)||void 0===t||null===(n=t.chatWidget)||void 0===n?void 0:n.height},showInfoSuggestionIcon(e){var t,n;return!0===(null===(t=e.widgetConfig)||void 0===t||null===(n=t.customerSuccess)||void 0===n?void 0:n.showInfo)},isChatWidgetLlmEnabled:e=>Boolean(e.launchDarklyFlags.IS_CHAT_WIDGET_LLM_ENABLED),isStreamingEnabled(e,t){var n,i;return(null===(n=e.widgetConfig)||void 0===n||null===(i=n.streamOnChatWidget)||void 0===i?void 0:i.enabled)||t.isChatWidgetLlmEnabled||!1},disableInputFieldWhileStreaming:e=>"disable"===e.widgetConfig.InputFieldWhileStreaming,disableInputFieldOnSendMessage(e){var t,n,i;return!0===(null===(t=e.widgetConfig)||void 0===t||null===(n=t.footer)||void 0===n||null===(i=n.disableInputOnSend)||void 0===i?void 0:i.state)},timeoutInputFieldOnSendMessage:e=>e.widgetConfig.footer.disableInputOnSend.reEnableTimeout||3e4,scrollElementBeyondPX(e){var t,n;return parseInt(null===(t=e.widgetConfig)||void 0===t||null===(n=t.scrollToBottom)||void 0===n?void 0:n.showLength)||24},isFallbackMechanismEnabled(e){var t,n;return"BOT"===e.controlType&&(null===(t=e.widgetConfig)||void 0===t||null===(n=t.fallback)||void 0===n?void 0:n.enabled)},getFallbackMechanismDuration(e){var t,n;return parseInt(null===(t=e.widgetConfig)||void 0===t||null===(n=t.fallback)||void 0===n?void 0:n.duration)||120},getFallbackMechanismMaxRetry(e){var t,n;return parseInt(null===(t=e.widgetConfig)||void 0===t||null===(n=t.fallback)||void 0===n?void 0:n.maxRetry)||10},getFallbackMechanismMessage(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.fallback)||void 0===n?void 0:n.message)||"The AI Agent response didn't come through."},getFallbackMechanismActionButtons(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.fallback)||void 0===n?void 0:n.fallbackActionButtons)||[]},getFallbackAgentDeskMessage(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.liveAgentDeskConfig)||void 0===n||null===(i=n.customHandoffConfig)||void 0===i?void 0:i.unsuccessfulConnectionMessage)||"Unable to connect to an agent. Conversation returning to the AI Agent."},hasChatsInitiated(e){var t,n;const i=[p.h.CHAT_ENDED,p.h.RESTART_CHAT_LABEL,p.h.SESSION_HAS_EXPIRED,p.h.CHAT_ENDED_WITH_TRANSCRIPT],o=e.chats;return!i.includes(null==o||null===(t=o[(o||[]).length-1])||void 0===t||null===(n=t.content)||void 0===n?void 0:n.message)&&(o||[]).some((function(e){var t;return!i.includes(null==e||null===(t=e.content)||void 0===t?void 0:t.message)}))},isTypingIndicatorEnabled(e){var t;const n=null==e||null===(t=e.widgetConfig)||void 0===t?void 0:t.typingIndicator;return!("enabled"in n)||(null==n?void 0:n.enabled)},isCSATValid(e){var t;return e.csat.isEnabled&&(null===(t=e.widgetConfig.persistentSurveyConfig)||void 0===t?void 0:t.isPersistentSurveyEnabled)},getCSATRating:e=>e.csat.rating,isPromptTestingEnable(e){var t;return null===(t=e.promptTestDetails)||void 0===t?void 0:t.active},isResponseAnalyzerEnabled(e){var t;return null===(t=e.promptTestDetails)||void 0===t?void 0:t.isResponseAnalyzerWidget},isVoiceEnabled(e,t){var n,i;return Boolean(null==e||null===(n=e.widgetConfig)||void 0===n||null===(i=n.voiceConfig)||void 0===i?void 0:i.enabled)&&!t.isPromptTestingEnable},isDigitalVoiceCustomAttributeValid(e,t){var n,i;return t.isVoiceEnabled&&!1!==(null===(n=e.widgetConfig)||void 0===n||null===(i=n.voiceConfig)||void 0===i?void 0:i.digitalVoiceEvent)},restartButtonHoverText(e){var t,n;return null===(t=e.widgetConfig)||void 0===t||null===(n=t.restartChat)||void 0===n?void 0:n.hoverText},retainQuickReplies(e){var t;return null===(t=e.widgetConfig)||void 0===t?void 0:t.retainQuickReplies},textToSpeechOrationResponse(e){var t;return null===(t=e.widgetConfig)||void 0===t?void 0:t.textToSpeechOrationResponse},isProgressiveTypingIndicatorEnabled(e){var t;return(null===(t=e.widgetConfig.progressiveTypingIndicator)||void 0===t?void 0:t.enabled)||!1},normalizationPhrases(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.voiceConfig)||void 0===n?void 0:n.normalizationPhrases)||{}},speechToTextPhraseList(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.voiceConfig)||void 0===n?void 0:n.phraseList)||[]},voiceTTSProvider(e){var t;return(null===(t=e.widgetConfig.voiceConfig)||void 0===t?void 0:t.voiceTTSProvider)||"google"},elevenLabsWebSocketEnabled(e){var t;return null===(t=e.widgetConfig.voiceConfig)||void 0===t?void 0:t.elevenLabsWebSocketEnabled},enableBackendElevenLabsSocket(e){var t;return null===(t=e.widgetConfig.voiceConfig)||void 0===t?void 0:t.enableBackendElevenLabsSocket},elevenLabsConnectionConfigs(e){var t;return null===(t=e.widgetConfig.voiceConfig)||void 0===t?void 0:t.elevenLabsConnectionConfigs},getProgressiveTypingIndicatorConfig:e=>e.progressiveTypingIndicatorConfig,typingIndicatorSoundConfig(e){var t;return null===(t=e.widgetConfig)||void 0===t?void 0:t.typingIndicatorSound},isUserResponseBubbleMaxWidthEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n||null===(i=n.chatBubble)||void 0===i?void 0:i.setUserResponseWidthToMax)||!1},isBotResponseBubbleMaxWidthEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n||null===(i=n.chatBubble)||void 0===i?void 0:i.setBotResponseWidthToMax)||!1},scanFileForMalwareEnabled(e){var t;return(null===(t=e.widgetConfig)||void 0===t?void 0:t.scanFileForMalwareEnabled)||!1},getCustomFontFamily(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontFamily)||void 0===i?void 0:i.value)||"Proxima Nova"},getUserDefinedFontFamily(e){var t,n,i;const o=null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontFamily)||void 0===i?void 0:i.value;var a,s,r,l,c,u,d,h,p,g;return"Custom"===o?(null===(a=e.widgetConfig)||void 0===a||null===(s=a.font)||void 0===s||null===(r=s.fontFamily)||void 0===r||null===(l=r.customFonts)||void 0===l||null===(c=l.FileLink)||void 0===c?void 0:c.family)||(null===(u=e.widgetConfig)||void 0===u||null===(d=u.font)||void 0===d||null===(h=d.fontFamily)||void 0===h||null===(p=h.customFonts)||void 0===p||null===(g=p.googleFont)||void 0===g?void 0:g.family):o},isFontFamilyChatInterfaceOverrideEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontFamily)||void 0===i?void 0:i.overrideChatInterfaceContent)||!1},isFontFamilyWFContentOverrideEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontFamily)||void 0===i?void 0:i.overrideWorkflowContent)||!1},isFontSizeChatInterfaceOverrideEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontSize)||void 0===i?void 0:i.overrideChatInterfaceContent)||!1},isFontSizeWFContentOverrideEnabled(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontSize)||void 0===i?void 0:i.overrideWorkflowContent)||!1},getFontSizeType(e){var t,n,i;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.font)||void 0===n||null===(i=n.fontSize)||void 0===i?void 0:i.value)||"default"},getBrowserFontSizeSetting:e=>e.browserFontSizeSetting,languageVoiceMap(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.voiceConfig)||void 0===n?void 0:n.languageVoiceMap)||{}},autoDetectLanguages(e){var t,n;return(null===(t=e.widgetConfig)||void 0===t||null===(n=t.voiceConfig)||void 0===n?void 0:n.azureAutoDetectLanguages)||[]},formEncryptionPublicKey:e=>e.formEncryptionPublicKey||"",proactiveTriggerType(e){var t;return null===(t=e.widgetConfig)||void 0===t?void 0:t.proactiveTriggerType},botPCIPolicy:e=>e.botPCIPolicy||{},showAcceptance(e){var t;return(null===(t=e.widgetConfig)||void 0===t?void 0:t.showAcceptance)||!1},userTypingEvent(e){var t;return(null===(t=e.widgetConfig)||void 0===t?void 0:t.userTypingEvent)||!1}};i.a.use(o.a);const kt=new o.a.Store({state:a.a,actions:Ft,mutations:b,getters:Mt});var Bt=t.a=kt},109:function(e,t,n){"use strict";t.a={isEmail:e=>!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),isName:e=>!!/^([a-zA-Z ]){2,30}$/.test(e.trim()),isEmpty:e=>e&&e.trim().length>0,isRequired:e=>!!e}},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(9),o=n.n(i),a=n(57),s=n.n(a),r=n(82);const l=["name","message"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}class u{constructor(e){let{name:t=null,message:n=null}=e,i=s()(e,l);new r.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t,message:n},i)).sendLogs({logLevel:"warn"})}}},110:function(e,t,n){"use strict";var i=n(9),o=n.n(i),a=n(3),s=n.n(a),r=n(169),l=n(2),c=n(15),u=n(11),d=n(13);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a={getAttachmentSizeByURL:e=>s()((function*(){try{const t=yield fetch(e,{method:"HEAD"});if(t.ok){const e=t.headers.get("Content-Length");if(e)return parseInt(e,10)}}catch(e){console.error("Error getting image size:",e)}}))(),getPreSignedPostURL:e=>s()((function*(){try{var t;return null===(t=(yield c.a.request({url:"/api/upload",method:"post",headers:Object(d.a)(),data:e,cancelToken:Object(l.cancelHTTPRequests)()})).data)||void 0===t?void 0:t.preSignedUrl}catch{throw new u.a({name:"UploadError",message:"Failed to generate pre-signed URL"})}}))(),getPreSignedDownloadUrl:e=>s()((function*(){try{var t;return null===(t=(yield c.a.request({url:"/api/download",method:"post",headers:Object(d.a)(),data:e,cancelToken:Object(l.cancelHTTPRequests)()})).data)||void 0===t?void 0:t.preSignedUrl}catch{throw new u.a({name:"UploadError",message:"Failed to generate pre-signed download URL"})}}))(),getDownloadFile:e=>s()((function*(){try{return yield c.a.request({url:"/api/download/file",method:"post",headers:Object(d.a)(),data:e,responseType:"blob",cancelToken:Object(l.cancelHTTPRequests)()})}catch{throw new u.a({name:"UploadError",message:"Failed to generate pre-signed download URL"})}}))(),getChatTranscript:()=>s()((function*(){try{return yield c.a.request({url:"/api/downloadTranscript",method:"get",headers:p(p({},Object(d.a)()),{},{"x-cdn-url":Object(l.getCdnBaseUrl)()}),cancelToken:Object(l.cancelHTTPRequests)()})}catch{throw new u.a({name:"DownloadError",message:"Failed to generate chatTranscript download URL"})}}))(),scanFileForMalware:e=>s()((function*(){try{const t=new FormData;t.append("FILES",e);const n=(yield c.a.request({url:"/api/scan",method:"post",headers:p(p({},Object(d.a)()),{},{"Content-Type":"multipart/form-data"}),data:t,cancelToken:Object(l.cancelHTTPRequests)()})).data;if(!n.success||!n.data||!n.data.result)throw new Error("Invalid response format from scan service");const i=n.data.result[0];return{name:i.name,isInfected:i.is_infected,viruses:i.viruses}}catch{throw new u.a({name:"ScanError",message:"Failed to scan file for malicious content"})}}))(),uploadFileToS3ByPreSignedURL:(e,t,n)=>s()((function*(){var i=new window.FormData;for(let e in n)i.append(e,n[e]);i.append("acl","public-read"),i.append("Content-Type",e.type),i.append("file",e);try{return r.a.post(t,i)}catch(e){throw new u.a({name:"UploadError",message:"Error in uploading to pre-signed url. "+e.message})}}))()}},111:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m}));var i=n(3),o=n.n(i),a=n(15),s=n(23),r=n(13),l=n(2);function c(e){return u.apply(this,arguments)}function u(){return(u=o()((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){try{return yield a.a.request({method:"post",url:"/api/login",data:t,headers:Object(r.a)([{key:"x-auth-token",value:e}]),cancelToken:Object(l.cancelHTTPRequests)()})}catch(e){throw new s.a({name:"Authentication - LOGIN",message:"Could not login user",error:e})}}()}))).apply(this,arguments)}function d(){return h.apply(this,arguments)}function h(){return(h=o()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield a.a.request({method:"post",url:"/api/logout",data:e,headers:Object(r.a)(),cancelToken:Object(l.cancelHTTPRequests)()})}catch(e){throw new s.a({name:"Authentication - LOGIN",message:"Could not login user",error:e})}}()}))).apply(this,arguments)}function p(){return g.apply(this,arguments)}function g(){return(g=o()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield a.a.request({method:"post",url:"/api/updateAgentDeskConnectionStatus",data:e,headers:Object(r.a)(),cancelToken:Object(l.cancelHTTPRequests)()})}catch(e){throw new s.a({name:"Authentication - UPDATING AGENT DESK CONNECTION STATUS",message:"Could not update agent desk connection status",error:e})}}()}))).apply(this,arguments)}function m(){return f.apply(this,arguments)}function f(){return(f=o()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield a.a.request({method:"post",url:"/api/getAgentDeskConnectionStatus",data:e,headers:Object(r.a)(),cancelToken:Object(l.cancelHTTPRequests)()})}catch(e){throw new s.a({name:"Authentication - GET AGENT DESK CONNECTION STATUS",message:"Could not get agent desk connection status",error:e})}}()}))).apply(this,arguments)}},114:function(e,t,n){"use strict";var i=n(1),o=n(80);const a=new class{constructor(){this.init=this.init.bind(this),this.textareFont=this.textareFont.bind(this),this.currentFontFamily="proxima-nova, sans-serif"}textareFont(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"proxima-nova, sans-serif",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentFontFamily=e;const n=t?`textarea, input, button, option, select { font-family: ${e}  }`:`textarea, input, button, option, select { font-family: ${e+" ,sans-serif"}  }`,i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");i.appendChild(o),o.type="text/css",o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}init(){var e,t,n,a;const s=i.a.getters.isFontFamilyChatInterfaceOverrideEnabled,r=i.a.getters.getCustomFontFamily,l=(null===(e=i.a.state.widgetConfig)||void 0===e||null===(t=e.font)||void 0===t||null===(n=t.fontFamily)||void 0===n?void 0:n.customFonts)||(null===(a=i.a.state.widgetConfig)||void 0===a?void 0:a.customFonts);if(s){if("Custom"!==r)document.body.style.setProperty("font-family",o.a[r],"important"),this.textareFont(o.a[r],!0);else if("Custom"===r&&l){const{googleFont:e,FileLink:t=""}=l;this.applyCustomFontFamily(e,t,!0)}return}if(!l)return l;const{isEnable:c=!1,fontType:u,googleFont:d,FileLink:h=""}=l;if(c){if("arial"==u||"helvetica"==u)return document.body.style.fontFamily=u,void this.textareFont(u);"CUSTOM"==u&&this.applyCustomFontFamily(d,h)}else this.textareFont()}applyCustomFontFamily(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="string"==typeof t?t:t&&t.url;let o=(t&&"object"==typeof t?t.family:void 0)||e&&e.family;if(i){if(!o)try{o=(i.split("/").pop()||"").replace(/\.[^/.]+$/,"")||void 0}catch(e){console.log(e)}if(o){new FontFace(o,`url(${i})`).load().then((function(e){document.fonts.add(e)})).catch((function(){})),document.body.style.fontFamily=o+" ,sans-serif",this.textareFont(o,n)}}else if(e){const{url:t,family:i}=e;if(t&&i){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.href=t,document.head.appendChild(e),document.body.style.fontFamily=i+" ,sans-serif",this.textareFont(i,n)}}}getCurrentFontFamily(){const e=i.a.getters.isFontFamilyChatInterfaceOverrideEnabled,t=i.a.getters.getCustomFontFamily;return e?"Custom"!==t?o.a[t]||this.currentFontFamily||"proxima-nova, sans-serif":i.a.getters.getUserDefinedFontFamily:"proxima-nova, sans-serif"}};t.a=a},116:function(e,t,n){"use strict";var i=n(3),o=n.n(i),a=n(9),s=n.n(a),r=n(6),l=n(0),c=n(2),u=n(1);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={identify(e,t){try{window.analytics.identify(e,t)}catch(e){console.log("Error in identify Segment API call",e.message)}},track(e,t){try{var n;const{getBotRefId:i}=(null===u.a||void 0===u.a?void 0:u.a.getters)||{};t=h(h({conversationId:Object(r.a)(l.i.SESSION.CONVERSATION_ID),userId:null===u.a||void 0===u.a||null===(n=u.a.getters)||void 0===n?void 0:n.getUserId,botRefId:i},Object(c.getVisitorAttributes)()),t),window.analytics.track(e,t)}catch(e){console.log("Error in Track Segment API call",e)}},page(e){let{name:t,properties:n}=e;try{window.analytics.page({name:t,properties:n})}catch(e){console.log("Error in Page Segment API call",e.message)}},group(e){let{groupId:t,traits:n}=e;try{window.analytics.group(t,n)}catch(e){console.log("Error in Group Segment API call",e.message)}},alias(e,t){try{window.analytics.alias({previousId:e,userId:t})}catch(e){console.log("Error in Alias Segment API call",e.message)}}};var g={sendEvent:function(e,t){p.track(e,t)}};let m=!1;function f(e){return E.apply(this,arguments)}function E(){return(E=o()((function*(e){const t=window.analytics=window.analytics||[];if(!t.initialize&&!m)if(m=!0,t.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{t.invoked=!0,t.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],t.factory=function(e){return function(){const n=Array.prototype.slice.call(arguments);return n.unshift(e),t.push(n),t}};for(let e=0;e<t.methods.length;e++){const n=t.methods[e];t[n]=t.factory(n)}t.load=function(e,n){let i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js",i.id="segment-script";let o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o),t._loadOptions=n},t.SNIPPET_VERSION="4.15.2",t.load(e)}}))).apply(this,arguments)}function v(){return(v=o()((function*(e){yield f(e)}))).apply(this,arguments)}t.a={page:p,global:g,loadSegment:f,loadSegmentScript:function(e){return v.apply(this,arguments)}}},120:function(e,t,n){"use strict";n.r(t);var i={props:{fillColor:{type:String,default:"#6D6D6D"},width:{type:[String,Number],default:20},height:{type:[String,Number],default:20}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{width:this.width,height:this.height,viewBox:"0 0 22 21",fill:this.fillColor,xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M9.99 0C4.47 0 0 4.48 0 10C0 15.52 4.47 20 9.99 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 9.99 0ZM16.92 6H13.97C13.65 4.75 13.19 3.55 12.59 2.44C14.43 3.07 15.96 4.35 16.92 6ZM10 2.04C10.83 3.24 11.48 4.57 11.91 6H8.09C8.52 4.57 9.17 3.24 10 2.04ZM2.26 12C2.1 11.36 2 10.69 2 10C2 9.31 2.1 8.64 2.26 8H5.64C5.56 8.66 5.5 9.32 5.5 10C5.5 10.68 5.56 11.34 5.64 12H2.26ZM3.08 14H6.03C6.35 15.25 6.81 16.45 7.41 17.56C5.57 16.93 4.04 15.66 3.08 14ZM6.03 6H3.08C4.04 4.34 5.57 3.07 7.41 2.44C6.81 3.55 6.35 4.75 6.03 6ZM10 17.96C9.17 16.76 8.52 15.43 8.09 14H11.91C11.48 15.43 10.83 16.76 10 17.96ZM12.34 12H7.66C7.57 11.34 7.5 10.68 7.5 10C7.5 9.32 7.57 8.65 7.66 8H12.34C12.43 8.65 12.5 9.32 12.5 10C12.5 10.68 12.43 11.34 12.34 12ZM12.59 17.56C13.19 16.45 13.65 15.25 13.97 14H16.92C15.96 15.65 14.43 16.93 12.59 17.56ZM14.36 12C14.44 11.34 14.5 10.68 14.5 10C14.5 9.32 14.44 8.66 14.36 8H17.74C17.9 8.64 18 9.31 18 10C18 10.69 17.9 11.36 17.74 12H14.36Z"}})])}),[],!1,null,null,null);t.default=a.exports},13:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"h",(function(){return w})),n.d(t,"a",(function(){return P})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"j",(function(){return D})),n.d(t,"c",(function(){return S})),n.d(t,"i",(function(){return F})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return O}));var i=n(9),o=n.n(i),a=n(3),s=n.n(a),r=n(21),l=n.n(r),c=n(15),u=n(1),d=n(6),h=n(2),p=n(0),g=n(41),m=n(11),f=n(40);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){return _.apply(this,arguments)}function _(){return(_=s()((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/webhook-history",data:t,headers:v(v({},P()),{},{historyType:e}),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_HISTORY,t}}()}))).apply(this,arguments)}function S(e){return b.apply(this,arguments)}function b(){return(b=s()((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/webhook-history-v2",data:t,headers:v(v({},P()),{},{historyType:e}),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_HISTORY,t}}()}))).apply(this,arguments)}function O(e){return I.apply(this,arguments)}function I(){return(I=s()((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/v3/webhook-history",data:t,headers:v(v(v({},n),P()),{},{historyType:e}),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_HISTORY,t}}()}))).apply(this,arguments)}function y(){return A.apply(this,arguments)}function A(){return(A=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{const t=yield c.a.request({method:"post",url:"/api/webhook-agent-message",data:e,headers:P(),cancelToken:Object(h.cancelHTTPRequests)()});return Object(h.checkErrorFromSocial)(t),t}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.AGENT_WEBHOOK_MESSAGE,new m.a({name:"Action",message:"Error while sending agent message: "+e.message,error:Object(h.addCustomErrors)(t)||{}})}}()}))).apply(this,arguments)}function C(){return N.apply(this,arguments)}function N(){return(N=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/webhook-agent-info",data:e,headers:P(),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.AGENT_INFO_WEBHOOK_MESSAGE,t}}()}))).apply(this,arguments)}function D(){return R.apply(this,arguments)}function R(){return(R=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(t){const n=null==e||null===(t=e.requestBody)||void 0===t?void 0:t.conversationId;try{return yield c.a.request({method:"post",url:"/api/webhook-event",data:e,headers:v(v({},P()),n&&{"x-conversation-id":n}),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_EVENT,t}}()}))).apply(this,arguments)}function w(){return L.apply(this,arguments)}function L(){return(L=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{var t,n;const i=(null===(t=u.a.getters)||void 0===t?void 0:t.botPCIPolicy)||{},{text:o,label:a}=e.requestBody.messagePayload,s=(null===(n=u.a.state.widgetConfig)||void 0===n?void 0:n.isSensitiveDataMaskingEnabled)&&!o.startsWith("event://;"),r=l()(e);s&&(r.requestBody.messagePayload.text=yield Object(f.d)(i,o,u.a.getters.formEncryptionPublicKey),r.requestBody.messagePayload.label=yield Object(f.d)(i,a,u.a.getters.formEncryptionPublicKey));return yield c.a.request({method:"post",url:"/api/webhook-message",data:r,headers:P(),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_MESSAGE,t}}()}))).apply(this,arguments)}const P=function(){var e,t,n,i;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=Object(d.a)(p.i.SESSION.CONVERSATION_ID),s=v(v({"Content-Type":"application/json","x-bot-ref-id":null===u.a||void 0===u.a||null===(e=u.a.getters)||void 0===e?void 0:e.getBotRefId},a&&{"x-conversation-id":a}),{},{"x-widget-id":null===u.a||void 0===u.a||null===(t=u.a.getters)||void 0===t?void 0:t.getWidgetId,"x-user-id":null===u.a||void 0===u.a||null===(n=u.a.getters)||void 0===n?void 0:n.getUserId,"x-sdk":"web"}),r=(null===(i=u.a.state.widgetConfig)||void 0===i?void 0:i.isAuthenticationEnabled)||!1;var l;(U("x-auth-enabled",r,s),r&&Object(h.isAuthTokenPresent)())&&U("x-auth-token",(null===u.a||void 0===u.a||null===(l=u.a.state)||void 0===l?void 0:l.authToken)||Object(d.a)(p.i.AUTH.AUTH_TOKEN),s);return o.forEach((function(e){return U(e.key,e.value,s)})),s},U=function(e,t,n){n[e]=t};function F(){return M.apply(this,arguments)}function M(){return(M=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/query-analyzer",data:e,headers:P(),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_MESSAGE,t}}()}))).apply(this,arguments)}function k(){return B.apply(this,arguments)}function B(){return(B=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){try{return yield c.a.request({method:"post",url:"/api/response-analyzer",data:e,headers:P(),cancelToken:Object(h.cancelHTTPRequests)()})}catch(e){const t=Object(h.checkErrorFromSocial)(null==e?void 0:e.response);throw t.customMessage=g.a.WEBHOOK_MESSAGE,t}}()}))).apply(this,arguments)}},15:function(e,t,n){"use strict";var i=n(169),o=n(2);const a=i.a.create({baseURL:Object(o.getSdkCDNFromIframe)(),headers:{"Content-Type":"application/json",href:window.parent.location.href},params:{}});t.a=a},159:function(e,t,n){"use strict";n.r(t);var i={props:{fillColor:{type:String,default:"#6D6D6D"}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",fill:this.fillColor}},[e("path",{attrs:{d:"M5 19q-.425 0-.713-.288Q4 18.425 4 18t.287-.712Q4.575 17 5 17h1v-7q0-2.075 1.25-3.688Q8.5 4.7 10.5 4.2v-.7q0-.625.438-1.062Q11.375 2 12 2t1.062.438q.438.437.438 1.062v.7q2 .5 3.25 2.112Q18 7.925 18 10v7h1q.425 0 .712.288.288.287.288.712t-.288.712Q19.425 19 19 19Zm7-7.5ZM12 22q-.825 0-1.412-.587Q10 20.825 10 20h4q0 .825-.587 1.413Q12.825 22 12 22Zm-4-5h8v-7q0-1.65-1.175-2.825Q13.65 6 12 6q-1.65 0-2.825 1.175Q8 8.35 8 10Z"}})])}),[],!1,null,null,null);t.default=a.exports},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(9),o=n.n(i),a=n(57),s=n.n(a),r=n(82),l=n(1);const c=["name","message"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}class d{constructor(e){let{name:t=null,message:n=null}=e,i=s()(e,c);var a;(null===l.a||void 0===l.a||null===(a=l.a.getters)||void 0===a?void 0:a.isResponseAnalyzerEnabled)&&(i.logSource="ResponseAnalyser"),new r.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t,message:n},i)).sendLogs({logLevel:"info"})}}},160:function(e,t,n){"use strict";n.r(t);var i={props:{fillColor:{type:String,default:"#6D6D6D"},width:{type:[String,Number],default:20},height:{type:[String,Number],default:20}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{width:this.width,height:this.height,viewBox:"0 0 20 20",fill:this.fillColor,xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M8 16C10.2333 16 12.125 15.225 13.675 13.675C15.225 12.125 16 10.2333 16 8C16 5.76667 15.225 3.875 13.675 2.325C12.125 0.775 10.2333 0 8 0C6.85 0 5.75 0.2375 4.7 0.7125C3.65 1.1875 2.75 1.86667 2 2.75V1C2 0.716667 1.90417 0.479167 1.7125 0.2875C1.52083 0.0958333 1.28333 0 1 0C0.716666 0 0.479166 0.0958333 0.287499 0.2875C0.0958328 0.479167 0 0.716667 0 1V6C0 6.28333 0.0958328 6.52083 0.287499 6.7125C0.479166 6.90417 0.716666 7 1 7H6C6.28333 7 6.52083 6.90417 6.7125 6.7125C6.90417 6.52083 7 6.28333 7 6C7 5.71667 6.90417 5.47917 6.7125 5.2875C6.52083 5.09583 6.28333 5 6 5H2.8C3.33333 4.06667 4.0625 3.33333 4.9875 2.8C5.9125 2.26667 6.91667 2 8 2C9.66667 2 11.0833 2.58333 12.25 3.75C13.4167 4.91667 14 6.33333 14 8C14 9.66667 13.4167 11.0833 12.25 12.25C11.0833 13.4167 9.66667 14 8 14C6.86667 14 5.82917 13.7125 4.8875 13.1375C3.94583 12.5625 3.21667 11.7917 2.7 10.825C2.56667 10.5917 2.37917 10.4292 2.1375 10.3375C1.89583 10.2458 1.65 10.2417 1.4 10.325C1.13333 10.4083 0.941667 10.5833 0.825 10.85C0.708333 11.1167 0.716666 11.3667 0.849999 11.6C1.53333 12.9333 2.50833 14 3.775 14.8C5.04167 15.6 6.45 16 8 16Z"}})])}),[],!1,null,null,null);t.default=a.exports},161:function(e,t,n){"use strict";n.r(t);var i={props:{fill:{type:String,default:"none"}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{width:"7",height:"12",viewBox:"0 0 7 12",fill:this.fill,xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M0.700781 11.2998C0.517448 11.1165 0.425781 10.8831 0.425781 10.5998C0.425781 10.3165 0.517448 10.0831 0.700781 9.8998L4.60078 5.9998L0.700781 2.0998C0.517448 1.91647 0.425781 1.68314 0.425781 1.3998C0.425781 1.11647 0.517448 0.883138 0.700781 0.699804C0.884114 0.516471 1.11745 0.424805 1.40078 0.424805C1.68411 0.424805 1.91745 0.516471 2.10078 0.699804L6.70078 5.2998C6.80078 5.3998 6.87178 5.50814 6.91378 5.6248C6.95511 5.74147 6.97578 5.86647 6.97578 5.9998C6.97578 6.13314 6.95511 6.25814 6.91378 6.3748C6.87178 6.49147 6.80078 6.5998 6.70078 6.6998L2.10078 11.2998C1.91745 11.4831 1.68411 11.5748 1.40078 11.5748C1.11745 11.5748 0.884114 11.4831 0.700781 11.2998Z",fill:this.fill}})])}),[],!1,null,null,null);t.default=a.exports},162:function(e,t,n){"use strict";n.r(t);var i={props:{fillColor:{type:String,default:"grey"}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:this.fillColor,height:"24",width:"24"}},[e("path",{attrs:{d:"m13.3 17.3-4.6-4.6q-.15-.15-.212-.325-.063-.175-.063-.375t.063-.375q.062-.175.212-.325l4.6-4.6q.275-.275.7-.275.425 0 .7.275.275.275.275.7 0 .425-.275.7L10.8 12l3.9 3.9q.275.275.275.7 0 .425-.275.7-.275.275-.7.275-.425 0-.7-.275Z"}})])}),[],!1,null,null,null);t.default=a.exports},163:function(e,t,n){"use strict";t.a=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EndChatSeparator";const o={isMessageSeparator:!0,content:{component:i,message:t,type:e||"CONFIG"},timestamp:n,messages:[]};return o}},164:function(e,t,n){const i=n(95),o=n(2).getDeviceType;function a(e,t){const n={"very-small":.8,small:.9,medium:1,large:1.2,"very-large":1.5}[t&&t.$store&&t.$store.getters&&t.$store.getters.getBrowserFontSizeSetting?t.$store.getters.getBrowserFontSizeSetting:"medium"]||1;if("string"==typeof e){const t=e.match(/^([0-9.]+)([a-z%]*)$/i);if(t){return parseFloat(t[1])*n+(t[2]||"")}return e}return"number"==typeof e?e*n:e}function s(){return"mobile"!==o()&&this.$store.state.isChatWidgetFullScreen}e.exports={getFontSize:function(e,t){const n=void 0===(t=t||{}).forChatInterface||t.forChatInterface,o=void 0===t.forIntentResponse||t.forIntentResponse;let r="default";if(r=n?this&&this.$store&&this.$store.getters&&this.$store.getters.getFontSizeType&&this.$store.getters.isFontSizeChatInterfaceOverrideEnabled?this.$store.getters.getFontSizeType:"default":o?this&&this.$store&&this.$store.getters&&this.$store.getters.getFontSizeType&&this.$store.getters.isFontSizeWFContentOverrideEnabled?this.$store.getters.getFontSizeType:"default":this.$store.getters.getFontSizeType,!i[e])return a("16px",this);if(i[e][r]){let t=i[e][r];if(s.call(this)&&"string"==typeof t&&t.endsWith("px")){t=parseInt(t,10)+2+"px"}return a(t,this)}return a("16px",this)},getBrowserFontSizeSetting:function(e){if("undefined"==typeof window||"undefined"==typeof document)return e&&"function"==typeof e.dispatch&&e.dispatch("updateBrowserFontSizeSetting","medium"),"medium";const t=window.getComputedStyle(document.documentElement).fontSize,n=parseFloat(t);let i="medium";return i=n<11.5?"very-small":n<15.5?"small":n<18.5?"medium":n<21?"large":"very-large",e&&"function"==typeof e.dispatch&&e.dispatch("updateBrowserFontSizeSetting",i),i}}},165:function(e,t,n){"use strict";n.r(t);var i={props:{fillColor:{type:String,default:"#6D6D6D"}}},o=n(8),a=Object(o.a)(i,(function(){var e=this._self._c;return e("svg",{attrs:{width:"18",height:"18",viewBox:"0 0 18 18",fill:this.fillColor,xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M5.675 13.275C5.85833 13.0583 5.95 12.8123 5.95 12.537C5.95 12.2623 5.85833 12.0333 5.675 11.85L3.825 10H11C11.2833 10 11.5207 9.904 11.712 9.712C11.904 9.52067 12 9.28333 12 9C12 8.71667 11.904 8.479 11.712 8.287C11.5207 8.09567 11.2833 8 11 8H3.825L5.675 6.15C5.875 5.95 5.975 5.71267 5.975 5.438C5.975 5.16267 5.875 4.925 5.675 4.725C5.49167 4.525 5.26233 4.425 4.987 4.425C4.71233 4.425 4.48333 4.51667 4.3 4.7L0.700001 8.3C0.6 8.4 0.528999 8.50833 0.487 8.625C0.445665 8.74167 0.424999 8.86667 0.424999 9C0.424999 9.13333 0.445665 9.25833 0.487 9.375C0.528999 9.49167 0.6 9.6 0.700001 9.7L4.3 13.3C4.51667 13.5167 4.754 13.6123 5.012 13.587C5.27067 13.5623 5.49167 13.4583 5.675 13.275ZM16 18C16.55 18 17.021 17.8043 17.413 17.413C17.8043 17.021 18 16.55 18 16V2C18 1.45 17.8043 0.979 17.413 0.587C17.021 0.195667 16.55 0 16 0H10C9.71667 0 9.479 0.0956666 9.287 0.287C9.09567 0.479 9 0.716667 9 1C9 1.28333 9.09567 1.52067 9.287 1.712C9.479 1.904 9.71667 2 10 2H16V16H10C9.71667 16 9.479 16.096 9.287 16.288C9.09567 16.4793 9 16.7167 9 17C9 17.2833 9.09567 17.5207 9.287 17.712C9.479 17.904 9.71667 18 10 18H16Z",fill:"#6D6D6D"}})])}),[],!1,null,null,null);t.default=a.exports},166:function(e,t,n){"use strict";n.r(t);var i=n(8),o=Object(i.a)({},(function(){var e=this._self._c;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"}},[e("path",{attrs:{d:"m18.042 15.604-1.23-1.229q.313-.292.459-.656.146-.365.146-.823 0-.854-.605-1.458-.604-.605-1.458-.605h-1.229V9.167q0-1.709-1.208-2.917Q11.708 5.042 10 5.042q-.542 0-1.052.135t-.927.385L6.75 4.292q.729-.5 1.531-.75.802-.25 1.719-.25 2.438 0 4.156 1.677 1.719 1.677 1.719 4.114 1.417.167 2.354 1.261.938 1.094.938 2.552 0 .833-.313 1.521-.312.687-.812 1.187Zm-2.313 2.604-1.521-1.5h-8.75q-1.958 0-3.291-1.343Q.833 14.021.833 12.062q0-1.583.979-2.864.98-1.281 2.542-1.636.042-.124.084-.281.041-.156.104-.281L1.708 4.167q-.25-.25-.239-.604.01-.355.26-.605t.604-.25q.355 0 .605.25L16.958 17q.25.25.25.604t-.25.604q-.25.25-.614.25-.365 0-.615-.25Zm-10.271-3.25h7.021L5.917 8.396q-.021.208-.032.396-.01.187-.01.375h-.417q-1.187 0-2.031.854-.844.854-.844 2.041 0 1.209.834 2.053.833.843 2.041.843Zm6.959-4.979Zm-3.229 1.688Z"}})])}),[],!1,null,null,null);t.default=o.exports},170:function(e,t,n){"use strict";t.a={Text:"ai.msg.domain.responses.core.Text",Video:"ai.msg.domain.responses.core.Video",Image:"ai.msg.domain.responses.core.Image",Card:"ai.msg.domain.responses.core.Card",Carousel:"ai.msg.domain.responses.core.Carousel",MessageInfoAttachment:"ai.msg.domain.responses.core.MessageInfoAttachment",File:"ai.msg.domain.responses.core.GenericFileAttachment",ANSWER_NET_MULTI_SOURCE:"ANSWER_NET_MULTI_SOURCE",NBA_RESPONSE:"NBA_RESPONSE",EMAIL:"ai.msg.domain.responses.core.Email"}},171:function(e,t,n){"use strict";var i={name:"preloader",computed:{isDisneyDemoBot(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.brandGPT)||void 0===t?void 0:t.enable)||!1},loaderStyles(){return this.isDisneyDemoBot?{background:`url(${this.$cdn}/images/loader-72w.svg) center no-repeat`}:{background:`url(${this.$cdn}/images/loading_anim.svg) center no-repeat`}},styleForForms(){const e={width:this.width+"px",height:this.height+"px",background:"inherit",float:"right",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"};return this.isPreviousconversationLoading&&(e.padding="15px 0"),e}},props:{width:{type:Number,default:98},height:{type:Number,default:40},background:{type:String,default:"#fff"},loaderType:{type:String,default:"widgetLoader"},isPreviousconversationLoading:{type:Boolean,default:!1}}},o=(n(526),n(8)),a=Object(o.a)(i,(function(){var e=this._self._c;return e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"preloader",style:["formSubmissionLoader"===this.loaderType?this.styleForForms:"{}"]},[e("div",{staticClass:"loader",style:this.loaderStyles})])])}),[],!1,null,"e48cc43e",null);t.a=a.exports},172:function(e,t,n){"use strict";var i=n(22),o={name:"ButtonGroup",mixins:[n(25).a],components:{BaseIcon:i.a},props:{buttons:{type:Array,default:function(){return[]}},truncateValue:{type:Number,default:35}},computed:{isChatWidgetFullScreen(){return this.$store.state.isChatWidgetFullScreen}},methods:{handleButtonClicked(e){var t;const n=e.target.parentNode.id.split("-").at(-1)-1,i=null===(t=this.buttons[n])||void 0===t?void 0:t.url;i&&window.open(i,"noopener","noreferrer")},getTruncatedText(e){return`${e.substring(0,this.truncateValue)}${e.length>this.truncateValue?"...":""}`}}},a=(n(511),n(8)),s=Object(a.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"button-group-wrapper"},e._l(e.buttons,(function(n,i){return t("div",{key:i+1,staticClass:"single-button-container tooltip",class:{"compact-screen-source-button-container":!e.isChatWidgetFullScreen},attrs:{id:`sources-${n.text}-${i+1}`},on:{click:function(t){return t.stopPropagation(),e.handleButtonClicked.apply(null,arguments)}}},[t("span",{staticClass:"tooltiptext"},[e._v(e._s(n.url))]),e._v(" "),t("button",{staticClass:"single-button tab-focused-btn",class:{"compact-screen-source-single-button":!e.isChatWidgetFullScreen}},[t("div",{staticClass:"single-button-content"},[t("BaseIcon",{attrs:{name:n.image||"DescriptionIcon",height:"20px",width:"20px",fill:"#6D6D6D"}}),e._v(" "),t("p",{staticClass:"button-text",style:{fontSize:e.getFontSizeForResponse("bodyText",!1)}},[e._v(e._s(e.getTruncatedText(n.text)))])],1)])])})),0)}),[],!1,null,"cb2079d8",null);t.a=s.exports},173:function(e,t,n){"use strict";t.a={DEFAULT:"ENGLISH",ENGLISH:{BACK:"BACK",RESTART:"RESTART",SKIP:"SKIP"},SPANISH:{BACK:"Atrás",RESTART:"Reiniciar",SKIP:"Omitir"},FRENCH:{BACK:"Retour",RESTART:"Recommencer",SKIP:"Passer"}}},19:function(e,t,n){"use strict";t.a={POST_BACK:"POST_BACK",WEB:"WEB",CALL:"CALL",STATUS:"status",GMT:"GMT",CHAT_ENDED:"CHAT_ENDED",CHAT_ENDED_WITH_TRANSCRIPT:"CHAT_ENDED_WITH_TRANSCRIPT",SESSION_HAS_EXPIRED:"SESSION_HAS_EXPIRED",CHAT_RESTART:"CHAT_RESTART",IDLE_USER:"IDLE_USER",BACK:"BACK",RESTART:"RESTART",SKIP:"SKIP",SELECT:"SELECT",SELECT_FILE:"SELECT_FILE",DROP_AREA_TEXT_CW:"DROP_AREA_TEXT_CW",DRAG_DROP_TEXT:"DRAG_DROP_TEXT",DISMISS_CB_ON_CROSS:"dismissCalloutBubbleOnCross",USER_LAST_MESSAGE_STATUS:"USER_LAST_MESSAGE_STATUS",INCORRECT_INPUT_VALUE:"INCORRECT_INPUT_VALUE",REQUIRED_FIELD:"REQUIRED_FIELD",INVALID_VALIDATION:"INVALID_VALIDATION",QUICK_MENU:"QUICK_MENU",END_CHAT:"END_CHAT",SOUND:"SOUND",INPUT_PLACEHOLDER:"INPUT_PLACEHOLDER",REJECTED:"REJECTED",AGENT:"AGENT",BOT:"BOT",DEFAULT_COLOR:"#4D34E9",SESSION_BOT_STATUS:"isNetWindowMaximized",SESSION_BOT_UPDATED:"SESSION_BOT_UPDATED",NETOMI_LOADER:"net-loader",VISITOR:"Visitor",ZENDESK:"ZENDESK",SALESFORCE:"SALESFORCE",GENERIC_AGENTDESK:"GENERIC_AGENTDESK",PROACTIVE_GREETING_LABEL:"PROACTIVE_GREETING",HTTPS:"https:",LOCALHOST:"localhost",EVENT_LEARN_ATTRIBUTE:"event://;LEARN_ATTRIBUTE_EVENT;",SWITCH_INTENT_EVENT:"event://;SWITCH_INTENT;;TARGET_NODE::",MEDIA_UPLOADED:"event://;LEARN_ATTRIBUTE_EVENT;ATTACHMENT::value=Media has been uploaded",KEY_PREFIX:"net_",DISABLED:"disabled",HIDDEN:"hidden",DEPARTMENT:"department",END_CHAT_GREETING_DELAY:1e3,AWS_IOT:"AWS_IOT",CALLOUT_BUBBLE_TEXT:"CALLOUT_BUBBLE_TEXT",NETOMI_BOT:"Netomi Bot",NETOMI:"NETOMI",NETOMI_WEB_WIDGET:"NETOMI_WEB_WIDGET",DEFAUlT_IDLE_TIMEOUT:"1800000",DEVICE_TABLET_REGEX:/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i,DEVICE_MOBILE_REGEX:"/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/",CONNECTION_STATUS_LABEL:"connectionStatus",PUBLISH_EVENT_TO_IOT:"publishEventToIoT",OFFLINE_BANNER_TEXT:"OFFLINE_BANNER_TEXT",OFFLINE_MESSAGE_ERROR:"OFFLINE_MESSAGE_ERROR",SENT:"SENT",FAILED:"FAILED",ASTERISK:"*",WEBHOOK_HISTORY:"WEBHOOK_HISTORY",TYPING_INDICATOR_TIMEOUT:"TYPING_INDICATOR_TIMEOUT",DEFAULT_MIN_TIME_FOR_TYPING_INDICATOR:1500,DEFAULT_MAX_TIME_FOR_TYPING_INDICATOR:5e3,CSAT_RATE_LIMIT:2,CSAT_RATE_LIMIT_STATE:"CSATRateLimit",INFO:"INFO",CHANGE_LANGUAGE:"CHANGE_LANGUAGE",LANGUAGE:"LANGUAGE",CURRENT_LOCALE:"current_locale",END_CHAT_DISCLAIMER:"END_CHAT_DISCLAIMER",EMAIL_ADDRESS_LABEL:"EMAIL_ADDRESS_LABEL",ENTER_EMAIL_ID:"ENTER_EMAIL_ID",WAS_THIS_HELPFUL:"WAS_THIS_HELPFUL",SCREEN_READER_THUMBS_UP:"SCREEN_READER_THUMBS_UP",SCREEN_READER_THUMBS_DOWN:"SCREEN_READER_THUMBS_DOWN",END_CHAT_CONFIRM_BUTTON_CTA:"END_CHAT_CONFIRM_BUTTON_CTA",END_CHAT_CANCEL_BUTTON_CTA:"END_CHAT_CANCEL_BUTTON_CTA",EMPTY_HISTORY_CALL:"Empty history call",EMPTY_PROACTIVE_RESPONSE:"Empty proactive greetings response",EMPTY_CALLOUT_RESPONSE:"Empty callout greetings response",DEFAULT_LOGO_IMAGE:"https://chatwidget-plugin-dev1.s3.us-east-1.amazonaws.com/dev1/images/defaultLogo.png",DEFAULT_BOT_IMAGE:"https://chatwidget-plugin-dev1.s3.us-east-1.amazonaws.com/dev1/images/defaultBotImage.png",BRAND_GPT:"Brand GPT",ACTIONABLE:"Actionable",ARTICLES_OFFERS:"Articles & Offers",UNREAD_MESSAGES_STATE:"unreadMessagesState",MASKED:"MASKED",UNMASKED:"UNMASKED",KNOWLEDGE_AI_INPUT_BOX_PLACEHOLDER:"Ask a question...",FORM_FIELDS_SPECIAL_CHARS:[";","&","^$^","=","::","_"],DEFAULT_OUTPUT_KEY_INPUT_value:"DEFAULT_OUTPUT_KEY_INPUT::value",ACTIVE:"active",INACTIVE:"inactive",COMPLETED:"completed",DOWNLOAD:"DOWNLOAD",DOWNLOADING:"DOWNLOADING",DOWNLOADED:"DOWNLOADED",PILL_SEPERATOR:"---",BACK_TO_BOT_SYSTEM_EVENT:"BACK_TO_BOT_SYSTEM_EVENT",RESTART_CHAT_LABEL:"Chat Restarted",CHAT_RATED_GOOD:"Chat rated Good",CHAT_RATED_BAD:"Chat rated Bad",CHAT_RATING_REMOVED:"Chat rating removed",SURVEY_SUBMITTED:"Survey Submitted",STREAM_TIME_FOR_EACH_CHUNK:150,LIMIT_REACHED:"Limit reached",RESTART_CHAT_PLACEMENT_MENU:"context_menu",RESTART_CHAT_PLACEMENT_INPUT_FIELD:"input_field",RESTART_PRIMARY_BTN_TEXT:"RESTART_PRIMARY_BTN_TEXT",RESTART_DISCLAIMER_TEXT:"If you perform this action, the conversation will be wiped up and start over",TEXT:"text",TRY_AGAIN:"Please try again.",FILE_NAME_UUID:"fileNameUUID",MANDATORY:"MANDATORY",GENERATED_BY_USER:"USER",GENERATED_BY_SYSTEM:"SYSTEM",MAIL_VALIDATION_MESSAGE:"MAIL_VALIDATION_MESSAGE",SETTINGS_LABEL:"SETTINGS_LABEL",MAXIMIZE_LABEL:"MAXIMIZE_LABEL",RESTORE_LABEL:"RESTORE_LABEL",HEADER_CLOSE_LABEL:"HEADER_CLOSE_LABEL",MINIMIZE_LABEL:"MINIMIZE_LABEL",TRANSCRIPT_LABEL:"TRANSCRIPT_LABEL",PRIMAR_COLOR_PTI:"#5177FF",SECONDARY_COLOR_PTI:"#D2E2FF",TERMS_AND_CONDITION_ACCEPTED_MESSAGE:{CHAT_WIDGET:function(e){return`You accepted the Terms of Service on ${e}.`},TRANSCRIPT:function(){return"User accepted Terms of Service"}}}},2:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getGradient",(function(){return F})),n.d(t,"setBrowserAndDeviceDetailsInStore",(function(){return M})),n.d(t,"isEndChatSuveyValid",(function(){return k})),n.d(t,"isEndChatGreetingValid",(function(){return B})),n.d(t,"handleEndChatSurveyError",(function(){return j})),n.d(t,"isEndChatSurveyPresentInCW",(function(){return x})),n.d(t,"isScheduleSurveyPresentInCW",(function(){return $})),n.d(t,"emitCustomFieldsToParent",(function(){return V})),n.d(t,"emitOauthEvents",(function(){return H})),n.d(t,"handleIfConversationIdNull",(function(){return G})),n.d(t,"updateUnreadIndicator",(function(){return W})),n.d(t,"isValidURL",(function(){return K})),n.d(t,"showMessageSeparatorPill",(function(){return q})),n.d(t,"clearTimersUponEndChat",(function(){return z})),n.d(t,"clearTimerForAgentDeskIdleTimeout",(function(){return Y})),n.d(t,"clearTimerForEndChat",(function(){return Q})),n.d(t,"clearIdleTimerForSurveyRule",(function(){return X})),n.d(t,"clearTimerForInputFieldTemporaryDisable",(function(){return J})),n.d(t,"clearTimerForInputFieldOnSendDisableTimer",(function(){return Z})),n.d(t,"loadBotDetails",(function(){return ee})),n.d(t,"getTimestampByTimezone",(function(){return ne})),n.d(t,"getDomainOutOfURL",(function(){return ie})),n.d(t,"getSourcesAsButtonsFromText",(function(){return oe})),n.d(t,"hideMessage",(function(){return ae})),n.d(t,"isAgentDeskEvent",(function(){return se})),n.d(t,"idleTimeSurveyRequestFormatter",(function(){return re})),n.d(t,"requestFormatter",(function(){return le})),n.d(t,"checkForGreetingsAndResetCookie",(function(){return ce})),n.d(t,"generateAttributes",(function(){return de})),n.d(t,"checkRenewTokenRequired",(function(){return he})),n.d(t,"getIdleTimeout",(function(){return pe})),n.d(t,"getEndChatGreetingDelay",(function(){return ge})),n.d(t,"getSupportIconWidthAndHeight",(function(){return me})),n.d(t,"debounced",(function(){return fe})),n.d(t,"receiveHistoryChats",(function(){return Ee})),n.d(t,"isTypeBOT",(function(){return ve})),n.d(t,"isMessageTypeInfo",(function(){return Te})),n.d(t,"getUserTimezone",(function(){return _e})),n.d(t,"getUserDateAndTime",(function(){return Se})),n.d(t,"formatTime",(function(){return be})),n.d(t,"formatDayTime",(function(){return Oe})),n.d(t,"extractQuickReplyOptions",(function(){return Ie})),n.d(t,"extractNBAOptions",(function(){return ye})),n.d(t,"emitEventToParentWindow",(function(){return Ae})),n.d(t,"isDateEqual",(function(){return Ce})),n.d(t,"getFileExtension",(function(){return Ne})),n.d(t,"formatBytes",(function(){return De})),n.d(t,"getDateBasedOnTimezone",(function(){return Re})),n.d(t,"compareDates",(function(){return we})),n.d(t,"isBotRefIdOrWidgetIdChanged",(function(){return Le})),n.d(t,"isWidgetDefaultOpened",(function(){return Pe})),n.d(t,"isUpdatedJustNow",(function(){return Ue})),n.d(t,"hasConversationInitiated",(function(){return Fe})),n.d(t,"isOauthEnabled",(function(){return Me})),n.d(t,"hasProActiveGreetingsTriggered",(function(){return ke})),n.d(t,"hasCalloutBubbleGreetingsTriggered",(function(){return Be})),n.d(t,"isChatNotStarted",(function(){return je})),n.d(t,"getStringFromUUID",(function(){return xe})),n.d(t,"addAlphaInHexColor",(function(){return $e})),n.d(t,"getShade",(function(){return Ve})),n.d(t,"validateHexCode",(function(){return He})),n.d(t,"getChatWidgetAlignment",(function(){return Ge})),n.d(t,"captureIoTLogs",(function(){return We})),n.d(t,"getDeviceType",(function(){return Ke})),n.d(t,"getVisitorAttributes",(function(){return qe})),n.d(t,"getCurrentOperatingSystem",(function(){return ze})),n.d(t,"refreshStorageAndClearChats",(function(){return Ye})),n.d(t,"isUserLoggedIn",(function(){return Qe})),n.d(t,"isAuthTokenPresent",(function(){return Xe})),n.d(t,"IoTPublishEvent",(function(){return Je})),n.d(t,"getSdkCDN",(function(){return Ze})),n.d(t,"getCdnBaseUrl",(function(){return et})),n.d(t,"getConstantValue",(function(){return tt})),n.d(t,"configureSoundInNotificationService",(function(){return nt})),n.d(t,"playNotificationSound",(function(){return it})),n.d(t,"isEndChatTriggerValidOnConnectionUpdate",(function(){return ot})),n.d(t,"updateConnectionStatus",(function(){return at})),n.d(t,"getSdkCDNFromIframe",(function(){return st})),n.d(t,"getBotRefIdFromIframe",(function(){return rt})),n.d(t,"decodeBase64UrlSafe",(function(){return lt})),n.d(t,"lazyLoadLiveAgent",(function(){return ct})),n.d(t,"getConnectionStatus",(function(){return dt})),n.d(t,"cancelHTTPRequests",(function(){return ht})),n.d(t,"hasProActiveGreetingsConfigured",(function(){return pt})),n.d(t,"showCWBasedOnScreenSize",(function(){return gt})),n.d(t,"getFilewithoutEXIFdata",(function(){return mt})),n.d(t,"isWindowMaximized",(function(){return Et})),n.d(t,"isIOS",(function(){return vt})),n.d(t,"isMacSafari",(function(){return Tt})),n.d(t,"clearAllSetTimeout",(function(){return _t})),n.d(t,"blankScreenCheck",(function(){return St})),n.d(t,"isBlankScreen",(function(){return bt})),n.d(t,"getTranslation",(function(){return Ot})),n.d(t,"getMinTimeForTypingIndicator",(function(){return It})),n.d(t,"getMaxTimeForTypingIndicator",(function(){return yt})),n.d(t,"checkErrorFromSocial",(function(){return At})),n.d(t,"addCustomErrors",(function(){return Ct})),n.d(t,"isDismissCalloutBubbleOnCrossEnabled",(function(){return Nt})),n.d(t,"checkForEmptyGreetingsResponse",(function(){return Dt})),n.d(t,"setNewUnreadMessagesText",(function(){return Rt})),n.d(t,"setFocusOnFirstInterativeNode",(function(){return wt})),n.d(t,"focusOnChatInputField",(function(){return Pt})),n.d(t,"updateCalloutBubble",(function(){return Ut})),n.d(t,"changeCWLanguage",(function(){return Mt})),n.d(t,"handleScrollToLastUserMessage",(function(){return kt})),n.d(t,"getLastUserMessageId",(function(){return Bt})),n.d(t,"setSupportIconPosition",(function(){return jt})),n.d(t,"removeConversationBeforeRestart",(function(){return xt})),n.d(t,"getPreviousTimestamp",(function(){return $t})),n.d(t,"isfullHistoryLoaded",(function(){return Vt})),n.d(t,"uploadOnS3",(function(){return Ht})),n.d(t,"getAttachmentTypeFromExtension",(function(){return Wt})),n.d(t,"sanitizeAttachmentTypes",(function(){return Kt})),n.d(t,"isVideoSupportedFormat",(function(){return qt})),n.d(t,"isImage",(function(){return zt})),n.d(t,"isVideo",(function(){return Yt})),n.d(t,"isSound",(function(){return Qt})),n.d(t,"isFileValid",(function(){return Xt})),n.d(t,"isFileSizeValid",(function(){return Jt})),n.d(t,"uploadFile",(function(){return Zt})),n.d(t,"setChatWidgetWidthAndHeight",(function(){return nn})),n.d(t,"validateAndGetDataInPercentage",(function(){return on})),n.d(t,"validateAndGetDataInPx",(function(){return an})),n.d(t,"isResponseBackendStreaming",(function(){return sn})),n.d(t,"getDataInChunks",(function(){return rn})),n.d(t,"addFileNameInStorage",(function(){return ln})),n.d(t,"getThemeDefaultColor",(function(){return cn})),n.d(t,"handleMissedMessages",(function(){return un})),n.d(t,"checkIfRequestIdExists",(function(){return hn})),n.d(t,"getEventDataPoints",(function(){return pn})),n.d(t,"convertUTCTimestampToLocalTimestamp",(function(){return gn})),n.d(t,"getScheduledAlert",(function(){return mn})),n.d(t,"getUpcomingScheduledAlert",(function(){return fn})),n.d(t,"isMediumPriorityAlertValid",(function(){return En})),n.d(t,"isMultiSourceLastExtension",(function(){return vn})),n.d(t,"removeCalloutBubbleContainer",(function(){return Tn})),n.d(t,"getVoiceIdFromLanguage",(function(){return _n})),n.d(t,"getVoiceNameAndLocaleFromLanguage",(function(){return Sn})),n.d(t,"getElevenLabsConnectionConfigs",(function(){return bn})),n.d(t,"renderCalloutBubble",(function(){return On})),n.d(t,"updateIframeHeaderTitle",(function(){return In})),n.d(t,"formatTimestampToMDYDate",(function(){return yn})),n.d(t,"logImportantLDFlags",(function(){return An}));var i=n(9),o=n.n(i),a=n(3),s=n.n(a),r=n(0),l=n(45),c=n(6),u=n(1),d=n(83),h=n(36),p=n(5),g=n(14),m=n(59),f=n(23),E=n(11),v=n(27),T=n(37),_=n(109),S=n(16),b=n(93),O=n(30),I=n(24),y=n(92),A=n(301),C=n(94),N=n(114),D=n(95),R=n.n(D),w=n(28),L=n(302);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t){if(null!=e&&e.length){if(1===e.length&&He(e[0])){const t=Ve(e[0],r.r.gradientDirectionConfig.shadeValue);return`linear-gradient(114deg, ${e[0]} 20%, ${t} 100%)`}return e.length>1?`linear-gradient(${r.r.gradientDirectionConfig.linearGradientDirection[t]}, ${e.join(", ")})`:""}}function M(){const e=navigator.userAgent,t=[{name:"Edge",regex:/Edg\/([0-9\.]+)/},{name:"Firefox",regex:/Firefox\/([0-9\.]+)/},{name:"Opera",regex:/(OPR|Opera)\/([0-9\.]+)/},{name:"Chrome",regex:/Chrome\/([0-9\.]+)/},{name:"Safari",regex:/Version\/([0-9\.]+).*Safari/},{name:"Internet Explorer",regex:/(MSIE |rv:)([0-9\.]+)/}];let n="Unknown",i="Unknown";for(const{name:o,regex:a}of t){const t=e.match(a);if(t){n=o,i=t[1];break}}const o=/Mobi|Android/i.test(e),a=/Tablet|iPad/i.test(e),s=o?"Mobile":a?"Tablet":"Desktop";let r="Unknown";const l=[{name:"Windows",regex:/Win/},{name:"MacOS",regex:/Mac/},{name:"Linux",regex:/Linux/},{name:"Android",regex:/Android/},{name:"iOS",regex:/like Mac/}];for(const{name:t,regex:n}of l)if(n.test(e)){r=t;break}u.a.dispatch("updateUserDeviceDetails",{browserName:n,browserVersion:i,os:r,deviceType:s})}function k(){const e=u.a.state.surveyRule.endChatRule.rule,t=ve(u.a.state.controlType);return Object.keys(e).length&&t&&!$()}function B(e){var t,n;return!e&&(null===(t=u.a.state.widgetConfig)||void 0===t||null===(n=t.endChat)||void 0===n?void 0:n.endChatGreeting)}function j(){var e;x()||"pending"===u.a.state.clearConversationState.status&&(u.a.state.isTriggerMinimizeValid&&u.a.dispatch("minimizeCW"),u.a.dispatch("updateTriggerMinimizeValidState",!1),u.a.dispatch("updateClearConversationToPending",""),u.a.dispatch("handleClearConversationStatus",null===(e=u.a.state.widgetConfig)||void 0===e?void 0:e.endChatClearConversation))}function x(){return!!document.getElementById("survey-form-container-"+r.B.WIDGET_EVENT_CHAT_END)}function $(){return!(!document.getElementById("survey-form-container-"+r.B.WIDGET_EVENT_IDLE_USER)&&!document.getElementById("survey-form-container-"+r.B.WIDGET_EVENT_CHAT_END))}function V(e){const t=[];null==e||e.forEach((function(e){if(e&&null!=e&&e.name){var n,i;const o={};o[e.name]=(null==e||null===(n=e.values)||void 0===n?void 0:n.length)>1?e.values:null===(i=e.values)||void 0===i?void 0:i[0],t.push(o)}})),Ae(r.o.TRIGGER_PENDING_EVENTS_ON_HUMAN_HANDOFF,{customTags:t})}function H(e){Ae(r.o.TRIGGER_PENDING_EVENTS_ON_OAUTH,{oauthType:e})}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object(c.a)(r.i.SESSION.CONVERSATION_ID);e+=` conversationId value in session: ${v.a.conversationId} and conversationId value in cookie: ${n}`,n&&"null"!==n||(new f.a({name:r.i.SESSION.CONVERSATION_ID,message:e}),t&&u.a.dispatch("endChat",{message:r.h.CHAT_ENDED,showSessionRestartGreeting:!1,hideEndChatGreeting:!0,clearConversation:!1,hidePill:!0}))}function W(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u.a.state.widgetStatus.status===r.A.CLOSE&&u.a.dispatch("updateUnreadMessagesState",{enabled:e})}function K(e){return!!new RegExp("(https://www.|http://www.|https://|http://)?[a-zA-Z]{2,}(.[a-zA-Z]{2,})(.[a-zA-Z]{2,})?/[a-zA-Z0-9]{2,}|((https://www.|http://www.|https://|http://)?[a-zA-Z]{2,}(.[a-zA-Z]{2,})(.[a-zA-Z]{2,})?)|(https://www.|http://www.|https://|http://)?[a-zA-Z0-9]{2,}.[a-zA-Z0-9]{2,}.[a-zA-Z0-9]{2,}(.[a-zA-Z0-9]{2,})?").test(e)}function q(e){let{component:t,message:n,isEndChatSeparator:i,timestamp:o}=e;u.a.dispatch("showMessageSeparator",{isMessageSeparator:!0,content:{component:t||"EndChatSeparator",message:n,isEndChatSeparator:i},timestamp:o||Date.now()})}function z(){Q(),X()}function Y(){const e=u.a.state.agentDesk.idleTimeoutTimerId;e&&clearTimeout(e)}function Q(){const e=u.a.state.showEndChatFlow.timerId;e&&clearTimeout(e)}function X(){const e=u.a.state.surveyRule.idleTimeoutRule.timerId;e&&clearTimeout(e)}function J(){const e=u.a.state.inputFieldTempDisableStatusTimer;e&&(clearTimeout(e),u.a.dispatch("updateInputFieldTempDisableStatusTimer",""))}function Z(){const e=u.a.state.inputFieldOnSendDisableTimer;e&&(clearTimeout(e),u.a.dispatch("updateInputFieldOnSendDisableTimer",""))}function ee(){return te.apply(this,arguments)}function te(){return(te=s()((function*(){if(!u.a.state.botDetails.timezone){const e=yield Object(b.a)();u.a.dispatch("updateBotDetails",null==e?void 0:e.data)}}))).apply(this,arguments)}function ne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return new Date(t).toLocaleString("en-US",{timeZone:e})}function ie(e){var t,n,i;let o=(e=new URL(e)).hostname.replace("www.","");o=o.substring(0,o.lastIndexOf("."));const a=null===(t=e)||void 0===t||null===(n=t.toString())||void 0===n||null===(i=n.split("/"))||void 0===i?void 0:i.pop();return`${o}${null!=a&&a.length?"-"+a:""}`}function oe(e){var t;const n=null==e||null===(t=e.find((function(e){let{messageValue:t}=e;const n=null==t?void 0:t.attachmentResponseType;if(n&&n===r.c.ANSWER_NET_MULTI_SOURCE)return t})))||void 0===t?void 0:t.messageValue,i=null==n?void 0:n.multipleSourceDetails,o=null==n?void 0:n.text;if(!i)return;const a=[];return null==i||i.forEach((function(e){const t=e.text;try{var n,i;const o=K(t),s=U({indexNumber:null==e?void 0:e.index,text:o?ie(t):t,logo:(null===(n=u.a.state)||void 0===n||null===(i=n.widgetConfig)||void 0===i?void 0:i.logoImage)||r.h.DEFAULT_LOGO_IMAGE||"GlobeIcon",image:(o?"Globe":"Description")+"Icon"},o&&{url:t});a.push(s)}catch(e){console.error("Invalid Source Url",e),new f.a({name:"Invalid Source Url",message:e.message,error:e})}})),{sources:a,multiSourceText:o}}function ae(e,t,n){var i,o,a,s;const l=(null==e||null===(i=e.attachment)||void 0===i?void 0:i.attachmentResponseType)===r.c.NBA_RESPONSE,c=(null==e||null===(o=e.attachment)||void 0===o?void 0:o.attachmentResponseType)===r.c.ANSWER_NET_MULTI_SOURCE;switch(l&&(t=r.c.NBA_RESPONSE),!c||null!==u.a&&void 0!==u.a&&null!==(a=u.a.getters)&&void 0!==a&&a.isDynamicSourcesDisabled&&!u.a.getters.isKnowledgeAiEnabled||(t=r.c.ANSWER_NET_MULTI_SOURCE),t){case"HumanHandoffForm":return(null===(s=e.attachment)||void 0===s?void 0:s.values.status[0])===r.A.PENDING&&!n;case r.c.NBA_RESPONSE:case"FillerText":return!0;case"TextResponse":return!_.a.isEmpty(e.attachment.text);case r.c.ANSWER_NET_MULTI_SOURCE:return!0;case r.c.EMAIL:return!u.a.getters.isResponseAnalyzerEnabled;default:return!1}}function se(e){var t;return[r.e.AGENT_EVENT,r.e.QUEUE_POSITION,r.e.GENERIC].includes(null==e||null===(t=e.eventData)||void 0===t?void 0:t.eventType)}function re(e){return{eventData:{eventType:r.e.WIDGET_EVENT,subType:r.h.IDLE_USER,eventInfo:{idleTime:e}},eventName:r.h.INFO}}function le(e,t){const n=t.conversationId||v.a.getConversationId(e.widgetConfig),i=t.userMessage,{user:o}=e;return{conversationId:n,ownerType:e.controlType,messagePayload:{text:null==i?void 0:i.payload,label:null==i?void 0:i.label,messageId:Object(d.a)(),timestamp:(null==i?void 0:i.timestamp)||Date.now(),hideMessage:null==i?void 0:i.hideMessage},attachmentList:t.attachments,userDetails:{userId:o.id,emailId:o.email,userName:o.name,phone:o.phone}}}const ce=function(e){var t,n;return(null==e||null===(t=e.userMessage)||void 0===t?void 0:t.label)===r.h.PROACTIVE_GREETING_LABEL?(Object(c.f)(r.i.GREETING.PROACTIVE_GREETING_COOKIE_LABEL,!1,{SameSite:"None",Secure:"true","max-age":pe()/1e3}),!0):(null==e||null===(n=e.userMessage)||void 0===n?void 0:n.label)===r.h.CALLOUT_BUBBLE_TEXT&&(Object(c.f)(r.i.GREETING.CALLOUT_BUBBLE_GREETING_COOKIE_LABEL,!1,{SameSite:"None",Secure:"true","max-age":pe()/1e3}),!0)},ue=function(e,t){return{type:"TEXT",name:e,scope:"LIFE_TIME",value:t}},de=function(e){const t=[l.a.getWidgetId(),l.a.getUserDateAndTimeAttribute(),l.a.getUserTimezoneAttribute(),...l.a.getWidgetVisitorInfo(),...l.a.getDefaultAttributes(),...l.a.getCustomVisitorInfo()];Object(c.a)(r.i.AGENT_DESK.DEPT_HANDOFF_CODE_SENT)&&(t.push(l.a.getDeptHandoffCode()),Object(c.c)(r.i.AGENT_DESK.DEPT_HANDOFF_CODE_SENT)),null!=e&&e.customAttributes&&t.push(e.customAttributes),null!=e&&e.generatedBy&&t.push(ue("generated_by",e.generatedBy));const n=localStorage.getItem(w.a.ISAUTH);[String(!0),w.a.FAIL].includes(n)&&t.push(ue(w.a.ISAUTH,n));try{const e=localStorage.getItem(w.a.USER_DETAILS)||"{}",n=JSON.parse(e),i=Object(L.a)(n,"user");Object.entries(i).forEach((function(e){let[n,i]=e;t.push(ue(n,i))}))}catch(e){console.warn("Failed to parse user-details from localStorage",e)}return t},he=function(e){let{isAuthenticated:t}=e;const{messageAuth:n,statusAuth:i}=t;Qe()&&n===r.b.ERROR_MESSAGE.JWT_TOKEN_INVALID&&i===r.b.STATUS_CODE.UNAUTHORIZED&&(Ae(r.o.INVALID_JWT_TOKEN_FALLBACK),u.a.dispatch("logoutWidget"))},pe=function(){return ve(u.a.state.controlType)?u.a.getters.getBotIdleTimeout:Math.max(u.a.getters.getBotIdleTimeout,u.a.getters.getAgentDeskIdleTimeout)},ge=function(){var e,t;return parseInt(null===(e=u.a.state.widgetConfig)||void 0===e||null===(t=e.endChat)||void 0===t?void 0:t.endChatGreetingDelay)||r.h.END_CHAT_GREETING_DELAY},me=function(){var e,t,n;return null!==(e=u.a.state.widgetConfig)&&void 0!==e&&null!==(t=e.supportIconConfig)&&void 0!==t&&t.isSupportTextEnabled?U(U({},r.f.SHOW_SUPPORT_ICON_TEXT),{},{width:(null===(n=document.getElementById("support-icon-container"))||void 0===n?void 0:n.clientWidth)||"290px"}):r.f.SHOW_SUPPORT_ICON_ONLY},fe=function(e,t,n){let i;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const r=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,!n&&e.apply(void 0,a)}),t),r&&e.apply(void 0,a)}},Ee=fe((function(){u.a.dispatch("receiveHistoryOfMessages")}),2e3,!0),ve=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a.state.controlType;return e===r.h.BOT},Te=function(e){return e===r.h.INFO};function _e(){return Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:""}function Se(){const e=new Date;return`${new Intl.DateTimeFormat("en-GB",{weekday:"long"}).format(e)} - ${e.toLocaleDateString("en-GB")} - ${e.toLocaleTimeString("en-GB",{hour12:!1})}`}function be(e){return new Date(e).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}function Oe(e){return new Date(e).toLocaleString("en-US",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}function Ie(e){if(e&&e.length>0)for(let o=e.length-1;o>=0;o--){var t,n,i;const a=null===(t=e[o])||void 0===t||null===(n=t.messageValue)||void 0===n||null===(i=n.quickReply)||void 0===i?void 0:i.options;if(a&&a.length>0)return a}return[]}function ye(e){var t;let n;const i=[],o=[];for(let t=(null==e?void 0:e.length)-1;t>=0;t--){var a;const i=e[t],o=null==i||null===(a=i.messageValue)||void 0===a?void 0:a.attachmentResponseType;if(o&&o===r.c.NBA_RESPONSE){var s;n=null==i||null===(s=i.messageValue)||void 0===s?void 0:s.nbaObjects;break}}return n?(null===(t=n)||void 0===t||t.forEach((function(e){const t=e.pageURL,n=e.shortText,a=e.longText,s=e.type,l=K(t),c={label:n||(l?ie(t):t),longText:a,url:t,type:s};(null==e?void 0:e.type)===r.h.ACTIONABLE?i.push(c):o.push(c)})),{actionableNBAOptions:i,nonActionableNBAOptions:o}):{}}function Ae(e,t){var n,i,o,a,s,l,c,d,h,p;let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const m=t;var f,E;if(e===r.o.UPDATE_PARENT_WINDOW_STYLE&&null!==(n=u.a.state)&&void 0!==n&&null!==(i=n.widgetConfig)&&void 0!==i&&null!==(o=i.brandGPT)&&void 0!==o&&o.enable&&null!==(a=u.a.state.widgetConfig)&&void 0!==a&&null!==(s=a.brandGPT)&&void 0!==s&&s.isResizeOff&&(new S.a({name:r.h.BRAND_GPT,message:`${e}: ${JSON.stringify(t)}: `,logLevel:"info",service:"Brand GPT"}),"100%"!==(null===(f=t)||void 0===f?void 0:f.width)||"100%"!==(null===(E=t)||void 0===E?void 0:E.height)))return;e===r.o.UPDATE_PARENT_WINDOW_STYLE&&JSON.stringify(t)!==JSON.stringify(r.f.SMALL_SCREEN_DEVICES)&&(t=jt(t));const v="float"===(null===(l=u.a.getters.knowledgeAiLaunchButtonData)||void 0===l?void 0:l.type),T=null===(c=u.a.getters.knowledgeAiLaunchButtonData)||void 0===c||null===(d=c.position)||void 0===d?void 0:d.x,_=null===(h=u.a.getters.knowledgeAiLaunchButtonData)||void 0===h||null===(p=h.position)||void 0===p?void 0:p.y;if(e===r.o.UPDATE_PARENT_WINDOW_STYLE&&JSON.stringify(t)===JSON.stringify(r.f.SMALL_SCREEN_DEVICES)&&u.a.getters.isKnowledgeAiEnabled&&Boolean(u.a.getters.knowledgeAiLaunchButtonData)&&v){const e=/transition\s*:s*[^;]+;/gi;t.style=t.style.replace(e,"")}else if(e===r.o.UPDATE_PARENT_WINDOW_STYLE&&u.a.getters.isKnowledgeAiEnabled&&Boolean(u.a.getters.knowledgeAiLaunchButtonData)&&v){const e=/transition\s*:s*[^;]+;/gi;t.style=t.style.replace(e,""),T&&(t.style+="; left: "+T,t.style+="; right: 0px"),_&&(t.style+="; top: "+_,t.style+="; bottom: 0px")}if(e===r.o.UPDATE_PARENT_WINDOW_STYLE){const e=getComputedStyle(document.documentElement).getPropertyValue("--radius-chat-inner-icon").trim();"standard"===g?t.style+="; margin: 0 5px 20px; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1), 0px 0px 12px rgba(0, 0, 0, 0.1); border-radius: "+e:"x2"===g?t.style+="; margin: 0 5px 20px; box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.2), 0px 0px 24px rgba(0, 0, 0, 0.2); border-radius: "+e:"x3"===g?t.style+="; margin: 0 5px 20px; box-shadow: 0px 0px 12px rgba(0, 0, 0, 0.3), 0px 0px 36px rgba(0, 0, 0, 0.3); border-radius: "+e:"default"===g&&(t.style+="; margin: 0 5px 20px; box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1), 0px 0px 12px rgba(0, 0, 0, 0.1); border-radius: "+e)}e!==r.o.UPDATE_PARENT_WINDOW_STYLE||JSON.stringify(m)!==JSON.stringify(r.f.LARGE_SCREEN_DEVICES)||u.a.state.isChatWidgetFullScreen||(t=nn(t)),window.top.postMessage(U({eventType:e},t),r.h.ASTERISK)}function Ce(e,t){const n=new Date(e),i=new Date(t);return n.getDate()!==i.getDate()&&n.getDay()!==i.getDay()}function Ne(e){var t;if(!e)return!1;const n=e.split(".");return null===(t=n[n.length-1])||void 0===t?void 0:t.toLowerCase()}function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const n=1e3,i=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(i))+" "+o[a]}function Re(e){const t=new Date;return new Date(t.toLocaleString("en-US",{timeZone:e}))}function we(e,t){try{if(e===t)return 0;const n=e.split("-"),i=t.split("-");return e=`${n[2]}-${n[0]}-${n[1]}`,t=`${i[2]}-${i[0]}-${i[1]}`,new Date(e)>new Date(t)?1:-1}catch(e){console.log(e)}}function Le(e,t){return e.botRefId!=t.botRefId||e.widgetId!=t.widgetId}function Pe(){return u.a.state.widgetConfig.isDefaultOpen}function Ue(){let e=p.a.getSessionStorageData(r.h.SESSION_BOT_UPDATED);if(!e)return e;const t=new Date(p.a.getSessionStorageData(r.h.SESSION_BOT_UPDATED));return e=(new Date).getTime()-t.getTime()<12e4,e}function Fe(){var e;return"true"===(null===(e=Object(c.a)(r.i.SESSION.CONVERSATION_INITIATED))||void 0===e?void 0:e.toLowerCase())}function Me(){var e;return"true"===(null===(e=Object(c.a)(r.i.OAUTH.LOGGED_IN))||void 0===e?void 0:e.toLowerCase())}function ke(){var e;return"true"===(null===(e=Object(c.a)(r.i.GREETING.PROACTIVE_GREETING_COOKIE_LABEL))||void 0===e?void 0:e.toLowerCase())}function Be(){var e;return"true"===(null===(e=Object(c.a)(r.i.GREETING.CALLOUT_BUBBLE_GREETING_COOKIE_LABEL))||void 0===e?void 0:e.toLowerCase())}function je(){return 0===u.a.state.chats.length}function xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.length>0?t:Object(d.a)();return n.replaceAll("-","").substring(0,e)}function $e(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return 7!==(null==e?void 0:e.length)?e:(t=(255*n|256).toString(16).slice(1),e+t)}function Ve(e,t){4===e.length&&(e="#"+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2));let n=parseInt(e.substring(1,3),16),i=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);n=parseInt(n*(100+t)/100,10),i=parseInt(i*(100+t)/100,10),o=parseInt(o*(100+t)/100,10),n=n<255?n:255,i=i<255?i:255,o=o<255?o:255;return"#"+(1===n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1===i.toString(16).length?"0"+i.toString(16):i.toString(16))+(1===o.toString(16).length?"0"+o.toString(16):o.toString(16))}function He(e){return/^#([0-9A-F]{3}){1,2}$/i.test(e)}function Ge(){var e;return(null===(e=window.parent.document.getElementById("netomiChatWindow"))||void 0===e?void 0:e.getAttribute("position"))||"right"}function We(e){var t;const n=null===(t=u.a.state.widgetConfig)||void 0===t?void 0:t.enableIoTLogs;(void 0===n||n)&&console.log(e)}function Ke(){const e=navigator.userAgent,t=new RegExp(r.h.DEVICE_MOBILE_REGEX);return new RegExp(r.h.DEVICE_TABLET_REGEX).test(e)||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1?"tablet":t.test(e)?"mobile":"desktop"}function qe(){var e,t,n;return{visitor_url:null===(e=window.parent)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.href,current_user_agent:null===(n=navigator)||void 0===n?void 0:n.userAgent,current_device_type:Ke(),current_platform:ze(),ip_address:u.a.state.userIPAddress,sdk:"web"}}function ze(){const e=navigator.userAgent,t={Win:"Windows Os",Mac:"MacOs",X11:"UNIX OS",Linux:"LINUX OS"};for(let n in t)if(-1!=e.indexOf(n))return t[n];return"Unknown"}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u.a.dispatch("DELETE_PROACTIVE_GREETING_COOKIE"),p.a.setSessionStorageData("userInteracted",!1),Object(c.f)(r.i.SESSION.CREATED_AT,(new Date).getTime());const t=[{name:r.i.SESSION.CONVERSATION_INITIATED},{name:r.i.AUTH.USER_LOGGED_IN},{name:r.i.SESSION.CONVERSATION_ID},{name:r.i.OAUTH.LOGGED_IN}];Object(c.d)(t),e&&u.a.commit("CLEAR_CHATS")}const Qe=function(){return"true"===Object(c.a)(r.i.AUTH.USER_LOGGED_IN)},Xe=function(){var e;return Boolean((null===u.a||void 0===u.a||null===(e=u.a.state)||void 0===e?void 0:e.authToken)||Object(c.a)(r.i.AUTH.AUTH_TOKEN))},Je=function(e,t){h.a.publishToIoT({isEvent:!0,tabId:p.a.getSessionStorageData("tabId"),event_type:e,payload:t})};function Ze(){return g.a.prototype.$cdn}function et(){const e=Ze()||"https://chatapps-dev1.netomi.com/";return new URL(e).origin}function tt(e){return r.n[e]}const nt=function(e){if(e){var t,n;m.a.add(r.y.BOT_MESSAGE,(null==e||null===(t=e.bot)||void 0===t?void 0:t.track)||""),m.a.add(r.y.USER_MESSAGE,(null==e||null===(n=e.user)||void 0===n?void 0:n.track)||""),m.a.add(r.y.TOGGLE,et()+"/assets/sound/default/toggle/toggle.wav");const i=localStorage.getItem("sound");u.a.getters.isSoundEnable&&(i&&"true"!==i?u.a.dispatch("updateNotificationSound",!1):u.a.dispatch("updateNotificationSound",!0))}};function it(e,t){try{var n,i,o;if("isUser"in t&&e.notificationSound)if(t.isUser)(null==e||null===(n=e.widgetConfig)||void 0===n||null===(i=n.sound)||void 0===i||null===(o=i.user)||void 0===o?void 0:o.active)&&m.a.play(r.y.USER_MESSAGE);else m.a.play(r.y.BOT_MESSAGE)}catch(e){console.log("Some error occured in playing sounds",e)}}function ot(){var e,t;const n=null===(e=p.a.getLocalStorageData(r.h.CONNECTION_STATUS_LABEL))||void 0===e?void 0:e.lastUpdatedTime;return Date.now()-n>=parseInt((null===(t=Object(O.j)())||void 0===t?void 0:t.offlineTimeout)||I.a.ZENDESK.OFFLINE_TIMEOUT)}function at(e){const t=new StorageEvent("storage",{key:r.h.CONNECTION_STATUS_LABEL,oldValue:(null==e?void 0:e.type)===r.A.ONLINE?r.A.OFFLINE:r.A.ONLINE,newValue:null==e?void 0:e.type});window.dispatchEvent(t);const n=p.a.getLocalStorageData(r.h.CONNECTION_STATUS_LABEL),i={status:null==e?void 0:e.type,lastUpdatedTime:Date.now()};if(p.a.setLocalStorageData(r.h.CONNECTION_STATUS_LABEL,i),(null==n?void 0:n.status)===r.A.OFFLINE&&i.status===r.A.ONLINE&&Fe()){const e={offlineTime:""+new Date(null==n?void 0:n.lastUpdatedTime),offlineTimestamp:null==n?void 0:n.lastUpdatedTime,onlineTime:""+new Date(new Date(i.lastUpdatedTime)),onlineTimestamp:i.lastUpdatedTime};new S.a({name:"Internet Status",message:"User was offline for the time: "+JSON.stringify(e),logLevel:"info",service:"Internet"})}}function st(){var e,t,n;const i=null===(e=(t=window.parent.document).getElementById)||void 0===e||null===(n=e.call(t,"netomiChatWindow"))||void 0===n?void 0:n.getAttribute("sdk_cdn");return i?new URL(i).origin:""}function rt(){var e,t,n;return null===(e=(t=window.parent.document).getElementById)||void 0===e||null===(n=e.call(t,"netomiChatWindow"))||void 0===n?void 0:n.getAttribute("botRefId")}function lt(t){try{if(!t||"string"!=typeof t)return t;const n=t.replace(/-/g,"+").replace(/_/g,"/"),i=n.length%4,o=i?n+"=".repeat(4-i):n,a="function"==typeof atob?atob:"undefined"!=typeof window&&"function"==typeof window.atob?window.atob:null;return a?a(o):void 0!==e?e.from(o,"base64").toString("utf-8"):t}catch{return t}}function ct(){return ut.apply(this,arguments)}function ut(){return(ut=s()((function*(){let e=yield n.e(9).then(n.bind(null,778));new S.a({name:"Live Agent SDK",message:"Live Agentdesk SDK has been imported",logLevel:"info",service:"LIVEAGENT"}),g.a.prototype.$liveAgent=new e.default}))).apply(this,arguments)}function dt(){var e;return null===u.a||void 0===u.a||null===(e=u.a.state)||void 0===e?void 0:e.connectionStatus}function ht(){return!dt()}function pt(){var e,t;return Boolean(null===(e=u.a.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t?void 0:t.proActiveGreetings)}function gt(){var e;u.a.dispatch("toggleChatWindowStatus",!u.a.state.isWindowMaximized),null!==(e=u.a.state.widgetConfig)&&void 0!==e&&e.isDefaultFullScreen&&window.outerWidth>=768?Ae(r.o.UPDATE_PARENT_WINDOW_STYLE,r.f.SMALL_SCREEN_DEVICES):window.outerWidth>=768&&Ae(r.o.UPDATE_PARENT_WINDOW_STYLE,r.f.LARGE_SCREEN_DEVICES)}function mt(e){return ft.apply(this,arguments)}function ft(){return(ft=s()((function*(e){let t=e;return yield new Promise((function(e){const n=new Image;n.src=URL.createObjectURL(t),n.onload=function(){const i=document.createElement("canvas");i.width=n.width,i.height=n.height;i.getContext("2d").drawImage(n,0,0),i.toBlob((function(n){const i=new Blob([n],{type:t.type}),o=new FormData;o.append("file",i,t.name),t=o.get("file"),e()}),t.type,.5)}})),t}))).apply(this,arguments)}const Et=function(){return u.a.state.isWindowMaximized},vt=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},Tt=function(){return navigator.userAgent.includes("Mac")&&navigator.userAgent.toLowerCase().indexOf("safari/")>-1};function _t(e){e.forEach((function(e){return clearTimeout(e)}))}function St(e){var t;const n=(null===(t=u.a.state.widgetConfig)||void 0===t?void 0:t.greetingsResponseWaitTimeBeforeLogging)||6e4,i=setTimeout((function(){bt(e||r.h.EMPTY_PROACTIVE_RESPONSE)}),n);u.a.dispatch("updateBlankScreenState",{timerId:i})}const bt=function(e){var t,n,i;const o=u.a.state.chats,a=!o.length,s=!(1!==o.length||null!==(t=o[0])&&void 0!==t&&t.messages&&null!==(n=o[0])&&void 0!==n&&n.messages.length),r=1===o.length&&(null===(i=o[0])||void 0===i?void 0:i.isMessageSeparator);(a||s||r)&&new f.a({name:"Blank Screen Detected",message:"Blank screen caused due to "+e})},Ot=function(e){return T.a.i18n.t(e)},It=function(){var e,t;return ve()&&u.a.getters.isProgressiveTypingIndicatorEnabled?(null===(t=u.a.state.widgetConfig.progressiveTypingIndicator)||void 0===t?void 0:t.minTime)||r.h.DEFAULT_MIN_TIME_FOR_TYPING_INDICATOR:(null===(e=u.a.state.widgetConfig.typingIndicator)||void 0===e?void 0:e.minTime)||r.h.DEFAULT_MIN_TIME_FOR_TYPING_INDICATOR},yt=function(){var e,t;return ve()&&u.a.getters.isProgressiveTypingIndicatorEnabled?(null===(t=u.a.getters.getProgressiveTypingIndicatorConfig)||void 0===t?void 0:t.reduce((function(e,t){return e+parseInt(t.duration)}),0))||r.h.DEFAULT_MAX_TIME_FOR_TYPING_INDICATOR:(null===(e=u.a.state.widgetConfig.typingIndicator)||void 0===e?void 0:e.maxTime)||r.h.DEFAULT_MAX_TIME_FOR_TYPING_INDICATOR},At=function(e){var t;if(![r.b.SUCCESS,r.b.REQUEST_ACCEPTED].includes(null==e||null===(t=e.data)||void 0===t?void 0:t.statusCode)){var n,i,o;const t=new Error;return t.statusCode=(null==e||null===(n=e.data)||void 0===n?void 0:n.statusCode)||r.b.DEFAULT.STATUS_CODE,t.statusMessage=(null==e||null===(i=e.data)||void 0===i?void 0:i.statusMessage)||r.b.DEFAULT.STATUS_MSG,t.status=(null==e?void 0:e.status)||r.b.DEFAULT.STATUS,t.exceptionCode=(null==e||null===(o=e.data)||void 0===o?void 0:o.exceptionCode)||r.b.DEFAULT.EXCEPTION_CODE,t}},Ct=function(e){if(null!=e&&e.statusCode)return{statusCode:null==e?void 0:e.statusCode,statusMessage:null==e?void 0:e.statusMessage,status:null==e?void 0:e.status,custom:null==e?void 0:e.customMessage,exceptionCode:null==e?void 0:e.exceptionCode}},Nt=function(){var e,t,n;const i=r.h.DISMISS_CB_ON_CROSS;return Object(c.a)(r.i.SESSION.CONVERSATION_ID)!==p.a.getLocalStorageData(i)&&p.a.removeLocalStorageData(i),!!p.a.getLocalStorageData(i)&&(null===(e=u.a.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.calloutBubble)||void 0===n?void 0:n.dismissCalloutBubbleOnCross)&&p.a.getLocalStorageData(i)===Object(c.a)(r.i.SESSION.CONVERSATION_ID)},Dt=function(e){var t,n;const i=null==e||null===(t=e.requestPayload)||void 0===t||null===(n=t.messagePayload)||void 0===n?void 0:n.label;i===r.h.PROACTIVE_GREETING_LABEL?new E.a({name:"Empty Greetings",message:"Proactive greetings response is empty"}):i===r.h.CALLOUT_BUBBLE_TEXT&&new E.a({name:"Empty Greetings",message:"Callout bubble greetings response is empty"})},Rt=function(e){var t,n;let i=!e||!e.attachments||(null==e||null===(t=e.attachments)||void 0===t?void 0:t.length)<=1?"":e.attachments.length+", new unread messages";null===(n=document.getElementById("unread-messages-text"))||void 0===n||n.setAttribute("aria-label",i)},wt=function(){var e;u.a.dispatch("updateFocusEnable",!1);const t=u.a.state.chats[u.a.state.chats.length-1],n=[];null==t||null===(e=t.messages)||void 0===e||e.forEach((function(e){var t;n.push(e.messageId),null!=e&&null!==(t=e.messageValue)&&void 0!==t&&t.isReviewEnabled&&n.push("feedback-"+e.messageId)})),n.push("quick-reply-wrapper");for(let e of n){const t=document.getElementById(e),n=null==t?void 0:t.querySelector('a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])');if(n){document.removeEventListener("keydown",Lt),u.a.dispatch("updateFocusNode",n),u.a.dispatch("updateFocusEnable",!0),document.addEventListener("keydown",Lt);break}}};function Lt(e){const t=u.a.state.focusEnable;if("Tab"===e.key&&t){e.preventDefault();const t=u.a.state.focusNode;null==t||t.focus(),document.removeEventListener("keydown",Lt),u.a.dispatch("updateFocusEnable",!1)}}const Pt=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var n;(null===(e=u.a.state.widgetConfig)||void 0===e?void 0:e.footerStatus)===r.h.DISABLED||u.a.state.inputFieldDisableStatus||u.a.state.inputFieldTempDisableStatus?t&&wt():(null===(n=document.getElementById("text-area"))||void 0===n||n.focus(),u.a.dispatch("updateFocusNode",null),u.a.dispatch("updateFocusEnable",!1))},Ut=function(){var e;let t=null===(e=u.a.state.widgetConfig)||void 0===e?void 0:e.calloutBubble;if(!t)return;const n=window.parent.location.href,i=n.replace(/^http(s?):\/\//i,"");t=Array.isArray(t)?t:[t];const o=t.find((function(e,t){const o=(null==e?void 0:e.url)||r.h.ASTERISK;if(Ft(n,o)||Ft(i,o))return e.index=t+1,e}));u.a.dispatch("updateCalloutBubble",o)},Ft=function(e,t){let n=0,i=0,o=-1,a=-1;for(;n<e.length;)if(i<t.length&&e[n]===t[i]||"?"===t[i])n++,i++;else if(i<t.length&&t[i]===r.h.ASTERISK)o=i,a=n,i++;else{if(-1===o)return!1;i=o+1,n=a+1,a=n}for(let e=i;e<t.length;e++)if(t[e]!==r.h.ASTERISK)return!1;return!0};function Mt(e){var t;const n=null===(t=u.a.state.widgetConfig)||void 0===t?void 0:t.multilingual,i=null==n?void 0:n.isAutoLocalisationEnabled;if(!n||!i)return;n.languages.find((function(t){let{code:n}=t;return n===e}))&&y.a.LANGUAGE_CONFIG.clickHandler({code:e})}function kt(){let{scrollToLastMessage:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.getElementById("chat-list-wrapper");t&&setTimeout((function(){const n=Bt(u.a.state.chats),i=document.getElementById(n);if(!i||e){const e=u.a.state.chats,n=e[(e||[]).length-1];if(((null==n?void 0:n.messages)||[]).reduce((function(e,t){var n,i,o;const a=null==t?void 0:t.messageId,s=document.getElementById(a),r=(null==s?void 0:s.offsetHeight)||0;let l=0;if(null!=t&&null!==(n=t.messageValue)&&void 0!==n&&null!==(i=n.quickReply)&&void 0!==i&&null!==(o=i.options)&&void 0!==o&&o.length){const e=document.getElementById("quick-reply-wrapper");e&&(l=(null==e?void 0:e.offsetHeight)||0)}return e+=r+l}),0)>((null==t?void 0:t.offsetHeight)||0)){var o,a;const e=null==n||null===(o=n.messages)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.messageId;let i=document.getElementById(e);if(!i)for(const e of(null==n?void 0:n.messages)||[]){const t=document.getElementById(null==e?void 0:e.messageId);if(t){i=t;break}}if(i){var s;const e=(null===(s=i)||void 0===s?void 0:s.offsetTop)||0;t.scrollTop=e-8}}else t.scrollTop=t.scrollHeight}else{var r;let e=86;e=null==i||null===(r=i.getBoundingClientRect())||void 0===r?void 0:r.top,e>85&&(t.scrollTop=i.offsetTop-6)}}),100)}function Bt(e){for(let a=e.length-1;a>=0;a--){var t,n,i,o;if(null!==(t=e[a])&&void 0!==t&&t.isUser)return null===(n=e[a])||void 0===n||null===(i=n.messages)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.messageId}return""}function jt(e){var t;const n=null===(t=u.a.state.widgetConfig)||void 0===t?void 0:t.launchButton;if(!n)return e;const i=(null==n?void 0:n.position)||[],o=null==n?void 0:n.defaultPosition;let a=Ke();if("desktop"===a&&(a=window.parent.outerWidth>1920?"largeDesktop":"standardDesktop"),Array.isArray(i)){const{left:t,right:n,top:s,bottom:r}=i.find((function(e){let{devices:t}=e;return t.includes(a)||t.includes("all")}))||{bottom:"10px",[o]:"10px"},l=/transition\s*:s*[^;]+;/gi;e.style=e.style.replace(l,""),t?e.style+="; left: "+t:n&&(e.style+="; right: "+n),s?e.style+="; top: "+s:r&&(e.style+="; bottom: "+r)}return e}function xt(e){var t;const n=(null==e||null===(t=e.data)||void 0===t?void 0:t.responses)||[];for(let t=n.length-1;t>=0;t--){var i,o,a;if((null===(i=n[t])||void 0===i||null===(o=i.eventObject)||void 0===o||null===(a=o.eventData)||void 0===a?void 0:a.subType)===r.h.CHAT_RESTART){var s;((null==e||null===(s=e.data)||void 0===s?void 0:s.responses)||[]).splice(0,t);break}}}function $t(e,t,n){var i,o,a,s;const r=(null==e||null===(i=e.data)||void 0===i?void 0:i.responses)||[];return!(null==e||null===(o=e.data)||void 0===o?void 0:o.previousConversationId)&&r.length<t?null:n?null===(a=r.at(-1))||void 0===a?void 0:a.timestamp:null==r||null===(s=r[0])||void 0===s?void 0:s.timestamp}function Vt(e,t){var n;return(null==e||null===(n=e.data)||void 0===n?void 0:n.responses).length<t}function Ht(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=s()((function*(e){try{const t={file:e,uploadKeyPrefix:e.name},n=yield u.a.dispatch("uploadOnS3",t);if(!n)throw new Error("Error received while running uploadOnS3, Key: "+n);return n}catch(e){throw new Error(e.message)}}))).apply(this,arguments)}function Wt(e){const t=Ne(e);return zt(t)?"image":Yt(t)?"video":Qt(t)?"sound":"file"}function Kt(e){return e.map((function(e){return"."+e.toLowerCase()}))}function qt(e){return["mp4","webm","ogg","mov"].includes(e)}function zt(e){return["png","jpeg","jpg","gif","svg"].includes(e)}function Yt(e){return["mp4","mov","avi","wmv","flv","mp2","mpeg","m4p","avchd","3gp","mkv"].includes(e)}function Qt(e){return["mp3","wav","aac","flac","m4a","wma","aiff","alac","amr"].includes(e)}function Xt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.a.state.widgetConfig.fileSharing.list;if(t===r.c.Video&&!qt(e))throw u.a.dispatch("updateFileAttachmentIcon",!1),new Error("Invalid video type");if(t===r.c.Image&&!zt(e))throw u.a.dispatch("updateFileAttachmentIcon",!1),new Error("Invalid image type");if(!n.includes("."+e))throw u.a.dispatch("updateFileAttachmentIcon",!1),new Error("Invalid file type");return!0}function Jt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a.state.widgetConfig.fileSharing.fileSize;if(!e)throw new Error("File cannot be empty");if(e>t)throw u.a.dispatch("updateFileAttachmentIcon",!1),new Error(`File size limit: ${De(u.a.state.widgetConfig.fileSharing.fileSize)}.`)}function Zt(e){return en.apply(this,arguments)}function en(){return(en=s()((function*(e){var t,n;let i=Ne((e=new File([e],e.name.replaceAll(/\s/g,""))).name);if(["png","jpg","jpeg"].includes(i)&&null!==(t=u.a.state)&&void 0!==t&&null!==(n=t.widgetConfig)&&void 0!==n&&n.removeExifData&&(e=yield mt(e)),e){u.a.dispatch("updateFileAttachmentIcon",!0);const t=e.size,n=e.name&&e.name.split(".")[0],a={type:r.c.File,actualType:zt(i)?r.c.Image:Yt(i)?r.c.Video:r.c.File,attachmentId:Object(d.a)(),percentage:10,fileType:i,title:`${n}.${i}`,fileSize:e.size};try{var o;tn({attachments:[U(U({},a),{},{errorMessage:null})],isAppStateOnly:!0}),Jt(t),Xt(i,a.actualType);const n=yield Ht(e);tn({userMessage:{payload:r.h.MEDIA_UPLOADED,label:u.a.state.widgetConfig.fileSharing.attachmentQuery},attachments:[U(U({},a),{},{type:zt(i)?r.c.Image:Yt(i)?r.c.Video:r.c.File,[zt(i)?"largeImageUrl":Yt(i)?"thumbnailUrl":"fileURL"]:n,errorMessage:null})],updateLastChatBlock:!0});const s=zt(i)?r.c.Image:Yt(i)?r.c.Video:r.c.File;(null===(o=u.a.state.widgetConfig)||void 0===o?void 0:o.eventAnalyticsMP)&&g.a.prototype.$segment.global.sendEvent("attachment_upload_successful",{attachmentType:s})}catch(e){throw console.log("Error While Uploading",e.message),u.a.dispatch("updateTypingIndicatorStatus",!1),tn({attachments:[U(U({},a),{},{errorMessage:e.message})],isAppStateOnly:!0,updateLastChatBlock:!0,hideTypingIndicator:!0}),new Error("Error while Uploading media. "+e.message)}finally{u.a.dispatch("updateFileAttachmentIcon",!1)}}}))).apply(this,arguments)}function tn(e){u.a.dispatch("sendMessage",e)}function nn(e){const t=u.a.getters.dynamicChatWidgetWidth,n=u.a.getters.dynamicChatWidgetHeight;if(t){const n=an(t);n&&n>=360&&n<=420&&(e.style+=`; width: ${n}px`)}if(n){const t=on(n);t&&t>=50&&t<=90&&(e.style+=`; height: ${t}%`,e.style=e.style.replaceAll("max-height",""))}return e}function on(e){const t=e.match(/^(\d+(\.\d+)?)%$/);if(t)return parseFloat(null==t?void 0:t[1])}function an(e){const t=e.match(/^(\d+(\.\d+)?)px$/);if(t)return parseFloat(null==t?void 0:t[1])}function sn(e){if(e.customPayload){const t=e.customPayload,n=null==t?void 0:t.CHUNK_INDEX,i=null==t?void 0:t.CHUNK_STATUS,o=t.isLastMessageExtension||!1;if(n&&i){return!(0===parseInt(n)&&"SUCCESS"===i||o)}}return!1}function rn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=null==e?void 0:e.replace(/\n/g,"<br/>"),i=[],o=/\s+(?=[^>]*(?:<|$))/g;let a=null==n?void 0:n.split(o);for(let e=0;e<a.length;e+=t){const n=a.slice(e,e+t).join(" ");e+t+1<=a.length?i.push(n+" "):i.push(n)}return i}function ln(e,t){const n=t.substring(t.lastIndexOf("/")+1),i=p.a.getLocalStorageData(r.h.FILE_NAME_UUID)||{};p.a.setLocalStorageData(r.h.FILE_NAME_UUID,U(U({},i),{},{[n]:e}))}const cn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--widget-primary-color";const t=document.documentElement,n=getComputedStyle(t);return n.getPropertyValue(e).trim()};function un(){return dn.apply(this,arguments)}function dn(){return(dn=s()((function*(){var e,t;if((null===(e=u.a.state.widgetConfig)||void 0===e||null===(t=e.liveAgentDeskConfig)||void 0===t?void 0:t.agentDeskChannelName)===r.h.ZENDESK&&!ve())return;const n=u.a.state.chats,i=yield Object(b.c)();let o=null;for(let e=n.length-1;e>=0;e--)if(n[e].requestId){o=n[e].requestId;break}if(o&&i&&o!==i){const e={requestIdInCW:o,requestIdInSocialRedis:i,ownerType:u.a.state.controlType};if(new E.a({name:"Missed Message",message:"Missed message case is detected: "+JSON.stringify(e)}),!ve()){new S.a({name:"Missed Message Webhook History v2 API",message:"Fetching Webhook History for missed message case"});const e=yield u.a.dispatch("updateMissedMessagesFromHistory");null!=e&&e.length&&new S.a({name:"Missed Message Webhook History v2 API",message:`Total Cases of Missed Chats found: ${e.length}, Missing messages requestIds: ${e}`})}}}))).apply(this,arguments)}function hn(e){const t=u.a.state.chats;for(let n=t.length-1;n>=0;n--)if(e===t[n].requestId)return!0;return!1}function pn(){var e,t,n;return{botRefId:(null===(e=p.a.getLocalStorageData("widgetConfig"))||void 0===e?void 0:e.botRefId)||null,pageUrl:(null===(t=window.parent)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.href)||"",conversationId:Object(c.a)(r.i.SESSION.CONVERSATION_ID)||null,event:{timeStamp:Date.now()},shouldPublishEvent:!0}}function gn(e){return e-60*(new Date).getTimezoneOffset()*1e3}function mn(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.isArchived||!n.schedule.isEnabled)continue;const i=Date.now(),o=gn(n.schedule.startEndDateTime[0]-n.schedule.utcOffsetInMs),a=gn(n.schedule.startEndDateTime[1]-n.schedule.utcOffsetInMs);if(i>=o&&i<a)return n}}function fn(e){let t=null,n=null;for(let i=0;i<e.length;i++){const o=e[i];if(o.isArchived||!o.schedule.isEnabled)continue;const a=Date.now(),s=gn(o.schedule.startEndDateTime[0]-o.schedule.utcOffsetInMs)-a;s>0&&(null===t||t>s)&&(t=s,n=o)}return{upcomingScheduledHighPriorityAlert:n,delay:t}}function En(){var e;return!(Fe()||null!==(e=Object.keys(u.a.state.alerts.highPriorityAlert))&&void 0!==e&&e.length)}function vn(e,t){var n,i;return((null==e||null===(n=e.customPayload)||void 0===n?void 0:n.isLastMessageExtension)||!1)&&1===(null==t?void 0:t.length)&&"MultiSource"===(null==t||null===(i=t[0])||void 0===i?void 0:i.type)}function Tn(){var e,t,n;null===(e=A.a.getWindow("parent"))||void 0===e||null===(t=e.document)||void 0===t||null===(n=t.getElementById("callout-bubble-container"))||void 0===n||n.remove()}function _n(){var e;const t=u.a.getters.languageVoiceMap,n=u.a.state.lastMessageLocale;let i=null==t||null===(e=t[n])||void 0===e?void 0:e.voice_id;var o;i||"en"!==n||(i=null===(o=u.a.getters.elevenLabsConnectionConfigs)||void 0===o?void 0:o.voice_id);return i}function Sn(){var e,t;const n=u.a.getters.languageVoiceMap,i=u.a.state.lastMessageLocale;let o=null==n||null===(e=n[i])||void 0===e?void 0:e.langCode,a=null==n||null===(t=n[i])||void 0===t?void 0:t.voiceName;var s,r,l,c;o&&a||"en"!==i||(a=null===(s=u.a.state.widgetConfig)||void 0===s||null===(r=s.voiceConfig)||void 0===r?void 0:r.voiceName,o=null===(l=u.a.state.widgetConfig)||void 0===l||null===(c=l.voiceConfig)||void 0===c?void 0:c.langCode);return{langCode:o,voiceName:a}}function bn(){const e=u.a.getters.elevenLabsConnectionConfigs;return{voice_id:_n(),model_id:(null==e?void 0:e.model_id)||"eleven_flash_v2_5",stability:(null==e?void 0:e.stability)||.5,speed:(null==e?void 0:e.speed)||1,similarity_boost:(null==e?void 0:e.similarity_boost)||.75,style:(null==e?void 0:e.style)||0,apply_text_normalization:(null==e?void 0:e.apply_text_normalization)||"on"}}function On(){var e,t;if(!Nt()&&null!==(e=u.a.state.widgetConfig)&&void 0!==e&&null!==(t=e.calloutBubble)&&void 0!==t&&t.calloutBubbleEnabled&&!u.a.getters.isKnowledgeAiEnabled){var n,i,o,a;const e=N.a.getCurrentFontFamily(),t=(null===R.a||void 0===R.a||null===(n=R.a.bodyText)||void 0===n?void 0:n[u.a.getters.isFontSizeChatInterfaceOverrideEnabled?u.a.getters.getFontSizeType:"default"])||"14px",s=cn("--widget-primary-color"),r=cn("--radius-chat-outer-curve");C.a.sendMessage({eventType:"RENDER_CALLOUT_OPTIONS",data:U(U(U({},(null===(i=u.a.state.widgetConfig)||void 0===i?void 0:i.calloutBubble)||{}),(null===(o=u.a.state.widgetConfig)||void 0===o?void 0:o.launchButton)||{}),{},{proActiveGreetings:(null===(a=u.a.state.widgetConfig)||void 0===a?void 0:a.proActiveGreetings)||{},calloutBubbleProperties:u.a.state.calloutBubblePubsubConfig||{},properties:{fontFamily:e,fontSize:t,primaryColor:s,borderRadius:r}})})}}function In(e){const t=window.parent.document.getElementById("netomiChatWindow");if(!t)return;const n=t.contentDocument||t.contentWindow.document;if(!n)return;const i=n.querySelector("title");i&&(i.innerHTML=e)}function yn(e){if("number"!=typeof e)throw new Error("Timestamp must be a number (in milliseconds)");const t=new Date(e);if(isNaN(t.getTime()))throw new Error("Invalid timestamp");return`${String(t.getUTCMonth()+1).padStart(2,"0")}-${String(t.getUTCDate()).padStart(2,"0")}-${t.getUTCFullYear()}`}function An(e){const t=[r.u.ENABLE_SECURITY_TRANSCRIPT,r.u.IS_CHAT_WIDGET_LLM_ENABLED],n={};t.forEach((function(t){e[t]&&(n[t]=!0)})),Object.keys(n).length>0&&new S.a({name:"launchDarklyFlags",message:n,logLevel:"info",service:"Init"})}}.call(this,n(29).Buffer)},20:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return l}));var i=n(0);const o={STAR:"Star",STAR_FILLED:"StarFilled",SENTIMENT_VERY_DISSATISFIED:"SentimentVeryDissatisfied",SENTIMENT_DISSATISFIED:"SentimentDissatisfied",SENTIMENT_NEUTRAL:"SentimentNeutral",SENTIMENT_SATISFIED:"SentimentSatisfied",SENTIMENT_VERY_SATISFIED:"SentimentVerySatisfied",THUMB_UP:"ThumbUp",THUMB_DOWN:"ThumbDown",THUMB_UP_FILLLED:"ThumbUpFilled",THUMB_DOWN_FILLED:"ThumbDownFilled"},a={STAR:"#6D6D6D",STAR_FILLED:"#ED9B1E",EMOJI:"#6D6D6D",EMOJI_FILLED:{[o.SENTIMENT_VERY_DISSATISFIED]:"#E22C2C",[o.SENTIMENT_DISSATISFIED]:"#F06C00",[o.SENTIMENT_NEUTRAL]:"#B98C00",[o.SENTIMENT_SATISFIED]:"#5AA700",[o.SENTIMENT_VERY_SATISFIED]:"#008A00"},THUMB:""},s={STAR:{value:"STAR",component:"StarRating"},EMOJI:{value:"EMOJI",component:"EmojiRating"},NUM_5:{value:"NUM_5",component:"NumberRating"},NUM_10:{value:"NUM_10",component:"NumberRating"},THUMBS_UP_DOWN:{value:"THUMBS_UP_DOWN",component:"ThumbsRating"}},r=[{id:"1",val:o.SENTIMENT_VERY_DISSATISFIED,color:a.EMOJI,label:"very dissatisfied"},{id:"2",val:o.SENTIMENT_DISSATISFIED,color:a.EMOJI,label:"dissatisfied"},{id:"3",val:o.SENTIMENT_NEUTRAL,color:a.EMOJI,label:"neutral"},{id:"4",val:o.SENTIMENT_SATISFIED,color:a.EMOJI,label:"satisfied"},{id:"5",val:o.SENTIMENT_VERY_SATISFIED,color:a.EMOJI,label:"very satisfied"}],l={EMOJI:{1:"very dissatisfied",2:"dissatisfied",3:"neutral",4:"satisfied",5:"very satisfied"},THUMBS_UP_DOWN:{1:i.p.THUMBS_DOWN,2:i.p.THUMBS_UP}}},22:function(e,t,n){"use strict";var i=n(14);const o=n(506);o.keys().forEach((function(e){const t=e.split("/").pop().split(".")[0];i.a.component(t,(function(){return o(e)}))}));var a={name:"BaseIcon",props:{name:{type:String,required:!0},fill:{type:String},height:{type:[String,Number]},width:{type:[String,Number]}}},s=n(8),r=Object(s.a)(a,(function(){return(0,this._self._c)(this.name,{tag:"component",attrs:{fill:this.fill,height:this.height,width:this.width}})}),[],!1,null,null,null);t.a=r.exports},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(9),o=n.n(i),a=n(57),s=n.n(a),r=n(82);const l=["name","message"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}class u extends Error{constructor(e){let{name:t=null,message:n=null}=e,i=s()(e,l);super();let a=new r.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t,message:n},i));Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),a.sendLogs({logLevel:"error"})}}},237:function(e,t,n){"use strict";function i(e){return Array.from(e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), [contenteditable]')).filter((function(e){return null!==e.offsetParent}))}function o(e,t){Array.from(document.body.children).filter((function(t){return t!==e&&!t.contains(e)})).forEach((function(e){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}))}n.d(t,"b",(function(){return i})),t.a={inserted(e){e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),o(e,!0);const t=i(e);t.length>0&&t[0].focus({preventScroll:!0}),e.__focusTrapHandler__=function(t){if("Tab"!==t.key)return;const n=i(e);if(0===n.length)return;const o=n[0],a=n[n.length-1],s=n.indexOf(document.activeElement);t.shiftKey?document.activeElement!==o&&-1!==s||(t.preventDefault(),a.focus()):document.activeElement!==a&&-1!==s||(t.preventDefault(),o.focus())},document.addEventListener("keydown",e.__focusTrapHandler__)},unbind(e){document.removeEventListener("keydown",e.__focusTrapHandler__),delete e.__focusTrapHandler__,o(e,!1)}}},238:function(e,t,n){},239:function(e,t,n){},24:function(e,t,n){"use strict";t.a={ZENDESK:{SDK_URL:"https://dev.zopim.com/web-sdk/latest/web-sdk.js",INVALID_AUTH_KEY_STATUS:["invalid_account_key","banned"],EVENT_TYPES:{CONNECTION_UPDATE:"connection_update",AGENT_UPDATE:"agent_update",CHAT:"chat",MEMBER_LEAVE:"chat.memberleave",MEMBER_JOIN:"chat.memberjoin",MEMBER_FEEDBACK_REQUEST:"chat.request.rating",QUEUE_POSITION:"chat.queue_position",MESSAGE:"chat.msg",FILE:"chat.file",TYPING:"typing"},CONNECTION_STATUS:{CONNECTED:"connected",CLOSED:"closed",CONNECTING:"connecting"},ERROR_EVENTS:{SET_VISITOR_INFO:"setVisitorInfo"},VISITOR_NICK:"visitor",AGENT_AVAILABILITY_TIMEOUT:2147483647,WITHIN_OPERATING_HOURS_DEPARTMENT_STATUS:["online"],OUTSIDE_OPERATING_HOURS_DEPARTMENT_STATUS:[],OFFLINE_TIMEOUT:3e4},GENERIC_AGENTDESK:{EVENT_INFO:{EVENT_TYPE:"Agent.Event.Type",AGENT_NAME:"Agent.Name",AGENT_AVATAR_URL:"Agent.Avatar.Url",QUEUE_POSITION:"QueuePosition"},EVENTS:{AGENT_JOIN:"join",AGENT_LEAVE:"leave",AGENT_TRANSFER:"transfer",WAITING:"waiting",TYPING_INDICATOR:"typing"},EVENT_MESSAGE:{QUEUE_POSITION:function(e){return"Queue Position: "+e}}},EVENT_SUB_TYPES:{AGENT_JOIN:"JOIN",AGENT_JOIN_CONFERENCE:"AGENT_JOIN_CONFERENCE",AGENT_LEFT_CONFERENCE:"AGENT_LEFT_CONFERENCE",AGENT_LEAVE:"LEAVE",AGENT_TRANSFER:"TRANSFER",AGENT_TRANSFER_AND_JOIN:"TRANSFER_AND_JOIN",WAIT:"WAIT",GENERIC_INFO:"GENERIC_INFO",REVIEW:"REVIEW",TYPING_INDICATOR:"TYPING",AGENTDESK_CONFIGURATION_NOT_FOUND:"AGENTDESK_CONFIGURATION_NOT_FOUND",CONFIG:"CONFIG"},SCRIPT_TAG_ID:"agentDeskSDK",AGENT_DESK_CHATS_STORAGE_KEY:"agentDeskChats",AGENT_INFO:"agentInfo",TALK_TO_AGENT_UTTERANCE:"talk to agent",BACK_TO_BOT_UTTERANCE:"back to bot",SEND_BACK_TO_BOT_DELAY:10,DEPARTMENT_HANDOFF_FAILED_CODES:{OUT_OF_OPERATING_HOURS:"OUT_OF_OPERATING_HOURS",NO_AGENT_AVAILABLE:"NO_AGENT_AVAILABLE",ALL_AGENTS_OCCUPIED:"ALL_AGENTS_OCCUPIED"},TRANSCRIPT_RELATED_INFO_KEY:"transcriptRelatedInfo"}},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(3),o=n.n(i),a=n(1),s=n(0),r=n(21),l=n.n(r),c=n(2),u=n(20),d=n(30),h=n(40),p=n(67);let g=[];function m(){return f.apply(this,arguments)}function f(){return(f=o()((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){let t=(yield T()).reduce((function(t,n){var i,o,a,r;const l=A(n);if(null==n||null===(i=n.messages)||void 0===i||i.forEach((function(n){const i=I()[n.type];if(i){var o;const a=i(n,e);a&&(t+=y(n.timestamp,l,a)),v(n)&&(t+=O.quickReplyHandler(n.messageValue.quickReply)),null!=n&&null!==(o=n.messageValue)&&void 0!==o&&o.feedbackValue&&(t+=O.feedbackReview(n.messageValue.feedbackValue,C()))}})),n.isMessageSeparator&&"TERMS_AND_CONDITION_ACCEPTED"===(null==n||null===(o=n.content)||void 0===o?void 0:o.type)&&(t+=y(n.timestamp,"",""+s.h.TERMS_AND_CONDITION_ACCEPTED_MESSAGE.TRANSCRIPT())),n.isMessageSeparator&&null!=n&&null!==(a=n.content)&&void 0!==a&&a.message&&"TERMS_AND_CONDITION_ACCEPTED"!==(null==n||null===(r=n.content)||void 0===r?void 0:r.type)&&(t+=y(n.timestamp,"",`${s.h.PILL_SEPERATOR} ${n.content.message} ${s.h.PILL_SEPERATOR}`)),"INFO_PILL"===n.eventName&&"EVENT"===n.triggerType){const e=Object(d.m)()[n.eventData.subType];var c;if(e)t+=y(n.timestamp,"",`${s.h.PILL_SEPERATOR} ${e(null==n||null===(c=n.eventData)||void 0===c?void 0:c.eventInfo)} ${s.h.PILL_SEPERATOR}`)}return t}),"");return t=`${e?N():""} ${t}`,t=t.replace(/<br\s*\/?>/gi,"\n"),E(t)}()}))).apply(this,arguments)}function E(e){var t=document.createElement("template");return t.innerHTML=e,t.content.textContent}function v(e){var t;return null===(t=e.messageValue)||void 0===t?void 0:t.quickReply}function T(){return _.apply(this,arguments)}function _(){return(_=o()((function*(){let e;return e=a.a.state.launchDarklyFlags.ENABLE_SECURITY_TRANSCRIPT?l()(yield a.a.dispatch("receiveMaskedHistoryOfMessages")):l()(a.a.state.chats),e}))).apply(this,arguments)}function S(e,t,n){let i="";e&&(i=i.concat(`\nTitle: ${e} `)),t&&(i=i.concat(`\nDetails: ${t}\n`));const o=n.reduce((function(e,t){return e+=function(e,t){return t?`[ ${e}: ${t} ]`:`[ ${e} ]`}(t.title,t.url)}),"");return o&&(i=i.concat(`Options: ${o}\n`)),i}function b(e){var t,n=document.createElement("html");n.innerHTML=e;const i=n.getElementsByTagName("a");return null===(t=Object.keys(i))||void 0===t||t.forEach((function(e){var t,n,o,a,s;null!==(t=i[e])&&void 0!==t&&null!==(n=t.innerText)&&void 0!==n&&n.length&&(i[e].innerText=`${i[e].innerText} ( ${null===(o=i[e])||void 0===o||null===(a=o.attributes)||void 0===a||null===(s=a.href)||void 0===s?void 0:s.value} ) `)})),n.textContent}let O={textResponseHandler(e,t){var n,i,o,r,l;const{text:c,label:u}=e.messageValue,d=Object(p.b)(a.a.state)&&!(null!=c&&c.startsWith("event://;"))&&t,m=d?null===(n=a.a.state)||void 0===n||null===(i=n.maskedValueMap)||void 0===i?void 0:i[c]:null,f=d?null===(o=a.a.state)||void 0===o||null===(r=o.maskedValueMap)||void 0===r?void 0:r[u]:null,E=null!=m?m:c,v=null!=f?f:u,T=a.a.state.schemaFormLabels,_=null===(l=e.messageValue)||void 0===l?void 0:l.isLLMSchemaForm;if(function(e){return e.startsWith(s.h.SWITCH_INTENT_EVENT)}(E))return E.slice(37).replaceAll("."," ");if(_){const n=function(e,t,n){const i=e.messageValue.label,o=t.formPropertiesQue;let s="\n";return o&&(s+=o+"\n"),(null==i?void 0:i.split("\n")).filter((function(e){return void 0!==e})).map((function(e,i){var o;const r="index-"+i;let l=e;if(null!==(o=g)&&void 0!==o&&o[i]){const t=a.a.state.formInputMaskedValue[Object(h.b)(e)]||e;l=n?t:D(t)}s+=`${t[r]} : ${l}\n`})),s}(e,T,t);return Object.keys(T).length>0&&a.a.dispatch("updateSchemaFormLabels",{}),n}if(function(e){return e.startsWith(s.h.EVENT_LEARN_ATTRIBUTE)}(E)){const n=function(e,t,n){let i=e.messageValue.text;const o=t.formPropertiesQue;i=i.slice(31);let r="\n";o&&(r+=o+"\n");const l=i.split(/&(?!(amp))/g),c=/([;&^$^=::_])amp/g;return l.filter((function(e){return void 0!==e})).map((function(e,i){var o;let[l,u]=e.split("::value=");if(null!==(o=g)&&void 0!==o&&o[i]){const e=a.a.state.formInputMaskedValue[Object(h.b)(u)]||u;u=n?e:D(e)}if("v2"===t.version){var d;const e=l.includes(s.z.DEFAULT_OUTPUT_KEY)?"index-"+i:l;r+=`${t[e]} : ${null===(d=u)||void 0===d?void 0:d.replace(c,"$1")}\n`}else{var p,m,f;r+=`${null===(p=t[l]||t[null==l?void 0:l.toLowerCase()])||void 0===p||null===(m=p.toLowerCase())||void 0===m?void 0:m.replaceAll("_"," ")} : ${null===(f=u)||void 0===f?void 0:f.replace(c,"$1")}\n`}})),r}(e,T,t);return 0!=Object.keys(T).length&&a.a.dispatch("updateSchemaFormLabels",{}),n}return b(v||E)},fileAttachmentResponseHandler:e=>e.messageValue.fileURL,imageResponseHandler:e=>e.messageValue.largeImageUrl,videoResponseHandler:e=>e.messageValue.thumbnailUrl,carouselResponseHandler:e=>e.messageValue.elements.reduce((function(e,t){return e+=S(t.title,t.subtitle,t.buttons)}),""),cardResponseHandler(e){const t=e.messageValue;return S(t.title,t.text,t.buttons)},quickReplyHandler(e){const t=e.options.reduce((function(e,t){return e+=`[${null==t?void 0:t.label}] `}),"");return t?`\nOptions: ${t}\n`:""},schemaFormResponseHandler(e){var t,n;const i=JSON.parse(e.messageValue.schema)[0],o=null==i||null===(t=i.properties)||void 0===t?void 0:t.question,r=i.schema,l=null===(n=i.properties)||void 0===n?void 0:n.version;let u={version:l};return g=[],r.forEach((function(e,t){if("v2"===l){var n,i,o,a,r;const l=null==e||null===(n=e.additionalSettings)||void 0===n||null===(i=n.Required)||void 0===i?void 0:i.value;g.push((null==e||null===(o=e.dropDownSelections)||void 0===o||null===(a=o["Secure field"])||void 0===a?void 0:a.value)||!1),u[function(e){if(e.variableId)return"var_"+e.variableId;return e.output}(e)||"index-"+t]=`\t${(null==e?void 0:e.groupLabel)||(null==e||null===(r=e.labels)||void 0===r?void 0:r[0])||e.output} ${l?`(${Object(c.getTranslation)(s.h.MANDATORY)})`:""}`}else if(e.output){var d,h,p,m,f,E;g.push((null==e||null===(d=e.dropDownSelections)||void 0===d||null===(h=d["Secure field"])||void 0===h?void 0:h.value)||!1);const t=null===(p=e.validations)||void 0===p||null===(m=p.find((function(e){let{type:t}=e;return"required"===t})))||void 0===m||null===(f=m.value)||void 0===f?void 0:f[0];u[e.output]=`\t${(null==e||null===(E=e.labels)||void 0===E?void 0:E[0])||e.output} ${t?`(${Object(c.getTranslation)(s.h.MANDATORY)})`:""}`}})),o&&o.length&&(u.formPropertiesQue="\t"+o),a.a.dispatch("updateSchemaFormLabels",u),o?`${s.h.PILL_SEPERATOR} ${C()} prompted to fill the form: ${o} ${s.h.PILL_SEPERATOR}`:""},llmSchemaFormResponseHandler(e){const t=e.messageValue.schema,n=e.messageValue.title;g=[];let i={};return t.forEach((function(e,t){var n;const o=e.required;g.push(["full","partial"].includes(null==e?void 0:e.maskType)&&"text"===e.type||!1),i["index-"+t]=`\t${(null==e?void 0:e.groupLabel)||(null==e||null===(n=e.labels)||void 0===n?void 0:n[0])||e.output} ${o?`(${Object(c.getTranslation)(s.h.MANDATORY)})`:""}`})),n&&n.length&&(i.formPropertiesQue="\t"+n),a.a.dispatch("updateSchemaFormLabels",i),n?`${s.h.PILL_SEPERATOR} ${C()} prompted to fill the form: ${n} ${s.h.PILL_SEPERATOR}`:""},humanHandoffFormResponseHandler(e){var t,n,i,o,r,l,c,u;const d=null==e||null===(t=e.messageValue)||void 0===t?void 0:t.values,h=null==d||null===(n=d.formId)||void 0===n?void 0:n[0],p=null===(i=a.a.state.widgetConfig)||void 0===i||null===(o=i.customForms)||void 0===o||null===(r=o[h])||void 0===r?void 0:r.formFields;let g="\n"+(null===(l=a.a.state.widgetConfig)||void 0===l||null===(c=l.customForms)||void 0===c||null===(u=c[h])||void 0===u?void 0:u.header)||"\n";if(d&&(null==d?void 0:d.status[0])===s.A.SUBMITTED&&p)return g+=null==p?void 0:p.reduce((function(e,t){var n;if((null==t?void 0:t.field)in d)return e+=`\n${null==t?void 0:t.label}: ${null===(n=d[null==t?void 0:t.field])||void 0===n?void 0:n[0]}`}),""),g},feedbackReview:(e,t)=>`\n${s.h.PILL_SEPERATOR} ${t} rated this message as: ${e===s.p.POSITIVE?s.p.THUMBS_UP:s.p.THUMBS_DOWN} ${s.h.PILL_SEPERATOR}`,surveyFormResponseHandler(e){let{messageValue:t,timestamp:n}=e;if(!t)return;let i=`${s.h.PILL_SEPERATOR} ${C()} prompted to fill survey ${s.h.PILL_SEPERATOR}`;i+=y(n,C(),"");const o=JSON.parse(t.schema);if(o.isSurveySkipped)return i+=`${s.h.PILL_SEPERATOR} ${C()} skipped survey ${s.h.PILL_SEPERATOR}\n`,i;if(o.submitSurveyInfo){var a,r,l;i+="\n";const{payload:e,submitSurveyInfo:t}=o,n=null===(a=e.feedbackMessage)||void 0===a?void 0:a.text;let c=null==t?void 0:t.rating;const d=c<e.surveyRatingTypeEnabledInfo.criteria;c=u.e[e.ratingTypeEnabled]?u.e[e.ratingTypeEnabled][c]:`${c}/${e.surveyRatingTypeEnabledInfo.upperBound}`,n&&c&&(i+=`\t${n}: ${c}\n`);const h=null===(r=e.resolutionQuestion)||void 0===r?void 0:r.text,p=null!=t&&t.issueResolved?s.B.YES:s.B.NO;h&&(i+=`\t${h}: ${p}\n`);const g=d?e.negativeSuggestionMap.title:e.positiveSuggestionMap.title,m=null==t||null===(l=t.suggestions)||void 0===l?void 0:l.join(", ");g&&m&&(i+=`\t${g}: ${m}\n`);const f=e.additionalFeedback.text,E=null==t?void 0:t.additionalFeedback;return f&&E&&(i+=`\t${f}: ${E}\n`),i}return`${s.h.PILL_SEPERATOR} ${C()} prompted to fill survey ${s.h.PILL_SEPERATOR}`},multiSourceResponseHandler(e){let{messageValue:t}=e,n="";if(!a.a.getters.isDynamicSourcesDisabled){if(Boolean(t)&&Boolean(t.text||"Sources:")&&(n+="\n"+b(t.text||"Sources:")),Boolean(t)&&Boolean(t.multipleSourceDetails)&&t.multipleSourceDetails.length>0){let e=t.multipleSourceDetails;for(let t=0;t<e.length;t++)e[t].text&&(n+="\n\t"+e[t].text)}n+="\n"}return n},secureFormResponseHandler(e){const t=(null==e?void 0:e.messageValue)||{},n=t.heading||"Secure Form",i=t.description||"",o=t.ctaText||"Fill Form",a=t.finalHeading,r=t.finalBody,l=t.finalCtaText,c=!0===t.isClicked,u=Array.isArray(t.status)?t.status[0]:t.status,d=(u||"").toString().toUpperCase(),h=["SUBMIT","SUBMITTED","ERROR","CANCEL","CANCELLED","CANCELED","CLOSE","CLOSED"].includes(d);let p="\n";const g=i?b(i):"";if(p+=`${s.h.PILL_SEPERATOR} ${C()} prompted to open secure form: ${n} ${s.h.PILL_SEPERATOR}`,g&&(p+="\n\tDetails: "+g),o&&(p+="\n\tCTA: "+o),c&&(p+=`\n${s.h.PILL_SEPERATOR} ${C()} clicked "${o}" ${s.h.PILL_SEPERATOR}`),u&&!h&&(p+="\n\tForm status: "+u),h&&(a||r||l)){const e=r?b(r):"";p+=`\n${s.h.PILL_SEPERATOR} ${n} secure form status: ${u} ${s.h.PILL_SEPERATOR}`,a&&(p+="\n\tHeading: "+a),e&&(p+="\n\tDetails: "+e),l&&(p+="\n\tCTA: "+l)}return p}};function I(){const{TEXT_RESPONSE:e,IMAGE_RESPONSE:t,VIDEO_RESPONSE:n,CAROUSEL_RESPONSE:i,CARD_RESPONSE:o,SCHEMA_FORM_RESPONSE:a,HUMAN_HANDOFF_FORM:r,SURVEY_FORM_RESPONSE:l,FILE_ATTACHMENT:c,MULTI_SOURCE:u,LLM_SCHEMA_FORM_RESPONSE:d,SECURE_FORM_RESPONSE:h}=s.x;return{[e]:O.textResponseHandler,[t]:O.imageResponseHandler,[n]:O.videoResponseHandler,[i]:O.carouselResponseHandler,[o]:O.cardResponseHandler,[a]:O.schemaFormResponseHandler,[l]:O.surveyFormResponseHandler,[r]:O.humanHandoffFormResponseHandler,[c]:O.fileAttachmentResponseHandler,[u]:O.multiSourceResponseHandler,[d]:O.llmSchemaFormResponseHandler,[h]:O.secureFormResponseHandler}}function y(e,t,n){return`\n\n[${Object(c.getTimestampByTimezone)(a.a.state.botDetails.timezone||s.h.GMT,e)}] ${t} : ${n}`}function A(e){return e.isUser?C():e.isAgent?(null==e||null===(t=e.agentInfo)||void 0===t?void 0:t.displayName)||s.h.AGENT:a.a.state.widgetConfig.aiAgentName||s.h.NETOMI_BOT;var t}function C(){return a.a.state.visitorDisplayNameForAgentDesk||s.h.VISITOR}function N(){let e="";return a.a.state.userIPAddress&&(e+=`IP: ${a.a.state.userIPAddress} \n`),navigator.userAgent&&(e+=`User Agent: ${navigator.userAgent} \n`),Intl&&(e+=`Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}\n`),window.parent.location.href&&(e+=`URL: ${window.parent.location.href} \n`),e}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";if(e.length<=t)return e;const i=e.slice(0,t),o=n.repeat(e.length-t);return i+o}},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},25:function(e,t,n){"use strict";t.a={methods:{getFontSizeForChatInterface(e){return this.$getFontSize(e,{forChatInterface:!0,forIntentResponse:!1})},getFontSizeForResponse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.$getFontSize(e,{forChatInterface:!1,forIntentResponse:t})}}}},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){window,e.exports=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="../../bin/",t(t.s=50)}([function(e,t,n){function i(e,t){var n={},i={},o=function(t){return!e.nodeType&&e!=window&&e!=document||("FORM"!=e.tagName||"submit"!=t)&&!r.isCustomEvents&&(r.isFF&&r.isFF<9?!document.createEvent("event")[t.toUpperCase()]:void 0===e["on"+t])},a=function(t){t in i||(i[t]=function(i){i&&(i.stopPropagation||c(i));var o,a=n[t],s=a.length,u=!0;for(a._active=!0,o=0;o<s;o++)try{if(!a[o])continue;!1===a[o].call(e,r.isCustomEvents&&i instanceof r.CustomEvent?i.detail:i)&&(u=!1)}catch(e){l.fire("error",e)}if(a._active=!1,a._dirty){for(o=0;o<s;o++)a[o]||(o==s-1?a.pop():a[o--]=a.pop(),s--);a._dirty=!1}if(!1===u)return i&&(i.preventDefault(),i.returnValue=!1),!1},e.attachEvent?e.attachEvent("on"+t,i[t]):e.addEventListener&&e.addEventListener(t,i[t],!1))},s=function(t){var o=i[t];o&&(e.attachEvent?e.detachEvent("on"+t,o):e.addEventListener&&e.removeEventListener(t,o,!1),delete i[t],delete n[t])},c=function(e){e.preventDefault=c.preventDefault,e.stopPropagation=c.stopPropagation,e.target=e.srcElement};c.preventDefault=function(){this.returnValue=!1},c.stopPropagation=function(){this.cancelBubble=!0};var u={fire:function(t,i){if(!r.isCustomEvents||o(t)){var a=n[t],s=!0;if(a&&a.length){var c,u;for(a._active=!0,c=0,u=a.length;c<u;c++)try{if(!a[c])continue;!1===a[c].call(e,i)&&(s=!1)}catch(e){l.fire("error",e)}if(a._active=!1,a._dirty){for(c=0;c<u;c++)a[c]||(c==u-1?a.pop():a[c--]=a.pop(),u--);a._dirty=!1}}return s}return e.dispatchEvent(new r.CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i}))},on:function(t,i){if(!t&&"function"!=typeof i)throw"bad arguments to on / addEventListener";return t in n||(n[t]=[],o(t)||a(t)),n[t].push(i),e},un:function(t,o){var a=n[t];if(a){for(var r=0,l=a.length;r<l;r++)if(a[r]===o){1==a.length?i[t]?s(t):delete n[t]:a._active?(a[r]=null,a._dirty=!0):r==l-1?a.pop():a[r]=a.pop();break}return e}},unextendEvents:function(){if(n&&i){for(var e in i)i.hasOwnProperty(e)&&s(e);n=i=null}}};if(t)return u;for(var d in u)u.hasOwnProperty(d)&&(e[d]=u[d]);return r.bugs.leaksMemory&&r.bugs.leaksMemory((function(){for(var t in u)u.hasOwnProperty(t)&&(e[t]=null)})),e}function o(e,t){e<=c?t():u[e].push(t)}function a(e){for(;c<e;){c++;for(var t=0;t<u[c].length;t++)u[c][t]();u[c]=null}}function s(){a(2)}var r=n(2),l={extend:i,body:i(document.body,!0),window:i(window,!0),document:i(document,!0),runAfterScriptReady:function(e){o(0,e)},runAfterFirstChildReady:function(e){o(1,e)},runAfterDomReady:function(e){o(2,e)}};l.extend(l);var c=0,u=[[],[],[],[]];!function e(){c>0||(document.body&&document.body.firstChild?a(1):window.setTimeout(e,200))}(),function(){var e;if(r.isSafari)e=window.setInterval((function(){/loaded|complete/i.test(document.readyState)&&(window.clearInterval(e),s())}),20);else if(document.addEventListener)/loaded|complete/i.test(document.readyState)?s():document.addEventListener("DOMContentLoaded",s,!1);else if(r.isIE){window.attachEvent("onload",s);var t=document.createElement("document:ready");e=window.setInterval((function(){if(/loaded|complete/i.test(document.readyState))t=null,window.clearInterval(e),s();else{try{t.doScroll("left")}catch(e){return}t=null,window.clearInterval(e),s()}}),200)}}(),e.exports=l},function(e,t){var n=function(e,t){return t?null==e:void 0===e};e.exports=n},function(e,t,n){function i(){var e,t,n=navigator,i=n.userAgent.toLowerCase(),s=+(/trident.*rv:? *([0-9]+)/.exec(i)||[])[1]||!1,r=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:document.documentMode}(),l=8===r,c=7===r,u=6===r,d=!!window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera),h=i.indexOf("edge")>-1,p="Google Inc."===n.vendor,g="Apple Computer, Inc."===n.vendor,m=!h&&!r&&!d&&(p||g||/webkit|khtml/.test(i)),f=+/\d+/.exec(/firefox\/\d+/i.exec(n.userAgent)||""),E=-1!==i.indexOf("iphone"),v=-1!==i.indexOf("ipod"),T=-1!==i.indexOf("ipad"),_=E||T||v,S=-1!==i.indexOf("android"),b=-1!==i.indexOf("wp7"),O=_||S||b,I=(r?"msie":f&&"firefox")||d&&"opera"||p&&"chrome"||g&&"safari",y="CSS1Compat"===document.compatMode,A=!y,C=r&&A&&document.documentElement&&!!document.documentElement.style.setExpression,N=document.documentMode||r,D=-1!==i.indexOf("windows")||-1!==i.indexOf("win32"),R=-1!==i.indexOf("macintosh")||-1!==i.indexOf("mac os x"),w="https:"===window.parent.location.protocol,L=n.language||n.browserLanguage||n.userLanguage||n.systemLanguage,P={noBoxSizing:N<=7,ie:{cssBottomRight:u,cssFixed:u||C,buggyCSS:u||C}},U="textContent"in document.createElement("div"),F=!1,M=null;try{window.CustomEvent&&/\[native code\]|\[object CustomEventConstructor\]/.test(window.CustomEvent.toString())&&(new window.CustomEvent("testevent",{bubbles:!1,cancelable:!0,detail:!0}),F=!0,M=window.CustomEvent)}catch(e){}switch(I){case"msie":case"firefox":case"chrome":t=+/\d+/.exec(new RegExp(I+"[ /]\\d+").exec(i)||"");break;default:t=+/\d+/.exec(/version[ \/]\d+/.exec(i)||"")}var k=!1;try{var B={get passive(){k=!0}},j=function(){};window.addEventListener("test",j,B),window.removeEventListener("test",j,B)}catch(e){k=!1}if(u){var x=[];P.leaksMemory=function(e){o.isFunction(e),x.push(e)},P.leaksMemory.remove=function(e){for(var t=x.length-1;t>=0;t--)e==x[t]&&x.splice(t,1)},window.attachEvent("onunload",(function(){for(var e=0;e<x.length;e++)x[e]()}))}return{browser:I,version:t,isStrict:y,isQuirks:A,isOpera:d,isSafari:g,isWebKit:m,isChrome:p,isAndroid:S,isIPhone:E,isIPod:v,isIPad:T,isIOS:_,isWP7:b,isMobile:O,isNewIE:s,isEdge:h,isIE:r,isIE6:u,isIE7:c,isIE8:l,isFF:f,isCustomEvents:F,CustomEvent:M,engineIE:N,bugs:P,isWindows:D,isMac:R,isSecure:w,secureURL:function(e){return e.replace(/^http:/,w?"https:":"http:")},hasFlash:function(){var e,t=n.plugins&&n.plugins["Shockwave Flash"];if(t)return(e=n.mimeTypes&&n.mimeTypes["application/x-shockwave-flash"])&&!e.enabledPlugin?null:t.description;if(window.ActiveXObject)try{return(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).AllowScriptAccess="always",t.GetVariable("$version")}catch(e){}}(),hasJava:function(){var e=n.mimeTypes;return r?!b&&"javaEnabled"in n&&n.javaEnabled():e&&(e=e["application/x-java-vm"])&&(e=e.enabledPlugin)?e.name:void 0}(),language:L,getScrollbarSize:function(){if(!a(e))return e;var t=document.createElement("div"),n=document.createElement("div"),i=t.style,o=n.style;return i.overflow="auto",i.width=i.height="100px",i.position="absolute",i.top="-1000px",o.width="100%",o.height="200px",t.appendChild(n),document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,document.body.removeChild(t),e},getWindowClientHeight:function(){if(void 0!==window.innerHeight)return window.innerHeight;if(document.documentElement)return document.documentElement.offsetHeight;var e=document.getElementsByTagName("body");return e.length?e[0].clientHeight:0},getWindowClientWidth:function(){if(void 0!==window.innerWidth)return window.innerWidth;if(document.documentElement)return document.documentElement.offsetWidth;var e=document.getElementsByTagName("body");return e.length?e[0].clientWidth:0},isTextContent:U,hasPassiveListeners:k}}var o=n(23),a=n(1),s=i();s.sniffBrowser=i,e.exports=s},function(e,t,n){function i(e){e&&!p.test(e)&&(e=null);var t="id."+(c.brandDomain||"zopim.com");return"https://"+(e||t)+"/authenticated/web/jwt"}var o=n(1),a=n(4),s=n(2),r=n(46),l=n(21),c=function(){for(var e=function(){if(window.$zopim&&window.$zopim.s)return window.$zopim.s.src;for(var e,t=document.getElementsByTagName("script"),n=/.*zopim.(com|net|org)\//,i=0,o=t.length;i<o;i++)if(e=t[i].src||"",n.test(e))return e;return""}(),t=[/\/?[?]/,/\/livechat\//],n=[],i=0;i<t.length&&!(n=e.split(t[i])).length;i++);var o=n[1],a=n[0],s=/^(https?:)?\/\/[^\/]+/.exec(a),r=a.replace(/^(https?:)?\/\//i,"").split("/")[0],l=r.replace(/(.+\.)(?=.+\..+)/,""),c=n[0].split("/");return{accountKey:o,brandDomain:l,baseURL:c=c.pop()==r?n[0]:c.join("/"),rootURL:s=s&&"zopim.com"!==r?s[0]:"https://v2.zopim.com"}}(),u="https://v2.zopim.com/widget",d=u+"/images",h=r.map([".zopim.com",".zopim.org",".zdch.at",".zd-dev.com",".bre-zd.com"],l.escape),p=new RegExp("^[a-z][a-z0-9_-]*(\\.[a-z][a-z0-9_-]*)*("+h.join("|")+")(:\\d+)?$","i"),g=/^([a-z][a-z0-9_-]*)(:\d+)?$/i;o(a.baseURL,!0)&&(a.baseURL=s.secureURL(c.baseURL));var m={ASSETS_URL:u,IMAGES_URL:d,SOUNDS_URL:"https://v2.zopim.com/widget/sounds",FONTS_URL:"https://v2.zopim.com/widget/fonts",ASSETS_LEGACY:window.parent.location.protocol+"//cdn.zopim.com/assets",BRANDING_URL:"https://www.zopim.com",AVATARS:{CONCIERGE:d+"/avatar_simple_agent.png",AGENT:d+"/avatar_simple_agent.png",VISITOR:d+"/avatar_simple_visitor.png",DEFAULT:d+"/avatar_simple_visitor.png"},ACCOUNT_KEY:c.accountKey,BRAND_DOMAIN:c.brandDomain,COUNTRY_CODE:function(){var e='\x3c!--# echo var="http_cf_ipcountry" default="geo" --\x3e'.toUpperCase();return"<"==e.charAt(0)&&(e="geo"),e}(),AUTH_URL:"https://www.zopim.com/auth/$NAME/$KEY-$MID",AUTH_LOGOUT_URL:"https://www.zopim.com/auth/logout/$KEY-$MID",AUTH_SERVER_URL:i(),IS_POPOUT:window.$zopim_popout,POPOUT_WINDOW_PREFIX:"zlivechatpopout_",POPOUT_URL:c.rootURL+"/widget/livechat.html",CALLBACK_FILE_UPLOAD_PATH:"/client/widget/upload",FILE_UPLOAD_PATH:"/client/widget/uploads",FILE_UPLOAD_MAX:20971520,RESEND_MSG_TIMEOUT:5e3,FILE_REPLACE_SOURCE:/^(\s*https?\:\/\/v2(?:assets|uploads)\.zopim\.)com(\/)/i,FILE_REPLACE_RESULT:"$1io$2",CHAT_LOG_REMEMBER_COUNT:10,getAuthServerURL:i,getMediatorHost:function(e){if(e){if(g.test(e))return e.replace(g,"$1.zopim.com$2");p.test(e)||(e=null)}var t="widget-mediator."+(c.brandDomain&&c.brandDomain.replace(/:[0-9]+/,"")||"zopim.com");return e||t}};e.exports=m},function(e,t){e.exports={build_number:"20200423.075440",git_commit:"a2e84ec3fc0a7507e1dcc0cd9c0b4c7c6519e194",release_tag:"1.11.2"}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){function i(e,t){for(var n,i=document.createElement("div"),o=0,a=h.length;o<a;o++)if(void 0!==i.style[h[o]]){n=t[o];break}return n?e?function(e,t,i){e.autobind(t,n,i)}:function(e,t,i){p&&e.autounbind(t,n,i)}:function(){}}var o,a=n(2),s=n(1),r=n(11),l=n(16),c=n(3),u="-webkit- -moz- -o- -ms- ".split(" "),d="webkit Moz O ms ".split(" "),h=["transition","MozTransition","OTransition","WebkitTransition"],p=["transitionend","transitionend","otransitionend","webkitTransitionEnd"],g=["animationend","animationend","oanimationend","webkitAnimationEnd"],m={contains:function(){var e=document.documentElement;return e.compareDocumentPosition?function(e,t){return e=e.dom||e,t=t.dom||t,!!(16&e.compareDocumentPosition(t))}:e.contains?function(e,t){e=e.dom||e,t=t.dom||t;var n=9===e.nodeType?e.documentElement:e,i=t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:function(e,t){for(e=e.dom||e,t=t.dom||t;t=t.parentNode;)if(t===e)return!0;return!1}}(),onTransitionEnd:i(!0,p),unTransitionEnd:i(!1,p),onAnimationEnd:i(!0,g),unAnimationEnd:i(!1,g),css_prefixes:u,cssom_prefixes:d,isStyleSupported:function(){var e=document.createElement("div").style;return function(t){for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+d.join(n+" ")+n).split(" "),o=0;o<i.length;o++)if(void 0!==e[i[o]])return!0;return!1}}(),pick:function(e,t){for(var n={},i=0,o=t.length;i<o;i++){var a=t[i];a in e&&(n[a]=e[a])}return n},shallowExtend:function(){for(var e,t,n=arguments.length,i=1,o=arguments[0]||{};i<n;i++)if(null!=(e=arguments[i]))for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o!==e[t]&&(o[t]=e[t]);return o},fullyExtend:function e(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]&&n[i].constructor&&n[i].constructor===Object?(t[i]=t[i]||{},e(t[i],n[i])):t[i]=n[i]);return t},fullyDelete:function e(t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(!(i in t))continue;n[i]&&n[i].constructor&&n[i].constructor===Object?e(t[i],n[i]):delete t[i]}return t},computedHeightBoxSizingBug:function(){if(void 0===o)try{o=function(){if(!window.getComputedStyle)return!1;var e=document.createElement("div"),t="border-box";document.body.appendChild(e),e.style.height="10px",e.style.padding="5px",e.style.boxSizing=t,e.style.webkitBoxSizing=t,e.style.mozBoxSizing=t;var n=parseInt(window.getComputedStyle(e).height,10);return document.body.removeChild(e),10!=n}()}catch(e){}return o},getComputedHeight:function(e){var t=e.getComputedStyle();if("auto"==t.height)return e.getHeight();var n=parseInt(t.height,10)||0;return m.computedHeightBoxSizingBug()&&(n+=(parseInt(t.paddingTop,10)||0)+(parseInt(t.paddingBottom,10)||0)+(parseInt(t.borderTopWidth,10)||0)+(parseInt(t.borderBottomWidth,10)||0)),n+"px"},hoverFix:function(e){a.bugs.noBoxSizing&&(e.on("mouseover",(function(){this.addClass("hover")})),e.on("mouseout",(function(){this.removeClass("hover")})))},getEffectiveTLD:function(e){for(var t=e.split("."),n="."+t.splice(t.length-2,2).join(".");t.length;){var i={domain:n,path:"/"};if(l.set("zte2095","1",i),"1"==l.get("zte2095")){l.remove("zte2095",i);break}n="."+t.pop()+n}return n},descendsObj:function(e,t){for(var n,i=t.split(".");i.length;)n=i.shift(),s(e[n],!0)&&(e[n]={}),e=e[n];return e},insertObj:function(e,t,n){var i=(e=e.split(".")).pop();if(i){for(var o=0,a=e.length;o<a;o++)e[o]in n||(n[e[o]]={}),n=n[e[o]];n[i]=t}},getValueByReference:function(e,t){if(0===t.indexOf(e.path)){for(var n,i=e.path.split(".").length,o=t.split(".").slice(i),a=e.update;o.length;){if(!((n=o.shift())in a))return;a=a[n]}return a}},isDefaultName:function(e){return f.test(e)},getKeys:function(e){if(e&&"object"==typeof e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},supportsDataURI:function(e){if(window.Image)try{var t=new window.Image;t.onload=t.onerror=function(){e(!(1!=this.width||1!=this.height))},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}catch(t){e()}else e()},isIE:a.isIE||/Trident\//.test(window.navigator.userAgent),pad:function(e,t){e=parseInt(e,10),isNaN(e)&&(e=0);var n=e<0;e=Math.abs(e).toString().split("");for(var i=Math.max(t-e.length,0);i--;)e.unshift("0");return n&&e.unshift("-"),e.join("")},formatMinutesAsHours:function(e,t){function n(e,t,n){return n.replace("<hours>",e).replace("<minutes>",t)}var i=r("<hours>:<minutes>"),o=r("<hours>:<minutes> am"),a=r("<hours>:<minutes> pm"),s="24"===t?24:12,l=function(e,t){return e-Math[e>0?"floor":"ceil"](e/t)*t}(Math[e>0?"floor":"ceil"](e/60),s),c=m.pad(Math.abs(e)%60,2);if(24===s)return n(m.pad(l,2),c,i);var u=0===l?12:l;return Math.abs(e/60)%24<12?n(u,c,o):n(u,c,a)},replaceFileHostname:function(e){return e&&e.replace(c.FILE_REPLACE_SOURCE,c.FILE_REPLACE_RESULT)},getLastLogEntries:function(e,t){if(!(t=parseInt(t,10)))return e.getValue();var n=e.getKeys(),i=n.length,o={};if(i<=t)return e.getValue()||o;for(var a=0;a<i;a++)n[a]=parseInt(n[a],10);n=n.sort().slice(-t);var s,r=e.getValue();if(!r)return o;for(a=0,i=n.length;a<i;a++)o[s=n[a]]=r[s];return o},writeNode:function(e,t){var n;e.leaf&&e.parentNode?((n={})[e.name]=t,e.parentNode.write(n)):e.write(t)},isAgentNick:function(e){return E.test(e)},refocusActiveElement:function(){if(a.isNewIE)try{"body"!==document.activeElement.nodeName.toLowerCase()&&document.activeElement.focus()}catch(e){}},warnBadEmbed:function(){return!1},getAuthLoginUrl:function(e,t,n){return c.AUTH_URL.replace("$NAME",e).replace("$KEY",t).replace("$MID",n)}},f=/^Visitor [0-9]{3,}$/,E=/^agent:[0-9]+/i;e.exports=m},function(e,t){e.exports=function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){function i(e){return this instanceof i?e?i.parseQuery(e):void(this.store={}):(l||i._initSingleton(window),l)}function o(e,t,n){if(void 0===t&&void 0===n)return e;if(void 0===t&&(t="string"),!(t in r))throw"invalid type requested";return void 0===e?void 0!==n?n:r[t]:"boolean"===t?s.test(e):"integer"===t?!0===e?1:parseInt(e,10):"float"===t?!0===e?1:parseFloat(e):e}var a=n(7),s=/^(1|on|true)$/i,r={boolean:!1,integer:0,float:0,string:""},l=null;i._initSingleton=function(e){l=new i(e.location.search)},i.buildQuery=function(e){var t,n,i,o,s,r,l=[],c=[];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&l.push(s);for(l.sort(),t=0,i=l.length;t<i;t++)if(r=e[s=l[t]],s=window.encodeURIComponent(s),a(r))if(1!==r.length||!0!==r[0])for(n=0,o=r.length;n<o;n++)c.push(s+"="+window.encodeURIComponent(r[n]+""));else c.push(s);else c.push(s+"="+window.encodeURIComponent(r+""));return c.join("&")},i.parseQuery=function(e){var t,n,o,a,s=new i,r=(e=e.replace(/^\?|\/+$/g,"")).split("&");for(t=0,n=r.length;t<n;t++){var l=r[t];if(l.length){var c=l.indexOf("=");c<=-1?(o=l,a=!0):(o=l.slice(0,c),a=window.decodeURIComponent(l.slice(c+1))),s.add(window.decodeURIComponent(o),a)}}return s},i.getHash=function(e,t){var n=t||window.parent.location.hash;return i.parseQuery(n.replace(/^#/,"")).get(e)};var c=i.prototype;c.add=function(e,t){this.has(e)?this.store[e].push(t):this.store[e]=[t]},c.has=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)},c.getLast=function(e,t,n){return this.has(e)?this.getAt(e,this.store[e].length-1,t,n):o(void 0,t,n)},c.getFirst=function(e,t,n){return this.getAt(e,0,t,n)},c.getAt=function(e,t,n,i){return o(this.has(e)?this.store[e][t]:void 0,n,i)},c.getRaw=function(e){return this.has(e)?this.store[e].concat():[]},c.get=c.getLast,c.toString=function(){return i.buildQuery(this.store)},e.exports=i},function(e,t,n){var i=n(5),o={bind:function(e,t){if(!i(e))throw new TypeError("FunctionUtils.bind - what is trying to be bound is not callable");if(i(e.bind)&&!("prototype"in e.bind))return e.bind.apply(e,a.call(arguments,1));var n=a.call(arguments,2),o=function(){},s=function(){return e.apply(this instanceof o&&t?this:t,n.concat(a.call(arguments)))};return o.prototype=s.prototype,s.prototype=new o,s},once:function(e){var t;return function(){if(!t)return t=!0,e.apply(this,a.call(arguments))}}},a=Array.prototype.slice;e.exports=o},function(e,t,n){function i(e){return'"'+e.replace(c,o)+'"'}function o(e){return u[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function a(e,t,n){return t?p[t]:String.fromCharCode(parseInt(n,16))}var s=n(1),r=n(7),l=!s(window)&&window.JSON||{parse:function(e){var t,n,i,o,s,r=e.match(d),l=r.length,c=r[0];"{"==c?(t={},s=1):"["==c?(t=[],s=1):(t=[],s=0,n=!0);var u=[t];for(l=r.length;s<l;++s)switch((c=r[s]).charCodeAt(0)){case 91:o=u[0],u.unshift(o[i||o.length]=[]),i=void 0;break;case 93:u.shift();break;case 123:o=u[0],u.unshift(o[i||o.length]={}),i=void 0;break;case 125:u.shift();break;case 102:(o=u[0])[i||o.length]=!1,i=void 0;break;case 110:(o=u[0])[i||o.length]=null,i=void 0;break;case 116:(o=u[0])[i||o.length]=!0,i=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf(m)&&(c=c.replace(h,a)),o=u[0],null==i){if(!(o instanceof Array)){i=c||g;break}i=o.length}o[i]=c,i=void 0;break;default:(o=u[0])[i||o.length]=+c,i=void 0}if(n){if(1==u.length)return t[0]}else if(!u.length)return t;throw"error"},stringify:function e(t){switch(typeof t){case"string":return i(t);case"number":return isFinite(t)?t.toString():"null";case"boolean":return String(t);case"object":if(!t)return"null";var n,o,a=[];if(r(t)){for(n=0,o=t.length;n<o;n++)a[n]=e(t[n])||"null";return"["+a.join(",")+"]"}var s,l,c=[];for(s in t)t.hasOwnProperty(s)&&c.push(s);for(c.sort(),n=0,o=c.length;n<o;n++)(l=e(t[s=c[n]]))&&a.push(i(s)+":"+l);if(a.length)return"{"+a.join(",")+"}"}}},c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\",'"':'\\"'},d=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),h=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),p={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},g=new String(""),m="\\";e.exports=l},function(e,t,n){function i(e,t){if(isNaN(e)){var n=new o;return n.add("_",e),n}-1==e&&(e=p.length);var i=p[e];if(i||(p[e]=i=new o),"string"==typeof t)i.add("_",t);else for(var a in t)t.hasOwnProperty(a)&&i.add(a,t[a]);return i}function o(){function e(e){return n[e||g]||n._}function t(e,t){var i,a=new o;for(var s in p[n._]=a,n)if(n.hasOwnProperty(s)){if("string"!=typeof(i=n[s]))continue;i=i[e].apply(i,t),a.add(s,i)}return a}for(var n={},i=[],s={add:function(e,t){n[e]=t},bind:function(e){a(e,s)},onTranslate:function(e){i.push(e)},toJSON:function(){return e()},toString:e,update:function(t){var n,o=e(t);for(n=0;n<i.length;n++)i[n](o)}},r=["concat","replace","toLowerCase","toUpperCase"],l=0;l<r.length;l++)s[r[l]]=function(e){return function(){return t(e,arguments)}}(r[l]);return s}function a(e,t){for(var n=0;n<m.length;n++)if(m[n]==e)return void(f[n]=t);m.push(e),f.push(t)}function s(e){var t=(e=e.split(/-|_/).slice(0,2))[0]=e[0].toLowerCase();return e[1]&&(e[1]=e[1].toUpperCase()),e=e.join("_"),u.languages?e in u.languages?e:t in u.languages?t:null:null}function r(){return!(-1==g.search(T))}function l(){var e=u.strings;if(e)for(var t=0;t<e.length;t++)i(t,e[t])}var c=n(2),u=n(4),d=n(19),h=n(43),p=[],g="_",m=[],f=[],E=[],v=c.isTextContent,T=/^ar|^fa|^he|^ur/;i.bind=a,i.flip=function(e){return r()?e.replace(/left/,"%left%").replace(/right/,"left").replace(/%left%/,"right").replace(/ltr/,"%ltr%").replace(/rtl/,"ltr").replace(/%ltr%/,"rtl"):e},i.onLanguage=function(e){E.push(e)},i.unLanguage=function(e){for(var t=0,n=E.length;t<n;t++)if(E[t]==e){E._active?(E[t]=null,E._dirty=!0):t==n-1?E.pop():E[t]=E.pop();break}},i.update=function(e){var t,n,o,a,r;(e=s(e))&&u.languages[e]&&(r=d[u.languages[e]])&&(i.language=g=e,h.ensureLoaded(r,(function(i){if(i&&function(e){var t,n=d[u.languages[e]];for(t=0;t<n.length;t++)0!==n[t]&&p[t].add(e,n[t])}(e),e==g){for(t=0,n=p.length;t<n;t++)p[t].update instanceof Function&&p[t].update(e);for(t=0,n=m.length;t<n;t++)if(o=m[t],a=f[t].toString(),v)o.textContent=a;else if("string"==typeof o.innerText)o.innerText=a;else if("string"==typeof o.nodeValue)try{o.data=a}catch(e){}for(E._active=!0,n=E.length,t=0;t<n;t++)try{E[t]&&E[t](e)}catch(e){}if(E._active=!1,E._dirty){for(t=0;t<n;t++)E[t]||(t==n-1?E.pop():E[t--]=E.pop(),n--);E._dirty=!1}}})))},i.unbind=function(e){for(var t=0;t<m.length;t++)if(m[t]==e)return m.splice(t,1),void f.splice(t,1)},i.rtl=r,i.findClosestLanguage=s,i.loadDefaultStrings=l,l(),e.exports=i},function(e,t){e.exports=function(e){return"string"==typeof e}},function(e,t,n){var i,o,a,s=n(12),r=n(9),l=n(8),c=n(3),u={authenticate:function(e){i&&i(r.once((function(t){t&&s(t)?u.exchangeToken({account_key:c.ACCOUNT_KEY,auth_url:g,site_jwt:t,state:o&&o.state?o.state:null},(function(t,n){o=n,a&&a.$("visitor").$("authenticated$bool").update(!t),e(t)})):e({reason:"invalid jwt in callback"})})))},isAuthenticated:function(){return!!o},getSiteJWTFunc:function(){return i},retrieveIDToken:function(e){o?+new Date-o.issued_at>=o.expires_in-6e4?u.authenticate((function(t){t?(a&&a.$("visitor").$("auth_status$string").update("failed"),e(t,null)):e(null,o.id_token)})):e(null,o.id_token):e(null,null)},clearIdentity:function(){i=void 0,o=void 0,a&&a.$("visitor").$("authenticated$bool").update(!1)},setOverrideHost:function(e){g=e?c.getAuthServerURL(e):c.AUTH_SERVER_URL},setSiteJWTFunc:function(e){i=e},setDataNode:function(e){a=e},exchangeToken:function(e,t){var n=new XMLHttpRequest;n.open("POST",e.auth_url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){if(t){var e;try{var i=n.response;if(""===i)throw d;e=JSON.parse(i)}catch(e){return void t({reason:d})}200===n.status?t(void 0,{issued_at:+new Date,id_token:e.id_token,expires_in:1e3*e.expires_in,state:e.state}):t({reason:p,details:e.details})}},n.onerror=function(){t&&t({reason:h})};var i={account_key:e.account_key,token:e.site_jwt,format:"json"};e.state&&(i.state=e.state);var o=l.buildQuery(i);n.send(o)}},d="format error",h="network/security error",p="jwt verification error",g=c.AUTH_SERVER_URL;e.exports=u},function(e,t,n){function i(){d.remove(E,{path:"/",domain:r})}function o(e){e=(e=l(e))?1:0,d.set(T,e,{path:"/",ttl:365,domain:r})}function a(e){return d.getJSONCookie(e)[m]}var s,r,l=n(38),c=n(8),u=n(37),d=n(16),h=n(3),p=n(6),g=48e4,m=h.ACCOUNT_KEY,f="__zlcstore",E="__zlcmid",v="__zlcpomid",T="__zlcprivacy",_={init:function(e){d.setActivityWindow(e),m=h.ACCOUNT_KEY,s=(e||window).location.hostname,r=/\b(?:\d{1,3}\.){3}\d{1,3}/.test(s)?s:p.getEffectiveTLD(s)},DOM:{saveVariable:function(e,t){var n=u.get(f)||{};n[m]||(n[m]={});var i=n[m];i[e]=t,i.timestamp=+new Date,u.set(f,n)},getVariable:function(e){var t=u.get(f)||{};if(!t[m])return{};var n=t[m];return n.timestamp?+new Date-n.timestamp>g?{}:n[e]:n[e]||{}}},Cookie:d,clearAll:function(){i(),u.remove(f)},setIdentity:function(e){d.set(E,e,{path:"/",ttl:365,domain:r})},getIdentity:function(){return h.IS_POPOUT?d.get(v)||c().get("mid"):function(){var e=d.getJSONCookie("__zlcid");if(d.remove("__zlcid",{path:"/"}),e.mID)return e.mID;var t=a("__zlcstore");return d.remove("__zlcstore",{path:"/",domain:r}),t&&t.mID?t.mID:void 0}()||d.get(E)||""},clearIdentity:i,clearAllowCookieLaw:function(){d.remove(T,{path:"/",domain:r})},getAllowCookieLaw:function(){var e=function(){var e,t=a("__zlcprivacy");return"boolean"==typeof t&&(e=t,o(t)),e}();if("boolean"==typeof e)return e;var t=d.get(T);return 0!==(t=parseInt(t,10))&&(1===t||void 0)},setAllowCookieLaw:o};e.exports=_},function(e,t,n){function i(){var e=this;return this.arr=[],this.validate=s.bind(this.validate,this),c.concat(["validateAndThrow","validateAndLog"]).forEach((function(t){e.validate[t]=e[t].bind(e)})),this.validate}function o(e,t){this.message=e,this.actual=t,this.paths=void 0,this.unshiftPath=function(e){return this.paths||(this.paths=[]),this.paths.unshift(e),this}}var a=n(7),s=n(9),r=window.Error,l={any:function(e){return function(t){if(0===e.length)return!1;for(var n=0,i=e.length;n<i;n++)if(!(0,e[n])(t))return!1;return new o('Expect "'+t+'" to fulfill at least one condition',t)}},equal:function(e){return function(t){if(t!==e)return new o('expect "'+t+'" to equal "'+e+'"',t)}},obj:function(e,t){return function(n){if("object"!=typeof n||!n)return new o('Expect "'+n+'" to be an object',n);if(t&&t.requiredKeys)for(var i=0,a=t.requiredKeys.length;i<a;i++){var s=t.requiredKeys[i];if(!(s in n))return new o('Expect key "'+s+'" to be defined',n).unshiftPath(s)}for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var l,c=n[r],u=e[r];if(u)l=u(c);else{if(t&&!t.whitelistedKeysOnly)continue;l=new o('The key "'+r+'" is not whitelisted',n)}if(l)return l.unshiftPath(r)}}},type:function(e){return function(t){if(typeof t!==e)return new o('Expect "'+t+'" to have type "'+e+'"',t)}},ok:function(){return function(e){if(!e)return new o('Expect "'+e+'" to be truthty',e)}},chain:function(e){return e},regex:function(e){return function(t){if(e.lastIndex=0,!e.test(t))return new o('Expect "'+t+'" to match predefined format',t)}},minLength:function(e){return function(t){if(t.length<e)return new o('Expect the length of "'+t+'" to be at least '+e,t)}},maxLength:function(e){return function(t){if(t.length>e)return new o('Expect the length of "'+t+'" to be at most '+e,t)}},array:function(){return function(e){if(!a(e))return new o('Expect "'+e+'" to be an Array',e)}},each:function(e){return function(t){var n;if(!a(t))return new o('Expect "'+t+'" to be an Array',t);for(var i=0,s=t.length;i<s;i++)if(n=e(t[i]))return n.unshiftPath(i)}},predicate:function(e,t){return function(n){if(!e(n))return new o('Expect "'+n+'" to '+t,n)}}},c=Object.keys(l),u=i.prototype;c.forEach((function(e){var t=l[e];i[e]=u[e]=function(){if(!(this instanceof i)){var n=new i;return n[e].apply(n,arguments)}var o=t.apply(null,arguments);return this.arr.push(o),this.validate}})),u.validate=function(e){for(var t,n=0,i=this.arr.length;n<i;n++)if(t=(0,this.arr[n])(e))return t},u.validateAndThrow=function(e,t){var n=this.validate(e);if(t=t?t+" - ":"",n)throw new r(t+n.message)},u.validateAndLog=function(e,t){var n=this.validate(e);if(t=t?t+" - ":"",n)return function(e){var t=window.console;t.error?t.error(e):t.log&&t.log(e)}(new r(t+n.message)),n},e.exports=i,o.prototype=Object.create(r.prototype),o.prototype.name="ValidationError"},function(e,t,n){function i(e){return function(e){return"string"==typeof e&&""!=e}(e)&&function(){var e,t,n,i,o=c.document.cookie,a={};if(!o||"string"!=typeof o)return{};for(e=(o=o.split(/;\s/)).length;e--;)try{if(!(t=o[e].match(/^([^=]+)(=(.*))?$/)))continue;n=l(t[1]),i=l(t[3]||""),a[n]=i}catch(e){}return a}()[e]||null}function o(e,t,n){n=n||{};var i=r(e)+"="+r(t);if("ttl"in n){var o=new Date,a=24*n.ttl*60*60*1e3;o.setTime(o.getTime()+a),i+="; expires="+o.toGMTString()}"path"in n&&(i+="; path="+n.path),"domain"in n&&(i+="; domain="+n.domain),n.secure&&(i+="; secure"),i+="; SameSite="+(n.samesite||"Lax"),c.document.cookie=i}var a=n(10),s={set:o,get:i,getJSONCookie:function(e){var t=i(e),n={};try{n=a.parse(t)}catch(e){}return n&&"object"==typeof n?n:{}},setJSONCookie:function(e,t,n){"object"!=typeof t&&(t={}),o(e,a.stringify(t),n)},remove:function(e,t){(t=t||{}).ttl=-1,o(e,"",t)},setActivityWindow:function(e){c=e||window,r=c.encodeURIComponent,l=c.decodeURIComponent}},r=window.encodeURIComponent,l=window.decodeURIComponent,c=window;e.exports=s},function(e,t,n){function i(e,t,n){if(s.ok("function"==typeof e,"1st argument to nextTick must be a function"),n)for(var i=c.length;i-- >0;)if(c[i][0]===e&&c[i][1]===t)return;c.push([e,t]),a||(a=setTimeout(o,0))}function o(){var e=+new Date+l,t=c;c=[],a&&(a=clearTimeout(a));for(var n=0,i=t.length;n<i;n++){try{t[n][0].apply(t[n][1])}catch(e){r.fire("error",e)}if(+new Date>e){n<i-1&&(t.splice(0,n+1),c.length?c=t.concat(c):(c=t,a=setTimeout(o,0)));break}}}var a,s=n(23),r=n(0),l=100,c=[];i.tick=o,e.exports=i},function(e,t,n){function i(e){var t,n,i=o.extend(this);try{(t=new window.ActiveXObject("htmlfile")).open(),t.write("<script>document.win = window<\/script>"),t.close(),n=t.win}catch(e){}if(!n){var s=this.iframe=document.createElement("iframe"),r=s.style;i.allowTransparency="true",i.frameBorder="0",r.backgroundColor="transparent",r.position="absolute",r.width=r.height="1px",r.left=r.top="-9999px",r.border=0,document.body.appendChild(s);try{(t=(n=s.contentWindow).document).open(),t.close()}catch(e){return i.fire("error"),void i.destroy()}}i.doc=t,i.win=n,i.$Loader={cleanup:function(){a((function(){i.$Loader.payload?i.fire("success",i.$Loader.payload):i.fire("error"),i.$Loader.payload=null,e||i.destroy()}))}},i.reusable=e}var o=n(0),a=n(17);i.prototype.setScope=function(e){this.scope=e};var s=/[&<>"']/g;i.prototype.load=function(e){if(/^(?:https?:)?\/\//i.test(e)){e=function(e){return e&&e.replace(s,(function(e){return"&#"+e.charCodeAt(0)+";"}))}(e);try{this.doc.open(),this.win.$Loader=this.$Loader,this.win.$Loader.scope=this.scope||{},this.doc.write('<html><head><script src="'+e+'"><\/script><script>document.addEventListener && document.addEventListener("DOMContentLoaded", function() {try { $Loader.cleanup() } catch(e) {}})<\/script></head><body></body></html>'),this.doc.close()}catch(e){this.$Loader.cleanup()}}else this.$Loader.cleanup()},i.prototype.destroy=function(){try{this.iframe&&document.body.removeChild(this.iframe),this.doc=this.win=this.iframe=this.win.$Loader=null}catch(e){}},e.exports=i},function(e,t,n){var i=n(4),o={};o.$Data=i,e.exports=o},function(e,t){var n={debounceExceptFirst:function(e,t){function n(){r=!r,e.apply(o,i)}var i,o,a,s,r=!0;return function(){if(i=Array.prototype.slice.call(arguments),o=this,r)return s=setTimeout((function(){r=!0}),t),n();s&&clearTimeout(s),a&&clearTimeout(a),a=setTimeout(n,t)}},debounce:function(e,t){function n(){e.apply(o,i)}var i,o,a;return function(){a&&clearTimeout(a),i=Array.prototype.slice.call(arguments),o=this,a=setTimeout(n,t)}},throttle:function(e,t){function n(){s=+new Date,a=null,e.apply(o,i)}var i,o,a,s=0;return function(){if(i=Array.prototype.slice.call(arguments),o=this,!a){var e=+new Date-s;e>=t?n():a=setTimeout(n,t-e)}}},queue:function(e,t){function n(){s=+new Date,i=o.length>1?setTimeout(n,t):null,e.apply(a.shift(),o.shift())}var i,o=[],a=[],s=0;return function(){if(o.push(Array.prototype.slice.call(arguments)),a.push(this),!i){var e=+new Date-s;e>=t?n():i=setTimeout(n,t-e)}}}};e.exports=n},function(e,t){var n="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+([a-z0-9][a-z0-9-]*[a-z0-9])",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)",o={email:new RegExp("^"+n+"$","i"),ip_token:new RegExp("^"+i+"$"),ip:new RegExp("^(?:"+i+"\\.){3}"+i+"$"),tld:/^(AERO|ARPA|ASIA|A[CDEFGILMNOQRSTUWXZ]|BIZ|B[ABDEFGHIJMNORSTVWYZ]|CAT|COM|COOP|C[ACDFGHIKLMNORUVXYZ]|D[EJKMOZ]|EDU|E[CEGRSTU]|F[IJKMOR]|GOV|G[ABDEFGHILMNPQRSTUWY]|H[KMNRTU]|INFO|INT|I[DELMNOQRST]|JOBS|J[EMOP]|K[EGHIMNPRWYZ]|L[ABCIKRSTUVY]||MIL|MOBI|MUSEUM|M[ACDEGHKLMNOPQRSTUVWXYZ]|NAME|NET|N[ACEFGILOPRUZ]|ORG|OM|PRO|P[AEFGHKLMNRSTWY]|QA|R[EOSUW]|S[ABCDEGHIJKLMNORTUVYZ]|TEL|TRAVEL|T[CDFGHJKLMNOPRTVWZ]|U[AGKSYZ]|V[ACEGINU]|W[FS]|XN|Y[ET]|Z[AMW])$/i,search:{email:new RegExp(n,"ig"),email_lws:new RegExp("(^|\\s+)"+n,"ig"),hurl:/(^|\s+)(?:(?:https?|ftps?):\/\/)(?:\S+)/gi,url:/(^|\s+)(?:[\w-]+\.)+(\w{2,})(?::[0-9]+)?(?:\/\S*)?/g,phone_number:/(?:^|\s+)(?:(?:\+?\d{1,3}|\(\d{1,3}\))([-.\s])?)?\d{3,10}(?:([-.\s])\d{3,10})?/gi},escape:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};e.exports=o},function(e,t){e.exports=function(e){return"number"==typeof e}},function(e,t,n){function i(e,t){e||a.log(t)}var o=n(5),a={ok:i,isFunction:function(e,t){i(o(e),t)},log:function(){}};e.exports=a},function(e,t){function n(){o&&o.unbindValue(i)}function i(e){e&&"resume"==e.socket_status$string&&(s=setTimeout(i,1e3));var t=function(){var e=+new Date,t=l.getValue(),n=c.getValue(),i=u.getValue(),o=d.getValue(),a=h.getValue(),s=p.getValue();if((n||t||i)&&"disconnecting"!==i){if("break"==n){if(f.indexOf(t)>-1)return"closed";if("disconnected"===i)return"closed"}return(null===n||"reconnect"==n||"resume"==n&&e-o>=1e3)&&"reattached"===t&&a<=s?"connected":"connecting"}}();t&&t!==r&&(a.update({friendly_connection_status$string:t}),r=t)}var o,a,s,r,l,c,u,d,h,p,g,m,f=["idle_disconnect","shutdown","error"],E={init:function(e,t){o=e.$("connection"),a=t.$("tmp"),l=o.$("status$string"),c=o.$("socket_status$string"),u=o.$("disconnection_status$string"),d=o.$("socket_resume_timestamp$int"),h=o.$("socket_open_timestamp$int"),p=o.$("client_reattached_timestamp$int"),g=e.$("livechat").$("account").$("status$string"),m=e.$("visitor").$("auth_status$string"),o.bindValue(i)},reset:function(){n(),s=clearTimeout(s),o=a=null,l=c=u=d=h=p=g=m=null,r=void 0},destroy:n,getConnectionClosedReason:function(){var e=l.getValue(),t=g.getValue(),n=u.getValue(),i=m.getValue();return"banned"===t?"banned":"disconnected"===n?"failed"===i?"authentication_failed":"logged_out":"idle_disconnect"===e?"idle_disconnect":"error"===e||"shutdown"===e?"server_error":"unknown"}};e.exports=E},function(e,t,n){function i(){o.write({active$int:+new Date})}var o,a=n(0),s=n(20),r={init:function(e,t){t=t||window,o=e.$("livechat").$("profile");var n={window:a.extend(t,!0),document:a.extend(t.document,!0)},r=s.throttle(i,l);n.document.on("mousemove",r),n.window.on("click",r),n.window.on("scroll",r),n.window.on("keypress",r),r()}},l=3e5;e.exports=r},function(e,t,n){var i=n(11),o={livechat:{timestamp$int:+new Date,settings:{file_sending:{enabled$bool:!0},behavior:{do_not_display$bool:!1},theme:{name$string:"simple",message_type$string:"bubble_avatar",colors:{placeholder$string:"_"},chat_button:{position$string:"br",position_mobile$string:"br"},chat_window:{position$string:"br",size$string:"medium",profile_card:{display_avatar$bool:!0,display_rating$bool:!0,display_title_name$bool:!0},use_banner$bool:!0,title_bar:{hide_minimize$bool:!1,hide_popout$bool:!1}},branding:{type$string:"icon_font_zopim"}},greetings:{online$string:i("Chat With Us"),offline$string:i("Leave a Message")},banner:{enabled$bool:!0,layout$string:"image_right",text$string:i("Chat with us"),image_path$string:"",image_data$string:""},chat_button:{hide_when_offline$bool:!1},chat_window:{mobile_mode$string:"popout",title_bar:{title$string:i("support"),status_messages:{online$string:i("We're online."),away$string:i("We're away."),offline$string:i("We're offline.")}}},login:{allowed_types:{email$bool:!0,facebook$bool:!0,twitter$bool:!1,google$bool:!0},phone_display$bool:!1,restrict_profile$bool:!1},concierge:{display_name$string:i("Live Support"),title$string:i("Ask us anything"),avatar_path$string:"",avatar_data$string:"",greeting:{enabled$bool:!1,message$string:i("Hi, welcome to our website!")}},branding:{hide_branding$bool:!1,hide_favicon$bool:!1,custom_favicon_path$string:""},language:{language$string:"--"},cookie_law:{enabled$bool:!1},sound:{disabled$bool:!1},popout:{enabled$bool:!0},rating:{enabled$bool:!0},end_chat_menu:{enabled$bool:!0,message$string:""},emoticons:{enabled$bool:!1},bubble:{enabled$bool:!0,title$string:i("Questions?"),text$string:i("Click here to chat with us")},forms:{pre_chat_form:{required$bool:!1,profile_required$bool:!1,message$string:"",form:{0:{name$string:"name",required$bool:0},1:{name$string:"email",required$bool:0},2:{label$string:i("Choose a department"),name$string:"department",required$bool:0,type$string:"department"},3:{label$string:i("Message"),name$string:"message",required$bool:0,type$string:"textarea"},4:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},offline_form:{message$string:i("Sorry, we aren't online at the moment. Leave a message and we'll get back to you."),message_disabled$string:i("Sorry, we aren't online at the moment."),post_submit_message$string:i("Thanks for the message! We'll get back to you as soon as we can."),profile_required$bool:!0,form:{0:{name$string:"name",required$bool:1},1:{name$string:"email",required$bool:1},2:{label$string:i("Message"),name$string:"message",required$bool:1,type$string:"textarea"},3:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},post_chat_form:{header$string:i("Nice chatting with you!"),message$string:i("How would you rate the chat experience you just had?"),comments_enabled$bool:!0,comments_messages:{good:{message$string:i("Thanks for the good rating! Would you like to leave a comment?"),placeholder$string:i("What did you like about this chat?")},bad:{message$string:i("Sorry that we disappointed you. We'd appreciate it if you could tell us how to improve."),placeholder$string:i("What did you dislike about this chat?")}}},card_form:{}}}}};e.exports=o},function(e,t){var n=Array.prototype.indexOf;"function"==typeof n&&/\[native code\]/.test(n.toString())||(n=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),e.exports=function(e,t,i){return n.call(t,e,i)}},function(e,t,n){var i=n(11),o=n(27),a=n(1),s=i("File size too large. Maximum limit is <size>."),r=i("The file you are trying to send is not supported."),l=i("File sending is temporarily disabled. Please try again later."),c=i("<size> bytes"),u=i("<size> KB"),d=i("<size> MB"),h={ERR_SIZE:"TOO_LARGE",ERR_FORMAT:"ILLEGAL_TYPE",ERR_DISABLED:"FILE_UPLOADS_TEMPORARILY_DISABLED"},p=/^(x-|vnd\.)/i,g=["png","jpg","jpeg","gif","txt","pdf"],m={},f=i("Failed to send. Please try again.");m[h.ERR_SIZE]=s,m[h.ERR_FORMAT]=r,m[h.ERR_DISABLED]=l,h.prettySize=function(){var e=[c,u,d],t=[0,1,2];return function(n,i){n=Math.max(parseInt(n,10)||0,0);for(var o,a=(i=i||{}).base2?1024:1e3,s=e.length;s--;)if(n>=(o=Math.pow(a,s)))return e[s].replace("<size>",(n/o).toFixed(t[s]))}}(),h.prettyType=function(e,t,n){n=n||window.Infinity;var i=e.split("/")[1];return(i=i&&i.replace(p,""))&&i.length<n?i.toLowerCase():((i=t.split(".").pop())||"").toLowerCase()},h.isValidType=function(e,t){if(e){t=t||g;var n=e.substr(e.lastIndexOf(".")+1).toLowerCase();return-1!==o(n,t)}},h.prettyError=function(e,t){var n=e in m?m[e]:f;return a(t)||(n=n.replace("<size>",h.prettySize(t||5e6))),n},h.blobToFile=function(e,t,n){return e.lastModifiedDate=new Date,e.name=t,new window.File([e],t,{type:n})},h.getExtension=function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1).toLowerCase()},e.exports=h},function(e,t,n){function i(e){return g[e]||"UNKNOWN_ERROR"}var o,a,s,r=n(12),l=n(17),c=n(9),u=n(3),d=n(28),h=n(8),p=n(6),g={TOO_LARGE:"EXCEED_SIZE_LIMIT",ILLEGAL_TYPE:"INVALID_EXTENSION",NO_SESSION:"INTERNAL_ERROR",UNEXPECTED_ERROR:"INTERNAL_ERROR",UNABLE_TO_GET_SETTINGS:"INTERNAL_ERROR",S3_UPLOAD_ERROR:"INTERNAL_ERROR",NO_GATES:"INTERNAL_ERROR",FILE_UPLOADS_DISABLED:"NOT_ALLOWED",FILE_UPLOADS_TEMPORARILY_DISABLED:"INVALID_PLAN"},m={FILE_SENDING_ERRORS:{NOT_SUPPORTED:"NOT_SUPPORTED",NOT_ALLOWED:"NOT_ALLOWED",CONN_ERROR:"CONN_ERROR",INVALID_EXTENSION:"INVALID_EXTENSION",INVALID_PLAN:"INVALID_PLAN",EXCEED_SIZE_LIMIT:"EXCEED_SIZE_LIMIT",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},init:function(e,t){a=t,(o=e).$("livechat").$("channel").$("department_id$int").on("value",(function(e){e&&(s=e)}))},sendChatMsg:function(e,t,n){var i=parseInt(t,10)||parseInt(a.getServerTime().toFixed(0),10),r=i+"",l=o.$("livechat").$("profile"),c=s,u=(e.msg||"")+"";"department"in e&&(c=e.department),o.$("livechat").$("channel").$("log").$(r).write({timestamp$int:i,type$string:"chat.msg",msg$string:u,nick$string:l.$("nick$string").getValue()||"",display_name$string:l.$("display_name$string").getValue()||"",department_id$int:c,unverified$bool:!0,__client$bool:!0},n)},sendFiles:function(e,t){var n=m._validateAndPrepareData(e);if(r(n))return n;var i=function(e,t){var n=parseInt(t,10)||parseInt(a.getServerTime().toFixed(0),10),i=n+"";return o.$("livechat").$("channel").$("log").$(i).write({timestamp$int:n,nick$string:o.$("livechat").$("profile").$("nick$string").getValue()||"",display_name$string:o.$("livechat").$("profile").$("display_name$string").getValue()||"",type$string:"chat.file.upload",file_name$string:e.file_name||"",file_type$string:e.file_type||"",file_size$int:e.file_size||0,unverified$bool:!0,__client$bool:!0}),n}({file_name:n.name,file_type:n.type,file_size:n.size},t),s="https://"+n.host+u.FILE_UPLOAD_PATH,l={ts:i},c={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid};m._uploadFiles(n.form_data,s,l,c)},sendFileWithCallback:function(e,t){var n=m._validateAndPrepareData([e]);if(t=c.once(t),r(n))l((function(){t(new window.Error(n))}));else{var o=a.registerCallback((function(e){return"ok"!==e.raw.__status?t(new window.Error(i(e.raw.error))):e.raw.data&&"chat.file"===e.raw.data.type?void t(null,p.pick(e.raw.data,["mime_type","name","size","url","metadata"])):t(new window.Error("INTERNAL_ERROR"))})),s="https://"+n.host+u.CALLBACK_FILE_UPLOAD_PATH,d={ts:parseInt(a.getServerTime().toFixed(0),10),__messageID:o,__socketID:a.getSocketID()},h={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid},g={error:function(){t(new window.Error("CONN_ERROR"))},load:function(){if(200!==this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){}t(e&&e.error?new window.Error(i(e.error)):new window.Error("INTERNAL_ERROR"))}}};m._uploadFiles(n.form_data,s,d,h,g)}},clearChatDepartmentID:function(){s=void 0},_validateAndPrepareData:function(e){if(!window.FormData)return"NOT_SUPPORTED";var t=o.$("livechat"),n=t.$("settings").$("file_sending"),i=t.$("settings").$("package"),s=n.$("enabled$bool").getValue(),r=(n.$("allowed_extensions$string").getValue()||"").trim().replace(/\s*,\s*/g,",").split(","),l=i.$("color_customization_enabled$int").getValue()||i.$("widget_customization_enabled$int").getValue(),c=t.$("profile").$("mid$string").getValue(),h=t.$("profile").$("uid$string").getValue(),p=a.getHost(),g=new window.FormData,m=[],f=[],E=0;if(!p)return"CONN_ERROR";if(!l)return"INVALID_PLAN";if(!s)return"NOT_ALLOWED";for(var v=0,T=e.length;v<T;v++){if(!d.isValidType(e[v].name,r))return"INVALID_EXTENSION";m.push(e[v].name),f.push(e[v].type),E+=e[v].size||0,g.append("file_"+e[v].name,e[v])}return E>u.FILE_UPLOAD_MAX?"EXCEED_SIZE_LIMIT":{form_data:g,name:m.join(", "),type:f.join(", "),size:E,host:p,mid:c,uid:h}},_uploadFiles:function(e,t,n,i,o){var a=new window.XMLHttpRequest,s=t+(Object.keys(n).length?"?"+h.buildQuery(n):"");if(a.upload){for(var r in a.open("POST",s,!0),i)Object.prototype.hasOwnProperty.call(i,r)&&a.setRequestHeader(r,i[r]);for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.addEventListener(l,o[l]);a.send(e)}}};e.exports=m},function(e,t){var n={SECOND:1e3};n.MINUTE=60*n.SECOND,n.HOUR=60*n.MINUTE,n.DAY=24*n.HOUR,n.WEEK=7*n.DAY,e.exports=n},function(e,t,n){function i(e){var t=this,n=this.longpoll=new s(!0),i=this.sender=new s(!0);n.on("success",(function(e){t.process_data(e)})),n.on("error",(function(){t.abort("longpoll error")})),i.on("success",(function(){t.ondrain&&t.ondrain()})),i.on("error",(function(){t.abort("sender error")})),this.url="https://"+e,o.window.on("unload",this.unload=function(){t.abort("unload")}),this.longpoll.load(this.url+["c",+new Date].join("/"))}var o=n(0),a=i;i.protocol="xdds";var s=n(18);i.prototype.process_data=function(e){e&&!this._abort&&(!this.ts&&this.onopen&&this.onopen(),this.ts=+new Date,this.onmessage&&this.onmessage(e,this.ts),this.longpoll&&this.longpoll.load(this.url+["p",+new Date].join("/")))},i.prototype.send=function(e){if(this._abort)return!1;var t=this.url+["d",+new Date,window.encodeURIComponent(e)].join("/");return this.sender&&this.sender.load(t),!1},i.prototype.abort=function(e){this._abort||(this._abort=!0,r("XDDS - abort: "+e),o.window.un("unload",this.unload),this.longpoll.destroy(),this.sender.destroy(),this.longpoll=this.sender=this.unload=null,this.onclose&&this.onclose(e),window.CollectGarbage&&window.CollectGarbage())};var r=function(){};e.exports=a},function(e,t){function n(e){var t,n=this;try{t=new i("wss://"+e+["c",+new Date].join("/"))}catch(e){}t&&(t.onclose=function(e){n.onclose&&n.onclose(e)},t.onerror=function(e){n.onerror&&n.onerror(e)},t.onmessage=function(e){n.onmessage&&n.onmessage(e.data,+new Date)},t.onopen=function(e){n.onopen&&n.onopen(e)},this.ws=t)}var i=window.WebSocket||window.MozWebSocket,o=i?n:null;n.prototype.abort=function(){if(this.ws&&!this._aborted){this._aborted=!0;var e=this.ws;e.readyState==i.CONNECTING?e.onopen=function(){e.close()}:e.close()}},n.prototype.send=function(e){return this.ws&&this.ws.send(e),!0},n.protocol="ws",e.exports=o},function(e,t,n){function i(e){function t(e){!o&&a.onopen&&a.onopen(),o=+new Date,e.origin==i&&("event-stream"==e.data?r.onload=null:a.onmessage&&a.onmessage(e.data,o))}var n,i,o,a=this,r=this.iframe=function(e){var t=document.createElement(e),n=t.style;return n.position="absolute",n.width=n.height=0,n.overflow="hidden",t}("iframe");this.url="https://"+e,r.src=this.src=n=this.url+["c",+new Date].join("/"),i=n.match(/https?:\/\/[^\/]+/)[0],r.onload=function(e){a.abort(e)},document.body.insertBefore(r,document.body.firstChild),s("SPM connecting to: "+this.url),window.addEventListener("message",t,!1),this.remove_listeners=function(){window.removeEventListener("message",t,!1)}}var o=n(2),a=window.postMessage?!o.isAndroid&&i:null;i.protocol="spm",i.prototype.send=function(e){return this.iframe.contentWindow.postMessage(e,this.src),!0},i.prototype.abort=function(e){this._abort||(this._abort=!0,s(e),this.iframe&&document.body.removeChild(this.iframe),this.onclose&&this.onclose(e),this.remove_listeners(),this.iframe=this.remove_listeners=null)};var s=function(){};e.exports=a},function(e,t,n){function i(e){function t(e){l("extracting data"),!n&&s.onopen&&s.onopen(),n=e,c+=i.responseText.substr(u),u=i.responseText.length,c=c.split("\n\n");for(var t=0;t<c.length-1;t++)s.onmessage&&s.onmessage(c[t],n);c=c[c.length-1],(u>1048576&&!c.length||u>4194304)&&s.abort()}var n,i=this.xhr=new a,s=this,c="",u=0;this.url=r+e,i.open("GET",this.url+["c",+new Date].join("/"),!0),i.onerror=function(e){s.abort(e)},o.isIE?(i.onprogress=function(){t(+new Date)},i.onload=function(){s.abort("close")}):i.onreadystatechange=function(){switch(i.readyState){case 3:t(+new Date);break;case 4:s.abort("close")}},l("CXHR connecting to: "+this.url),i.send()}var o=n(2),a=o.isIE?window.XDomainRequest:!o.isOpera&&!o.isAndroid&&window.XMLHttpRequest,s=a?i:null,r=o.isIE?"//":"https://";i.protocol="cxhr",i.prototype.send=function(e){function t(){l.abort("send failed")}function n(){l.xhr_sender=null,clearTimeout(i),l.ondrain&&l.ondrain()}var i,s=this.url+["d",+new Date].join("/"),r=new a,l=this;return r.open("POST",s,!0),r.send(e),o.isIE?(r.onerror=t,r.onload=n):r.onreadystatechange=function(){4==r.readyState&&(200!=r.status&&t(),n())},i=setTimeout(t,5e3),this.xhr_sender=r,!1},i.prototype.abort=function(e){this._abort||(this._abort=!0,l(e),this.xhr&&this.xhr.abort(),this.xhr_sender&&this.xhr_sender.abort(),this.onclose&&this.onclose(e),this.onerror=this.onload=this.onprogress=this.onreadystatechange=this.xhr=this.xhr_sender=null)};var l=function(){};e.exports=s},function(e,t,n){function i(e,t,n,o){for(var a in this.options=o=o||{},f)a in o||(o[a]=f[a]);if(!g&&!o.PREFERRED_PROVIDER)throw"No available transports";l.extend(this),this.provider=o.PREFERRED_PROVIDER||g,this.id=n||i.generateID(),this.host=e,this.ns=t,this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.status=window.navigator&&!1===window.navigator.onLine?"offline":"connecting",this.connected=!1,this.quality=0,this.rtt=o.INITIAL_RTT,this.clock_skew=0,this.connect_attempts=0,this.connections=0,this.disconnects=0,this.sent_bytes=0,this.recv_bytes=0,this.sent_messages=0,this.recv_messages=0,this.sent_frames=0,this.recv_frames=0,this.lost_frames=0,this.ooo_frames=0,this.remote_seq=0,this.local_seq=0,this.timeout_server=0,this.timeout_response_soft=0,this.timeout_response_hard=0,this.bytes_at_connect=-1,this.time_last_alive=-1,this.time_last_open=-1,this.starttime=Date.now(),this.uptime=0,this.connected_time=new s,this.idle_time=new s,this.last_frame_time=0,this.raw_clock_skew=0,this.smooth_skewed_transit_time_in=0,this.remote_smooth_skewed_transit_time_out=0,this.cur_conn_recv_messages=0,this.drained=!0,this.buffer=[],this.glitch_timer=this.reconnect_timer=null,this.reconnect_delay=o.RECONNECT_DELAY_MS*(.2*Math.random()+.8),this.keep_alive_interval=15e3,this.data_packet_queue=new r(this);var c=this;this.onoffline=function(){i.prototype.onoffline.call(c)},this.ononline=function(){i.prototype.ononline.call(c)},l.window.on("offline",this.onoffline),l.window.on("online",this.ononline),"connecting"===this.status&&this.connect()}function o(e){for(var t="",n=T;e-- >0;)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function a(e,t,n){return Math.min(n,Math.max(t,e))}function s(){this.count=0,this.sum=0,this.sq_sum=0,this.mean=0,this.stddev=0}function r(e){this.socket=e,this.queue=[],this.curFrame=null,this.curIdx=0,this.last_work_finished_time=0,this.work_timer=null,this.processing=!1}var l=n(0),c=n(10),u=n(34),d=n(33),h=n(32),p=n(31),g=h||u||d||p,m=p,f={INITIAL_RTT:1e3,RECONNECT_DELAY_MS:3e4,FAST_RECONNECT_MS:100,FLUSH_DELAY_MS:75,MAX_BLOCKING_TIME_MS:40,MAX_NO_WORK_TIME_MS:15,PREFERRED_PROVIDER:void 0};i.providers={},[u,d,h,p].forEach((function(e){e&&(i.providers[e.protocol]=e)})),i.available=function(){return!!g},i.generateID=function(){return o(16)},i.prototype.connect=function(e){if(this.debug("connect("+(e?"glitch":"")+")"),!this.reconnect_timer){var t=this,n=this.options,i=!this.connections||!this.cur_conn_recv_messages;!n.PREFERRED_PROVIDER&&i&&(this.provider=1&this.connect_attempts?m:g),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("connect"),this.socket=null),this.connected=!1,this.cur_conn_recv_messages=0,e&&(this.reconnect_delay=n.RECONNECT_DELAY_MS*(.2*Math.random()+.9),this.glitch_timer=setTimeout((function(){t.quality=0,t.glitch_timer=setTimeout((function(){t.status="reconnecting",t.fire_break()}),a(3*t.rtt,1e3,5e3))}),a(3*this.rtt,1e3,5e3))),this.debug("reconnect_delay: "+this.reconnect_delay),clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){t.reconnect_timer=null,t.reconnect_delay=Math.min(1.4*t.reconnect_delay+1e3,6e4),t.reconnect_delay*=.2*Math.random()+.9,t.connect()}),this.reconnect_delay),this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.debug("connecting: "+this.url),this.socket=new this.provider(this.url),this.transport=this.provider.protocol,this.connect_attempts++,this.socket.onopen=function(){t.status="connected",t.glitch_timer=clearTimeout(t.glitch_timer),t.reconnect_timer=clearTimeout(t.reconnect_timer),t.connections++,t.drained=!0,t.connected=!0,t.time_last_open=t.time_last_alive=Date.now(),t.uptime>=0&&(t.uptime-=t.time_last_open),1==t.connections?t.fire("open"):t.fire_resume(),t.flush(),t.keep_alive(),t.debug("connected"),-1==t.bytes_at_connect&&setTimeout((function(){t.bytes_at_connect=t.recv_bytes}),50)},this.socket.onmessage=function(e,n){t.onmessage(e,n)},this.socket.onclose=function(e){t._onclose(e)},this.socket.ondrain=function(e){t._ondrain(e)},this.socket.onerror=function(e){t._onerror(e)}}},i.prototype.reconnect=function(){this.reconnect_timer=clearTimeout(this.reconnect_timer),this.broken_reason="FORCED_RECONNECT",this.connect()},i.prototype.send=function(e,t){"disconnected"!=this.status&&("null"==this.buffer[0]&&(this.buffer=[]),this.buffer.push(c.stringify(e)),this.schedule_flush(),t&&this.response_timeout())},i.prototype.close=function(e){this.debug("close()"),this.flush_scheduled=clearTimeout(this.flush_scheduled),this.keep_alive_timer=clearTimeout(this.keep_alive_timer),this.reconnect_timer=clearTimeout(this.reconnect_timer),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.broken_reason||(this.broken_reason="CLOSE"),this.fire_break(),this.status=e?"reconnecting":"disconnected",this.connected=!1,this.quality=0,this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("close"),this.socket=null,e||(l.window.un("offline",this.onoffline),l.window.un("online",this.ononline)))},i.prototype.hibernate=function(){},i.prototype.onoffline=function(){this.debug("onoffline"),this.broken_reason="OFFLINE",this.close(!0)},i.prototype.ononline=function(){this.debug("ononline"),"disconnected"==this.status||this.connected||(this.reconnect_timer=clearTimeout(this.reconnect_timer),this.connect())},i.prototype.schedule_flush=function(){if("disconnected"!=this.status&&!this.flush_scheduled&&this.drained&&this.connected){var e=this,t=this.options;this.flush_scheduled=setTimeout((function(){e.flush()}),t.FLUSH_DELAY_MS)}},i.prototype.flush=function(){if("disconnected"!=this.status&&this.buffer.length&&this.drained&&this.connected){var e=this.buffer;this.sent_messages+=e.length,this.sent_frames++,e=this.generate_frame(e.join("\n")),this.drained=this.socket.send(e),this.sent_bytes+=e.length,this.flush_scheduled=clearTimeout(this.flush_scheduled),this.buffer=[],this.keep_alive(),this.time_last_alive=Date.now()}},i.prototype.keep_alive=function(){if("disconnected"!=this.status){clearTimeout(this.keep_alive_timer);var e=this;this.keep_alive_timer=setTimeout((function(){e.debug("pong!"),e.send(null)}),this.keep_alive_interval)}},i.prototype.response_timeout=function(){if(!this.response_timer){var e=this,t=a(4*this.rtt+this.options.FLUSH_DELAY_MS,2e3,2e4);this.response_timer=setTimeout((function(){e.timeout_response_soft++,e.debug("response timeout, "+t+"ms"),e.fire_break("SOFT_RESPONSE_TIMEOUT"),e.response_timer=setTimeout((function(){e.timeout_response_hard++,e.debug("response timeout - reconnecting"),e.broken_reason="HARD_RESPONSE_TIMEOUT",e.connect(!0)}),2*t)}),t)}},i.prototype.reset_server_timeout=function(){clearTimeout(this.timeout_timer);var e=this,t=4*this.keep_alive_interval+a(4*e.rtt,2e3,2e4);this.timeout_timer=setTimeout((function(){e.timeout_server++,e.debug("server "+t+"ms timeout, reconnecting"),e.broken_reason="SERVER_TIMEOUT",e.connect(!0)}),t)},i.prototype.fire_break=function(e){this.broken||this.fire("break",e||this.broken_reason),this.broken=!0,this.broken_reason="",this.uptime<0&&(this.uptime+=Date.now())},i.prototype.fire_resume=function(){this.broken_reason="",this.broken&&this.fire("resume"),this.broken=!1,this.uptime>=0&&(this.uptime-=Date.now())},i.prototype.onmessage=function(e,t){if(this.recv_bytes+=e.length,(e=e.split("\n")).length<6)this.debug("Bad data: "+e.join("\n"));else{var n=Date.now(),i=+e[0],o=+e[1],a=+e[2],s=(e[3],e[4]);switch(this.calculate_clocks(t||Date.now(),i,o),this.reset_server_timeout(),s){case"a":this.broken_reason="ABORT",this.close();break;case"d":this.response_timer=clearTimeout(this.response_timer),this.fire_resume(),this.check_sequence(a),this.data_packet_queue.queueFrame(e,5,n);break;case"e":this.debug("server: Are you still there?"),this.send(null),this.flush();break;case"n":this.remote_seq=a,this.keep_alive_interval=+e[5]||15e3,this.debug("keep_alive is "+this.keep_alive_interval+"ms"),this.reset_server_timeout(),this.connections>1&&this.fire("reopen");break;case"p":this.debug("ping!")}}},i.prototype._onclose=function(){var e=this,t=this.options;0==this.connections&&0==this.disconnects&&this.fire("close"),this.debug("_onclose"),this.disconnects++,this.broken_reason="HANGUP",this.connected?(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){e.reconnect_timer=null,e.connect(!0)}),t.FAST_RECONNECT_MS)):this.connections||1!=this.connect_attempts||(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){e.reconnect_timer=null,e.connect()}),0)),this.connected=!1,clearTimeout(this.keep_alive_timer),this.time_last_alive>0&&this.idle_time.add(Date.now()-this.time_last_alive),this.time_last_open>0&&this.connected_time.add(Date.now()-this.time_last_open),this.time_last_alive=this.time_last_open=-1,this.uptime<0&&(this.uptime+=Date.now())},i.prototype._ondrain=function(){this.drained=!0,this.flush()},i.prototype._onerror=function(e){this.debug("_error"),this.fire("error",e)},i.prototype.generate_frame=function(e,t){return[Date.now(),this.smooth_skewed_transit_time_in,++this.local_seq,this.remote_seq,t||"d",e].join("\n")};var E=Math.pow(50,.1),v=Math.pow(1e3,.1)-E;i.prototype.calculate_clocks=function(e,t,n){var i=e-t,o=1/(Math.max(0,e-this.last_frame_time)/45e3+1);this.smooth_skewed_transit_time_in?this.smooth_skewed_transit_time_in=o*this.smooth_skewed_transit_time_in+(1-o)*i:this.smooth_skewed_transit_time_in=i,this.remote_smooth_skewed_transit_time_out=n,this.smooth_skewed_transit_time_in&&this.remote_smooth_skewed_transit_time_out&&(this.rtt=this.smooth_skewed_transit_time_in+this.remote_smooth_skewed_transit_time_out,this.quality=~~(100*(1-(Math.pow(this.rtt,.1)-E)/v)),this.quality=Math.min(100,Math.max(0,this.quality)),this.raw_clock_skew=i-this.rtt/2,this.clock_skew?this.clock_skew=.9*this.clock_skew+.1*this.raw_clock_skew:this.clock_skew=this.raw_clock_skew),this.time_last_alive=this.last_frame_time=e},i.prototype.check_sequence=function(e){if(this.remote_seq+1==e)this.remote_seq=e;else if(this.remote_seq<e){var t=e-this.remote_seq+1;this.lost_frames+=t,this.fire("lost",t),this.remote_seq=e}else this.ooo_frames++,this.fire("out_of_order")},g&&(i.prototype.transport=g.protocol),i.prototype.debug=function(){};var T="+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.genDate=function(){var e=T,t=new Date,n=t.getUTCFullYear()-2e3,i=t.getUTCMonth()+1,o=t.getUTCDate(),a=t.getUTCHours(),s=t.getUTCMinutes(),r=t.getUTCSeconds(),l=t.getUTCMilliseconds();return e[n]+e[i]+e[o]+e[a]+e[s]+e[r]+e[l>>6]+e[63&l]},i.genID=o,s.prototype.add=function(e){this.count++,this.sum+=e,this.sq_sum+=e*e,this.mean=this.sum/this.count,this.stddev=Math.sqrt(this.sq_sum/this.count-this.mean*this.mean)};var _=r.prototype;_.queueFrame=function(e,t,n){this.queue.push({msgs:e,start_idx:t,receive_time:n}),this.process()},_.process=function(){var e=Date.now()-this.last_work_finished_time;this.processing&&e<this.socket.options.MAX_NO_WORK_TIME_MS||(this.work_timer=window.clearTimeout(this.work_timer),this.processing=!0,this.work())},_.work=function(){for(var e,t,n,i=Date.now()+this.socket.options.MAX_BLOCKING_TIME_MS,o=!1,a=this.socket.recv_frames,s=this,r=0;r<this.queue.length;r++){"start_time"in(e=this.queue[r])||(e.start_time=Date.now(),e.ticks=0,e.idx=e.start_idx),e.ticks++,n=(t=e.msgs).length;for(;e.idx<n;){var l,u=Date.now();if(u>i){o=!0;break}this.socket.dispatch_delay=u-e.receive_time;try{l=c.parse(t[e.idx]),e.idx++}catch(n){this.socket.debug("Invalid json message: "+t[e.idx]);continue}this.socket.fire("message",l),this.socket.recv_messages++,this.socket.cur_conn_recv_messages++}if(e.idx>=n&&this.socket.recv_frames++,o)break}this.queue.splice(0,this.socket.recv_frames-a),this.queue.length?this.work_timer=window.setTimeout((function(){s.work()}),0):this.processing=!1,this.last_work_finished_time=Date.now()},e.exports=i},function(e,t){var n={getServerTime:function(e){return Date.now()-(e?e.clock_skew:0)},getConnectionStats:function(e){return e?{connect_attempts:e.connect_attempts,connections:e.connections,disconnects:e.disconnects,timeout_server:e.timeout_server,timeout_response_soft:e.timeout_response_soft,timeout_response_hard:e.timeout_response_hard,sent_bytes:e.sent_bytes,recv_bytes:e.recv_bytes,sent_messages:e.sent_messages,recv_messages:e.recv_messages,sent_frames:e.sent_frames,recv_frames:e.recv_frames,lost_frames:e.lost_frames,ooo_frames:e.ooo_frames,bytes_at_connect:e.bytes_at_connect,rtt:e.rtt,clock_skew:e.clock_skew,reconnect_delay:e.reconnect_delay,quality:e.quality,host:e.host,status:e.status,last_frame_time:e.last_frame_time,local_time:Date.now()}:{status:"not connected"}}};e.exports=n},function(e,t,n){function i(e){return function(){try{var t=Array.prototype.slice.call(arguments,0);t.unshift(a),d.appendChild(a),a.addBehavior("#default#userData"),a.load(u);var n=e.apply(r,t);return d.removeChild(a),n}catch(e){}}}function o(e){return e.replace(p,"___")}var a,s=n(10),r={},l=window,c=l.document,u="localStorage";if(r.disabled=!1,r.set=function(){},r.get=function(){},r.remove=function(){},r.clear=function(){},r.transact=function(e,t,n){var i=r.get(e);null==n&&(n=t,t=null),void 0===i&&(i=t||{}),n(i),r.set(e,i)},r.getAll=function(){},r.serialize=function(e){return s.stringify(e)},r.deserialize=function(e){if("string"==typeof e)try{return s.parse(e)}catch(t){return e||void 0}},function(){try{return u in l&&l[u]}catch(e){return!1}}())a=l[u],r.set=function(e,t){return void 0===t?r.remove(e):(a.setItem(e,r.serialize(t)),t)},r.get=function(e){return r.deserialize(a.getItem(e))},r.remove=function(e){a.removeItem(e)},r.clear=function(){a.clear()},r.getAll=function(){for(var e={},t=0;t<a.length;++t){var n=a.key(t);e[n]=r.get(n)}return e};else if(c.documentElement.addBehavior){var d,h;try{(h=new window.ActiveXObject("htmlfile")).open(),h.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),h.close(),d=h.w.frames[0].document,a=d.createElement("div")}catch(e){a=c.createElement("div"),d=c.body}var p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");r.set=i((function(e,t,n){return t=o(t),void 0===n?r.remove(t):(e.setAttribute(t,r.serialize(n)),e.save(u),n)})),r.get=i((function(e,t){return t=o(t),r.deserialize(e.getAttribute(t))})),r.remove=i((function(e,t){t=o(t),e.removeAttribute(t),e.save(u)})),r.clear=i((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(u);for(var n,i=0;n=t[i];i++)e.removeAttribute(n.name);e.save(u)})),r.getAll=i((function(e){for(var t,n=e.XMLDocument.documentElement.attributes,i={},a=0;t=n[a];++a){var s=o(t.name);i[t.name]=r.deserialize(e.getAttribute(s))}return i}))}try{r.set("__storejs__","__storejs__"),"__storejs__"!=r.get("__storejs__")&&(r.disabled=!0),r.remove("__storejs__")}catch(e){r.disabled=!0}r.enabled=!r.disabled;var g=r;e.exports=g},function(e,t){e.exports=function(e){return!!e&&"false"!=e}},function(e,t,n){function i(){"prerender"!=document.visibilityState&&(document.removeEventListener("visibilitychange",i),ce.connect())}function o(e){if((ie="reattached"==e)&&(D.update({client_reattached_timestamp$int:+new Date}),_()),ie&&!1===I&&R&&N.$("livechat").$("profile").write({disconnect_timeout$int:S(R.rtt)}),"idle_disconnect"==e||"shutdown"==e||"error"==e){var t=N.$("livechat").$("account").$("status$string").getValue(),n=N.$("connection").$("backoff"),i=n.$("active$int").getValue()||0,o=n.$("max_seconds$int").getValue();"invalid_account_key"==t?J.warnBadEmbed():"widget_v2"==$&&"shutdown"==e&&i&&o&&function(e){window.clearTimeout(ce.reconnectTimer),ce.reconnectTimer=window.setTimeout((function(){ce.reconnect()}),1e3*e)}(o),c()}E()}function a(e){e&&(x()||Y.IS_POPOUT||e.mid$string&&Q.setIdentity(e.mid$string))}function s(e){k=!0===e}function r(e){(j=!1!==e)&&(se=!1,function(){for(var e=0,t=ae.length;e<t;e++){var n=ae[e];W(n)&&n()}ae=[]}())}function l(e){R&&R.send(e)}function c(e){R&&R.close(),y=!e,R=null}function u(e){e&&ce.reconnect()}function d(){L||(D.update({socket_open_timestamp$int:+new Date,socket_status$string:null,disconnection_status$string:null}),f())}function h(e){if(e){if(e.raw&&e.raw.__messageID in le){var t=le[e.raw.__messageID];delete le[e.raw.__messageID],t(e)}var n=N;if("update"in e){var i=J.getValueByReference(e,"livechat.account");i&&(U.$("account").update(i),J.fullyExtend(i,P.getValue("account")));var o=J.getValueByReference(e,"livechat.settings");o&&(U.$("settings").update(o),J.fullyExtend(o,P.getValue("settings")));var a=J.getValueByReference(e,"livechat.profile.mid$string");a&&a!==Q.getIdentity()&&(N.$("livechat").$("channel").update(null),N.$("livechat").$("profile").update(null),N.$("livechat").$("ui").$("chat_button").$("unread_count$int").update(0)),e.path&&(n=n.descend(e.path)),n.update(e.update),ce.fire("message",e)}}}function p(){D.update({socket_status$string:"break"})}function g(){D.update({socket_resume_timestamp$int:+new Date,socket_status$string:"resume"})}function m(){D.update({socket_open_timestamp$int:+new Date,socket_status$string:"reconnect"}),ie=!1,f()}function f(){if(Y.ACCOUNT_KEY){var e=function(){var e=Q.getIdentity(),t=x(),n=N.$("livechat").$("ui").getValue("mobile$bool")?"mobile":"desktop",i=N.$("livechat").$("settings").$("theme").getValue("name$string"),o={__type:"register",accountKey:Y.ACCOUNT_KEY,mID:e,ua:A.navigator.userAgent,dt:n,theme:i,cookie_law:t,rev:K.git_commit,source:$,source_ver:V,country_code:Y.COUNTRY_CODE,multisession:!0,gd_compatible:H};N.$("livechat").$("ui").$("popout$bool").getValue()?o.popout=!0:(o.title=C.title,o.url=A.location.href,o.ref=A.document.referrer);var a=ce._register;if(a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s]);return o}();X.retrieveIDToken((function(t,n){t?b():(n&&(delete e.mID,e.idt=n),l(e))}))}}function E(){var e=D.getValue("status$string"),t=D.getValue("socket_status$string");if(window.clearTimeout(v.timer),"error"!=e)if("break"==t)"idle_disconnect"==e?D.update({message$string:"idle_disconnect"}):(D.update({message$string:"reconnecting"}),v.timer=window.setTimeout(v,6e4));else if(null===t&&"registered"==e)D.update({message$string:"resuming"});else if(q(e)&&q(t)){var n=F.getValue()?"fast_init":"first_init";D.update({message$string:n})}else D.update({message$string:null});else v.timer=window.setTimeout(v,5e3)}function v(){D.update({message$string:"disconnected"})}function T(e){return le[re+=1]=e,re}function _(e){if(e){var t={};t.path=e.path,t.value=e.value,W(e.func)&&(t.__messageID=T(e.func)),oe.push(t)}if(R&&ie)for(;oe.length;)R.send(oe.shift())}function S(e){var t,n=10*te.SECOND,i=1*te.SECOND,o=120*te.SECOND,a=20*te.SECOND;return e=Math.round(e)||0,t=a+((e=Math.max(i,Math.min(e,n)))-i)/(n-i)*(o-a),Math.floor(t/1e3)}function b(){D.update({disconnection_status$string:"disconnecting"}),c(),v.timer=clearTimeout(v.timer),D.update({disconnection_status$string:"disconnected"})}function O(){B.unbindValue(r),M.unbindValue(s),N.$("livechat").$("profile").unbindValue(a),D.$("status$string").unbindValue(o),D.$("socket_status$string").unbindValue(E),D.$("reconnect$bool").unbindValue(u),b(),ie=!1,oe=[],ae=[],se=!1,re=0,le={},I=y=N=D=R=L=P=U=F=M=k=B=j=x=$=V=H=G=null}var I,y,A,C,N,D,R,w,L,P,U,F,M,k,B,j,x,$,V,H,G,W=n(5),K=n(4),q=n(1),z=n(0),Y=n(3),Q=n(14),X=n(13),J=n(6),Z=n(36),ee=n(35),te=n(2),ne={FLUSH_DELAY_MS:0,RECONNECT_DELAY_MS:1e4},ie=!1,oe=[],ae=[],se=!1,re=0,le={},ce=z.extend({init:function(e){x=e.isCookieDenied,w=Y.getMediatorHost(e.overrideProxy),$=e.source,V=e.source_ver,H=e.gd_compatible,A=e.activity_window||window,C=A.document,N=e.root,P=N.$("tmp").$("api_settings"),U=N.$("tmp").$("server_settings"),F=N.$("livechat").$("settings").$("cached$bool"),D=N.$("connection"),M=D.$("server_retired$bool"),(B=D.$("server_ready$bool")).bindValue(r),M.bindValue(s),(L=N.$("livechat").$("ui").$("mockup$bool").getValue())?D.$("status$string").update("reattached"):(N.$("livechat").$("profile").bindValue(a),D.$("status$string").bindValue(o),D.$("socket_status$string").bindValue(E),N.bindWrite(_),D.$("reconnect$bool").bindValue(u),window.__z_sdk?I=!0:(I=!1,"visibilityState"in document&&"prerender"==document.visibilityState?document.addEventListener("visibilitychange",i):ce.connect()))},send:l,connect:function(){R||y||((R=function(e){return G||new ee(e,"W",null,ne)}(w)).on("break",p),R.on("message",h),R.on("reopen",m),R.on("resume",g),R.on("open",d))},reconnect:function(){window.clearTimeout(ce.reconnectTimer),c(!0),ce.connect()},clientDisconnect:b,destroy:O,disconnect:function(){D.update({status$string:"idle_disconnect"})},getConnectionStats:function(){return Z.getConnectionStats(R)},getHost:function(){return w},getServerTime:function(){return Z.getServerTime(R)},getServerSettings:function(e){return e?U.getValue(e):U.getValue()},reconnectIfServerRetired:function(e){!j||k?(D.update({server_ready$bool:!1}),ae.push(e),se||(se=!0,R.reconnect())):e()},registerCallback:T,getSocketID:function(){return R?R.id:null},getDCTimeoutValue:S,setSocket:function(e){G=e},reset:O});e.exports=ce},function(e,t,n){var i=n(15),o={QUICK_REPLIES:"QUICK_REPLIES",BUTTON_TEMPLATE:"BUTTON_TEMPLATE",PANEL_TEMPLATE:"PANEL_TEMPLATE",PANEL_TEMPLATE_CAROUSEL:"PANEL_TEMPLATE_CAROUSEL",LIST_TEMPLATE:"LIST_TEMPLATE"},a="QUICK_REPLY_ACTION",s="LINK_ACTION",r=i.obj({text:i.type("string"),action:i.obj({type:i.any([i.equal(a),i.equal(s)]),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}),l=i.obj({type:i.equal(o.PANEL_TEMPLATE),panel:i.obj({heading:i.type("string"),paragraph:i.type("string"),image_url:i.type("string"),action:i.obj({type:i.equal(s),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading"],whitelistedKeysOnly:!0}),buttons:i.each(r)},{requiredKeys:["type","panel"],whitelistedKeysOnly:!0}),c={QUICK_REPLIES:i.obj({type:i.equal(o.QUICK_REPLIES),msg:i.type("string"),quick_replies:i.each(i.obj({text:i.type("string"),action:i.obj({type:i.equal(a),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}))},{requiredKeys:["type","msg","quick_replies"],whitelistedKeysOnly:!0}),BUTTON_TEMPLATE:i.obj({type:i.equal(o.BUTTON_TEMPLATE),msg:i.type("string"),buttons:i.each(r)},{requiredKeys:["type","msg","buttons"],whitelistedKeysOnly:!0}),PANEL_TEMPLATE:l,PANEL_TEMPLATE_CAROUSEL:i.obj({type:i.equal(o.PANEL_TEMPLATE_CAROUSEL),items:i.each(l).minLength(2).maxLength(10)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0}),LIST_TEMPLATE:i.obj({type:i.equal(o.LIST_TEMPLATE),items:i.each(i.obj({heading:i.type("string"),paragraph:i.type("string"),image_url:i.type("string"),action:i.obj({type:i.equal(s),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading","paragraph","action"],whitelistedKeysOnly:!0})),buttons:i.each(r)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0})},u={validate:function(e){var t=e.type,n=c[t];if(!n)return t?new Error(t+" type is not supported. Please upgrade the Web SDK version."):new Error('Structured message object should contain "type" property');var i=n(e);if(i){var o=i.paths&&"type"===i.paths.pop()&&i.actual?i.actual+" type is not supported. Please upgrade the Web SDK version.":i.message;return new Error(o)}},STRUCTURED_MSG_VALIDATOR:c,STRUCTURED_MSG_TYPE:o};e.exports=u},function(e,t,n){var i=n(22),o=n(5),a={rateLimit:function(e,t){if(!i(t.interval)||!i(t.limit))throw new Error("requires numeric interval and limit");if(t.callback&&!o(t.callback))throw new Error("requires callback to be a function");return function(){var n=Date.now();if(t.start>n-t.interval){if(t.count||(t.count=0),t.count++,t.count>t.limit)return void(t.callback&&t.callback())}else t.start=n,t.count=1;return e.apply(this,arguments)}}};e.exports=a},function(e,t,n){function i(e,t,n){var i=this;o.extend(i);var s=new a;t=t||{},s.setScope(t),s.on("success",n),s.on("error",(function(e){i.onError(e)})),s.load(e)}var o=n(0),a=n(18);i.prototype.onError=function(e){},e.exports=i},function(e,t,n){function i(){var e=Array.prototype.slice.call(arguments),t=e.shift();this.fqname=t,this.name=t.split(".").pop(),this.callbacks=[],this.dependencies=e,l.push(this)}function o(e){e()}var a=n(19),s=n(4),r=n(42),l=[],c=/^function *\( *\) *{ *([\s\S]*) *}$/;i.ensureLoaded=function(e,t){e instanceof i?e.ensureLoaded(t):t()},i.prototype.ensureLoaded=function(e){this.ifLoaded(e),this.load()},i.prototype.ifLoaded=function(e){this.callbacks.push(e)},i.prototype.load=function(){function e(e){!function(e,t){var n=a[e];n.module_function=new Function("$Modules",t.toString().replace(c,"$1")),n.ready()}(e[0],e[1])}var t,n,i=this.getDependencies();for(t=0;t<i.length;t++)(n=i[t]).loader||(n.loader=new r(s.baseURL+"/lib/"+s.build_number+"/"+n.fqname+".js",a,e))},i.prototype.getDependencies=function(){var e,t=this.dependencies,n=[this];for(e=0;e<t.length;e++){var i=a[t[e]];n=n.concat(i.getDependencies())}return n},i.prototype.ready=function(){if(!this.dependencies.length&&this.module_function){for(e=l.length-1;e>=0;e--)if(l[e]==this){l.splice(e,1);break}this.module_function(a);var e,t=a[this.fqname];for(t.ifLoaded=t.ensureLoaded=o,e=0;e<this.callbacks.length;e++)this.callbacks[e](t);!function(e){var t,n,i,o;for(t=l.length-1;t>=0;t--){for(n=(o=(i=l[t]).dependencies).length-1;n>=0;n--)if(o[n]==e){o.splice(n,1);break}i.ready()}}(this.fqname),delete this.callbacks,delete this.fqname,delete this.name,delete this.dependencies,delete this.loader}},a.Module=i,e.exports=i},function(e,t){var n={getVariable:function(e){return window[e]}};e.exports=n},function(e,t,n){var i=n(44);e.exports=function(){var e=i.getVariable("navigator"),t=e.userAgent||"",n=e.vendor||"",o=t||n||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}},function(e,t,n){function i(e,t){if(a(t)){if(t.length===e.length)return t.concat();throw new window.Error("Invalid weights array: length does not match")}if(s(t))return o(e,t);throw new window.Error("Invalid weights supplied")}function o(e,t,n){var i,o,r;if(!a(e))throw new TypeError(" arr is not an array");var l=Object(e),c=l.length>>>0;if(!s(t))throw new TypeError(t+" is not a function");for(arguments.length>2&&(i=n),o=new Array(c),r=0;r<c;){var u,d;r in l&&(u=l[r],d=t.call(i,u,r,l),o[r]=d),r++}return o}var a=n(7),s=n(5),r={shuffle:function(e,t){return t?function(e,t){var n,o,a,s,r,l=e.concat();for(t=i(e,t),e.length=0,r=0,n=t.length;n--;)r+=t[n];for(a=Math.random()*r,s=0,n=0;l.length;)s+=t[n],a<=s?(r-=t[n],o=l.splice(n,1)[0],t.splice(n,1),e.push(o),a=Math.random()*r,s=0,n=0):n++;return e}(e,t):function(e){for(var t,n,i=e.length;i>1;)t=Math.floor(i--*Math.random()),n=e[t],e[t]=e[i],e[i]=n;return e}(e)},random_index:function(e,t){if(!e||e.length<=0)return-1;if(!t)return Math.floor(Math.random()*e.length);var n,o=0;for(n=(t=i(e,t)).length;n--;)o+=t[n];var a=Math.random()*o,s=0,r=t.length;for(n=0;n<r-1;n++)if(a<=(s+=t[n]))return n;return n},map:o};e.exports=r},function(e,t){function n(e,t){this.name=e,this.leaf=/\$[a-z]+$/.test(e),this.parentNode=t,this.leaf||(this.deleted=!1,this.childNodes={},this.keys={})}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.prototype.fqname=function(){return function(e){for(var t="",n=0;n<e.length;n++)/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(e[n])?t+="."+e[n]:t+="["+JSON.stringify(e[n])+"]";return t.substr(1)}(this.path())},n.prototype.path=function(){for(var e=this,t=[this.name];e=e.parentNode;)t.unshift(e.name);return t},n.prototype._getOrCreateChildNode=function(e){var t;return i(this.childNodes,e)?t=this.childNodes[e]:(t=new n(e,this),this.childNodes[e]=t,this.deleted&&t.undeleteParents()),t},n.prototype.descend=function(e){var t,n,i=this;for("string"==typeof e&&(e=e.split(".")),t=0,n=e.length;t<n;t++)i=i._getOrCreateChildNode(e[t]);return i},n.prototype.$$=n.prototype.descend,n.prototype.$=function(e,t,n,i,o,a,s,r,l){var c=this._getOrCreateChildNode(e);return t?c.$(t,n,i,o,a,s,r,l):c},n.prototype.update=function(e,t){var n,i,o,a,s;if(null!=e&&this.undeleteParents(),this.leaf)this.value!==e&&(this.value=e,a=!0,this.notifyListeners(e,t));else if(null==e){if(!this.deleted){for(n in a=null,this.deleted=!0,this.childNodes)this.childNodes[n].update(null,!0);this.notifyListeners(a,t)}}else{if(this.deleted)for(n in this.deleted=!1,a=e,e)this.$(n).update(e[n],!0);else for(n in e)o=this.$(n),i=e[n],o.leaf?o.update(i,!0)&&(a||(a={}),a[n]=i):void 0!==(s=o.update(i,!0))&&(a||(a={}),a[n]=s);a&&this.notifyListeners(a,t)}return a},n.prototype.replace=function(e,t){var n,o,a,s,r;if(null!=e&&this.undeleteParents(),this.leaf)this.value!==e&&(this.value=e,s=!0,this.notifyListeners(e,t));else if(null==e){if(!this.deleted){for(n in s=null,this.deleted=!0,this.childNodes)this.childNodes[n].replace(null,!0);this.notifyListeners(s,t)}}else{if(this.deleted)for(n in this.deleted=!1,s=e,e)this.$(n).replace(e[n],!0);else{for(n in this.childNodes)i(e,n)||((a=this.childNodes[n]).leaf?a.replace(null,!0)&&(s||(s={}),s[n]=null):void 0!==(r=a.replace(null,!0))&&(s||(s={}),s[n]=null));for(n in e)a=this.$(n),o=e[n],a.leaf?a.replace(o,!0)&&(s||(s={}),s[n]=o):void 0!==(r=a.replace(o,!0))&&(s||(s={}),s[n]=r)}s&&this.notifyListeners(s,t)}return s},n.prototype.undeleteParents=function(){for(var e=this.parentNode;e&&e.deleted;)e.deleted=!1,e=e.parentNode},n.prototype.write=function(e,t,n){"function"==typeof t&&(n=t,t=!1);var i={path:this.path(),value:e};"function"==typeof n&&(i.func=n),this.update(e,t||!1);for(var o=this;o.parentNode;)o=o.parentNode;o.notifyWriteListeners(i)},n.prototype.bindWrite=function(e){this.getWriteListeners().push(e)},n.prototype.getValueListeners=function(){return this.listeners_value||(this.listeners_value=[]),this.listeners_value},n.prototype.getWriteListeners=function(){return this.listeners_write||(this.listeners_write=[]),this.listeners_write},n.prototype.getKeysListeners=function(){return this.listeners_keys||(this.listeners_keys=[]),this.listeners_keys},n.prototype.bindValue=function(e){this.getValueListeners().push(e);try{e.call(this,this.getValue())}catch(e){}},n.prototype.bindKeys=function(e){if(!this.leaf){this.getKeysListeners().push(e);try{e.call(this,this.getKeys(),[])}catch(e){}}},n.prototype.unbindValue=function(e){for(var t=this.getValueListeners(),n=0;n<t.length;n++)if(t[n]==e)return void t.splice(n,1)},n.prototype.unbindKeys=function(e){if(!this.leaf)for(var t=this.getKeysListeners(),n=0;n<t.length;n++)if(t[n]==e)return void t.splice(n,1)},n.prototype.on=function(e,t){switch(e){case"value":this.bindValue(t);break;case"keys":this.bindKeys(t)}},n.prototype.un=function(e,t){switch(e){case"value":this.unbindValue(t);break;case"keys":this.unbindKeys(t)}},n.prototype.notifyListeners=function(e,t){var n,o,a,s;if(!this.leaf)if(e)for(n in e)null!=e[n]?i(this.keys,n)||(this.keys[n]=1,o||(o=[]),o.push(n)):i(this.keys,n)&&(delete this.keys[n],a||(a=[]),a.push(n));else for(n in this.keys)delete this.keys[n],a||(a=[]),a.push(n);if(this.listeners_value)for(var r=0,l=(s=this.getValueListeners().concat()).length;r<l;r++)try{s[r](e)}catch(e){}if(!this.leaf){if(this.listeners_keys&&(o||a))for(r=0,l=(s=this.getKeysListeners().concat()).length;r<l;r++)try{s[r](o||[],a||[])}catch(e){}if(!t&&this.parentNode){var c={};c[this.name]=e,this.parentNode.notifyListeners(c,t)}}},n.prototype.notifyWriteListeners=function(e){if(this.listeners_write)for(var t=this.getWriteListeners().concat(),n=0;n<t.length;n++)try{t[n].call(this,e)}catch(e){}},n.prototype.getValue=function(e){if(e)return this.descend(e).getValue();if(this.leaf)return this.value;if(this.deleted)return null;var t,n,i={};for(var o in this.childNodes)null!=(n=this.childNodes[o].getValue())&&(i[o]=n,t=!0);return t?i:null},n.prototype.hasKey=function(e){return i(this.keys,e)},n.prototype.getKeys=function(){if(this.leaf)return null;var e=[];for(var t in this.keys)e.push(t);return e},n.prototype.gc=function(){if(this.leaf)throw new TypeError("Leaf nodes cannot be collected");var e=!0;for(var t in this.childNodes){var n=this.childNodes[t];e=n.leaf?!(n.listeners_value&&n.listeners_value.length)&&null==n.value&&(delete this.keys[t],delete this.childNodes[t])&&e:n.gc()&&(delete this.keys[t],delete this.childNodes[t])&&e}return e&&this.deleted&&!(this.listeners_keys&&this.listeners_keys.length)&&!(this.listeners_value&&this.listeners_value.length)},n.DataNode=n,e.exports=n},function(e,t){var n=function(e,t){return e===t||e&&t&&"object"==typeof e&&"object"==typeof t&&i(e,t)},i=function(e,t){var i;for(i in e)if(!n(e[i],t[i]))return!1;for(i in t)if(!n(e[i],t[i]))return!1;return!0},o=function(e){if("object"!=typeof e||!e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));return t},a={equal:n,clone:o,extend:function(e){if(e)for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t];if(i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}};e.exports=a},function(e,t,n){function i(e,t,n,i){N=t,D=n,R=i,ie.init(D,R),g("connection_update","tmp.friendly_connection_status$string",_e),g("account_status","livechat.account.status$string",E(Te)),g("visitor_update","livechat.profile",function(e,t){return function(n){return e.some((function(e){return n&&e in n}))?[t()]:[null]}}(["email$string","phone$string","display_name$string"],o)),g("department_update","livechat.departments",_(["name$string","status$string"],s)),g("agent_update","livechat.agents",_(["avatar_path$string","display_name$string","title$string"],u)),g("chat","livechat.channel.log",v(Ce)),g("chat","livechat.agents",v(ye)),g("chat","livechat.triggers.agents",v(Ae)),g("chat","livechat.channel.queue_position$int",f),g("history","livechat.history.log",v(Ce)),g("chat","livechat.channel.last_read",v(Ne)),L=function(e){(e.path?R.descend(e.path):R).update(e.update)},N.on("message",L),P=e.suppress_console_error||!1,te.init(e.activity_window);var a=te.DOM.getVariable("account_status");switch(a){case"invalid_account_key":return"invalid_account_key";case"banned":return"banned"}return N.init({root:D,overrideProxy:e.override_proxy,isCookieDenied:function(){return!1},source:le,lastHost:te.DOM.getVariable("web_sdk_last_host"),source_ver:F.release_tag,activity_window:e.activity_window,gd_compatible:1}),D.$("connection").$("server$string").bindValue((function(e){e&&te.DOM.saveVariable("web_sdk_last_host",e)})),R.$("livechat").$("account").$("status$string").bindValue((function(e){e&&te.DOM.saveVariable("account_status",e)})),J.init(D,N),ne.init(D,e.activity_window),se=!0,a}function o(){return be(R.$("livechat").$("profile").getValue())}function a(e){var t=ue.type("number"),n=R.$("livechat");if(!O([t],[e],"getDepartment"))return n.$("account").$("departments_migrated$bool").getValue()&&n.$("dg_mappings").hasKey(e)&&console.warn("legacy department id is deprecated, use group id %s instead",n.$("dg_mappings").$(e).$("group_id$int").getValue()),s(e)}function s(e){var t=R.$("livechat"),n=t.$("departments").$(e).getValue();if(t.$("account").$("departments_migrated$bool").getValue()){if(n&&t.$("dg_mappings").hasKey(e)){var i=t.$("dg_mappings").$(e).$("group_id$int").getValue();return Oe(n,i)}!n&&t.$("groups").hasKey(e)&&(n=t.$("groups").$(e).getValue())}return n?Oe(n,e):void 0}function r(e,t,n,i){if(!O([ue.type("string").regex(he).chain(me),ge],[t,i],n)){i=i||ce;var o={};o[e]=t.trim(),D.$("livechat").$("channel").$("tags").write(o,A(i))}}function l(e,t,n,i){if(!O([ue.each(ue.type("string").regex(he).chain(me)).minLength(1),ge],[t,i],n)){i=i||ce;for(var o=0,a=t.length;o<a;o++)t[o]=t[o].trim();var s={};s[e]=t.join(","),D.$("livechat").$("channel").$("tags").write(s,A(i))}}function c(){return R.$("livechat").$("channel").$("chatting$bool").getValue()||!1}function u(e){return Ie(R.$("livechat").$("agents").$(e).getValue(),e)}function d(e){return 0===e.indexOf("visitor:")?"visitor":e}function h(e){if(!e.type$string)return null;if(!e.nick$string)return null;var t={nick:d(e.nick$string),type:e.type$string},n=e.msg$string;switch(e.first$bool&&(t.first=e.first$bool),e.type$string){case"chat.msg":if("attachment"in e){if(!0===e.unverified$bool)return null;var i,o=e.attachment,a={mime_type:o.mime_type$string,name:o.name$string,size:o.size$int,url:o.url$string};return"metadata"in o&&(i=o.metadata,a.metadata={width:i.width$int,height:i.height$int}),"deleted$bool"in o&&(a.deleted=o.deleted$bool),$.extend(t,{type:"chat.file",display_name:e.display_name$string,attachment:a})}if("structured_msg"in e){var s=function e(t){if(!t||"object"!=typeof t)return t;var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=S(i),a=e(t[i]);n[o]=a}return n}(e.structured_msg);!function e(t,n){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(-1!==n.indexOf(i)&&(t[i]=T(t[i],(function(e){return e}))),"object"==typeof t[i]&&e(t[i],n))}(s,["items","buttons","quick_replies"]);var r=Q.validate(s);r?b(r,'Unsupported structured message in "chat.msg" event'):t.structured_msg=s}return $.extend(t,{display_name:e.display_name$string,msg:n,options:e.options$string?e.options$string.split("/"):[]});case"chat.rating":return $.extend(t,{display_name:e.display_name$string,new_rating:e.new_rating$string,rating:e.rating$string});case"chat.comment":return $.extend(t,{display_name:e.display_name$string,comment:e.comment$string,new_comment:e.new_comment$string});case"chat.memberleave":return $.extend(t,{display_name:e.display_name$string});case"chat.memberjoin":case"chat.request.rating":return $.extend(t,{display_name:e.display_name$string});case"chat.event":var l;return"agent:system"===e.nick$string&&(l=/Please wait while our agents attend to you. There are currently (\d+) visitor\(s\) waiting to be served\./.exec(n))?{type:"chat.wait_queue",nick:"system.queue",wait_queue:parseInt(l[1],10)}:null;case"chat.join":var c=e.history;if(c&&c[0]){var u=$.extend({},c[0]),p=u.timestamp$int;return u.type$string=u.__type$string,u.display_name$string=u.name$string,p*=1e3,u.timestamp$int=p,h(u)}return null;case"chat.file.update":default:return null}}function p(e,t,n){return function(i,o){if(null===i)return{};for(var a={},s=0,r=e.length;s<r;s++){var l=e[s];l in i&&(a[S(l)]=i[l])}if(j(t)&&Object.keys(a).length&&(a[t]=o),x(n)){var c=n(i,o);return null===c?{}:$.extend(a,c)}return a}}function g(e,t,n){R.descend(t).bindValue((function(t){n(t).forEach((function(t){m(e,t)}))}))}function m(e,t){if(t){if(t instanceof Error){if(!t.message)return}else if("object"==typeof t&&!Object.keys(t).length)return;re.fire("data",{type:e,detail:t})}}function f(e){return["number"!=typeof e?null:{type:"chat.queue_position",nick:"system.queue",queue_position:e}]}function E(e){return function(t){return void 0===t?[null]:[e[t]||null]}}function v(e){return function(t){return T(t,e)}}function T(e,t){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.push(t(e[i],i));return n}function _(e,t){return function(n){var i=[];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var a=n[o];e.some((function(e){return a&&e in a}))&&i.push(t(o))}return i}}function S(e){return e.split("$")[0]}function b(e,t,n){(e=new Error("Zendesk Chat Web SDK: Error: "+(t?t+": ":"")+e.message)).context=t,e.extra=n,P||window.console&&window.console.error&&console.error(e.message),m("error",e)}function O(e,t,n){for(var i=0;i<e.length;i++){var o=(0,e[i])(t[i]);if(o)return b(o,n),!0}return!1}function I(e){if("[object File]"!==Object.prototype.toString.call(e))return new Error("Expect a File object")}function y(e){if(!a(e))return new Error("Expect a valid department id")}function A(e){return function(t){var n=t.raw,i="ok"===n.__status?null:new window.Error("Failed");for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&0===o.indexOf("__")&&delete n[o];e(i,n)}}function C(e){if(e.length<=1)return e;var t=[];return e.forEach((function(e){t[e.start]=void 0!==t[e.start]?t[e.start]+1:1,t[e.end]=void 0!==t[e.end]?t[e.end]-1:-1})),function(e){var t,n=[],i=0;return e.forEach((function(e,o){e>0&&!t&&(t=o),e&&0===(i+=e)&&(n.push({start:t,end:o}),t=void 0)})),n}(t)}var N,D,R,w,L,P,U=n(2),F=n(4),M=n(0),k=n(22),B=n(1),j=n(12),x=n(5),$=n(48),V=n(47),H=n(21),G=n(20),W=n(3),K=n(45),q=n(6),z=n(15),Y=n(41),Q=n(40),X=n(39),J=n(29),Z=n(26),ee=n(13),te=n(14),ne=n(25),ie=n(24),oe={init:function(e){if(w&&re.un("data",w),w=function(e){ae.fire(e.type,e.detail)},re.on("data",w),se)b(new Error("Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code"),"init");else if(U.isIE<=10)b(new Error("The current browser you are on is not supported by the Web SDK. Please refer to the documentation to learn about the system requirements for Zendesk Chat."),"init");else if(!O([ue.obj({account_key:ue.type("string").ok(),suppress_console_error:ue.type("boolean"),override_auth_server_host:ue.type("string").ok(),override_proxy:ue.type("string").ok(),authentication:ue.obj({jwt_fn:ue.type("function").ok()},{requiredKeys:["jwt_fn"]}),activity_window:ue.type("object").chain(fe),popout:ue.type("boolean")},{requiredKeys:["account_key"]})],[e],"init")){var t=new V("root"),n=new V("root"),o={livechat:{settings:$.clone(Z.livechat.settings)}};if(t.update(o),n.update(o),K()&&t.$("livechat").$("ui").$("mobile$bool").update(!0),W.ACCOUNT_KEY=e.account_key,!e.authentication)return i(e,X,t,n);ee.setOverrideHost(e.override_auth_server_host),ee.setSiteJWTFunc(e.authentication.jwt_fn),ee.setDataNode(t),ee.authenticate((function(o){o?b(new Error("Failed to verify token: "+o.reason+(o.details?": "+o.details:"")),"init",{reason:o.reason,details:o.details}):i(e,X,t,n)}))}},reconnect:function(){let e=te.DOM.getVariable("account_status");return"invalid_account_key"!==e?"closed"===ae.getConnectionStatus()?ve():b(new Error("Call has been ignored due to invalid connection status"),"reconnect"):q.warnBadEmbed(),e},getFirehose:function(){return re},setVisitorInfo:function(e,t){if(!O([ue.obj({display_name:ue.any([ue.equal(""),ue.type("string").regex(he).maxLength(255)]),email:ue.any([ue.equal(""),ue.type("string").regex(H.email)]),phone:pe}),ge],[e,t],"setVisitorInfo")){var n={};t=t||ce,"display_name"in e&&(n.display_name$string=e.display_name),"email"in e&&(n.email$string=e.email),"phone"in e&&(n.phone$string=e.phone),D.$("livechat").$("profile").write(n,A(t))}},getVisitorInfo:o,setVisitorDefaultDepartment:function(e,t){O([ue.type("number").chain(y),ge],[e,t],"setVisitorDefaultDepartment")||(t=t||ce,D.$("livechat").$("profile").write({department_id$int:e},A(t)))},getVisitorDefaultDepartment:function(){var e=R.$("livechat").$("profile").$("department_id$int").getValue();return k(e)?e:void 0},getAllDepartments:function(){var e=R.$("livechat");return T(e.$("account").$("departments_migrated$bool").getValue()?e.$("groups").getValue():e.$("departments").getValue(),Oe)},getDepartment:a,clearVisitorDefaultDepartment:function(e){O([ge],[e],"clearVisitorDefaultDepartment")||(e=e||ce,D.$("livechat").$("profile").write({department_id$int:null},A(e)))},addTag:function(e,t){r("added$string",e,"addTag",t)},removeTag:function(e,t){r("removed$string",e,"removeTag",t)},addTags:function(e,t){l("added$string",e,"addTags",t)},removeTags:function(e,t){l("removed$string",e,"removeTags",t)},sendChatMsg:function(e,t){O([ue.type("string").regex(he),ge],[e,t],"sendChatMsg")||(t=t||ce,J.sendChatMsg({msg:e.trim()},null,A(t)))},sendFile:function(e,t){O([ue.chain(I),ge],[e,t],"sendFile")||function(e,t){t=t||ce,X.reconnectIfServerRetired((function(){J.sendFileWithCallback(e,t)}))}(e,t)},sendVisitorPath:function(e,t){O([ue.obj({title:ue.type("string").regex(he),url:ue.type("string").regex(de)},{requiredKeys:["title","url"]}),ge],[e,t],"sendVisitorPath")||(t=t||ce,D.$("livechat").$("session").$("page_path").write({url$string:e.url,title$string:e.title},A(t)))},sendChatComment:function(e,t){O([ue.type("string"),ge],[e,t],"sendChatComment")||(t=t||ce,D.$("livechat").$("channel").write({comment$string:e},A(t)))},sendChatRating:function(e,t){O([ue.any([ue.equal(null),ue.equal("good"),ue.equal("bad")]),ge],[e,t],"sendChatRating")||(t=t||ce,D.$("livechat").$("channel").write({rating$string:e},A(t)))},getChatInfo:function(){var e=R.$("livechat").$("channel").$("rating$string").getValue(),t=R.$("livechat").$("channel").$("comment$string").getValue(),n={};return B(e)||(n.rating=e),B(t)||(n.comment=t),n},endChat:function(e,t){var n=ue.obj({clear_dept_id_on_chat_ended:ue.type("boolean")}),i=D.$("livechat").$("channel");"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),O([n,ge],[e,t],"endChat")||(t=t||ce,i.write({chatting$bool:!1},A(t)),e.clear_dept_id_on_chat_ended&&J.clearChatDepartmentID())},isChatting:c,getServingAgentsInfo:function(){return T(R.$("livechat").$("agents").getValue(),Ie)},sendOfflineMsg:function(e,t){if(!O([ue.obj({name:ue.type("string").regex(he).maxLength(255),email:ue.type("string").regex(H.email),message:ue.type("string").regex(he),phone:pe},{requiredKeys:["name","email","message"]}),ge],[e,t],"sendOfflineMsg")){t=t||ce;var n={name:{name$string:"name",value$string:e.name},email:{name$string:"email",value$string:e.email},message:{name$string:"message",value$string:e.message}};"phone"in e&&(n.phone={name$string:"phone",value$string:e.phone}),"department"in e&&(n.department={name$string:"department_id",value$string:e.department}),D.$("livechat").$("settings").$("forms").$("offline_form").$("form_submitted").write(n,A(t))}},sendTyping:G.debounceExceptFirst((function(e){var t=D.$("livechat").$("channel").$("typing"),n=t.$("typing$bool").getValue(),i=ue.type("boolean");n!==e&&(O([i],[e],"sendTyping")||t.write({typing$bool:e}))}),300),sendEmailTranscript:function(e,t){var n=ue.type("string").regex(H.email),i=!!R.$("livechat").$("channel").$("log").getKeys().length;O([n,ge],[e,t],"sendEmailTranscript")||(t=t||ce,R.$("livechat").$("channel").$("chatting$bool").getValue()?D.$("livechat").$("channel").write({email_transcript$string:e},A(t)):ee.isAuthenticated()||i?D.$("livechat").$("channel").write({email_last_transcript$string:e},A(t)):b(new Error("There were no past chat to send a transcript of"),"sendEmailTranscript"))},getChatLog:function(){var e,t,n,i=["type$string","timestamp$int"],o=R.$("livechat").$("channel").$("log").getValue(),a=[];for(var s in o)if(Object.prototype.hasOwnProperty.call(o,s)){if(o[s].type$string)e=o[s];else if("chat.msg"===(e=D.$("livechat").$("channel").$("log").$(s).getValue()).type$string&&(!0===e.unverified$bool||!0===e.failed$bool))continue;var r=h(e);if(null===r)continue;for(var l=0;l<i.length;l++)(n=S(t=i[l]))in r||(r[n]=e[t]);a.push(r)}return a},getConnectionStatus:function(){if(!R)return"closed";var e=R.$("tmp").$("friendly_connection_status$string").getValue();return _e(e)[0]},getAccountStatus:function(){var e=R.$("livechat").$("account").$("status$string").getValue();return Se(e)[0]},getOperatingHours:function(){var e=R.$("livechat"),t=e.$("settings"),n=t.$("operating_hours");if(t.hasKey("operating_hours")){var i=n.$("type$string").getValue(),o={enabled:n.$("enabled$bool").getValue(),type:i,timezone:t.$("timezone$string").getValue()||"UTC"};if("account"==i)o.account_schedule=function(e){for(var t,n,i={},o=0;o<7;o++){var a=e[o]||{};if(a.enabled$bool){for(var s in t=[],n=a.periods)Object.prototype.hasOwnProperty.call(n,s)&&t.push({start:n[s].start$int,end:n[s].end$int});i[o]=C(t)}else i[o]=[]}return i}(n.$("schedule").getValue()||{});else if("department"==i){var a=e.$("dg_mappings").getValue(),s=function(e,t){var n,i={},o=function(e){var t,n,i={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(n=e[o],Object.prototype.hasOwnProperty.call(n,"deleted_ts$int"))continue;if(!n.departments)continue;if(!n.enabled$bool)continue;t={};for(var a=0;a<7;a++){var s=n[a],r=[];if(s.enabled$bool&&s.periods){var l=s.periods;for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&r.push({start:l[c].start$int,end:l[c].end$int});r.length&&(t[a]=r)}}Object.keys(t).length&&(i[o]=t)}return i}(e),a=function(e,t){var n,i={};for(var o in t.forEach((function(e){i[e]=[]})),e)if(Object.prototype.hasOwnProperty.call(e,o))for(var a in(n=e[o]).departments)if(Object.prototype.hasOwnProperty.call(n.departments,a)){if(!n.departments[a])continue;var s=S(a);if(!i[s])continue;i[s].push(o)}return i}(e,t);return t.forEach((function(e){var t=a[e];for(i[e]={},n=0;n<7;n++)i[e][n]=[];for(t.forEach((function(t){for(var n in o[t])Object.prototype.hasOwnProperty.call(o[t],n)&&Array.prototype.push.apply(i[e][n],o[t][n])})),n=0;n<7;n++){var s=i[e][n];s.length>1&&(i[e][n]=C(s))}})),i}(n.$("schedules").getValue(),e.$("departments").getKeys());e.$("account").$("departments_migrated$bool").getValue()&&a&&(s=Object.keys(s).reduce((function(e,t){return t in a?e[a[t].group_id$int]=s[t]:e[t]=s[t],e}),{})),o.department_schedule=s}return o}},getQueuePosition:function(){return R.$("livechat").$("channel").$("queue_position$int").getValue()||0},fetchChatHistory:function(e){if(!O([ge],[e],"fetchChatHistory"))if(ee.isAuthenticated()){var t=R.$("livechat").$("history"),n=D.$("livechat").$("history"),i=n.$("in_progress$bool").getValue(),o=t.$("has_more$bool").getValue(),a=t.$("cursor$string").getValue();i?b(new Error("Previous fetching of history is still in progress"),"fetchChatHistory"):!1!==o?(e=e||ce,n.$("in_progress$bool").update(!0),n.write({cursor$string:a||""},A(e))):b(new Error("No more history to load"),"fetchChatHistory")}else b(new Error("This API is not available for unauthenticated visitors"),"fetchChatHistory")},markAsRead:G.throttle((function(){c()&&D.$("livechat").$("ui").$("chat").write({read_ts$int:+new Date})}),2e3),logout:function(e){O([ge],[e],"logout")||function(e){N.destroy(),re.un("data",w),ie.destroy(),N.un("message",L),w=null,L=null,P=void 0,ee.clearIdentity(),te.clearIdentity(),se=!1,e&&setTimeout((function(){e(null)}))}(e)},EMAIL_REGEX:H.email,getAuthKeyStatus:function(){return te.DOM.getVariable("account_status")}},ae=M.extend(oe),se=!1,re=M.extend({}),le="web_sdk",ce=function(){},ue=z,de=/^(https?|ftps?):\/\//i,he=/\S/,pe=ue.any([ue.equal(""),ue.type("string").regex(/[0-9]+/).maxLength(25)]),ge=ue.any([ue.equal(void 0),ue.type("function")]),me=ue.predicate((function(e){return-1===e.indexOf(",")}),"not contain any comma character"),fe=ue.predicate((function(e){return"object"==typeof e.document&&!!e.document&&"object"==typeof e.navigator&&!!e.navigator&&"object"==typeof e.location&&!!e.location}),"be a valid window object"),Ee={interval:6e5,limit:10,callback:function(){b(new Error("Call has been ratelimted"),"reconnect")}},ve=Y.rateLimit((function(){N.reconnect()}),Ee),Te={online:"online",offline:"offline",away:"away",invalid_account_key:null,banned:null},_e=E({connected:"connected",connecting:"connecting",closed:"closed"}),Se=E(Te),be=p(["email$string","phone$string","display_name$string"]),Oe=p(["name$string","status$string"],"id",(function(e,t){return{id:parseInt(t,10)}})),Ie=p(["avatar_path$string","display_name$string","title$string"],"nick"),ye=p(["typing$bool"],"nick",(function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing"}:null})),Ae=p(["typing$bool"],"display_name",(function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing",nick:"agent:trigger"}:null})),Ce=p(["timestamp$int"],null,h),Ne=p(["timestamp$int"],"nick",(function(e){return Object.prototype.hasOwnProperty.call(e,"timestamp$int")?{type:"last_read"}:null})),De=(p(["banner","behavior","branding","bubble","chat_button","chat_window","concierge","file_sending","forms","greetings","language","login","rating","sound","theme","timezone$string"]),["on","un","fire","unextendEvents","init","getFirehose","getConnectionStatus"]);for(var Re in ae)Object.prototype.hasOwnProperty.call(ae,Re)&&-1===De.indexOf(Re)&&x(ae[Re])&&(ae[Re]=function(e,t){return function(){if(!1!==se)return t.apply(null,arguments);b(new Error("Web SDK is not initialized yet. Please ensure that you call zChat.init() and wait for the connection to be established before calling this method"),e)}}(Re,ae[Re]));e.exports=ae},function(e,t,n){var i=n(49);e.exports=i}])},27:function(e,t,n){"use strict";var i=n(83),o=n(6),a=n(1),s=n(0),r=n(36),l=n(2),c=n(16);function u(e,t,n){Object(o.f)(s.i.SESSION.CONVERSATION_ID,e,Object(l.isUserLoggedIn)()?{}:{"max-age":n/1e3}),Object(o.f)(s.i.SESSION.CREATED_AT,t,Object(l.isUserLoggedIn)()?{}:{"max-age":n/1e3})}t.a=new class{constructor(){this.idleTimeout=null,this.conversationId=null,this.createdAt=null}init(e,t){this.conversationId=e,this.createdAt=t}getConversationId(e){return this.idleTimeout=Object(l.getIdleTimeout)(),!this.checkIdleUser(this.idleTimeout)&&this.conversationId||(Object(l.isUserLoggedIn)()?this.createAuthenticatedConversationID(a.a.state.authenticatedConversationId):this.createNewConversation(e)),this.conversationId}createAuthenticatedConversationID(e){this.idleTimeout=Object(l.getIdleTimeout)(),this.createdAt=(new Date).getTime(),this.conversationId=e,u(this.conversationId,this.createdAt,this.idleTimeout),new c.a({name:"Create Authenticated ConversationId",message:`ConversationId inside the fn createAuthenticatedConversationID: ${this.conversationId}, conversationId inside cookie: ${Object(o.a)(s.i.SESSION.CONVERSATION_ID)}`,logLevel:"info",service:"Session"}),r.a.createSubscription(this.conversationId),a.a.dispatch("clearChatsWithAgentDesk"),a.a.dispatch("updateControlType",s.h.BOT)}createNewConversation(e){this.conversationId=(null==e?void 0:e.fixedConversationId)||Object(i.a)(),this.createdAt=(new Date).getTime(),u(this.conversationId,this.createdAt,this.idleTimeout),new c.a({name:"Create New Conversation",message:`ConversationId inside the fn createNewConversation: ${this.conversationId}, conversationId inside cookie: ${Object(o.a)(s.i.SESSION.CONVERSATION_ID)}`,logLevel:"info",service:"Session"}),r.a.createSubscription(this.conversationId),a.a.dispatch("clearChatsWithAgentDesk"),a.a.dispatch("updateControlType",s.h.BOT)}checkIdleUser(e){const t=this.createdAt;return!t||(n=(new Date).getTime(),i=t,o=e,Math.abs(n-i)>=o);var n,i,o}endConversation(){this.conversationId=null,Object(o.c)(s.i.SESSION.CONVERSATION_ID),Object(o.c)(s.i.SESSION.CREATED_AT)}restartConversation(){Object(o.c)(s.i.SESSION.CREATED_AT)}updateConversation(){this.createdAt=(new Date).getTime(),this.idleTimeout=Object(l.getIdleTimeout)(),u(this.conversationId,this.createdAt,this.idleTimeout)}}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={SIGN_IN:"SIGN_IN",SIGN_OUT:"SIGN_OUT",SIGN_IN_FAILURE:"SIGN_IN_FAILURE",SIGN_OUT_FAILURE:"SIGN_OUT_FAILURE",OAUTH:"OAUTH",ISAUTH:"isAuth",USER_DETAILS:"user-details",SUCCESSFULLY_SIGNED_IN:"Successfully signed in!",SUCCESSFULLY_SIGNED_OUT:"Successfully signed in!",SIGN_IN_AUTHENTICATION_FAILED:"Sign in authentication failed!",SIGN_OUT_AUTHENTICATION_FAILED:"Sign out authentication failed!",FAIL:"fail"}},295:function(e,t,n){"use strict";var i=n(3),o=n.n(i),a=n(21),s=n.n(a),r=n(0),l=n(22),c=n(20);const u=[{id:"1",val:c.c.STAR},{id:"2",val:c.c.STAR},{id:"3",val:c.c.STAR},{id:"4",val:c.c.STAR},{id:"5",val:c.c.STAR}];var d={name:"StarRating",components:{BaseIcon:l.a},props:{ratingChanged:{type:Function,default:function(){}},schema:{type:Object,default:function(){}},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:()=>({ratingsIcon:u}),watch:{schema(){this.ratingsIcon=u}},created(){this.ICONS=c.c},methods:{onRatingClick(e,t){this.ratingsIcon=this.ratingsIcon.map((function(e,n){return n<=t?{id:e.id,val:c.c.STAR_FILLED}:{id:e.id,val:c.c.STAR}}));let n=e.target;for(;"BUTTON"!==(null===(i=n)||void 0===i?void 0:i.tagName);){var i,o;n=null===(o=n)||void 0===o?void 0:o.parentNode}n&&(n.attributes["aria-pressed"].nodeValue=!0),this.ratingChanged(t+1)},getFillColor:e=>e===c.c.STAR?c.a.STAR:c.a.STAR_FILLED}},h=(n(527),n(8)),p=Object(h.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"star-box sentinel-box",attrs:{tabindex:"0"}},e._l(e.ratingsIcon,(function(n,i){return t("button",{key:n.id,staticClass:"star-btn tab-focused-btn",attrs:{"aria-label":n.id+" star","aria-pressed":"false",disabled:e.disabled},on:{click:function(t){return e.onRatingClick(t,i)}}},[t("div",{staticClass:"ratings",class:{"ratings-selected":e.selected,"ratings-btn-disabled":e.disabled,"ratings-filled":n.val!==e.ICONS.STAR}},[t("BaseIcon",{attrs:{name:n.val,height:"32px",width:"32px",fill:e.getFillColor(n.val)}})],1)])})),0)}),[],!1,null,"4ac79b57",null).exports,g={name:"EmojiRating",components:{BaseIcon:l.a},props:{ratingChanged:{type:Function,default:function(){}},schema:{type:Object,default:function(){}},selected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:()=>({ratingsIcon:s()(c.b),emojiClickedIndex:-1}),watch:{schema(){this.ratingsIcon=s()(c.b)}},methods:{onRatingClick(e,t){var n=this;this.ratingsIcon=this.ratingsIcon.map((function(e,i){return i===t?(e.color=c.a.EMOJI_FILLED[e.val],n.emojiClickedIndex=t):e.color=c.a.EMOJI,e}));let i=e.target;for(;"BUTTON"!==(null===(o=i)||void 0===o?void 0:o.tagName);){var o,a;i=null===(a=i)||void 0===a?void 0:a.parentNode}i&&(i.attributes["aria-pressed"].nodeValue=!0),this.ratingChanged(t+1)}}},m=(n(528),Object(h.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"emoji-box sentinel-box",attrs:{tabindex:"0"}},e._l(e.ratingsIcon,(function(n,i){return t("button",{key:n.id,staticClass:"emoji-btn tab-focused-btn",attrs:{disabled:e.disabled,"aria-label":n.label,"aria-pressed":"false"},on:{click:function(t){return t.stopPropagation(),function(t){return e.onRatingClick(t,i)}.apply(null,arguments)}}},[t("div",{staticClass:"ratings",class:{"ratings-selected":e.selected,"ratings-btn-disabled":e.disabled,"ratings-filled":i===e.emojiClickedIndex}},[t("BaseIcon",{attrs:{name:n.val,height:"32px",width:"32px",fill:n.color}})],1)])})),0)}),[],!1,null,"8467a536",null).exports);const f=[{id:"1",val:""},{id:"2",val:""},{id:"3",val:""},{id:"4",val:""},{id:"5",val:""},{id:"6",val:""},{id:"7",val:""},{id:"8",val:""},{id:"9",val:""},{id:"10",val:""}];var E={name:"NumberRating",props:{ratingChanged:{type:Function,default:function(){}},schema:{type:Object,default:function(){}},numericRating:{type:Number,default:5},disabled:{type:Boolean,default:!1}},data(){return{ratingsIcon:f.slice(0,this.numericRating)}},watch:{schema(){this.ratingsIcon=f}},methods:{onRatingClick(e,t){this.ratingsIcon=this.ratingsIcon.map((function(e,n){return n===t?{id:e.id,val:"rating-filled"}:{id:e.id,val:""}}));let n=e.target;for(;"BUTTON"!==(null===(i=n)||void 0===i?void 0:i.tagName);){var i,o;n=null===(o=n)||void 0===o?void 0:o.parentNode}n&&(n.attributes["aria-pressed"].nodeValue=!0),this.ratingChanged(t+1)},getClassNames(e){return`num-ratings ${e.val} ${this.disabled?"num-ratings-btn-disabled":""}`}}},v=(n(529),Object(h.a)(E,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"star-box sentinel-box",attrs:{tabindex:"0"}},e._l(e.ratingsIcon,(function(n,i){return t("button",{key:n.id,staticClass:"star-btn tab-focused-btn",attrs:{disabled:e.disabled,"aria-pressed":"false"},on:{click:function(t){return t.stopPropagation(),function(t){return e.onRatingClick(t,i)}.apply(null,arguments)}}},[t("div",{class:e.getClassNames(n)},[e._v("\n      "+e._s(n.id)+"\n    ")])])})),0)}),[],!1,null,"82e188aa",null).exports),T={name:"ThumbsRating",components:{BaseIcon:l.a},props:{ratingChanged:{type:Function,default:function(){}},schema:{type:Object,default:function(){}},disabled:{type:Boolean,default:!1}},data:()=>({thumbDownType:c.c.THUMB_DOWN,thumbUpType:c.c.THUMB_UP,thumbsUp:{hovered:!1,selected:!1},thumbsDown:{hovered:!1,selected:!1}}),computed:{brandColor(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.color)||"#4D39E9"}},watch:{schema(){this.thumbDownType=c.c.THUMB_DOWN,this.thumbUpType=c.c.THUMB_UP}},methods:{handleThumbDownClick(){this.thumbDownType=c.c.THUMB_DOWN_FILLED,this.thumbUpType=c.c.THUMB_UP,this.thumbsDown.selected=!0,this.thumbsUp.selected=!1,this.thumbsDown.hovered=!1,this.ratingChanged(1)},handleThumbUpClick(){this.thumbUpType=c.c.THUMB_UP_FILLLED,this.thumbDownType=c.c.THUMB_DOWN,this.thumbsDown.selected=!1,this.thumbsUp.selected=!0,this.thumbsUp.hovered=!1,this.ratingChanged(2)},handleThumbHovered(e,t){"up"!==t||this.thumbsUp.selected?"down"!==t||this.thumbsDown.selected||(this.thumbsDown.hovered=e):this.thumbsUp.hovered=e},getFillColor(e){return"ThumbDown"===e||"ThumbDownFilled"===e?this.thumbsDown.hovered||this.thumbsDown.selected?this.brandColor:c.a.THUMB:"ThumbUp"===e||"ThumbUpFilled"===e?this.thumbsUp.hovered||this.thumbsUp.selected?this.brandColor:c.a.THUMB:void 0}}},_=(n(530),Object(h.a)(T,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"thumb-rating-box sentinel-box",attrs:{tabindex:"0"}},[t("button",{staticClass:"thumb-down thumb-btn tab-focused-btn",class:{selected:e.thumbsDown.selected},attrs:{"aria-label":"thumbs-down","aria-pressed":e.thumbsDown.selected,disabled:e.disabled},on:{click:e.handleThumbDownClick,mouseover:function(t){return e.handleThumbHovered(!0,"down")},mouseleave:function(t){return e.handleThumbHovered(!1,"down")}}},[t("div",{staticClass:"ratings",class:{"ratings-btn-disabled":e.disabled}},[t("BaseIcon",{attrs:{name:e.thumbDownType,height:"32px",width:"32px",fill:e.getFillColor(e.thumbDownType)}})],1)]),e._v(" "),t("button",{staticClass:"thumb-up thumb-btn tab-focused-btn",class:{selected:e.thumbsUp.selected},attrs:{"aria-label":"thumbs-up","aria-pressed":e.thumbsUp.selected,disabled:e.disabled},on:{mouseover:function(t){return e.handleThumbHovered(!0,"up")},mouseleave:function(t){return e.handleThumbHovered(!1,"up")},click:e.handleThumbUpClick}},[t("div",{staticClass:"ratings",class:{"ratings-btn-disabled":e.disabled}},[t("BaseIcon",{attrs:{name:e.thumbUpType,height:"32px",width:"32px",fill:e.getFillColor(e.thumbUpType)}})],1)])])}),[],!1,null,"4eae7206",null).exports),S=n(2),b=n(25),O={name:"SurveyForm",mixins:[b.a],components:{BaseIcon:l.a,StarRating:p,EmojiRating:m,NumberRating:v,ThumbsRating:_},props:{schema:{type:Object,default:function(){}},surveyId:{type:String,default:""},isFirstResponse:{type:Boolean,default:!1},triggerType:{type:String,default:""},isSurveySubmitted:{type:Boolean,default:!1},submittedValues:{type:Object,default:function(){}}},data:()=>({isReadOnly:!1,surveyForm:r.B,currSuggestionKey:"",currSentinent:1/0,feedbackInputEnabled:!1,feebackText:"",numericRating:5,submitSurveyInfo:{rating:"",suggestions:[],suggestionTitle:"",issueResolved:null,additionalFeedback:"",feedbackValue:""}}),computed:{isSubmitButtonValid(){var e,t,n,i,o,a;let s=!0;return null!==(e=this.schema.reasonOfRating)&&void 0!==e&&e.enabled&&null!==(t=this.schema.reasonOfRating)&&void 0!==t&&t.required&&(s=s&&this.submitSurveyInfo.suggestions&&this.submitSurveyInfo.suggestions.length>0),null!==(n=this.schema.resolutionQuestion)&&void 0!==n&&n.enabled&&null!==(i=this.schema.resolutionQuestion)&&void 0!==i&&i.required&&(s=s&&!0===this.submitSurveyInfo.issueResolved||!1===this.submitSurveyInfo.issueResolved),null!==(o=this.schema.additionalFeedback)&&void 0!==o&&o.enabled&&null!==(a=this.schema.additionalFeedback)&&void 0!==a&&a.required&&(s=s&&this.feebackText.length>0),s},isMobileScreenOrCompactWidget(){return"mobile"===Object(S.getDeviceType)()||!this.$store.state.isChatWidgetFullScreen},getCurrentSuggestionTitle(){const e=this.currSentinent<this.schema.surveyRatingTypeEnabledInfo.criteria?r.B.NEGATIVE_MAP_KEY:r.B.POSITIVE_MAP_KEY,t=r.B.POSITIVE_MAP_KEY?`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.POSITIVE_FEEDBACK_HEADER}`:`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.NEGATIVE_FEEDBACK_HEADER}`;return this.submitSurveyInfo.suggestionTitle=this.schema[e].title,this.sendTranslatedValue(t,this.schema[e].title)},getCurrentSuggestionMap(){return this.currSentinent<this.schema.surveyRatingTypeEnabledInfo.criteria?(this.submitSurveyInfo.feedbackValue=r.B.NEGATIVE,this.currSuggestionKey=r.B.NEGATIVE,this.schema.negativeSuggestionMap.options):(this.currSuggestionKey=r.B.POSITIVE,this.submitSurveyInfo.feedbackValue=r.B.POSITIVE,this.schema.positiveSuggestionMap.options)},getRatingComponent(){let e="";switch(this.schema.ratingTypeEnabled){case c.d.STAR.value:e=c.d.STAR.component;break;case c.d.EMOJI.value:e=c.d.EMOJI.component;break;case c.d.NUM_5.value:e=c.d.NUM_5.component,this.numericRating=5;break;case c.d.NUM_10.value:e=c.d.NUM_10.component,this.numericRating=10;break;case c.d.THUMBS_UP_DOWN.value:e=c.d.THUMBS_UP_DOWN.component}return e},getCharacterCountInFeedback(){return this.feebackText.length+"/200"}},watch:{schema(){this.currSentinent=1/0,this.feedbackInputEnabled=!1,this.feebackText=""},"submitSurveyInfo.feedbackValue":function(){this.submitSurveyInfo.suggestions=[]}},mounted(){var e,t;this.feedbackInputEnabled=(null===(e=this.schema)||void 0===e||null===(t=e.additionalFeedback)||void 0===t?void 0:t.showInputField)||!1,this.isSurveySubmitted&&this.populateSurveyValues(),this.schema.isPersistentSurveyEnabled&&this.handlePersistentSurvey(),this.$store.state.isVoiceModeActive&&(this.$store.state.shouldRestartVoiceRecording=!1)},methods:{populateSurveyValues(){var e,t;let n=null===(e=document.querySelector(".sentinel-box"))||void 0===e?void 0:e.childNodes;n=Array.from(n).filter((function(e){let{tagName:t}=e;return"button"===(null==t?void 0:t.toLowerCase())})),null===(t=n[this.submittedValues.rating-1])||void 0===t||t.click(),this.$nextTick((function(){var e,t,n,i,o=this;this.submittedValues.issueResolved?null===(e=this.$refs["yes-res-btn"])||void 0===e||e.click():null===(t=this.$refs["no-res-btn"])||void 0===t||t.click(),null===(n=document.querySelector(".suggestion-options"))||void 0===n||null===(i=n.childNodes)||void 0===i||i.forEach((function(e){o.submittedValues.suggestions.includes(e.innerText)&&(null==e||e.click())})),this.onAdditionalFeedbackAdd(),this.feebackText=this.submittedValues.additionalFeedback,this.isReadOnly=!0}))},getId(){return"survey-form-container-"+this.triggerType},isValidSentinent:e=>"number"==typeof e&&isFinite(e),getTranslationValue(e,t){return this.currSuggestionKey===r.B.NEGATIVE?this.sendTranslatedValue(`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.NEGATIVE_CHOICES_CHOICE_}${e+1}`,t):this.sendTranslatedValue(`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.POSITIVE_CHOICES_CHOICE_}${e+1}`,t)},sendTranslatedValue(e,t){return this.$te(e)?this.$t(e):t},convertToTitleCase:e=>e.charAt(0)+e.slice(1).toLowerCase(),suggestionClick(e){if(this.isReadOnly)return;let t=e.target;const n=t.classList.toggle("suggestion-clicked");n?this.submitSurveyInfo.suggestions.push(t.innerText):this.submitSurveyInfo.suggestions=this.submitSurveyInfo.suggestions.filter((function(e){return e!==t.innerText})),t.attributes["aria-pressed"].nodeValue=Boolean(n),document.getElementById("selection-button-alert").setAttribute("aria-label",n?t.innerText+" is selected":t.innerText+" is un-selected"),setTimeout((function(){document.getElementById("selection-button-alert").setAttribute("aria-label","")}),0)},onAdditionalFeedbackAdd(){this.isReadOnly||(this.feedbackInputEnabled=!0,this.$nextTick((function(){var e,t;null===(e=this.$refs["additional-feedback-textarea"])||void 0===e||e.focus(),null===(t=this.$refs["additional-feedback-textarea"])||void 0===t||t.setAttribute("aria-label",this.sendTranslatedValue(""+r.B.START_TYPING,"Start Typing"))})))},onRatingChangeHandler(e){var t,n;this.isReadOnly||(this.submitSurveyInfo.feedbackValue=e<(null===(t=this.schema)||void 0===t||null===(n=t.surveyRatingTypeEnabledInfo)||void 0===n?void 0:n.criteria)?r.B.NEGATIVE:r.B.POSITIVE,this.currSentinent=e,this.submitSurveyInfo.rating=e)},onYesResolutionButtonClicked(e){if(!this.isReadOnly&&(this.$refs["yes-res-btn"].classList.toggle("suggestion-clicked"),this.$refs["no-res-btn"].classList.remove("suggestion-clicked"),this.submitSurveyInfo.issueResolved=!0,e)){const t="true"===e.target.attributes["aria-pressed"].nodeValue;e.target.attributes["aria-pressed"].nodeValue=!t}},onNoResolutionButtonClicked(e){if(this.isReadOnly)return;this.$refs["no-res-btn"].classList.toggle("suggestion-clicked"),this.$refs["yes-res-btn"].classList.remove("suggestion-clicked"),this.submitSurveyInfo.issueResolved=!1;const t="true"===e.target.attributes["aria-pressed"].nodeValue;e.target.attributes["aria-pressed"].nodeValue=!t},handleSurveySubmit(){this.submitSurveyInfo.rating&&(this.submitSurveyInfo.additionalFeedback=this.feebackText,this.$emit("survey-submit",this.submitSurveyInfo),this.$store.state.shouldRestartVoiceRecording=!0,Object(S.focusOnChatInputField)(!0))},handleSurveySkip(){this.isReadOnly?this.$emit("survey-closed"):this.$emit("survey-skipped"),Object(S.focusOnChatInputField)(!0),this.$store.state.shouldRestartVoiceRecording=!0},handlePersistentSurvey(){var e,t;let n=null===(e=document.querySelector(".sentinel-box"))||void 0===e?void 0:e.childNodes;n=Array.from(n).filter((function(e){let{tagName:t}=e;return"button"===(null==t?void 0:t.toLowerCase())}));null===(t=n[this.$store.getters.getCSATRating===r.p.POSITIVE?0:this.$store.getters.getCSATRating===r.p.NEGATIVE?1:2])||void 0===t||t.click()}}},I=(n(531),Object(h.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-box-wrapper"},[t("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"form-box tab-focused-btn",class:{"form-box-compact":e.isMobileScreenOrCompactWidget,"form-box-compact-fullscreen":e.isMobileScreenOrCompactWidget&&e.isValidSentinent(e.currSentinent)},attrs:{id:e.getId(),tabindex:"0",role:"form","aria-label":"survey form"}},[e.isSurveySubmitted?t("div",{staticClass:"close-icon-container",class:{"close-icon-container-compact":e.isMobileScreenOrCompactWidget}},[t("button",{staticClass:"close-icon-btn",on:{click:e.handleSurveySkip}},[t("BaseIcon",{attrs:{name:"CloseIcon",fill:"#6D6D6D"}})],1)]):e._e(),e._v(" "),e.isValidSentinent(e.currSentinent)&&(e.schema.reasonOfRating.required||e.schema.resolutionQuestion.required||e.schema.additionalFeedback.required)?t("div",{staticClass:"mandatory-text-container"},[t("p",{staticClass:"required-field mandatory-text",style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v("\n        * Mandatory\n      ")])]):e._e(),e._v(" "),t("div",{staticClass:"form-box-content",class:{"form-box-content-compact":e.isMobileScreenOrCompactWidget,"form-box-content-opened":e.isValidSentinent(e.currSentinent)}},[e.schema.feedbackMessage.enabled?t("div",{staticClass:"survey-header-txt",style:{fontSize:e.getFontSizeForChatInterface("title")},attrs:{role:e.isFirstResponse?"alert":null}},[e._v("\n        "+e._s(e.sendTranslatedValue(`${e.surveyForm.SURVEY_DOT}${e.surveyId}${e.surveyForm.DOT}${e.surveyForm.BASIC_INFO}`,e.schema.feedbackMessage.text))+"\n      ")]):e._e(),e._v(" "),t("div",{staticClass:"rating-box",class:{"rating-box-compact":e.isMobileScreenOrCompactWidget,"rating-box-readOnly":e.isReadOnly}},[t(e.getRatingComponent,{tag:"component",attrs:{disabled:e.isReadOnly,selected:e.isValidSentinent(e.currSentinent),"rating-changed":e.onRatingChangeHandler,schema:e.schema,"numeric-rating":e.numericRating}})],1),e._v(" "),e.isValidSentinent(e.currSentinent)?t("div",{staticClass:"survey-form-content",class:{"survey-form-content-compact":e.isMobileScreenOrCompactWidget}},[e.schema.resolutionQuestion.enabled?t("div",{staticClass:"resolution",class:{"resolution-compact":e.isMobileScreenOrCompactWidget}},[t("div",{staticClass:"res-questn"},[e.schema.resolutionQuestion.required?t("span",{staticClass:"required-field",attrs:{"aria-hidden":"true"}},[e._v("* ")]):e._e(),t("span",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v(e._s(e.sendTranslatedValue(`${e.surveyForm.SURVEY_DOT}${e.surveyId}${e.surveyForm.DOT}${e.surveyForm.ISSUE_RESOLUTION_FEEDBACK}`,e.schema.resolutionQuestion.text)))]),e._v(" "),e.schema.resolutionQuestion.required?t("span",{staticClass:"sr-only"},[e._v("\n              (required)\n            ")]):e._e()]),e._v(" "),t("div",{staticClass:"resolution-buttons"},[t("button",{ref:"yes-res-btn",staticClass:"resolution-button custom-btn tab-focused-btn",class:{"custom-btn-readOnly":e.isSurveySubmitted},style:{fontSize:e.getFontSizeForChatInterface("bodyText")},attrs:{"aria-pressed":"false"},on:{click:e.onYesResolutionButtonClicked}},[e._v("\n              "+e._s(e.sendTranslatedValue(""+e.surveyForm.BUTTON_YES,""+e.surveyForm.YES))+"\n            ")]),e._v(" "),t("button",{ref:"no-res-btn",staticClass:"resolution-button custom-btn tab-focused-btn",class:{"custom-btn-readOnly":e.isSurveySubmitted},style:{fontSize:e.getFontSizeForChatInterface("bodyText")},attrs:{"aria-pressed":"false"},on:{click:e.onNoResolutionButtonClicked}},[e._v("\n              "+e._s(e.sendTranslatedValue(""+e.surveyForm.BUTTON_NO,""+e.surveyForm.NO))+"\n            ")])])]):e._e(),e._v(" "),e.schema.reasonOfRating.enabled?t("div",{staticClass:"suggestion-container"},[t("div",{staticClass:"suggestion-header-text"},[e.schema.reasonOfRating.required?t("span",{staticClass:"required-field",attrs:{"aria-hidden":"true"}},[e._v("* ")]):e._e(),t("span",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v(e._s(e.getCurrentSuggestionTitle))]),e._v(" "),e.schema.reasonOfRating.required?t("span",{staticClass:"sr-only"},[e._v("\n              (required)\n            ")]):e._e()]),e._v(" "),t("div",{staticClass:"suggestion-options",class:{"suggestion-options-compact":e.isMobileScreenOrCompactWidget}},e._l(e.getCurrentSuggestionMap,(function(n,i){return t("button",{key:n,staticClass:"tab-focused-btn custom-btn suggestions",class:{"custom-btn-readOnly":e.isSurveySubmitted},style:{fontSize:e.getFontSizeForChatInterface("bodyText")},attrs:{"aria-pressed":"false"},on:{click:e.suggestionClick}},[e._v("\n              "+e._s(e.getTranslationValue(i,n))+"\n            ")])})),0)]):e._e(),e._v(" "),e.schema.additionalFeedback.enabled&&!e.feedbackInputEnabled?t("div",{staticClass:"additional-feedback",class:{"additional-feedback-compact":e.isMobileScreenOrCompactWidget}},[t("div",[e.schema.additionalFeedback.required?t("span",{staticClass:"required-field",attrs:{"aria-hidden":"true"}},[e._v("* ")]):e._e(),t("span",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v(e._s(e.sendTranslatedValue(""+e.surveyForm.ADDITIONAL_FEEDBACK,""+e.surveyForm.ADDITIONAL_FEEDBACK_CONTEXT)))]),e._v(" "),e.schema.additionalFeedback.required?t("span",{staticClass:"sr-only"},[e._v("\n                (required)\n              ")]):e._e()]),e._v(" "),t("button",{staticClass:"tab-focused-btn additional-feedback-btn-container",attrs:{"aria-label":e.sendTranslatedValue(""+e.surveyForm.ADDITIONAL_FEEDBACK,""+e.surveyForm.ADDITIONAL_FEEDBACK_CONTEXT)},on:{click:e.onAdditionalFeedbackAdd}},[t("BaseIcon",{attrs:{name:"AddIcon"}})],1)]):e._e(),e._v(" "),e.schema.additionalFeedback.enabled&&e.feedbackInputEnabled?t("div",{staticClass:"additional-feedback-input",class:{"additional-feedback-input-compact":e.isMobileScreenOrCompactWidget},style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[t("div",[e.schema.additionalFeedback.required?t("span",{staticClass:"required-field",attrs:{"aria-hidden":"true"}},[e._v("* ")]):e._e(),t("span",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v(e._s(e.sendTranslatedValue(`${e.surveyForm.SURVEY_DOT}${e.surveyId}${e.surveyForm.DOT}${e.surveyForm.ADDITIONAL_FEEDBACK_TEXT}`,e.schema.additionalFeedback.text)))]),e._v(" "),e.schema.additionalFeedback.required?t("span",{staticClass:"sr-only"},[e._v("\n              (required)\n            ")]):e._e()]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feebackText,expression:"feebackText"}],ref:"additional-feedback-textarea",staticClass:"feedback-textarea",class:{"feedback-textarea-disabled":e.isSurveySubmitted},attrs:{placeholder:e.sendTranslatedValue(""+e.surveyForm.START_TYPING,"Start Typing"),maxlength:"200",disabled:e.isSurveySubmitted},domProps:{value:e.feebackText},on:{input:function(t){t.target.composing||(e.feebackText=t.target.value)}}}),e._v(" "),t("div",{staticClass:"char-feedback-count",style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v("\n            "+e._s(e.getCharacterCountInFeedback)+"\n          ")])]):e._e()]):e._e()]),e._v(" "),e.schema.isSkipEnabled||e.isReadOnly||e.isValidSentinent(e.currSentinent)&&!e.isReadOnly?t("div",{staticClass:"buttons-outer-container",class:{"buttons-outer-container-compact":e.isMobileScreenOrCompactWidget,"buttons-outer-container-compact-fullscreen":e.isMobileScreenOrCompactWidget&&e.isValidSentinent(e.currSentinent)}},[e.schema.isSkipEnabled||e.isReadOnly?t("button",{staticClass:"skip-button tab-focused-btn",style:{fontSize:e.getFontSizeForChatInterface("bodyText")},on:{click:e.handleSurveySkip}},[e._v("\n        "+e._s(e.sendTranslatedValue(""+(e.isReadOnly?e.surveyForm.CLOSE:e.surveyForm.SKIP),e.convertToTitleCase(""+(e.isReadOnly?e.surveyForm.CLOSE:e.surveyForm.SKIP))))+"\n      ")]):e._e(),e._v(" "),e.isValidSentinent(e.currSentinent)&&!e.isReadOnly?t("button",{staticClass:"submit-button tab-focused-btn",style:{fontSize:e.getFontSizeForChatInterface("bodyText")},attrs:{disabled:!e.isSubmitButtonValid},on:{click:e.handleSurveySubmit}},[e._v("\n        "+e._s(e.sendTranslatedValue(""+e.surveyForm.SUBMIT,e.convertToTitleCase(""+e.surveyForm.SUBMIT)))+"\n      ")]):e._e()]):e._e()])])}),[],!1,null,"e132d724",null).exports),y=n(83),A={mixins:[b.a],components:{BaseIcon:l.a},props:{submittedData:{type:Object,default:function(){}},schema:{type:Object,default:function(){}},surveyId:{type:String,default:""}},data:()=>({surveyForm:r.B,uniqueId:Object(y.a)()}),computed:{getOverAllRatingAnswer(){return this.submittedData.feedbackValue?this.submittedData.feedbackValue===r.B.POSITIVE?this.sendTranslatedValue(""+r.B.GOOD.toUpperCase(),r.B.GOOD):this.sendTranslatedValue(""+r.B.BAD.toUpperCase(),r.B.BAD):""},getDidWeResolveAnswer(){const e=this.submittedData.issueResolved;return!0===e?this.sendTranslatedValue(""+r.B.BUTTON_YES,""+r.B.YES):!1===e?this.sendTranslatedValue(""+r.B.BUTTON_NO,""+r.B.NO):""},getAddFeedbackAnswer(){return this.submittedData.additionalFeedback?`"${this.submittedData.additionalFeedback}"`:""},getsuggestionTitle(){return this.submittedData.feedbackValue?this.submittedData.feedbackValue===r.B.POSITIVE?this.sendTranslatedValue(`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.POSITIVE_FEEDBACK_HEADER}`,this.submittedData.suggestionTitle):this.sendTranslatedValue(`${r.B.SURVEY_DOT}${this.surveyId}${r.B.DOT}${r.B.NEGATIVE_FEEDBACK_HEADER}`,this.submittedData.suggestionTitle):""}},methods:{toggleShowData(){this.$emit("show-survey-submitted",!0)},sendTranslatedValue(e,t){return this.$te(e)?this.$t(e):t}},mounted(){var e=this;this.$nextTick((function(){var t;null===(t=e.$refs.containerEl)||void 0===t||t.focus()}))}},C=(n(532),{name:"SurveyView",components:{SurveyForm:I,SubmittedForm:Object(h.a)(A,(function(){var e=this,t=e._self._c;return t("div",{ref:"containerEl",staticClass:"container",style:{fontSize:e.getFontSizeForChatInterface("bodyText")},attrs:{tabindex:"-1"}},[t("div",{staticClass:"text-header"},[t("BaseIcon",{attrs:{name:"CheckCircle",height:"32px",width:"32px","aria-label":"check icon"}}),e._v(" "),t("div",{staticClass:"msg"},[t("div",{style:{fontSize:e.getFontSizeForChatInterface("title")}},[e._v(e._s(e.sendTranslatedValue(""+e.surveyForm.THANK_YOU,"Thank You!")))]),e._v(" "),t("div",[e._v(e._s(e.sendTranslatedValue(""+e.surveyForm.FOR_YOUR_FEEDBACK,"for completing the survey")))])])],1),e._v(" "),t("button",{staticClass:"show-more-btn tab-focused-btn",attrs:{id:"show-more-btn-"+e.uniqueId},on:{click:function(t){return e.toggleShowData(!0)}}},[e._v(e._s(e.sendTranslatedValue(""+e.surveyForm.VIEW_RESPONSE,"View response")))])])}),[],!1,null,"90180402",null).exports},props:{message:Object,isFirstResponse:{type:Boolean,default:!1},showOnlySurvey:{type:Boolean,default:!1},submittedValues:{type:Object,default:function(){}},isSurveySubmitted:{type:Boolean,default:!1}},data:()=>({surveySchema:{},surveyId:"",isSubmitted:!1,isSkipped:!1,eventPayload:{},triggerType:"",conversationId:"",showSurveyInReadOnly:!1}),computed:{isSurveyTypePersistent(){return this.surveySchema.isPersistentSurveyEnabled},isSurveyTypeAgentFeedback(){return this.triggerType===r.B.AGENTDESK_FEEDBACK_REVIEW}},watch:{message(){this.populateLocalState()}},created(){this.populateLocalState(),this.showSurveyInReadOnly=this.isSurveySubmitted},methods:{focusOnAppropriateElement(){const e=document.querySelector(".custom-textarea");e&&e.focus()},populateLocalState(){var e,t,n;if(null===(e=this.message)||void 0===e||!e.messageValue)return;const i=s()(this.message),o=JSON.parse(null===(t=i.messageValue)||void 0===t?void 0:t.schema);(null===(n=i.messageValue)||void 0===n?void 0:n.status[0])===r.B.SUBMITTED&&(this.isSubmitted="submitSurveyInfo"in o,this.isSkipped=!this.isSubmitted),this.eventPayload=o.submitSurveyInfo||{},this.surveySchema=(null==o?void 0:o.payload)||{},this.isSubmitted&&this.updateEventPayload(),this.surveyId=(null==o?void 0:o.surveyId)||"",this.triggerType=null==o?void 0:o.triggerType,this.conversationId=i.conversationId,!this.isSubmitted&&this.$store.dispatch("updateSurveyFormState",{isValid:!0,data:this.message,isFirstResponse:this.isFirstResponse})},updateEventPayload(){var e,t;const n=null===(e=this.eventPayload)||void 0===e?void 0:e.rating;if(!n)return;const i=n<(null===(t=this.surveySchema)||void 0===t?void 0:t.surveyRatingTypeEnabledInfo).criteria,o=i?r.B.NEGATIVE_MAP_KEY:r.B.POSITIVE_MAP_KEY,a=this.surveySchema[o].title;this.eventPayload.feedbackValue=i?r.B.NEGATIVE:r.B.POSITIVE,this.eventPayload.suggestionTitle=a},onSurveySkipped(){var e=this;return o()((function*(){var t;e.clearConversationIfRequired(),e.isSkipped=!0;const n=document.getElementById("form-state-alert");n.setAttribute("aria-label",""),setTimeout((function(){n.setAttribute("aria-label","Survey is skipped")}),0);const i=s()(e.message);i.hide=!0,i.messageValue.status[0]=r.B.SUBMITTED,e.$store.dispatch("updateFormStatus",i),yield e.$store.dispatch("sendIoTEvent",{event_name:"FORM_SUBMISSION",data:i}),null!==(t=e.message)&&void 0!==t&&t.requestId&&e.$store.dispatch("FormControlActions",{conversationId:e.conversationId,hide:!0,userMessage:{payload:e.triggerType===""+r.B.WIDGET_EVENT_CHAT_END||e.triggerType===""+r.B.WIDGET_EVENT_IDLE_USER?`${r.B.SKIP_EVENT}${r.B.DISABLE_RESUME_WORKFLOW}^$^requestId::value=${e.message.requestId}`:`${r.B.SKIP_EVENT}${r.B.ENABLE_RESUME_WORKFLOW}^$^requestId::value=${e.message.requestId}`,label:r.B.SKIP}}),e.$store.dispatch("setIdleTimerForSurvey"),e.$store.dispatch("updateSurveyFormState",{isValid:!1,data:{},isFirstResponse:!1}),e.isSurveyTypePersistent||e.isSurveyTypeAgentFeedback||Object(S.emitEventToParentWindow)(r.o.SURVEY_SKIPPED,Object(S.getEventDataPoints)()),e.triggerType===r.B.WIDGET_EVENT_CHAT_END&&(yield e.$store.dispatch("endChatSurveyFulfilledBeforeTimeout")),e.focusOnAppropriateElement()}))()},onSurveySubmit(e){var t=this;return o()((function*(){t.clearConversationIfRequired(),t.eventPayload=e,t.isSubmitted=!0;let n=s()(e);n.triggerType=t.triggerType,null==n||delete n.feedbackValue;const i=s()(t.message);if(i.messageValue.status[0]=r.B.SUBMITTED,i.messageValue.submitSurveyInfo=n,t.$store.dispatch("updateFormStatus",i),(t.isSurveyTypePersistent||t.isSurveyTypeAgentFeedback)&&t.$store.getters.isCSATValid){var o;const i={feedbackValue:e.feedbackValue,submitSurveyInfo:n};t.$store.dispatch("sendCSATSubmissionEvent",i);const a=null===(o=e.feedbackValue)||void 0===o?void 0:o.toUpperCase();a!==t.$store.state.csat.rating&&t.$store.dispatch("updateCSATIcons",a===r.p.POSITIVE);const s=null==n?void 0:n.additionalFeedback;t.$store.dispatch("updateCSATState",{comment:s}),yield t.$store.dispatch("sendIoTEvent",{event_name:"CSAT_SUBMIT",data:{feedbackValue:a,submitSurveyInfo:n,timestamp:Date.now()}})}else{yield t.$store.dispatch("sendIoTEvent",{event_name:"FORM_SUBMISSION",data:i});const o={conversationId:t.conversationId,eventData:{eventType:r.e.SURVEY,subType:r.e.SUBMIT,eventInfo:{surveyId:t.surveyId,feedbackValue:e.feedbackValue,requestId:t.message.requestId,submitSurveyInfo:n}},eventName:r.e.FEEDBACK};t.$store.dispatch("sendEvent",o)}t.$store.dispatch("setIdleTimerForSurvey"),t.$store.dispatch("sendSurveyFormData",e),t.$store.dispatch("updateSurveyFormState",{isValid:!1,data:{},isFirstResponse:!1}),t.isSurveyTypePersistent||t.isSurveyTypeAgentFeedback||Object(S.emitEventToParentWindow)(r.o.SURVEY_SUBMITTED,Object(S.getEventDataPoints)()),t.triggerType===r.B.WIDGET_EVENT_CHAT_END&&(yield t.$store.dispatch("endChatSurveyFulfilledBeforeTimeout"))}))()},clearConversationIfRequired(){var e;"pending"===this.$store.state.clearConversationState.status&&(this.$store.state.isTriggerMinimizeValid&&this.$store.dispatch("minimizeCW"),this.$store.dispatch("updateTriggerMinimizeValidState",!1),this.$store.dispatch("updateClearConversationToPending",""),this.$store.dispatch("handleClearConversationStatus",null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.endChatClearConversation))},showSubmittedSurvey(e){e&&this.$store.dispatch("updateSurveyFormState",{isValid:!0,data:this.message,isFirstResponse:this.isFirstResponse,submittedValues:this.eventPayload,isSurveySubmitted:!0})},onSurveyClosed(){this.showSurveyInReadOnly=!1,this.$store.dispatch("updateSurveyFormState",{isValid:!1,data:{},isFirstResponse:!1}),this.focusOnAppropriateElement()}}}),N=Object(h.a)(C,(function(){var e=this,t=e._self._c;return e.isSkipped?e._e():t("div",[!e.isSubmitted&&e.showOnlySurvey||e.showSurveyInReadOnly?t("SurveyForm",{attrs:{schema:e.surveySchema,submittedValues:e.submittedValues,isSurveySubmitted:e.showSurveyInReadOnly,surveyId:e.surveyId,isFirstResponse:e.isFirstResponse,triggerType:e.triggerType},on:{"survey-submit":e.onSurveySubmit,"survey-skipped":e.onSurveySkipped,"survey-closed":e.onSurveyClosed}}):e.isSubmitted&&!e.showOnlySurvey?t("SubmittedForm",{attrs:{submittedData:e.eventPayload,surveyId:e.surveyId,schema:e.surveySchema},on:{"show-survey-submitted":e.showSubmittedSurvey}}):e._e()],1)}),[],!1,null,"26c31900",null);t.a=N.exports},296:function(e,t,n){"use strict";var i={props:{checked:{type:Boolean,default:!1},label:{type:String,required:!1,default:""},index:Number,handleCheckbox:Function,isDisabled:{type:Boolean,default:!1}},methods:{handleInputChange(e){this.handleCheckbox&&this.handleCheckbox(e.target.checked)}}},o=(n(507),n(8)),a=Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",class:{"label-disabled":e.isDisabled}},[t("input",{staticClass:"tab-focused-btn",attrs:{type:"checkbox",id:e.index,role:"checkbox","aria-checked":e.checked,disabled:e.isDisabled},domProps:{checked:e.checked},on:{change:function(t){return e.handleInputChange(t)}}}),e._v(" "),t("label",{attrs:{for:e.index}},[e._v("\n    "+e._s(e.label)+"\n  ")])])}),[],!1,null,"ce70e806",null);t.a=a.exports},297:function(e,t,n){"use strict";var i={props:{showLabel:{type:Boolean,default:!0},showRequiredSign:{type:Boolean,default:!1},placeholder:{type:String,default:"Enter text"},value:{type:String,default:""},label:{type:String,default:"Input",required:!0},labelFor:{type:String,default:""},handleFormInput:Function,handleOnFocusOut:{type:Function,default:function(){}},handleOnKeyUp:{type:Function,default:function(){}},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}}},o=(n(508),n(8)),a=Object(o.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-input-wrapper"},[e.showLabel?t("label",{attrs:{for:e.labelFor}},[e._v("\n    "+e._s(e.label)+"\n    "),e.showRequiredSign?t("span",[e._v("*")]):e._e()]):e._e(),e._v(" "),t("input",{class:{"input-invalid":e.isInvalid},staticStyle:{width:"100%"},attrs:{id:e.labelFor,disabled:e.isDisabled,"aria-required":e.showRequiredSign,placeholder:e.placeholder,"aria-invalid":e.isInvalid},domProps:{value:e.value},on:{input:function(t){t.preventDefault(),e.handleFormInput(t.target.value)},blur:e.handleOnFocusOut,keyup:e.handleOnKeyUp}})])}),[],!1,null,"309a656f",null);t.a=a.exports},298:function(e,t,n){"use strict";var i={mixins:[n(25).a],props:{errorMessage:String}},o=(n(509),n(8)),a=Object(o.a)(i,(function(){var e=this._self._c;return e("div",{staticClass:"error-container"},[e("p",{staticClass:"error-text",style:{fontSize:this.getFontSizeForResponse("smallBodyText")},attrs:{role:"alert"}},[this._v(this._s(this.errorMessage))])])}),[],!1,null,"6ff9881e",null);t.a=a.exports},299:function(e,t,n){"use strict";var i=n(0),o={name:"CustomSwitch",props:{value:{type:Boolean,required:!0}},emits:["input"],mounted(){this.setAriaLabelForCheckbox(this.value)},computed:{backgroundStyles(){return{open:this.value,close:!this.value}},indicatorStyles(){return{transform:this.value?"translateX(20px)":"translateX(2px)"}}},methods:{setAriaLabelForCheckbox(e){const t=this.$refs.toggleStateAlert;null==t||t.setAttribute("aria-label",""+(e?i.a.ENABLED:i.a.DISABLED))},toggle(){var e;const t=!this.value;this.$emit("input",t),null===(e=this.$refs.toggleStateAlert)||void 0===e||e.setAttribute("role","alert"),this.setAriaLabelForCheckbox(t)}}},a=(n(533),n(8)),s=Object(a.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("span",{staticClass:"toggle-wrapper",attrs:{role:"checkbox","aria-checked":e.value.toString(),"data-testId":"toggle-wrapper"},on:{click:function(t){return t.stopPropagation(),e.toggle.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.toggle.apply(null,arguments))}}},[t("span",{staticClass:"toggle-background",class:{"toggle-open":this.value,"toggle-close":!this.value}}),e._v(" "),t("span",{staticClass:"toggle-indicator",style:e.indicatorStyles})]),e._v(" "),t("p",{ref:"toggleStateAlert"})])}),[],!1,null,"a9aef9fc",null);t.a=s.exports},30:function(e,t,n){"use strict";n.d(t,"s",(function(){return R})),n.d(t,"p",(function(){return S})),n.d(t,"r",(function(){return b})),n.d(t,"f",(function(){return A})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"h",(function(){return I})),n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"j",(function(){return D})),n.d(t,"i",(function(){return N})),n.d(t,"n",(function(){return w})),n.d(t,"a",(function(){return P})),n.d(t,"t",(function(){return U})),n.d(t,"q",(function(){return F})),n.d(t,"l",(function(){return L})),n.d(t,"o",(function(){return M})),n.d(t,"m",(function(){return B}));var i=n(3),o=n.n(i),a=n(9),s=n.n(a),r=n(1),l=n(0),c=n(24),u=n(14),d=n(16),h=n(11),p=n(2),g=n(5),m=n(6);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n,i;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=null===(n=D())||void 0===n?void 0:n.enableZendeskConsoleLog,s=null===(i=D())||void 0===i?void 0:i.enableZendeskSentryLog;a&&o&&console.log(`Zendesk INFO: ${e}: ${t}`),s&&new d.a({name:l.h.ZENDESK,message:`${e}: ${t}`,logLevel:"info",service:"LIVEAGENT"})}function T(e,t){var n;if(!1===(null===(n=D())||void 0===n?void 0:n.enableZendeskErrorLog))return;const i=l.h.ZENDESK;console.log(`Zendesk ERROR: ${e}: ${t}`),new h.a({name:i,message:`${e}: ${t}`,service:"LIVEAGENT"})}function _(e,t){var n,i;const o=null===(n=D())||void 0===n?void 0:n.enableZendeskConsoleLog,a=null===(i=D())||void 0===i?void 0:i.enableZendeskSentryLog;o&&console.log(`${l.h.ZENDESK.concat(" ",l.b.SUCCESS)}: ${e}: ${t}`),a&&new d.a({name:l.h.ZENDESK,message:`${e}: ${t}`,logLevel:"info",service:"LIVEAGENT"})}function S(e,t){if(e===l.h.ZENDESK)return t()}function b(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new d.a({name:"NET-57075 sendMessagePayloadFormatter",message:`Called with params: message=${e}, timestamp=${t}, hideMessage=${n}, isEvent=${i}`,logLevel:"info",service:"Action"}),E({userMessage:{payload:e,label:l.h.BACK_TO_BOT_SYSTEM_EVENT,timestamp:t,hideMessage:n}},i&&{messageType:l.h.INFO})}function O(e,t,n){u.a.prototype.$liveAgent.showMessageSeperator(e,t,n),Object(p.updateUnreadIndicator)(!0)}function I(e,t){return!(!t||t<=0)&&(!e||e!==t)}function y(e){var t,n;return(null===(t=r.a.state.widgetConfig)||void 0===t||null===(n=t.liveAgentDeskConfig)||void 0===n?void 0:n.agentDeskChannelName)===e}function A(e){return e===l.h.AGENT&&r.a.state.controlType===l.h.BOT}function C(e){return e===l.h.BOT&&r.a.state.controlType===l.h.AGENT}function N(e){let t=l.c.Text;var n;return e.attachmentList?null===(n=e.attachmentList)||void 0===n?void 0:n.reduce((function(e,n){let i;return(null==n?void 0:n.type)===l.c.Image&&n.largeImageUrl?(i=`${n.title}: ${n.largeImageUrl}\n`,t=l.c.Image):(null==n?void 0:n.type)===l.c.File&&n.fileURL&&(i=`${n.title}: ${n.fileURL}\n`,t=l.c.File),i&&(e+=i),{message:e,type:t}}),""):{message:e.messagePayload.label,type:t}}function D(){var e,t,n;const i=r.a.state.botRefId,o=null===(e=r.a.state.widgetConfig)||void 0===e?void 0:e.botRefIdSandbox,a=null===(t=r.a.state.widgetConfig)||void 0===t?void 0:t.liveAgentDeskConfigSandbox,s=null===(n=r.a.state.widgetConfig)||void 0===n?void 0:n.liveAgentDeskConfig;return y(l.h.ZENDESK)&&i===o&&a?a:s}const R=function(){let e="";return{startTimer:function(){return function(){const t=Object(p.getMaxTimeForTypingIndicator)(),n=Object(p.getMinTimeForTypingIndicator)();e=setTimeout((function(){r.a.dispatch("updateTypingIndicatorStatus",!1)}),t+n)}()},clearTimer:function(){clearTimeout(e)}}},w=function(){var e=o()((function*(){new d.a({name:"NET-57075 handleIfAuthKeyIsInvalid",message:"Auth key invalid - triggering back to bot",logLevel:"info",service:"Action"}),yield r.a.dispatch("sendAgentEventInfo",E(E({},b(c.a.BACK_TO_BOT_UTTERANCE)),{},{agentDeskHelperMessage:!0}))}));return function(){return e.apply(this,arguments)}}(),L=function(e){const t=g.a.getLocalStorageData(c.a.AGENT_INFO).find((function(t){return t.agentId===e}));return null==t?void 0:t.agentAvatar},P=function(e){const t=g.a.getLocalStorageData(c.a.AGENT_INFO)||[];t.push(e),g.a.setLocalStorageData(c.a.AGENT_INFO,t)},U=function(e){let{displayName:t,avatar:n}=e;const i=g.a.getLocalStorageData(c.a.AGENT_INFO),o=null==i?void 0:i.findIndex((function(e){return e.agentName===t}));i[o].agentAvatar=n,g.a.setLocalStorageData(c.a.AGENT_INFO,i)},F=function(e){if(!e)return;const t=(g.a.getLocalStorageData(c.a.AGENT_INFO)||[]).filter((function(t){return t.agentId!==e}));g.a.setLocalStorageData(c.a.AGENT_INFO,t)},M=function(){const e=g.a.getSessionStorageData("tabId"),t=Object(m.a)(c.a.TRANSCRIPT_RELATED_INFO_KEY);return(!t||e===t)&&(Object(m.f)(c.a.TRANSCRIPT_RELATED_INFO_KEY,e),!0)},k={handleAgentJoinPill(e){let{agentName:t="Agent"}=e;return`${t} ${Object(p.getTranslation)("HAS_JOINED_THE_CHAT")}`},handleAgentLeavePill(e){let{agentName:t="Agent"}=e;return`${t} ${Object(p.getTranslation)("HAS_LEFT_THE_CHAT")}`},handleAgentTransferPill(e){let{agentName:t,previousAgentName:n="Agent",departmentName:i}=e;return`${n} ${Object(p.getTranslation)("HAS_TRANSFERRED_THE_CHAT")} ${t||!i?t||"Agent":i}`},handleAgentTransferAndJoinPill(e){let{agentName:t="Agent",previousAgentName:n="Agent"}=e;return`${n} ${Object(p.getTranslation)("HAS_TRANSFERRED_THE_CHAT")} ${t}`},handleAgentWaitPill(e){let{queuePosition:t}=e;return`${Object(p.getTranslation)("QUEUE_POSITION")} ${t}`},handlePillInfo(e){let{pillInfo:t}=e;return t},handleSignedIn:()=>"Successfully signed in!",handleSignedOut:()=>"Successfully signed out!",handleChatEnd:()=>l.h.CHAT_ENDED,handleSessionExpire:()=>l.h.SESSION_HAS_EXPIRED,handleCSATSurvey(e){let{feedbackValue:t,submitSurveyInfo:n,hideComment:i}=e;const o=t===l.p.POSITIVE?l.h.CHAT_RATED_GOOD:t===l.p.NEGATIVE?l.h.CHAT_RATED_BAD:l.h.CHAT_RATING_REMOVED;if(!n)return o;const a=n.additionalFeedback||"";return i?l.h.SURVEY_SUBMITTED:`${l.h.SURVEY_SUBMITTED}: ${a}`},handleGenericPill(e){let{messageInfo:t}=e;return t}},B=function(e){const{AGENT_JOIN:t,AGENT_JOIN_CONFERENCE:n,AGENT_LEFT_CONFERENCE:i,AGENT_LEAVE:o,AGENT_TRANSFER:a,AGENT_TRANSFER_AND_JOIN:s,WAIT:r,CONFIG:u,AGENTDESK_CONFIGURATION_NOT_FOUND:d,GENERIC_INFO:h}=c.a.EVENT_SUB_TYPES,{SUBMIT:p}=l.e;return{[t]:k.handleAgentJoinPill.bind(e),[n]:k.handleAgentJoinPill.bind(e),[i]:k.handleAgentLeavePill.bind(e),[o]:k.handleAgentLeavePill.bind(e),[a]:k.handleAgentTransferPill.bind(e),[s]:k.handleAgentTransferAndJoinPill.bind(e),[r]:k.handleAgentWaitPill.bind(e),[h]:k.handleGenericPill.bind(e),[u]:k.handlePillInfo.bind(e),[d]:k.handlePillInfo.bind(e),SESSION_EXPIRE:k.handleSessionExpire,CHAT_END:k.handleChatEnd,SIGN_IN:k.handleSignedIn,SIGN_OUT:k.handleSignedOut,[p]:k.handleCSATSurvey}}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{static getWindow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self";try{switch(e){case"self":return window;case"parent":if(window.parent&&window.parent!==window)return window.parent;throw new Error("Parent window is not accessible.");case"top":if(window.top&&window.top!==window)return window.top;throw new Error("Top window is not accessible.");default:throw new Error("Invalid target "+e)}}catch(t){return console.error(`Error accessing window (${e}):`,t),null}}}},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.entries(e).forEach((function(e){let[o,a]=e;const s=`${t}_${o}`;Array.isArray(a)?a.forEach((function(e,t){"object"==typeof e&&null!==e?i(e,`${s}_${t}`,n):n[`${s}_${t}`]=e})):"object"==typeof a&&null!==a?i(a,s,n):n[s]=a})),n}},304:function(e,t,n){"use strict";n.r(t);var i=n(303),o=n.n(i),a={name:"ShimmerCards"},s=(n(521),n(8)),r=Object(s.a)(a,(function(){this._self._c;return this._m(0)}),[function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"container"},[t("div",{staticClass:"shimmer image-icon"}),e._v(" "),t("div",{staticClass:"bars"},[t("div",{staticClass:"shimmer bar"}),e._v(" "),t("div",{staticClass:"shimmer bar"})])]),e._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"shimmer image-icon"}),e._v(" "),t("div",{staticClass:"bars"},[t("div",{staticClass:"shimmer bar"}),e._v(" "),t("div",{staticClass:"shimmer bar"})])]),t("div",{staticClass:"container"},[t("div",{staticClass:"shimmer image-icon"}),e._v(" "),t("div",{staticClass:"bars"},[t("div",{staticClass:"shimmer bar"}),e._v(" "),t("div",{staticClass:"shimmer bar"})])]),t("div",{staticClass:"container"},[t("div",{staticClass:"shimmer image-icon"}),e._v(" "),t("div",{staticClass:"bars"},[t("div",{staticClass:"shimmer bar"}),e._v(" "),t("div",{staticClass:"shimmer bar"})])])])}],!1,null,"6945e2fc",null).exports,l=n(22),c={name:"NonActionableNBALink",mixins:[n(25).a],components:{ShimmerCards:r,BaseIcon:l.a},data:()=>({timedOut:!1,timeoutId:""}),props:{linkData:{type:Array,default:function(){return[]}},staticLinkData:{type:Array,default:function(){return[]}}},mounted(){var e,t=this;const n=Number((null===(e=this.$store.state.clientConfig)||void 0===e?void 0:e.nbaApiTimeout)||5e3);this.timeoutId=setTimeout((function(){t.timedOut=!0}),n)},unmounted(){this.timeoutId&&clearTimeout(this.timeoutId)},computed:{groupedNbaOptions(){return o()(this.linkData,"type")},showShimmer(){var e,t;return!(null!==(e=this.linkData)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.isProcessed||this.timedOut)},getUserChatAndBotLinkColor(){var e,t,n;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.botResponseBubbleColor)||(null===(t=this.$store.state.widgetConfig)||void 0===t||null===(n=t.theme)||void 0===n?void 0:n.color)||"#4D34E9"},getLinkStyle(){return{color:""+this.getUserChatAndBotLinkColor}}},methods:{handleButtonClicked(e){e&&!e.match(/^https?:\/\//i)&&(e="https://"+e),e&&window.open(e,"noopener","noreferrer")}}},u=(n(522),Object(s.a)(c,(function(){var e=this,t=e._self._c;return e.showShimmer?t("ShimmerCards"):t("div",{staticClass:"nba-non-actionable-link-wrapper"},[e._l(e.staticLinkData,(function(n,i){return t("div",{key:i},[t("button",{staticClass:"static-link-btn",style:e.getLinkStyle,on:{click:function(t){return e.handleButtonClicked(n.url)}}},[t("p",{staticClass:"link-text",style:{fontSize:e.getFontSizeForResponse("bodyText",!1)}},[e._v(e._s(n.label))]),e._v(" "),t("div",{staticClass:"icon"},[t("BaseIcon",{attrs:{name:"NavigateNext",height:"10px",width:"12px",fill:e.getUserChatAndBotLinkColor}})],1)])])})),e._v(" "),e._l(e.groupedNbaOptions,(function(n,i){return t("div",{key:i},[t("p",{staticClass:"content-label",style:{fontSize:e.getFontSizeForResponse("bodyText",!1)}},[e._v(e._s(i))]),e._v(" "),e._l(n,(function(n,i){return t("div",{key:i},[t("div",{staticClass:"nba-link-container",class:{"nba-link-url-container":!(n.image||n.label||n.longText)},on:{click:function(t){return e.handleButtonClicked(n.url)}}},[n.image?t("div",{staticClass:"nba-link-img"},[t("img",{staticClass:"nba-img",attrs:{src:n.image,width:"105px",height:"70px",loading:"eager"}})]):e._e(),e._v(" "),t("div",{staticClass:"nba-link-description-container",class:{"nba-link-description-url-container":!(n.image||n.label||n.longText)},style:{fontSize:e.getFontSizeForResponse("smallBodyText",!1)}},[n.label&&n.longText?t("div",{staticClass:"nba-title"},[e._v("\n                        "+e._s(n.label)+"\n                    ")]):e._e(),e._v(" "),n.label&&n.longText?t("p",{staticClass:"nba-desc-long"},[e._v(e._s(n.longText))]):t("div",{staticClass:"nba-title"},[e._v("\n                        "+e._s(n.url)+"\n                    ")])])])])}))],2)}))],2)}),[],!1,null,"01b94fc2",null));t.default=u.exports},305:function(e,t,n){e.exports=n(754)},306:function(e,t,n){window.CW_CDN_BASE&&(n.p=window.CW_CDN_BASE+"/")},31:function(e,t,n){"use strict";n.d(t,"l",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"k",(function(){return E})),n.d(t,"j",(function(){return v})),n.d(t,"g",(function(){return T})),n.d(t,"i",(function(){return _})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return b})),n.d(t,"h",(function(){return A})),n.d(t,"m",(function(){return C}));var i=n(24),o=n(30),a=n(0),s=n(1),r=n(14),l=n(163),c=n(2);function u(e,t,n,i){let{subType:o}=i;s.a.dispatch("handleSecureForm",{timestamp:t,eventInfo:e,subType:o,isLastResponse:n})}function d(e,t,n){let{feedbackValue:i,submitSurveyInfo:o}=e;if(o){i!==s.a.state.csat.rating&&s.a.dispatch("updateCSATIcons",i===a.p.POSITIVE);const e=null==o?void 0:o.additionalFeedback;s.a.dispatch("updateCSATState",{comment:e}),s.a.dispatch("updateQuickReplyOptions",[])}else{let e=i;""===i&&(e=s.a.state.csat.rating),s.a.dispatch("updateCSATIcons",e===a.p.POSITIVE),n&&s.a.dispatch("updateCSATQuickReply")}y(a.e.SUBMIT,{feedbackValue:i,submitSurveyInfo:o,hideComment:!0},t)}function h(e,t){var n;let{agentName:o,agentAvatar:a}=e;const l=a||(null===(n=s.a.state.agentInfo)||void 0===n?void 0:n.avatar)||r.a.prototype.$cdn+"/images/agent_default.svg";s.a.dispatch("updateAgentInfo",{avatar:l,displayName:o}),y(i.a.EVENT_SUB_TYPES.AGENT_JOIN,{agentName:o},t)}function p(e,t){let{agentId:n,agentName:a,agentAvatar:s}=e;Object(o.a)({agentId:n,agentName:a,agentAvatar:s}),y(i.a.EVENT_SUB_TYPES.AGENT_JOIN_CONFERENCE,{agentName:a},t)}function g(){const e=s.a.state.agentInfo.displayName;Object(o.q)(e),y(i.a.EVENT_SUB_TYPES.AGENT_LEAVE,{agentName:e})}function m(e,t){let{agentId:n,agentName:a}=e;Object(o.q)(n),y(i.a.EVENT_SUB_TYPES.AGENT_LEFT_CONFERENCE,{agentName:a},t)}function f(e,t){let{agentName:n,departmentName:o}=e;const a=s.a.state.agentInfo.displayName;y(i.a.EVENT_SUB_TYPES.AGENT_TRANSFER,{previousAgentName:a,agentName:n,departmentName:o},t)}function E(e,t){let{queuePosition:n}=e;!n||n<=0||y(i.a.EVENT_SUB_TYPES.WAIT,{queuePosition:n},t)}function v(e,t){let{message:n}=e;y(i.a.EVENT_SUB_TYPES.GENERIC_INFO,{messageInfo:n},t)}function T(){y("CHAT_END")}function _(){y("SESSION_EXPIRE")}function S(){y("SIGN_IN")}function b(){y("SIGN_OUT")}let O=0;function I(){let e=Date.now();return e<=O&&(e=O+1),O=e,e}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I();s.a.dispatch("showMessageSeparator",Object(l.a)(e,t,n))}function A(){s.a.dispatch("updateInputFieldTempDisableStatus",!1)}function C(e,t){if(!s.a.getters.showAcceptance)return;const n=Object(c.formatTimestampToMDYDate)(t),i=Object(c.formatTime)(t),o=a.h.TERMS_AND_CONDITION_ACCEPTED_MESSAGE.CHAT_WIDGET(`${n} ${i}`);s.a.dispatch("showMessageSeparator",Object(l.a)("TERMS_AND_CONDITION_ACCEPTED",o,t,"TermsAndConditionSeparator"))}},33:function(e,t,n){"use strict";t.a={REJECTED:"REJECTED",SUBMITTED:"SUBMITTED",PERSISTENT:"PERSISTENT",PENDING:"PENDING",OPEN:"OPEN",CLOSE:"CLOSE",OFFLINE:"offline",ONLINE:"online"}},36:function(e,t,n){"use strict";var i=n(3),o=n.n(i),a=n(9),s=n.n(a),r=n(15),l=n(1),c=n(2),u=n(13),d=n(6),h=n(0);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){return f.apply(this,arguments)}function f(){return(f=o()((function*(){var e,t;return yield r.a.request({method:"get",url:"/api/v2/mqtt",headers:g({"Content-Type":"application/json","x-bot-ref-id":null===l.a||void 0===l.a||null===(e=l.a.getters)||void 0===e?void 0:e.getBotRefId,"is-prompt-testing-enable":null===l.a||void 0===l.a||null===(t=l.a.getters)||void 0===t?void 0:t.isPromptTestingEnable,"x-conversation-id":Object(d.a)(h.i.SESSION.CONVERSATION_ID)},Object(u.a)()),cancelToken:Object(c.cancelHTTPRequests)()})}))).apply(this,arguments)}function E(){return v.apply(this,arguments)}function v(){return(v=o()((function*(){return(yield m()).data.credentials}))).apply(this,arguments)}var T=n(300),_=n.n(T),S=n(23),b=n(16),O=n(83),I=n(5),y=n(31);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N={["END_CHAT"]:function(e){if(!Object(d.a)(h.i.SESSION.CONVERSATION_ID))return;D({payload:!1}),l.a.dispatch("endChatAcrossTabs",e.payload)},["FORM_SUBMISSION"]:function(e){l.a.dispatch("updateLastFormSubmission",C(C({},e.payload),{},{updateAcrossTabs:!0}))},["FORM_CONTROLS_CLICKED"]:function(e){l.a.dispatch("updateFormControlsClicked",e.payload)},["FORM_VISIBILITY"]:function(e){l.a.dispatch("updateShowFormControls",e.payload)},["OVERLAY_STATUS_RESUME"]:function(){l.a.dispatch("updateOverlayStatus",!1),I.a.setLocalStorageData("overlayStatus",!1),l.a.dispatch("overlayIdleChatTimeout")},["OVERLAY_STATUS_RESTART"]:function(){l.a.dispatch("updateOverlayStatus",!1),I.a.setLocalStorageData("overlayStatus",!1),l.a.dispatch("endChat",{message:h.h.CHAT_ENDED,publishEventToIoT:!1}),l.a.dispatch("clearChats")},["SHOW_OVERLAY"]:function(){var e;l.a.dispatch("updateOverlayStatus",!0),I.a.setLocalStorageData("overlayStatus",!0);const t=null===l.a||void 0===l.a||null===(e=l.a.state)||void 0===e?void 0:e.overlayTimerId;clearTimeout(t)},["INPUT_FIELD_TEMPORARY_DISABLE"]:function(e){l.a.dispatch("updateInputFieldTempDisableStatus",e.payload),Object(c.clearTimerForInputFieldTemporaryDisable)()},["INPUT_FIELD_DISABLE_ON_SEND"]:function(e){l.a.dispatch("updateInputFieldOnSendMessage",e.payload),Object(c.clearTimerForInputFieldOnSendDisableTimer)()},["CLEAR_ITEMS_BEFORE_PARSING"]:function(){l.a.dispatch("clearItemsBeforeMessageParsing")},["CSAT_VISIBILITY"]:D,["CSAT_SUBMIT"]:function(e){let{payload:t}=e;Object(y.f)(t,t.timestamp,!0),l.a.dispatch("updateCSATRateLimit"),l.a.dispatch("throttleIdleChatTimeout"),l.a.dispatch("setIdleTimerForSurvey"),l.a.dispatch("updateCsatSurveyTime",t.timestamp)}};function D(e){var t;let{payload:n}=e;null!==(t=l.a.state.widgetConfig.persistentSurveyConfig)&&void 0!==t&&t.isPersistentSurveyEnabled&&l.a.dispatch("updateCSATState",{isEnabled:n})}const R=function(){let e="",t="",n={status:!1,reconnectionRemaining:0},i=null;const a=function(){var t=o()((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function*(){Object(c.captureIoTLogs)("Init MQTT connection"),i=yield E(),e||(e=_.a.device({protocol:"wss",clientId:t+Object(O.a)(),debug:!1,maximumReconnectTimeMs:18e3,qos:1,host:i.IoTHostEndPoint,region:i.region,accessKeyId:i.accessKeyId,secretKey:i.secretAccessKey,sessionToken:i.SessionToken}),e.on("connect",(function(){if(Object(c.captureIoTLogs)("MQTT connection success!"),l.a.dispatch("updateMqttConnectionStatus",!0),u(t),!I.a.getSessionStorageData("userInteracted")&&!Object(c.isWidgetDefaultOpened)())if(Object(c.isUpdatedJustNow)()||Object(c.isWindowMaximized)()){const e=l.a.state.widgetStatus.isFullScreen&&l.a.getters.isKnowledgeAiEnabled?h.f.SMALL_SCREEN_DEVICES:h.f.LARGE_SCREEN_DEVICES;Object(c.emitEventToParentWindow)(h.o.UPDATE_PARENT_WINDOW_STYLE,e)}else Object(c.emitEventToParentWindow)(h.o.UPDATE_PARENT_WINDOW_STYLE,Object(c.getSupportIconWidthAndHeight)());var e;(Object(c.emitEventToParentWindow)(h.o.TRIGGER_PENDING_EVENTS_ON_MQTT_CONNECT),Object(c.isWidgetDefaultOpened)())&&(Object(c.showCWBasedOnScreenSize)(),Object(c.configureSoundInNotificationService)(null===(e=l.a.state.widgetConfig)||void 0===e?void 0:e.sound),Object(c.hasProActiveGreetingsConfigured)()&&!Object(c.hasProActiveGreetingsTriggered)()?l.a.dispatch("triggerProActiveGreetings"):l.a.dispatch("receiveHistoryOfMessages"))})),e.on("reconnect",o()((function*(){try{if(n.status||n.reconnectionRemaining<=0)return;n.status=!0,n.reconnectionRemaining=n.reconnectionRemaining-1,Object(c.captureIoTLogs)("Reconnecting MQTT"),new b.a({name:"IoT Reconnect",message:"Reconnecting MQTT",logLevel:"info",service:"IoT"}),i=yield E();const{accessKeyId:t,secretAccessKey:o,SessionToken:a}=i;e.updateWebSocketCredentials(t,o,a),Object(c.handleMissedMessages)(),Object(c.captureIoTLogs)("Successfully reconnected MQTT"),new b.a({name:"IoT Reconnect",message:"Successfully reconnected MQTT",logLevel:"info",service:"IoT"})}catch(e){new S.a({name:"IoT Error",message:"Could not reconnect MQTT connection",error:e})}finally{n.status=!1}}))),e.on("error",(function(e){new S.a({name:"IOT Error",message:"Could not create websocket connection!",error:e})})),e.on("message",function(){var e=o()((function*(e,t){try{Object(c.captureIoTLogs)("Message received !");const e=JSON.parse(t.toString());s(e)}catch(e){console.log("Error while handling messages from IoT",e),new S.a({name:"IoT message handler error",message:"Error while handling messages from IoT",error:e})}}));return function(t,n){return e.apply(this,arguments)}}()))}()}));return function(){return t.apply(this,arguments)}}(),s=function(){var e=o()((function*(e){if(!Array.isArray(e)||0!==e.length){if(!(null!=e&&e.isUser||null!=e&&e.isEvent))return t=e,void l.a.dispatch("receiveAWSIoTMessage",t);var t;if((null==e?void 0:e.tabId)!==I.a.getSessionStorageData("tabId")){if(null!=e&&e.isUser)return void function(e){l.a.dispatch("syncUserMessageFromIoT",e)}(e);if(null!=e&&e.isEvent)return void N[null==e?void 0:e.event_type](e)}}}));return function(t){return e.apply(this,arguments)}}(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{a(e)}catch(e){throw new S.a({name:"IOT Device Error",message:"Could not register device with IOT!",error:e})}},u=function(i){var o;if(p(),!i||"null"===i)throw new S.a({name:"Subscribe",message:"Error in subscribe fn, conversationId: "+i});const a=`chat_widget/${null===l.a||void 0===l.a||null===(o=l.a.state)||void 0===o?void 0:o.botRefId}/${i}`;e.subscribe(a),Object(c.captureIoTLogs)("MQTT subscribed"),t=a,n.reconnectionRemaining=2e3},p=function(){t&&(Object(c.captureIoTLogs)("Unsubscribed"),e.unsubscribe(t))};return{createSubscription:function(t){try{if(!t||"null"===t)throw new Error(`Error while subscribing to IoT, conversationId: ${t}, conversationId from cookie: ${Object(d.a)(h.i.SESSION.CONVERSATION_ID)}`);e?u(t):r(t)}catch(e){new S.a({name:"Subscribing to IOT",message:e.message,error:e})}},init:r,unsubscribe:p,publishToIoT:function(n){try{return new Promise((function(i,o){var a;if(!e||null===(a=e)||void 0===a||!a.publish)throw new Error("MQTT Client is not valid, mqttClient: "+JSON.stringify(e));e.publish(t,JSON.stringify(n),(function(e){if(e)throw o(),new Error({name:"Publishing to IoT Error",message:"Error while publishing to IoT, error: "+JSON.stringify(e),error:e});i()}))}))}catch(e){console.log("Error while publishing to IoT",e),new S.a({name:"Publishing to IoT Error",message:"Error while publishing to IoT: "+e.message,error:e})}}}}();t.a=R},37:function(e,t,n){"use strict";var i=n(3),o=n.n(i),a=n(9),s=n.n(a),r=n(14),l=n(167),c=n(1),u=n(60);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){const t={en:{}};return function e(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=function(t,n){t.forEach((function(t,o){Object.keys(t).forEach((function(s){"object"==typeof t[s]?e(t[s],i):a(t,s,o,n)}))}))},a=function(e,n,o,a){const r=s(n),l=s(a),c=s(i);i?t.en[c][l]=h(h({},t.en[c][l]),{},{[`${r}_${o+1}`]:e[n]}):t.en[l]=h(h({},t.en[l]),{},{[`${r}_${o+1}`]:e[n]})},s=function(e){const t=(e=e.includes("CTA")?e.replace("CTA","Cta"):e).replace(/([A-Z])/g,",$1");return t.length>0?t.split(",").map((function(e){return e.toUpperCase()})).join("_"):e.toUpperCase()};Object.keys(n).forEach((function(a){const r=n[a];if(i||g(a))if("object"==typeof r)Array.isArray(r)?o(r,a):e(r,a);else{const e=s(a),o=i&&s(i);i?t.en[o]=h(h({},t.en[o]),{},{[e]:n[a]}):t.en[e]=n[a]}}))}(e),t}const g=function(e){return["title","subtitle","supportText","initialFlows","agentDeskForm","endChat","supportIconDetails","inactiveOverlay","calloutBubble","quickMenuOptions","restartChat","showWarning"].includes(e)};var m={en:{CHAT_ENDED:"Chat Ended",SESSION_HAS_EXPIRED:"Session has expired",BACK:"Back",RESTART:"Restart",SKIP:"Skip",SELECT:"Select",SELECT_FILE:"Select file",DOWNLOAD:"Download",DOWNLOADING:"Downloading",DOWNLOADED:"Downloaded",USER_LAST_MESSAGE_STATUS:" . Seen",INCORRECT_INPUT_VALUE:"Incorrect input value",REQUIRED_FIELD:"This is a required field",INVALID_VALIDATION:"Invalid validation.",QUICK_MENU:"Quick Menu",END_CHAT:"End chat",SOUND:"Sound",INPUT_PLACEHOLDER:"Type your message..",OFFLINE_BANNER_TEXT:"No Internet Connection",OFFLINE_MESSAGE_ERROR:"Not Sent",CHANGE_LANGUAGE:"Change language",LANGUAGE:"Language",EMAIL_ADDRESS_LABEL:"Email Address",ENTER_EMAIL_ID:"Enter Email Id",END_CHAT_DISCLAIMER:"Are you sure you want to end this chat?",WAS_THIS_HELPFUL:"Was this helpful?",SCREEN_READER_THUMBS_UP:"this is helpful",SCREEN_READER_THUMBS_DOWN:"this is not helpful",END_CHAT_CONFIRM_BUTTON_CTA:"End Chat",RESTART_CHAT:"Restart chat",SHOW_WARNING:"Show warning",CHAT_RESTART:"Chat Restarted",END_CHAT_CANCEL_BUTTON_CTA:"Cancel",DRAG_DROP_TEXT:"or drag files here",DROP_AREA_TEXT_CW:"Add a file to the conversation",HAS_JOINED_THE_CHAT:"has joined the chat",HAS_LEFT_THE_CHAT:"has left the chat",HAS_TRANSFERRED_THE_CHAT:"has transferred the chat to",QUEUE_POSITION:"Queue Position:",AGENTDESK_CONFIGURATION_NOT_FOUND:"Unable to connect with Live Agent. Our Virtual Agent can provide you assistance",MANDATORY:"Mandatory",MAIL_VALIDATION_MESSAGE:"Please provide valid email",SETTINGS_LABEL:"Settings",MAXIMIZE_LABEL:"Maximize",RESTORE_LABEL:"Restore",HEADER_CLOSE_LABEL:"Close",MINIMIZE_LABEL:"Minimize",CHAT_ENDED_WITH_TRANSCRIPT:"Chat ended and transcript was sent.",TRANSCRIPT_LABEL:"Transcript",RESTART_PRIMARY_BTN_TEXT:"Restart Chat"}};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r.a.use(l.a);t.a=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{locale:"en",fallbackLocale:"en",messages:m,silentTranslationWarn:!0};this.options=e,this.i18n=this.setupI18n(),this.setI18nLanguage(this.options.locale)}setupI18n(){return new l.a(this.options)}setI18nLanguage(e){this.i18n.locale=e}setLocaleMessages(e){const t=Object.keys(e)[0];let n=e[t];this.setI18nLanguage(t),n=this.i18n.messages[t]?E(E({},this.i18n.messages[t]),n):n,this.i18n.setLocaleMessage(t,n)}loadBotConstantLocaleMessages(e){var t=this;return o()((function*(){let n=e&&("en"===e?m:yield Object(u.a)(e));n&&t.setLocaleMessages(n)}))()}loadBotJsonConfigLocaleMessages(){var e=this;return o()((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return function*(){let n=t&&("en"===t?p(c.a.state.widgetConfig):yield Object(u.c)(t));n&&e.setLocaleMessages(n)}()})).apply(this,arguments)}updateLocaleAndMessages(e){var t=this;return o()((function*(){t.i18n.locale!==e&&(yield Promise.all([t.loadBotJsonConfigLocaleMessages(e),t.loadBotConstantLocaleMessages(e)]))}))()}}},38:function(e,t,n){"use strict";t.a={RECORDING:"RECORDING",SPEAKING:"SPEAKING",SENDING:"SENDING",NONE:"NONE"}},380:function(e,t){},382:function(e,t){},392:function(e,t){},394:function(e,t){},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var i=n(3),o=n.n(i);function a(e){return s.apply(this,arguments)}function s(){return(s=o()((function*(e){const t=e.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace(/\s+/g,""),n=Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)}));return yield crypto.subtle.importKey("spki",n.buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"])}))).apply(this,arguments)}function r(e,t){return l.apply(this,arguments)}function l(){return(l=o()((function*(e,t){const n=yield a(t),i=(new TextEncoder).encode(e),o=yield window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,i);return`masked-${[...new Uint8Array(o)].map((function(e){return e.toString(16).padStart(2,"0")})).join("")}-masked`}))).apply(this,arguments)}function c(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t>>>=0;return t.toString(36)}function u(e,t){const{detectionRegexes:n=[],maskingRegexes:i=[],redactionStrings:o=[]}=e||{};let a=t;return n.forEach((function(e,t){var n;const s=new RegExp(e,"g"),r=i[t],l=o[t]||"*";a=null===(n=a)||void 0===n?void 0:n.replace(s,(function(e){const t=new RegExp(r,"g");return null==e?void 0:e.replace(t,l)}))})),a}function d(e,t,n){return h.apply(this,arguments)}function h(){return(h=o()((function*(e,t,n){if(0===Object.keys(e).length)return t;let i=t;const o=new Map;for(let i=0;i<e.detectionRegexes.length;i++){const a=new RegExp(e.detectionRegexes[i],"g"),s=new RegExp(e.maskingRegexes[i],"g"),l=e.redactionStrings[i]||"*";let c;for(;null!==(c=a.exec(t));){const e=c[0];if(!o.has(e)){const t=e.replace(s,l),i=`text-${yield r(e,n)}-text`;o.set(e,{masked:t,wrappedEncrypted:i})}}}for(const[e,{wrappedEncrypted:t}]of o){var a;const n=new RegExp(p(e),"g");i=null===(a=i)||void 0===a?void 0:a.replace(n,t)}return i}))).apply(this,arguments)}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},41:function(e,t,n){"use strict";t.a={STATUS_CODE:{UNAUTHORIZED:401},ERROR_MESSAGE:{JWT_TOKEN_INVALID:"JWT MALFORMED / Invalid token"},WEBHOOK_MESSAGE:"Webhook Message API call failed",WEBHOOK_EVENT:"Webhook Event API call failed",WEBHOOK_HISTORY:"Webhook History API call failed",AGENT_WEBHOOK_MESSAGE:"Agent Webhook Message API call failed",AGENT_INFO_WEBHOOK_MESSAGE:"Agent Webhook Info API call failed",SUCCESS:"SUCCESS",REQUEST_ACCEPTED:"REQUEST_ACCEPTED",DEFAULT:{STATUS_CODE:"FAILURE",STATUS_MSG:"Could not process request",EXCEPTION_CODE:"Something bad happened",STATUS:500}}},412:function(e,t){},42:function(e,t,n){"use strict";var i=n(3),o=n.n(i),a=n(9),s=n.n(a),r=n(23),l=n(15),c=n(2),u=n(13),d=n(1);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){return m.apply(this,arguments)}function m(){return(m=o()((function*(e){try{var t,n;const i="11labs"===(null===d.a||void 0===d.a||null===(t=d.a.getters)||void 0===t?void 0:t.voiceTTSProvider),o=i?"/api/speech/get-streaming-speech":"/api/speech/text-to-speech",a=i?p(p({},e),Object(c.getElevenLabsConnectionConfigs)()):e;return(null===(n=(yield l.a.request({method:"post",url:o,headers:p({"Cache-Control":"no-cache"},Object(u.a)()),data:a,cancelToken:Object(c.cancelHTTPRequests)()})).data)||void 0===n?void 0:n.payload)||""}catch(e){throw new r.a({name:"Get text to speech",message:"Error while getting response audio. "+e.message})}}))).apply(this,arguments)}var f=n(38),E=n(96),v=n(6),T=n(0),_=n(16),S=n(118);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=new class{constructor(){this.liveKitRoom=null}initBackendConversationHandler(){var e=this;return o()((function*(){try{if("11labs"===d.a.getters.voiceTTSProvider&&d.a.getters.elevenLabsWebSocketEnabled&&d.a.getters.enableBackendElevenLabsSocket){var t;const n=null===d.a||void 0===d.a||null===(t=d.a.state)||void 0===t?void 0:t.botRefId,i=Object(v.a)(T.i.SESSION.CONVERSATION_ID),a=`chat_widget/${n}/${i}`;if(new _.a({name:"initBackendConversationHandler",message:"Initializing Live-Kit Conversation Handler from Client Side for room: "+a,logLevel:"info",service:"ConversationHandlerClient"}),!n||!i)throw new Error(`Missing required details. BotRefID: ${n} ConversationId: ${i}`);const{data:s}=yield e.getRoomToken();new _.a({name:"initBackendConversationHandler",message:`Received token for connecting to Live-Kit Room: ${a} at Client Side`,logLevel:"info",service:"ConversationHandlerClient"}),e.liveKitRoom=new S.a,yield e.liveKitRoom.connect("wss://netomi-voice-tpnz1u1n.livekit.cloud",s.token,{autoSubscribe:!0}),new _.a({name:"initBackendConversationHandler",message:`Connected to Live-Kit Room: ${a} at Client Side. Registering textStreamHandler`,logLevel:"info",service:"ConversationHandlerClient"}),e.liveKitRoom.registerTextStreamHandler("",function(){var e=o()((function*(e){const t=yield e.readAll();try{new _.a({name:"initBackendConversationHandler",message:`Received audio message on Live-Kit room: ${a} in client side`,logLevel:"info",service:"ConversationHandlerClient"}),y.handleAudioData({audio:t,audioIndex:parseInt(e.info.attributes.audioIndex)})}catch(e){console.log(e),new _.a({name:"initBackendConversationHandler",message:`Error occurred while processing live-kit message for room: ${a} in client side`,data:{err:e},logLevel:"info",service:"ConversationHandlerClient"})}}));return function(t){return e.apply(this,arguments)}}()),e.liveKitRoom.on(S.b.Disconnected,(function(t){new _.a({name:"initBackendConversationHandler",message:`Disonnected from Live-Kit Room: ${a} at Client Side. Reason: ${t}`,logLevel:"info",service:"ConversationHandlerClient"}),e.liveKitRoom=null})),e.liveKitRoom.on(S.b.ParticipantDisconnected,(function(){new _.a({name:"initBackendConversationHandler",message:`Server Disonnected from Live-Kit Room: ${a} at Client Side.`,logLevel:"info",service:"ConversationHandlerClient"}),e.liveKitRoom=null}))}}catch(e){new r.a({name:"initBackendConversationHandler",message:`Error while initializing Live-Kit Conversation handler: ${e.message} for room:`,logLevel:"error",service:"ConversationHandlerClient"})}}))()}getRoomToken(){return o()((function*(){return yield l.a.request({method:"post",url:"/api/live-kit-token",headers:O({"Cache-Control":"no-cache"},Object(u.a)()),data:{voiceSettings:Object(c.getElevenLabsConnectionConfigs)()},cancelToken:Object(c.cancelHTTPRequests)()})}))()}};var y=t.a=new class{constructor(){this.audioQueue=[],this.isPlaying=!1,this.textBuffer=[],this.isRequestScheduled=!1,this.isLastChunk=!1,this.currentAudio=null,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.startTime=null,this.endTime=null,this.lastPlayedAudioIndex=0}init(){this.endAudio(),this.currentAudio=null}allAudiosPlayed(){return this.eLBESocketsEnabled()?this.lastPlayedAudioIndex>=this.audioQueue.length:0===this.audioQueue.length}eLBESocketsEnabled(){return"11labs"===d.a.getters.voiceTTSProvider&&d.a.getters.elevenLabsWebSocketEnabled&&d.a.getters.enableBackendElevenLabsSocket}initElevenLabsWebSocket(){var e=this;"11labs"===d.a.getters.voiceTTSProvider&&d.a.getters.elevenLabsWebSocketEnabled&&!d.a.getters.enableBackendElevenLabsSocket&&E.a.init({onMessageCallback:function(t){e.audioQueue.push(JSON.parse(t).audio),e.playAudioFromQueue()},onMessageCompleteCallback:function(){e.isRequestScheduled=!1,e.textBuffer.length>0&&e.scheduleRequest()},onCloseCallback:function(){e.endAudio(),d.a.dispatch("updateVoiceModeActive",!1)}})}playText(e,t){if(d.a.state.isLastChunkPlayed=!1,d.a.state.currentVoiceState=f.a.SPEAKING,this.isLastChunk=t||!1,!this.allAudiosPlayed()||0!==this.textBuffer.length||!this.isLastChunk||this.isPlaying||this.isRequestScheduled||e||(d.a.state.isLastChunkPlayed=!0,d.a.state.currentVoiceState=f.a.NONE),e){const t=this.extractTextFromHTML(e);this.textBuffer.push(t),this.scheduleRequest()}this.initElevenLabsWebSocket()}handleAudioData(e){e.audio&&(this.audioQueue[e.audioIndex]=e,this.playAudioFromQueue(),this.isRequestScheduled=!1,this.textBuffer.length>0&&this.scheduleRequest())}endAudio(){this.eLBESocketsEnabled()||(this.audioQueue=[]),this.isPlaying=!1,this.textBuffer=[],this.isRequestScheduled=!1,this.isLastChunk=!1,d.a.state.isLastChunkPlayed=!1,this.startTime=null,this.endTime=null,d.a.state.currentVoiceState===f.a.SPEAKING&&(d.a.state.currentVoiceState=f.a.NONE),this.currentAudio&&(this.currentAudio.stop(),this.currentAudio=null)}getAudio(e){var t=this;return o()((function*(){try{if(null===t.startTime&&(t.startTime=performance.now()),"11labs"===d.a.getters.voiceTTSProvider){const t=yield g({botResponseText:e});return new Uint8Array(t.content.data).buffer}{const{voiceName:t,langCode:n}=Object(c.getVoiceNameAndLocaleFromLanguage)();return yield g({botResponseText:e,voiceName:t,langCode:n})}}catch(e){throw console.error("Error getting audio:",e),e}}))()}scheduleRequest(){var e=this;return o()((function*(){if(e.isRequestScheduled||0===e.textBuffer.length)return;e.isRequestScheduled=!0;const t=e.textBuffer.shift();"11labs"===d.a.getters.voiceTTSProvider&&d.a.getters.elevenLabsWebSocketEnabled?d.a.getters.enableBackendElevenLabsSocket?(I.liveKitRoom||(e.lastPlayedAudioIndex=0,yield I.initBackendConversationHandler()),I.liveKitRoom.localParticipant.sendText(t)):(null===e.startTime&&(e.startTime=performance.now()),E.a.sendMessage(t)):e.getAudio(t).then((function(t){e.audioQueue.push(t),e.playAudioFromQueue()})).catch((function(t){e.endAudio(),d.a.dispatch("updateVoiceModeActive",!1),console.error("Error scheduling request:",t)})).finally((function(){e.isRequestScheduled=!1,e.textBuffer.length>0&&e.scheduleRequest()}))}))()}playAudioFromQueue(){var e=this;if(this.allAudiosPlayed()||this.isPlaying||!d.a.state.isVoiceModeActive)this.allAudiosPlayed()&&0===this.textBuffer.length&&this.isLastChunk&&!this.isPlaying&&!this.isRequestScheduled&&(d.a.state.isLastChunkPlayed=!0,d.a.state.currentVoiceState=f.a.NONE);else{if(d.a.state.currentVoiceState!=f.a.SPEAKING)return void this.endAudio();let t="";if(this.eLBESocketsEnabled()){const e=this.audioQueue[this.lastPlayedAudioIndex];if(!e||!e.audio)return;this.isPlaying=!0,t=e.audio}else this.isPlaying=!0,t=this.audioQueue.shift();this.playAudio(t).then((function(){e.lastPlayedAudioIndex++,e.isPlaying=!1,e.playAudioFromQueue()})).catch((function(t){console.error("Error playing audio:",t),e.isPlaying=!1}))}}playAudio(e){var t=this;return o()((function*(){return new Promise((function(n,i){let o=e;if(("11labs"===d.a.getters.voiceTTSProvider&&d.a.getters.elevenLabsWebSocketEnabled||"google"===d.a.getters.voiceTTSProvider)&&(o=t.base64ToArrayBuffer(e)),t.audioContext.decodeAudioData(o,(function(e){const i=t.audioContext.createBufferSource();i.buffer=e,i.connect(t.audioContext.destination),i.onended=n,i.start(0),t.currentAudio=i}),i),null===t.endTime){t.endTime=performance.now();const e=(t.endTime-t.startTime)/1e3;console.log(`Completed in ${e.toFixed(3)} seconds`)}}))}))()}base64ToArrayBuffer(e){const t=window.atob(e),n=t.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return i.buffer}extractTextFromHTML(e){let t=(new DOMParser).parseFromString(e,"text/html").body.textContent||"";const n=d.a.getters.normalizationPhrases;for(const[e,i]of Object.entries(n)){const n=new RegExp(`\\b${e}\\b`,"gi");t=t.replace(n,i)}return t}}},440:function(e,t){},441:function(e,t){},446:function(e,t){},45:function(e,t,n){"use strict";var i=n(1),o=n(2);const{cloneDeep:a}=n(175);t.a={getDigitalVoiceEnabled:()=>({type:"TEXT",name:"digital_voice_enabled",value:"true",scope:"LIFE_TIME"}),getUserTimezoneAttribute:()=>({type:"TEXT",name:"user_timezone",value:Object(o.getUserTimezone)(),scope:"LIFE_TIME"}),getUserDateAndTimeAttribute:()=>({type:"TEXT",name:"user_date_time",value:Object(o.getUserDateAndTime)(),scope:"LIFE_TIME"}),getWidgetId:()=>({type:"TEXT",name:"widget_id",value:i.a.state.widgetId,scope:"LIFE_TIME"}),getDeptHandoffCode:()=>({type:"TEXT",name:"dept_handoff_code",value:null,scope:"LIFE_TIME"}),triggerResponse:()=>({type:"TEXT",name:"resume_bot_response",value:"false",scope:"LIFE_TIME"}),getWidgetVisitorInfo(){const e=i.a.state.widgetVisitorInfo,t=[];return Object.keys(e).forEach((function(n){t.push({type:"TEXT",name:n,value:e[n],scope:"LIFE_TIME"})})),t},getDefaultAttributes(){const e=i.a.state.defaultAttributes;if(e.length>0)return e;const t=a(Object(o.getVisitorAttributes)()),n=[];return Object.keys(t).forEach((function(e){n.push({type:"TEXT",name:e,value:t[e],scope:"LIFE_TIME"})})),i.a.dispatch("updateDefaultAttributes",n),n},getCustomVisitorInfo(){const e=i.a.state.visitorInfoForm.visitorInfoDetails,t=[];return Object.keys(e).forEach((function(n){t.push({type:"TEXT",name:n,value:e[n],scope:"LIFE_TIME"})})),t}}},456:function(e,t){},458:function(e,t){},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n(9),o=n.n(i),a=n(0),s=n(83),r=n(14),l=n(2),c=n(1),u=n(6);const d={[a.k.FORMID]:function(e){let{messages:t,field:n,isLastBotResponse:i}=e;return h(t,n,i)},[a.k.FORM_ID]:function(e){let{messages:t,field:n,isLastBotResponse:i}=e;return h(t,n,i)},[a.k.FORM_URL]:function(e){let{messages:t,field:n}=e;return function(e,t){return t&&[{messageId:Object(s.a)(),requestId:e.requestId,type:a.g[a.c.MessageInfoAttachment][1],hide:!1,messageValue:{isURL:!0,source:t.values[0],status:[a.A.PENDING],iframeHeightWithOnlyQuestions:[0]},timestamp:parseInt(e.timestamp),isUser:!1}]}(t,n)},[a.k.FORM_SCHEMA]:function(e){let{messages:t,field:n}=e;return function(e,t){return t&&[{messageId:Object(s.a)(),requestId:e.requestId,type:a.g[a.c.MessageInfoAttachment][2],hide:!1,messageValue:{schema:t.values[0],status:[a.A.PENDING]},timestamp:parseInt(e.timestamp),isUser:!1}]}(t,n)},[a.k.SURVEY_SCHEMA]:function(e){let{messages:t,field:n}=e;return function(e,t){return t&&[{messageId:Object(s.a)(),requestId:e.requestId,conversationId:e.requestPayload.conversationId||Object(u.a)(a.i.SESSION.CONVERSATION_ID),type:a.g[a.c.MessageInfoAttachment][3],hide:!1,messageValue:{schema:t.values[0],status:[a.A.PENDING]},timestamp:parseInt(e.timestamp),isUser:!1}]}(t,n)},[a.k.PRIMARY_LANGUAGE]:function(e){let{field:t}=e;c.a.dispatch("updatePrimaryLanguage",t.values[0])},[a.k.DISABLE_CHAT_INPUT_FIELD]:function(e){let{field:t}=e;c.a.dispatch("updateInputFieldDisableStatus","true"===t.values[0])},[a.k.DISABLE_INPUT_FIELD]:function(e){let{field:t}=e;c.a.dispatch("updateInputFieldTempDisableStatus","true"===t.values[0])},[a.k.END_CHAT_FIELD]:function(){c.a.dispatch("updateEndChatCustomFieldStatus",!0)},[a.k.CALLBACK_EVENT]:function(e){let{field:t,isCallbackEventTriggered:n}=e;n||Object(l.emitEventToParentWindow)(a.o.NETOMI_FORM_SUBMIT_EVENT,{callbackValue:t.values[0]})},[a.k.ZD_CHAT_CLEAR_TAGS]:function(){c.a.dispatch("clearTags")},[a.k.NETOMI_HANDOVER_DEPARTMENT_NAME]:function(e){let{field:t}=e;c.a.dispatch("updateHandoffDepartment",t.values[0])},[a.k.ZD_CHAT_VISITOR_NAME]:function(e){var t;let{field:n}=e;c.a.dispatch("updateVisitorInfo",{display_name:null===(t=n.values[0])||void 0===t?void 0:t.trim()})},[a.k.ZD_CHAT_VISITOR_EMAIL]:function(e){var t;let{field:n}=e;c.a.dispatch("updateVisitorInfo",{email:null===(t=n.values[0])||void 0===t?void 0:t.replace(/\s+/g,"")})},[a.k.ZD_CHAT_VISITOR_PHONE]:function(e){var t;let{field:n}=e;c.a.dispatch("updateVisitorInfo",{phone:null===(t=n.values[0])||void 0===t?void 0:t.trim()})},[a.k.ZD_LIVE_HANDOFF_TAGS]:function(e){let{field:t}=e;c.a.dispatch("addTags",t.values)}};function h(e,t,n){return t&&[{messageId:Object(s.a)(),requestId:e.requestId,type:a.g[a.c.MessageInfoAttachment][0],hide:Object(l.hideMessage)({attachment:{values:{status:[a.A.PENDING]}}},a.g[a.c.MessageInfoAttachment][0],n),messageValue:{formId:t.values[0],values:{status:[a.A.PENDING]}},timestamp:parseInt(e.timestamp),isUser:!1}]}var p=n(30),g=n(21),m=n.n(g);function f(e){let{attachments:t,triggerType:n,customPayload:i,customFields:o}=e;const s=i[a.m.TRANSLATE_LANGUAGE];s&&!function(e,t,n){if(e&&0===e.length&&n&&1===n.length&&n[0].name===a.k.SURVEY_SCHEMA&&t===a.e.RESPONSE){var i;const e=JSON.parse(null===(i=n[0])||void 0===i?void 0:i.values);if(e&&(e.triggerType===a.B.WIDGET_EVENT_CHAT_END||e.triggerType===a.B.WIDGET_EVENT_IDLE_USER))return!0}return 0===(null==e?void 0:e.length)}(t,n,o)&&Object(l.changeCWLanguage)(s)}var E=n(81);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){var n,i,o,u;let d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const g=b(e),E={isUser:!1,isAgent:d,requestId:e.requestId,messages:(null==e||null===(n=e.attachments)||void 0===n?void 0:n.map((function(n){if(a.g[n.type][0])return{messageId:Object(s.a)(),requestId:e.requestId,type:a.g[n.type][0],hide:g||Object(l.hideMessage)(n,a.g[n.type][0],t),messageValue:n.attachment,timestamp:parseInt(e.timestamp),isUser:!1}})))||[],timestamp:parseInt(e.timestamp)};if(e.customPayload&&f(e),d){var v,_,I;const t=(null==e||null===(v=e.agentInfo)||void 0===v?void 0:v.avatar)||c.a.state.agentInfo.avatar||r.a.prototype.$cdn+"/images/agent_default.svg",n=(null==e||null===(_=e.agentInfo)||void 0===_?void 0:_.displayName)||c.a.state.agentInfo.displayName;E.agentInfo={avatar:t,displayName:n},n&&(null==e||null===(I=e.agentDesk)||void 0===I?void 0:I.toUpperCase())===a.h.SALESFORCE&&Object(p.t)({displayName:n,avatar:t})}e.customFields&&e.customFields.length&&(E.messages=[...E.messages,...S(e,t,h)]);const y=null==E||null===(i=E.messages)||void 0===i?void 0:i.findIndex((function(e){return"MultiSource"===e.type}));if(-1!=y&&null!==(o=c.a.getters)&&void 0!==o&&o.isDynamicSourcesDisabled){var A;const e=null===(A=E.messages)||void 0===A?void 0:A[y];if(e){const t=e.messageValue.multipleSourceDetails;let n=" ";t.forEach((function(e){n+="\n"+e.text}));const i=m()(e);!i.messageValue.text&&c.a.getters.isChatWidgetLlmEnabled&&(i.messageValue.text="Sources"),delete i.messageValue.multipleSourceDetails;const{text:o}=i.messageValue,a=T(T({},i),{},{messageId:Object(s.a)(),messageValue:T(T({},i.messageValue),{},{isReviewEnabled:!1,attachmentResponseType:"ANSWER_AI_RESPONSE",type:"ai.msg.domain.responses.core.Text",text:o+n}),type:"TextResponse",showInCollapsedView:!0});E.messages.splice(y+1,0,a)}}else if(-1!=y&&(null===(u=c.a.getters)||void 0===u||!u.isDynamicSourcesDisabled)){var C;const e=null===(C=E.messages)||void 0===C?void 0:C[y];if(e){O(e.messageValue.multipleSourceDetails)}}return E}function S(e,t,n){return function(e,t){var n;let i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==e||null===(n=e.customFields)||void 0===n||n.forEach((function(n){var a,s;let r;null!==(a=n.values)&&void 0!==a&&a.length&&d[n.name.toUpperCase()]?r=d[n.name.toUpperCase()]({field:n,messages:e,isLastBotResponse:t,isCallbackEventTriggered:o}):null!==(s=n.values)&&void 0!==s&&s.length&&d[n.name]&&(r=d[n.name]({field:n,messages:e,isLastBotResponse:t,isCallbackEventTriggered:o})),void 0!==r&&(i=r)})),i}(e,t,n)||[]}function b(e){var t;return!(null!=e&&null!==(t=e.attachments)&&void 0!==t&&t.length)&&e.ownerType===a.h.AGENT}function O(e){var t,n;let i;if(null!=e&&e.length){const t=e.map((function(e){return e.text}));i=Object(E.a)({requestBody:t})}let o={};null===(t=i)||void 0===t||null===(n=t.then((function(t){var n;null==e||e.forEach((function(e,n){var i;const a=null==t||null===(i=t[n])||void 0===i?void 0:i.value,s=null==a?void 0:a.logo,r=e.text;o[r]=s}));const i=T(T({},c.a.state.multiSourceLogoObj),o);(null===(n=Object.keys(o))||void 0===n?void 0:n.length)>0&&(c.a.state.multiSourceLogoObj=i)})))||void 0===n||n.catch((function(e){console.log(e)}))}},47:function(e,t,n){"use strict";var i=n(9),o=n.n(i),a=n(46),s=n(21),r=n.n(s),l=n(1),c=n(5),u=n(2),d=n(19),h=n(0),p=n(83),g=n(53);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=new class{constructor(){this.chunksArray=[],this.currentProcessingRequiredIndex=0,this.success=!1,this.timerIds=[],this.chunkQueue=[],this.chunkLength=3,this.totalChunks=0,this.lastChunkProcessed=null,this.startNewMessage=!1,this.audioAttachment="",this.fillerTextIndex=0}init(e){this.endChunkProcessing(e)}addAndProcessChunks(e){var t,n,i,o,a,s,u,d,p,g;if("FillerText"===((null==e||null===(t=e.attachments)||void 0===t?void 0:t[0])&&(null===(n=h.g[null===(i=e.attachments[0])||void 0===i?void 0:i.type])||void 0===n?void 0:n[0]))){var m,f,E;const t=null==e||null===(m=e.attachments)||void 0===m||null===(f=m[0])||void 0===f||null===(E=f.attachment)||void 0===E?void 0:E.text;let n=r()(l.a.getters.getProgressiveTypingIndicatorConfig);return n=[{duration:2e5,text:t}],l.a.commit("UPDATE_PROGRESSIVE_TYPING_INDICATOR_CONFIG",n),void this.fillerTextIndex++}if(0===e.attachments.length&&(null===(o=e.customPayload)||void 0===o?void 0:o.CHUNK_INDEX)-this.fillerTextIndex==0)return void this.fillerTextIndex++;const v=l.a.getters.isResponseAnalyzerEnabled?"responseAnalyzerMessageId":"currentUserMessageId",T=null===c.a||void 0===c.a?void 0:c.a.getLocalStorageData(v);if((l.a.getters.isResponseAnalyzerEnabled?null==e||null===(a=e.requestPayload)||void 0===a||null===(s=a.requestId)||void 0===s?void 0:s.toString():null==e||null===(u=e.requestPayload)||void 0===u||null===(d=u.messagePayload)||void 0===d||null===(p=d.messageId)||void 0===p?void 0:p.toString())!==(null==T?void 0:T.toString())||null!==(g=l.a.state.fallbackMechanismState)&&void 0!==g&&g.isVisible)return;const _=e.customPayload,S=null==_?void 0:_.CHUNK_INDEX,b=null==_?void 0:_.CHUNK_STATUS,O=r()(e);O.customPayload.CHUNK_INDEX-=this.fillerTextIndex,this.chunksArray[S-this.fillerTextIndex]=this.removeAudioAttachments(O),"SUCCESS"===b&&(this.success=!0),this.processChunks(O)}removeAudioAttachments(e){const t=[];return e.attachments=e.attachments.filter((function(e){var n;return"AudioResponse"!==(null===(n=h.g[e.type])||void 0===n?void 0:n[0])||(t.push(e),!1)})),t.length>0&&(this.audioAttachmentFound=!0),this.playAudioAttachments(t),r()(e)}playAudioAttachments(e){if(!l.a.state.isVoiceModeActive||0===e.length)return;const t=e[0].attachment.text;this.audioAttachment=t}processChunks(e){const t=this.currentProcessingRequiredIndex,n=this.chunksArray.length;for(let u=t;u<n&&this.chunksArray[u];u++){var i,o,a,s,r,c;l.a.dispatch("throttleFallbackMechanism",{userMessage:{payload:null===(i=e.requestPayload)||void 0===i||null===(o=i.messagePayload)||void 0===o?void 0:o.text,label:null===(a=e.requestPayload)||void 0===a||null===(s=a.messagePayload)||void 0===s?void 0:s.text,hideMessage:!0,isStreaming:!0},timestamp:null===(r=e.requestPayload)||void 0===r||null===(c=r.messagePayload)||void 0===c?void 0:c.timestamp}),this.processChunk(this.chunksArray[u],u),this.currentProcessingRequiredIndex++}}processChunk(e,t){var n,i,o,s,c,d,p=this;if(this.addStreamingInAnswerAiAttachment(e),0===t){const t=Object(a.a)(e,!1,!1);if(r()(t.messages).length>0){l.a.getters.isStreamingEnabled&&l.a.getters.disableInputFieldWhileStreaming&&l.a.dispatch("updateInputFieldStreamingDisableStatus",!0),l.a.getters.disableInputFieldOnSendMessage&&l.a.dispatch("updateInputFieldOnSendMessage",!0);const t=this.getAnswerAiResponses(e);t.forEach((function(n,i){var o,a;if("ai.msg.domain.responses.core.Text"===(null==n||null===(o=n.attachment)||void 0===o?void 0:o.type)){var s;const o=null==n||null===(s=n.attachment)||void 0===s?void 0:s.text,a=Object(u.getDataInChunks)(o,p.chunkLength);for(let o=0;o<a.length;o++){var c;if(0===o&&0===i){const t=r()(n);t.attachment.text=a[o],t.attachment.type=h.g[null==n?void 0:n.attachment.type][0];const i=r()(e);i.attachments=[t],l.a.dispatch("processChunkResponse",i),p.lastChunkProcessed=t}else if(a[o]){const s=p.createTextChunk(a,o,n,t,i,e);p.chunkQueue.push({chunk:s,index:p.totalChunks}),p.totalChunks++}1===(null==a?void 0:a.length)&&null!=e&&null!==(c=e.customPayload)&&void 0!==c&&c.IS_TEXT_BUBBLE_COMPLETED&&(p.startNewMessage=!0),p.processChunksQueue()}}else if(h.g[null==n||null===(a=n.attachment)||void 0===a?void 0:a.type][0])if(0===i){const t=r()(e);t.attachments=[n],l.a.dispatch("processChunkResponse",t),n.attachment.type=h.g[null==n?void 0:n.attachment.type][0],p.lastChunkProcessed=n}else{const t=p.createNonTextChunk(n,e);p.chunkQueue.push({chunk:t,index:p.totalChunks}),p.totalChunks++,p.processChunksQueue()}}))}}else{const t=this.getAnswerAiResponses(e);t.forEach((function(n,i){var o;if("ai.msg.domain.responses.core.Text"===(null==n||null===(o=n.attachment)||void 0===o?void 0:o.type)){var a;const o=null==n||null===(a=n.attachment)||void 0===a?void 0:a.text,s=Object(u.getDataInChunks)(o,p.chunkLength);for(let o=0;o<s.length;o++){const a=p.createTextChunk(s,o,n,t,i,e);p.chunkQueue.push({chunk:a,index:p.totalChunks}),p.totalChunks++,p.processChunksQueue()}}else if(h.g[null==n?void 0:n.attachment.type][0]&&!p.isLastChunk()){const t=p.createNonTextChunk(n,e);p.chunkQueue.push({chunk:t,index:p.totalChunks}),p.totalChunks++,p.processChunksQueue()}p.processChunksQueue()}))}this.isLastChunk()&&(this.processLastChunk(),l.a.getters.isPromptTestingEnable&&Object(u.emitEventToParentWindow)(h.o.RESPONSE_RECEIVED,{conversationId:null==e||null===(n=e.requestPayload)||void 0===n?void 0:n.conversationId,messageId:null==e||null===(i=e.requestPayload)||void 0===i||null===(o=i.messagePayload)||void 0===o?void 0:o.messageId,requestId:null==e||null===(s=e.requestPayload)||void 0===s?void 0:s.requestId,userQuery:null==e||null===(c=e.requestPayload)||void 0===c||null===(d=c.messagePayload)||void 0===d?void 0:d.label}))}processLastChunk(){var e,t,n,i,o,s,c,u,h,p=this;const g=null===(e=this.chunksArray)||void 0===e||null===(t=e[(null===(n=this.chunksArray)||void 0===n?void 0:n.length)-1])||void 0===t?void 0:t.attachments,m=null===(i=this.chunksArray)||void 0===i||null===(o=i[(null===(c=this.chunksArray)||void 0===c?void 0:c.length)-1])||void 0===o||null===(s=o.attachments)||void 0===s?void 0:s.filter((function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.attachmentResponseType)&&"ai.msg.domain.responses.core.Text"===e.type}));null==m||m.forEach((function(e){e.attachment.text=""}));const f={};f.attachments=g;const E=Object(a.a)(f,!0,!1),v=r()(null==E?void 0:E.messages),T=d.a.STREAM_TIME_FOR_EACH_CHUNK*this.totalChunks+d.a.STREAM_TIME_FOR_EACH_CHUNK,_=null===(u=this.chunksArray.find((function(e){var t;return null==e||null===(t=e.attachments)||void 0===t?void 0:t.some((function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.attachmentResponseType)}))})))||void 0===u||null===(h=u.attachments)||void 0===h?void 0:h.find((function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.attachmentResponseType)}));if(_){const e=setTimeout((function(){l.a.dispatch("removeStreamingFromAttachment",_)}),T);this.timerIds.push(e)}if(v.length>0){const e=setTimeout((function(){v.find((function(e){var t;return"TextResponse"===e.type&&(null==e||null===(t=e.messageValue)||void 0===t?void 0:t.isReviewEnabled)}))&&l.a.dispatch("addFeedbackforLastAttachment"),v.forEach((function(e){l.a.dispatch("updateMessageInLastChat",e)}))}),T);this.timerIds.push(e)}const S=v.filter((function(e){return e.messageValue.quickReply}));l.a.dispatch("processQuickReplies",{delay:T,messages:S,timerIds:[]});const b=setTimeout((function(){p.endChunkProcessing()}),T);this.timerIds.push(b)}processChunksQueue(){var e=this;if(0===this.chunkQueue.length)return;const{chunk:t}=this.chunkQueue.shift(),n=r()(t.customPayload);t.customPayload&&delete t.customPayload;const i=this.getTotalDelay();if(this.isTypeTextResponse(this.lastChunkProcessed)&&this.isTypeTextResponse(t)&&!this.startNewMessage){const n=setTimeout((function(){l.a.commit("UPDATE_LAST_CHUNK_MESSAGE_V2",t),e.processChunksQueue()}),i);this.timerIds.push(n)}else if(this.isTypeCarouselResponse(this.lastChunkProcessed)&&this.isTypeCarouselResponse(t)){const n=setTimeout((function(){l.a.commit("UPDATE_LAST_CHUNK_CAROUSEL_MESSAGE",t),e.processChunksQueue()}),i);this.timerIds.push(n)}else{const n=setTimeout((function(){l.a.dispatch("updateMessageInLastChat",t),e.processChunksQueue()}),i);this.timerIds.push(n)}this.startNewMessage=!1,null!=n&&n.IS_TEXT_BUBBLE_COMPLETED&&(this.startNewMessage=!0),this.lastChunkProcessed=t}endChunkProcessing(e){e||l.a.dispatch("updateInputFieldOnSendMessage",!1),this.fillerTextIndex=0,l.a.commit("UPDATE_PROGRESSIVE_TYPING_INDICATOR_CONFIG"),this.chunkQueue=[],this.chunkLength=3,this.totalChunks=0,this.chunksArray=[],this.currentProcessingRequiredIndex=0,this.success=!1,Object(u.clearAllSetTimeout)(this.timerIds),this.timerIds=[],this.lastChunkProcessed=null,this.startNewMessage=!1,l.a.dispatch("updateInputFieldStreamingDisableStatus",!1),l.a.dispatch("clearFallbackMechanismTimer");const t=l.a.getters.isResponseAnalyzerEnabled?"responseAnalyzerMessageId":"currentUserMessageId";c.a.removeLocalStorageData(t),l.a.state.isVoiceModeActive&&(!e&&this.audioAttachment&&l.a.getters.textToSpeechOrationResponse&&(g.a.init(),g.a.accumulateText(this.audioAttachment,!1)),g.a.playLastChunk())}createTextChunk(e,t,n,i,o,a){const s=f(f({messageId:Object(p.a)(),requestId:a.requestId,hide:Object(u.hideMessage)(n,h.g[n.type][0],!1),type:h.g[n.type][0],messageValue:r()(n.attachment),timestamp:parseInt(a.timestamp),isUser:!1},t===e.length-1&&o===i.length-1&&{customPayload:r()(a.customPayload)}),{},{attachment:{text:e[t],type:h.g[null==n?void 0:n.attachment.type][0],timestamp:parseInt(a.timestamp)}});return s.messageValue.text=e[t],s}createNonTextChunk(e,t){return{messageId:Object(p.a)(),requestId:t.requestId,type:h.g[e.type][0],hide:Object(u.hideMessage)(e,h.g[e.type][0],!1),messageValue:r()(e.attachment),timestamp:parseInt(t.timestamp),isUser:!1,attachment:{type:h.g[null==e?void 0:e.attachment.type][0],timestamp:parseInt(t.timestamp)}}}addStreamingInAnswerAiAttachment(e){this.getAnswerAiResponses(e).forEach((function(e){e.attachment&&(e.attachment.isStreaming=!0,e.attachment.isPartialStreaming=!0)}))}getAnswerAiResponses(e){var t;return null==e||null===(t=e.attachments)||void 0===t?void 0:t.filter((function(e){var t;return"ANSWER_AI_RESPONSE"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.attachmentResponseType)}))}addTimerIds(e){this.timerIds.push(e)}getTotalDelay(){return d.a.STREAM_TIME_FOR_EACH_CHUNK*this.totalChunks}isLastChunk(){return this.success&&this.currentProcessingRequiredIndex===this.chunksArray.length-1}isTypeTextResponse(e){var t;return"TextResponse"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.type)||!1}isTypeCarouselResponse(e){var t;return"CarouselResponse"===(null==e||null===(t=e.attachment)||void 0===t?void 0:t.type)||!1}}},5:function(e,t,n){"use strict";var i=n(19);const o={getLocalStorageData(e){try{e=i.a.KEY_PREFIX+e;const t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}}catch(e){console.log("Local Storage error",e)}},setLocalStorageData(e,t){try{e=i.a.KEY_PREFIX+e;let n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.log("Local Storage error",e)}},removeLocalStorageData(e){try{e=i.a.KEY_PREFIX+e,localStorage.removeItem(e)}catch(e){console.log("Local Storage error",e)}},setSessionStorageData(e,t){try{e=i.a.KEY_PREFIX+e;let n=JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){console.log("Session Storage error",e)}},removeSessionStorageData(e){try{e=i.a.KEY_PREFIX+e,sessionStorage.removeItem(e)}catch(e){console.log("Session Storage error",e)}},getSessionStorageData(e){try{e=i.a.KEY_PREFIX+e;const t=sessionStorage.getItem(e);try{return JSON.parse(t)}catch{return t}}catch(e){console.log("Session Storage error",e)}}};t.a=o},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){"use strict";n(238)},506:function(e,t,n){var i={"./AddIcon.vue":[779,12],"./ArrowBackIcon.vue":[780,13],"./ArrowForwardIcon.vue":[781,14],"./BadgeIcon.vue":[782,15],"./BaseIcon.vue":[756,11],"./CheckCircle.vue":[783,16],"./CloseIcon.vue":[784,17],"./CloudOffline.vue":[166],"./CollapseContent.vue":[785,18],"./CrossFill.vue":[786,19],"./DeleteIcon.vue":[787,20],"./DescriptionIcon.vue":[788,21],"./DownArrowIcon.vue":[789,22],"./ErrorExclamatory.vue":[767,23],"./ExitIcon.vue":[165],"./ExpandContent.vue":[790,24],"./FileDownload.vue":[791,25],"./FormSubmittedIcon.vue":[792,26],"./GlobeIcon.vue":[120],"./Info.vue":[757,27],"./InfoIconNew.vue":[793,28],"./InfoStrokeIcon.vue":[794,29],"./LoaderIcon.vue":[795,30],"./MenuIcon.vue":[796,31],"./MicIcon.vue":[797,32],"./NavigateBack.vue":[162],"./NavigateNext.vue":[161],"./NotificationIcon.vue":[159],"./OpenInNew.vue":[798,33],"./Refresh.vue":[799,34],"./RemoveIcon.vue":[800,35],"./ResetIcon.vue":[160],"./RightTickIcon.vue":[759,36],"./SendIcon.vue":[766,37],"./SentimentDissatisfied.vue":[801,38],"./SentimentNeutral.vue":[802,39],"./SentimentSatisfied.vue":[803,40],"./SentimentVeryDissatisfied.vue":[804,41],"./SentimentVerySatisfied.vue":[805,42],"./Squircle.vue":[806,43],"./Star.vue":[807,44],"./StarFilled.vue":[808,45],"./StarIcon.vue":[809,46],"./SyncIcon.vue":[810,47],"./ThumbDown.vue":[811,48],"./ThumbDownFilled.vue":[812,49],"./ThumbUp.vue":[813,50],"./ThumbUpFilled.vue":[814,51],"./ThumbsDown.vue":[760,52],"./ThumbsDownBrandGPT.vue":[761,53],"./ThumbsDownFill.vue":[762,54],"./ThumbsUp.vue":[763,55],"./ThumbsUpBrandGPT.vue":[764,56],"./ThumbsUpFill.vue":[765,57],"./UnreadIndicatorIcon.vue":[815,58],"./VisibilityIcon.vue":[816,59],"./VisibilityOffIcon.vue":[817,60],"./WarningAmberBlack.vue":[818,61],"./WarningIcon.vue":[819,62],"./WebExportIcon.vue":[758,63]};function o(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(i)},o.id=506,e.exports=o},507:function(e,t,n){"use strict";n(239)},508:function(e,t,n){"use strict";n(240)},509:function(e,t,n){"use strict";n(241)},510:function(e,t,n){"use strict";n(243)},511:function(e,t,n){"use strict";n(244)},512:function(e,t,n){"use strict";n(245)},521:function(e,t,n){"use strict";n(246)},522:function(e,t,n){"use strict";n(247)},523:function(e,t,n){"use strict";n(248)},524:function(e,t,n){"use strict";n(249)},525:function(e,t,n){"use strict";n(250)},526:function(e,t,n){"use strict";n(251)},527:function(e,t,n){"use strict";n(252)},528:function(e,t,n){"use strict";n(253)},529:function(e,t,n){"use strict";n(254)},53:function(e,t,n){"use strict";var i=n(42),o=n(115),a=n.n(o);t.a=new class{constructor(){this.accumulatedText=""}init(){this.accumulatedText=""}stripHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("a.source-link-number").forEach((function(e){return e.remove()})),t.textContent||t.innerText}accumulateText(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.stripHtml(e);this.accumulatedText+=n,t&&this.processAccumulatedTextRecursively()}processAccumulatedTextRecursively(){const e=[". ","? ","; ",": "];let t=-1,n="";for(const i of e){const e=this.accumulatedText.indexOf(i);-1!==e&&(-1===t||e<t)&&(t=e,n=i)}if(-1===t)return;const o=this.accumulatedText.substring(0,t+n.length),s=this.accumulatedText.substring(t+n.length);i.a.playText(a()(o),!1),this.accumulatedText=s,this.accumulatedText.trim()&&this.processAccumulatedTextRecursively()}playLastChunk(){const e=a()(this.accumulatedText);if(!e.trim())return i.a.playText("",!0),void(this.accumulatedText="");const t=[". ","? ","; ",": "];let n=!1;for(const i of t)if(e.includes(i)){n=!0;break}if(n){this.processAccumulatedTextRecursively();const e=a()(this.accumulatedText);e.trim()?i.a.playText(e,!0):i.a.playText("",!0),this.accumulatedText=""}else i.a.playText(e,!0),this.accumulatedText=""}}},530:function(e,t,n){"use strict";n(255)},531:function(e,t,n){"use strict";n(256)},532:function(e,t,n){"use strict";n(257)},533:function(e,t,n){"use strict";n(258)},534:function(e,t,n){"use strict";n(259)},535:function(e,t,n){"use strict";n(260)},536:function(e,t,n){"use strict";n(261)},537:function(e,t,n){"use strict";n(262)},538:function(e,t,n){"use strict";n(263)},539:function(e,t,n){"use strict";n(264)},54:function(e,t,n){"use strict";var i=n(0),o=n(5),a=n(38);var s=function(){var e,t;this.calloutBubblePubsubConfig={},this.supportIconState={visible:!0},this.termsAndConditions={terms:{},triggerGreeting:"",quickReply:null},this.alerts={highPriorityAlert:{},mediumPriorityAlert:{},triggerGreeting:""},this.blankScreen={timerId:null},this.csat={isEnabled:!1,rating:null,comment:"",thumbUpType:"ThumbUp",thumbDownType:"ThumbDown",rateLimit:{limitLeft:null!==o.a.getLocalStorageData(i.h.CSAT_RATE_LIMIT_STATE)?null===(e=o.a.getLocalStorageData(i.h.CSAT_RATE_LIMIT_STATE))||void 0===e?void 0:e.limitLeft:i.h.CSAT_RATE_LIMIT,timerId:null}},this.deviceDetails={userAgent:null===(t=navigator)||void 0===t?void 0:t.userAgent},this.formInputMaskedValue={},this.externalId="",this.previousConversationId="",this.previousCoversationLoader=!1,this.isfullHistoryLoaded=!1,this.currentCoversationId="",this.previousTimestamp=null,this.cookieValuesCopy={},this.fallbackMechanismState={isVisible:!1,retryTimerId:"",retryLeft:0},this.launchDarklyFlags={ENABLE_SECURITY_TRANSCRIPT:!1,IS_CHAT_WIDGET_LLM_ENABLED:!1},this.botDetails={timezone:"",properties:{}},this.botRefId="",this.widgetId="",this.user={id:"",email:""},this.knowledgeAISourcesState={isEnabled:!1,multiSources:{sources:[],multiSourceText:""}},this.isAuth=!1,this.isFileAttachmentIconDisabled=!1,this.inputFieldDisableStatus=null,this.inputFieldTempDisableStatus=null,this.inputFieldHiddenStatus=null,this.endChatCustomFieldStatus=!1,this.primaryLanguage="ENGLISH",this.formControlsButtonState={backEnabled:!1,restartEnabled:!1,skipEnabled:!1,currentFormRequestId:""},this.clearConversationState={clearConversation:!1,status:""},this.formSubmissionStatus={status:"",text:"",formName:"",loader:!1},this.eventAnalyticsMP=!1,this.isTriggerMinimizeValid=!1,this.userMessage="",this.visitorDisplayNameForAgentDesk="",this.controlType=o.a.getLocalStorageData("controlType")||i.h.BOT,this.agentInfo=o.a.getLocalStorageData("agentInfo")||{},this.customHandoffDepartment="",this.visitorInfo={},this.showFormControls=!1,this.formControlsClicked=!1,this.formControlsClickedMessageId=0,this.isWindowMaximized=!1,this.isChatWidgetFullScreen=!1,this.chats=[],this.previousChats=[],this.messageTags=[],this.quickReplyOptions=[],this.actionableNBAOptions=[],this.nonActionableNBAOptions=[],this.nonActionableNBAOverlayEnabled=!1,this.widgetConfig={},this.browserFontSizeSetting="medium",this.showTypingIndicator=!1,this.isHistoryLoading=!1,this.showEndChatFlow={enableWidget:!1,timerId:null,isChatRestart:!1},this.isOverlayActive=!1,this.overlayTimerId=null,this.schemaFormLabels={},this.isCalloutBubbleEnabled=!1,this.userMessageSyncAcrossTabs=!0,this.currentScopedFormID="",this.widgetStatus={status:""},this.authToken="",this.formsSubmittedInfo={},this.widgetVisitorInfo={},this.authenticatedConversationId="",this.defaultAttributes=[],this.notificationSound=!1,this.agentDeskConnectionStatus="",this.connectionStatus=!0,this.isMqttConnected=!1,this.isCalloutBubbleLoaded=!1,this.typingIndicatorTimeoutPromise="",this.preLoaderEnabled=!0,this.quickMenuState={visible:!1,title:"",options:[]},this.headerDrawerState={show:!1},this.formSkipInfo={},this.quickMenuClickHandler=function(){},this.defaultLocale="en",this.userIPAddress="",this.surveyRule={isPresent:!1,idleTimeoutRule:{rule:{},timerId:null},endChatRule:{rule:{}}},this.focusNode=null,this.focusEnable=!1,this.unreadMessagesState=o.a.getLocalStorageData(i.h.UNREAD_MESSAGES_STATE)||!1,this.inputFieldTempDisableStatusTimer="",this.inputFieldOnSendDisableTimer="",this.agentDesk={idleTimeoutTimerId:null},this.surveyFormState={isValid:!1,data:{},isFirstResponse:!1,isSurveySubmitted:!1,submittedValues:{}},this.formEncryptionPublicKey="",this.botPCIPolicy={},this.maskedValueMap={},this.inputFieldStreamingDisableStatus=!1,this.footer={disableInputOnSend:{state:!1,reEnableTimeout:""}},this.multiSourceLogoObj={},this.showExternalHeaderText={active:!1,text:"",showPopoverInfoIcon:!1},this.showHeaderMenuButtons=!0,this.promptTestDetails={active:!1,passCustomAttribtes:!1,isResponseAnalyzerWidget:!1},this.isLastChunkPlayed=!1,this.isVoiceModeActive=!1,this.currentVoiceState=a.a.NONE,this.shouldRestartVoiceRecording=!0,this.csatSurveyStartTime=void 0,this.showVisitorInfoButton=!1,this.visitorInfoForm={isOpen:!1,visitorInfoDetails:""},this.lastMessageLocale="en",this.ttsToken=null,this.termsAndConditionsAccepted=!1,this.progressiveTypingIndicatorConfig=[{duration:2e3,text:""},{duration:3e3,text:"Looking into that now..."},{duration:5e3,text:"Gathering relevant information..."},{duration:2e4,text:"Almost there, just wrapping it up"}]};t.a=new s},540:function(e,t,n){"use strict";n(265)},541:function(e,t,n){"use strict";n(266)},542:function(e,t){!function(e){var t=[];function n(n){console.log("initiating polyfill for broadcast channel");var i=this,o="$BroadcastChannel$"+(n=String(n))+"$";t[o]=t[o]||[],t[o].push(this),this._name=n,this._id=o,this._closed=!1,this._mc=new MessageChannel,this._mc.port1.start(),this._mc.port2.start(),e.addEventListener("storage",(function(t){if(t.storageArea===e.localStorage&&null!==t.newValue&&t.key.substring(0,o.length)===o){var n=JSON.parse(t.newValue);i._mc.port2.postMessage(n)}}))}n.prototype={get name(){return this._name},postMessage:function(n){var i=this;if(this._closed){var o=new Error;throw o.name="InvalidStateError",o}var a=JSON.stringify(n),s=this._id+String(Date.now())+"$"+String(Math.random());e.localStorage.setItem(s,a),setTimeout((function(){e.localStorage.removeItem(s)}),500),t[this._id].forEach((function(e){e!==i&&e._mc.port2.postMessage(JSON.parse(a))}))},close:function(){if(!this._closed){this._closed=!0,this._mc.port1.close(),this._mc.port2.close();var e=t[this._id].indexOf(this);t[this._id].splice(e,1)}},get onmessage(){return this._mc.port1.onmessage},set onmessage(e){this._mc.port1.onmessage=e},addEventListener:function(){return this._mc.port1.addEventListener.apply(this._mc.port1,arguments)},removeEventListener:function(){return this._mc.port1.removeEventListener.apply(this._mc.port1,arguments)},dispatchEvent:function(){return this._mc.port1.dispatchEvent.apply(this._mc.port1,arguments)}},e.BroadcastChannel=e.BroadcastChannel||n}(self)},59:function(e,t,n){"use strict";t.a=new class{constructor(){this.tracks=new Map}play(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.AudioContext=window.AudioContext||window.webkitAudioContext;const n=new AudioContext;let i=null;function o(e){n.decodeAudioData(e,(function(e){t||function(e){i=n.createBufferSource(),i.buffer=e,i.loop=!1,i.connect(n.destination);const t=n.createGain();i.connect(t),t.connect(n.destination),t.gain.value=1,"function"==typeof i.noteOn?i.noteOn(0):i.start(0)}(e)}),(function(e){console.log("Error decoding file",e)}))}this.tracks.has(e)&&(function(e){const t=e.createBuffer(1,1,22050),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start?n.start(0):n.noteOn(0)}(n),function(e){const t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){o(this.response)},t.send()}(this.tracks.get(e)))}add(e,t){e.trim()&&t.trim()&&(this.tracks.has(e)||(this.tracks.set(e,t),this.play(e,!0)))}}},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return m}));var i=n(9),o=n.n(i),a=n(19),s=n(1),r=n(11);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=(t?a.a.KEY_PREFIX:"")+e;var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}function d(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{e=(t?a.a.KEY_PREFIX:"")+e;var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(n?decodeURIComponent(n[1]):void 0)||s.a.state.cookieValuesCopy[e]}catch(t){const n={errorMessage:`Not able to fetch the cookie: ${e}, error: ${t.message}`,vueStateSnapshot:s.a.state.cookieValuesCopy};return new r.a({name:"Get Cookie",message:JSON.stringify(n),service:"Cookie"}),s.a.state.cookieValuesCopy[e]||void 0}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];try{e=(i?a.a.KEY_PREFIX:"")+e,s.a.dispatch("updateCookieValuesCopyState",{[e]:String(t)}),n=c({path:"/"},n),n.expires instanceof Date&&(n.expires=n.expires.toUTCString());let o=encodeURIComponent(e)+"="+encodeURIComponent(t);n.Secure="true";for(let e in n){o+="; "+e;let t=n[e];!0!==t&&(o+="="+t)}document.cookie=o}catch(n){const i={errorMessage:`Not able to set the cookie: ${e} with value: ${t}, error: ${n.message}, running from application store`,vueStateSnapshot:s.a.state.cookieValuesCopy};new r.a({name:"Set Cookie",message:JSON.stringify(i),service:"Cookie"})}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{s.a.dispatch("updateCookieValuesCopyState",{[e]:void 0}),h(e,"",c(c({},t),{},{expires:"Thu, 01 Jan 1970 00:00:01 GMT"}),n)}catch(t){const n={errorMessage:`Not able to remove the cookie: ${e}, error: ${t.message}`,vueStateSnapshot:s.a.state.cookieValuesCopy};new r.a({name:"Remove Cookie",message:JSON.stringify(n),service:"Cookie"})}}function g(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach((function(e){let{name:n,options:i}=e;p(n,i,t)}))}function m(){try{var e,t;null===(e=document.cookie)||void 0===e||null===(t=e.split(";"))||void 0===t||t.forEach((function(e){const[t,n]=e.trim().split("=");s.a.dispatch("updateCookieValuesCopyState",{[t]:n})}))}catch(e){new r.a({name:"Set all Cookies in Vue store",message:"Not able to set the cookies in vue store, error: "+e.message,service:"Cookie"})}}},60:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m}));var i=n(3),o=n.n(i),a=n(169),s=n(23),r=n(2),l=n(1);function c(e){return u.apply(this,arguments)}function u(){return(u=o()((function*(e){const t={url:`json-config/${e}.json`,errorName:"botJsonConfig",errorMessage:"Error while fetching Bot JSON"};return yield E(t)}))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=o()((function*(e){const t={url:`${l.a.state.botRefId}/language/constant/${e}.json`,errorName:"languageConfig",errorMessage:`Error while fetching bot constants ${e} language.json`};return yield E(t)}))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=o()((function*(e){const t={url:`${l.a.state.botRefId}/language/configurable/translation-${e}.json`,errorName:"languageConfig",errorMessage:`Error while fetching bot json ${e} language.json`};return yield E(t)}))).apply(this,arguments)}function m(){return f.apply(this,arguments)}function f(){return(f=o()((function*(){const e={url:"form-constant/cw-form-encryption-public-key.pem",errorName:"formEncryptionPublickKey",errorMessage:"Error while fetching form encryption public key"};return yield E(e)}))).apply(this,arguments)}function E(e){return v.apply(this,arguments)}function v(){return(v=o()((function(e){let{url:t,errorName:n,errorMessage:i}=e;return function*(){let e={};try{const n=Object(r.getCdnBaseUrl)(),i=a.a.create({baseURL:new URL(n).origin,headers:{"Content-Type":"application/json"},params:{}});e=(yield i.request({method:"get",url:`${t}?t=${Date.now()}`,options:{headers:{"Cache-Control":"no-cache"}},cancelToken:Object(r.cancelHTTPRequests)()})).data}catch(e){throw new s.a({name:n,message:i,err:e})}return e}()}))).apply(this,arguments)}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(9),o=n.n(i),a=n(0),s=n(1),r=n(11),l=n(5);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=n(175);function h(e){try{var t;if(!Object.keys(e).length)return;let r,E=!1;const v=(null==e||null===(t=e.attachmentList)||void 0===t?void 0:t.length)&&e.attachmentList.map((function(t){if(t.type===a.c.MessageInfoAttachment)if(null!=t&&t.values.isSchemaForm){if(d.isEqual(t.values.status,["SUBMITTED"])&&null!=t&&t.values.schemaFormRequestId){var n;E=!0;const i={};i[t.values.schemaFormRequestId]=null==e||null===(n=e.messagePayload)||void 0===n?void 0:n.text,s.a.state.formsSubmittedInfo=u(u({},s.a.state.formsSubmittedInfo),i)}else if(d.isEqual(t.values.status,["SKIPPED"])&&null!=t&&t.values.schemaFormRequestId){var i;const n={};n[t.values.schemaFormRequestId]=null==e||null===(i=e.messagePayload)||void 0===i?void 0:i.text,s.a.state.formSkipInfo=u(u({},s.a.state.formSkipInfo),n)}r=a.g[t.type][2]}else if(null!=t&&t.values.isLLMSchemaForm){if(d.isEqual(t.values.status,["SUBMITTED"])&&null!=t&&t.values.schemaFormRequestId){var o;E=!0;const n={};n[t.values.schemaFormRequestId]=null==e||null===(o=e.messagePayload)||void 0===o?void 0:o.label,s.a.state.formsSubmittedInfo=u(u({},s.a.state.formsSubmittedInfo),n)}r=a.g[t.type][4]}else null!=t&&t.values.isEmbeddedForm?r=a.g[t.type][1]:null!=t&&t.values.status&&(r=a.g[t.type][0]);return{messageId:e.messagePayload.messageId,type:a.g[t.type][0],actualType:t.actualType&&a.g[t.actualType][0],hide:!!r&&("HumanHandoffForm"===r&&(null==t?void 0:t.values.status[0])===a.A.REJECTED),messageValue:u({},t),timestamp:parseInt(e.messagePayload.timestamp),isUser:!0,requestId:e.requestId}}))||[];E&&(e.hide=!0);const T=function(e){return e.messagePayload.text&&!g(e.messagePayload.text,["event://;BACK_EVENT;","event://;RESTART_WORKFLOW_EVENT;","event://;SKIP_EVENT;","event://;SKIP_EVENT;resumeWorkflow=false"])&&p(e)&&!function(e){let{text:t,label:n}=e;return(null==t?void 0:t.startsWith(a.h.EVENT_LEARN_ATTRIBUTE))&&!n}(e.messagePayload)}(e)&&[m(e)]||[];let _=[];if(null!=v&&v.length&&!["EmbeddedForm","SchemaForm","LLMSchemaForm"].includes(r))_=[...v];else if(null!=T&&T.length&&null!=v&&v.length&&"EmbeddedForm"===r){var n,i,o,c,h,f;T[0].messageValue.status=null===(n=v[0])||void 0===n||null===(i=n.messageValue)||void 0===i||null===(o=i.values)||void 0===o?void 0:o.status[0],T[0].messageValue.iframeHeightWithOnlyQuestions=null===(c=v[0])||void 0===c||null===(h=c.messageValue)||void 0===h||null===(f=h.values)||void 0===f?void 0:f.iframeHeightWithOnlyQuestions[0],_=[...T]}else if("LLMSchemaForm"===r){e.messagePayload.isLLMSchemaForm=!0;_=[...function(e){return e.messagePayload.text&&!g(e.messagePayload.text,["event://;BACK_EVENT;","event://;RESTART_WORKFLOW_EVENT;","event://;SKIP_EVENT;","event://;SKIP_EVENT;resumeWorkflow=false"])&&p(e)}(e)&&[m(e)]||[]]}else null!=T&&T.length&&(_=[...T]);return _.length?{isUser:!0,tabId:l.a.getSessionStorageData("tabId"),messages:_,requestId:e.requestId,timestamp:parseInt(e.messagePayload.timestamp)}:[]}catch(e){throw console.log(e.message),new r.a({name:"UserMessageParser",message:"Error while parsing user message. "+e.message})}}function p(e){var t,n,i,o,r,l,c;return!(e.messagePayload.label===a.h.PROACTIVE_GREETING_LABEL&&(null!==(t=s.a.state.widgetConfig)&&void 0!==t&&null!==(n=t.proActiveGreetings)&&void 0!==n&&n.includes(e.messagePayload.text)||null!==(i=s.a.state.widgetConfig)&&void 0!==i&&null!==(o=i.sessionRestartGreeting)&&void 0!==o&&o.includes(e.messagePayload.text)||(null===(r=s.a.state.widgetConfig)||void 0===r||null===(l=r.endChat)||void 0===l?void 0:l.endChatGreeting)==e.messagePayload.text)||(null==e||null===(c=e.messagePayload)||void 0===c?void 0:c.label)===a.h.CALLOUT_BUBBLE_TEXT||e.messagePayload.hideMessage)}function g(e,t){return t.includes(e)||e.includes(a.B.SKIP_EVENT)}const m=function(e){return{messageId:e.messagePayload.messageId,type:a.g["ai.msg.domain.responses.core.Text"][0],messageValue:u({text:e.messagePayload.text,label:e.messagePayload.label},e.messagePayload.isLLMSchemaForm&&{isLLMSchemaForm:!0}),timestamp:parseInt(e.messagePayload.timestamp),isUser:!0,hide:e.hide,status:s.a.state.connectionStatus?a.h.SENT:a.h.FAILED}}},67:function(e,t,n){"use strict";n.d(t,"b",(function(){return $}));var i=n(9),o=n.n(i),a=n(3),s=n.n(a),r=n(6),l=n(27),c=n(77),u=n(13),d=n(14),h=n(11),p=n(66),g=n(46),m=n(5),f=n(21),E=n.n(f),v=n(30),T=n(2),_=n(0),S=n(54),b=n(1),O=n(36),I=n(81),y=n(16),A=n(38),C=n(42),N=n(53),D=n(47),R=n(96),w=n(40),L=n(31),P=n(15);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const M=function(){var e=s()((function*(e,t){const n={timestamp:e,eventData:{eventType:_.e.WIDGET_EVENT,subType:_.o.TERMS_AND_CONDITION_ACCEPTED}},i=Object(T.generateAttributes)(F(F({},n),{},{generatedBy:_.h.GENERATED_BY_SYSTEM})),o={triggerType:_.e.EVENT,eventData:n.eventData,conversationId:Object(r.a)(_.i.SESSION.CONVERSATION_ID),botReferenceId:t,requestType:_.h.NETOMI,channelId:_.h.NETOMI_WEB_WIDGET,eventName:_.e.INFO_PILL,agentDesk:n.agentDesk,timestamp:n.timestamp,isPublishToMQTT:!1,additionalAttributes:{CUSTOM_ATTRIBUTES:i}};yield P.a.request({method:"post",url:"/api/analytics/send-analytics",headers:Object(u.a)(),cancelToken:Object(T.cancelHTTPRequests)(),data:{botRefId:t,requestBody:o}})}));return function(t,n){return e.apply(this,arguments)}}();var k=n(28);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const x=Object(v.s)();t.a={syncUserMessageFromIoT(e,t){let{commit:n}=e;n("UPDATE_CHATS",t)},sendEvent(e,t){return s()((function(e,t){let{dispatch:n,rootState:i}=e;return function*(){try{var e,o;Object(T.handleIfConversationIdNull)("ConversationId invalid error is received from events API, event data: "+JSON.stringify(t),!1);const s=Object(T.generateAttributes)(j(j({},t),{},{generatedBy:(null==t||null===(e=t.userMessage)||void 0===e?void 0:e.generatedBy)||_.h.GENERATED_BY_SYSTEM})),l={triggerType:_.e.EVENT,eventData:t.eventData,conversationId:t.conversationId||Object(r.a)(_.i.SESSION.CONVERSATION_ID),botReferenceId:i.botRefId,requestType:_.h.NETOMI,channelId:_.h.NETOMI_WEB_WIDGET,eventName:t.eventName||_.e.INFO_PILL,agentDesk:t.agentDesk,timestamp:t.timestamp||Date.now(),isPublishToMQTT:t.isPublishToMQTT||!1,additionalAttributes:{CUSTOM_ATTRIBUTES:s}},c=yield Object(u.j)({botRefId:i.botRefId,requestBody:l});(null===(o=i.widgetConfig)||void 0===o?void 0:o.isAuthenticationEnabled)&&Object(T.checkRenewTokenRequired)(c.data,n)}catch(e){throw new h.a({name:"Action",message:"Error while sending event: "+e.message,error:Object(T.addCustomErrors)(e)||{}})}finally{var a;null===(a=document.getElementById("select-feedback-button-alert"))||void 0===a||a.setAttribute("aria-label","")}}()})).apply(this,arguments)},sendMessage(e,t){return s()((function(e,t){let{commit:n,dispatch:i,rootState:o}=e;return function*(){try{var e,a,g,f,v;new y.a({name:"Shriyog Rithe logs",message:"User was offline for the time: "+JSON.stringify(t),logLevel:"info",service:"Internet"}),"pending"===S.a.clearConversationState.status&&i("handleClearConversationStatus",null===(e=o.widgetConfig)||void 0===e?void 0:e.endChatClearConversation),i("updateClearConversationToPending",""),i("updateTriggerMinimizeValidState",!1);const h=Object(T.hasConversationInitiated)(),H=Object(T.getIdleTimeout)(),G=null==t?void 0:t.isEndGreeting;if(!h&&!G){var O;Object(r.f)(_.i.SESSION.CONVERSATION_INITIATED,!0,{"max-age":H/1e3});const e=l.a.createdAt,t=Object(T.getIdleTimeout)()-((new Date).getTime()-e);i("setEndChatTimer",{delay:t,isGuest:!Object(T.isUserLoggedIn)()}),i("setIdleTimerForSurvey"),i("overlayIdleChatTimeout"),i("hideSurveyOfPreviousConversation"),null!==(O=o.widgetConfig.persistentSurveyConfig)&&void 0!==O&&O.isPersistentSurveyEnabled&&(i("updateCSATState",{isEnabled:!0}),i("sendIoTEvent",{event_name:"CSAT_VISIBILITY",data:!0}))}if(o.totalDelay=0,G||i("clearItemsBeforeMessageParsing"),yield i("sendIoTEvent",{event_name:"CLEAR_ITEMS_BEFORE_PARSING"}),o.inputFieldTempDisableStatus){var I;Object(T.clearTimerForInputFieldTemporaryDisable)();const e=Number((null===(I=o.clientConfig)||void 0===I?void 0:I.disableInputFieldTimeout)||3e4),t={eventData:{eventType:_.e.ENABLE_INPUT_FIELD,subType:_.e.ENABLE_CHAT_INPUT_FIELD},eventName:_.e.INFO},n=setTimeout(s()((function*(){i("updateInputFieldTempDisableStatus",!1),yield i("sendIoTEvent",{event_name:"INPUT_FIELD_TEMPORARY_DISABLE",data:!1}),i("sendEvent",t)})),e);i("updateInputFieldTempDisableStatusTimer",n)}const{user:W}=o,K=t.userMessage;if(l.a.getConversationId(o.widgetConfig)||Object(r.a)(_.i.SESSION.CONVERSATION_ID),o.termsAndConditionsAccepted){const e=Date.now();yield i("sendEvent",{timestamp:e,eventData:{eventType:_.e.WIDGET_EVENT,subType:_.o.TERMS_AND_CONDITION_ACCEPTED}}),M(e,o.botRefId),o.termsAndConditionsAccepted=!1,Object(L.m)(null,e)}const q=t.isAppStateOnly||!1,z=t.updateLastChatBlock||!1;V(W.id,K,t.attachments);const Y=Object(T.generateAttributes)(j(j({},t),{},{generatedBy:(null==t||null===(a=t.userMessage)||void 0===a?void 0:a.generatedBy)||_.h.GENERATED_BY_SYSTEM})),Q=j(j({},Object(T.requestFormatter)(o,t)),{},{additionalAttributes:{CUSTOM_ATTRIBUTES:Y}});!b.a.getters.isPromptTestingEnable||null!==(g=o.promptTestDetails)&&void 0!==g&&g.passCustomAttributes||delete Q.additionalAttributes;const{messagePayload:X}=Q,{text:J="",label:Z,isLLMSchemaForm:ee}=X,te=o.botPCIPolicy||{},ne=$(o)&&!J.startsWith("event://;")&&!ee;let ie=Q;if(ne){const e=Object(w.c)(te,J),t=J!==Z?Object(w.c)(te,Z):e;e===J&&t===Z||(ie=E()(Q),ie.messagePayload.text=e,ie.messagePayload.label=t,n("UPDATE_MASKED_VALUE_MAP",{messageId:ie.messagePayload.messageId,text:J,maskedText:e,label:Z,maskedLabel:t}))}Object(c.a)(j(j({},ne?ie:Q),{},{updateLastChatBlock:z}));const oe=Object(p.a)(ne?ie:Q);if(q&&(oe.isAppStateOnly=q),t.hide&&(oe.messages[0].hide=!0),b.a.getters.isResponseAnalyzerEnabled){var R,P;const e="resp_analyser_"+(null==Q||null===(R=Q.messagePayload)||void 0===R?void 0:R.messageId);Q.messagePayload.messageId=e,null!==(P=o.promptTestDetails)&&void 0!==P&&P.userDetails&&(Q.userDetails=o.promptTestDetails.userDetails)}i("showDayDateSeparator",Q),n(z?"REPLACE_LAST_IMAGE_SKELETON":"UPDATE_CHATS",oe),t.hide||(D.a.init(!0),N.a.init());const ae=null==Q||null===(f=Q.messagePayload)||void 0===f?void 0:f.messageId,se=b.a.getters.isResponseAnalyzerEnabled?"responseAnalyzerMessageId":"currentUserMessageId";if(m.a.setLocalStorageData(se,ae),o.isVoiceModeActive&&!t.hide&&(o.currentVoiceState=A.a.SENDING),i("throttleFallbackMechanism",j(j({},t),{},{timestamp:oe.timestamp})),Object(T.isTypeBOT)(S.a.controlType)&&b.a.getters.disableInputFieldOnSendMessage){i("updateInputFieldOnSendMessage",!0),yield i("sendIoTEvent",{event_name:"INPUT_FIELD_DISABLE_ON_SEND",data:!0});const e=b.a.getters.timeoutInputFieldOnSendMessage,n=t.hideTypingIndicator?0:e;b.a.state.inputFieldOnSendDisableTimer=setTimeout(s()((function*(){i("updateInputFieldOnSendMessage",!1),yield i("sendIoTEvent",{event_name:"INPUT_FIELD_DISABLE_ON_SEND",data:!1})})),n)}let re;if(!q&&(yield i("sendIoTMessage",oe)),b.a.getters.isPromptTestingEnable){var U,F,k,B;Object(T.emitEventToParentWindow)(_.o.USER_QUERY_SENT,{conversationId:null==Q?void 0:Q.conversationId,userQuery:null==Q||null===(U=Q.messagePayload)||void 0===U?void 0:U.label,messageId:null==Q||null===(F=Q.messagePayload)||void 0===F?void 0:F.messageId});const e=b.a.getters.isResponseAnalyzerEnabled?u.e:u.i;re=!q&&(yield e({botId:null===(k=o.promptTestDetails)||void 0===k?void 0:k.botId,botRefId:o.botRefId,socialChannel:null===(B=o.promptTestDetails)||void 0===B?void 0:B.socialChannel,requestBody:Q}))}else re=!q&&(yield Object(u.h)({botRefId:o.botRefId,requestBody:Q}));(null===(v=o.widgetConfig)||void 0===v?void 0:v.isAuthenticationEnabled)&&re&&Object(T.checkRenewTokenRequired)(re.data,i),Object(T.isTypeBOT)(S.a.controlType)||d.a.prototype.$liveAgent.sendMessageToLiveAgent(Q),o.isVoiceModeActive&&!t.hide&&(C.a.endAudio(),o.currentVoiceState=A.a.NONE),Object(T.handleIfConversationIdNull)("ConversationId invalid error is received from send message API",!0)}catch(e){if(Object(T.clearTimerForInputFieldOnSendDisableTimer)(),b.a.dispatch("updateInputFieldOnSendMessage",!1),yield i("sendIoTEvent",{event_name:"INPUT_FIELD_DISABLE_ON_SEND",data:!1}),i("updateTypingIndicatorStatus",!1),Object(T.checkForGreetingsAndResetCookie)(t))return void i("clearChats");const n={errMessage:e.message,argument:t,controlType:S.a.controlType};throw new h.a({name:"Action",message:"Error while sending message: "+JSON.stringify(n),error:Object(T.addCustomErrors)(e)||{}})}finally{if(Object(T.handleIfConversationIdNull)("ConversationId invalid error is received from send message API with data: "+JSON.stringify(t),!0),i("updateShowFormControls",!1),Object(T.isTypeBOT)(o.controlType)){x.clearTimer(),b.a.getters.isTypingIndicatorEnabled&&!t.hideTypingIndicator&&i("updateTypingIndicatorStatus",!0);const e=o.widgetConfig.typingIndicator.minTime||_.h.DEFAULT_MIN_TIME_FOR_TYPING_INDICATOR;o.typingIndicatorTimeoutPromise=new Promise((function(t){setTimeout((function(){t(_.h.TYPING_INDICATOR_TIMEOUT)}),e)})),x.startTimer()}}}()})).apply(this,arguments)},processEvent(e,t){var n,i,o,a;let{commit:s,dispatch:r,rootState:l}=e;var c;(null==t||null===(n=t.eventObject)||void 0===n||null===(i=n.eventData)||void 0===i?void 0:i.eventType)===_.e.SECURE_FORM&&r("handleSecureForm",null==t||null===(c=t.eventObject)||void 0===c?void 0:c.eventData);if(Object(T.isAgentDeskEvent)(null==t?void 0:t.eventObject))r("receiveAgentDeskEvents",t);else if((null==t||null===(o=t.eventObject)||void 0===o||null===(a=o.eventData)||void 0===a?void 0:a.eventType)===k.a.OAUTH){var u,d;const e=null==t||null===(u=t.eventObject)||void 0===u||null===(d=u.eventData)||void 0===d?void 0:d.subType,n=J[e];n&&n({commit:s,dispatch:r,rootState:l},t)}},processResponse(e,t){return s()((function(e,t){let{commit:n,dispatch:i,rootState:o}=e;return function*(e,a){new y.a({name:"Process Response Function",message:t,logLevel:"info",service:"Action"}),Object(T.setNewUnreadMessagesText)(t),Object(T.updateUnreadIndicator)(!0);const s=null==t||null===(e=t.customPayload)||void 0===e?void 0:e[_.m.TRANSLATE_LANGUAGE];if(s!==b.a.state.lastMessageLocale&&(b.a.state.lastMessageLocale=s,R.a.closeConnection(),C.a.initElevenLabsWebSocket()),!Object(T.isTypeBOT)(t.ownerType))return b.a.state.inputFieldOnSendDisableTimer&&(Object(T.clearTimerForInputFieldOnSendDisableTimer)(),i("updateInputFieldOnSendMessage",!1)),void i("receiveAgentDeskMessages",t);!Object(T.isResponseBackendStreaming)(t)&&null!=t&&null!==(a=t.attachments)&&void 0!==a&&a.length&&i("clearFallbackMechanismTimer");const r=Object(v.e)(t.ownerType),l=yield o.typingIndicatorTimeoutPromise;if(x.clearTimer(),!r&&o.typingIndicatorTimeoutPromise&&l!==_.h.TYPING_INDICATOR_TIMEOUT)return;if(Object(T.isResponseBackendStreaming)(t))return void D.a.addAndProcessChunks(t);const c=Object(g.a)(t,!0,!1),u=E()(c.messages);(null==u?void 0:u.length)&&Object(T.clearTimerForInputFieldTemporaryDisable)();const d=o.widgetConfig.timeDelayBetweenMessageBubbles;let h;const p=[];if(u.length>0){var m,f,S,O,I,A,w;const e=(null==t||null===(m=t.customPayload)||void 0===m?void 0:m.isLastMessageExtension)||!1;if(b.a.getters.isPromptTestingEnable&&Object(T.emitEventToParentWindow)(_.o.RESPONSE_RECEIVED,{conversationId:null==t||null===(f=t.requestPayload)||void 0===f?void 0:f.conversationId,messageId:null==t||null===(S=t.requestPayload)||void 0===S||null===(O=S.messagePayload)||void 0===O?void 0:O.messageId,requestId:null==t||null===(I=t.requestPayload)||void 0===I?void 0:I.requestId,userQuery:null==t||null===(A=t.requestPayload)||void 0===A||null===(w=A.messagePayload)||void 0===w?void 0:w.label}),b.a.getters.isStreamingEnabled&&!e){b.a.getters.disableInputFieldWhileStreaming&&i("updateInputFieldStreamingDisableStatus",!0),h=W({commit:n,dispatch:i,rootState:o},c,u,d,p,D.a.getTotalDelay());const e=setTimeout((function(){if(b.a.state.isVoiceModeActive){var e;const t=u.find((function(e){return"AudioResponse"===e.type}));null!=t&&null!==(e=t.messageValue)&&void 0!==e&&e.text&&b.a.getters.textToSpeechOrationResponse&&N.a.accumulateText(t.messageValue.text),N.a.playLastChunk()}i("updateInputFieldStreamingDisableStatus",!1),Object(T.clearTimerForInputFieldOnSendDisableTimer)(),i("updateInputFieldOnSendMessage",!1)}),h);p.push(e),o.totalDelay=h}else if(e){const e=setTimeout((function(){o.totalDelay=0,Object(T.clearTimerForInputFieldOnSendDisableTimer)(),i("updateInputFieldOnSendMessage",!1),H({commit:n,dispatch:i,rootState:o},u,d,p)}),Math.max(o.totalDelay,D.a.getTotalDelay()));p.push(e)}else{const e=G({commit:n,dispatch:i,rootState:o},c,u,d,p,D.a.getTotalDelay()),t=setTimeout((function(){Object(T.clearTimerForInputFieldOnSendDisableTimer)(),i("updateInputFieldOnSendMessage",!1)}),e);p.push(t),o.totalDelay=h}o.endChatCustomFieldStatus&&K({dispatch:i},d,u,h),r&&i("handleBackToBotTrigger"),Y({rootState:o,dispatch:i},d,u,p,h),Object(T.isMultiSourceLastExtension)(t,u)||q({rootState:o,dispatch:i},d,u,p,h)}}()})).apply(this,arguments)},receiveAWSIoTMessage(e,t){let{dispatch:n}=e;try{switch(t.triggerType){case _.e.EVENT:n("processEvent",t);break;case _.e.RESPONSE:n("processResponse",t)}}catch(e){const n={errMessage:e.message,argument:t};new h.a({name:"Action",message:"Error while receiving message: "+JSON.stringify(n),error:Object(T.addCustomErrors)(e)||{}})}},throttleIdleChatTimeout(e){let{dispatch:t,rootState:n}=e;l.a.updateConversation(n.widgetConfig);t("setEndChatTimer",{delay:Object(T.getIdleTimeout)(),isGuest:!Object(T.isUserLoggedIn)()}),t("throttleAgentDeskConnectionIdleTimeout",b.a.getters.getAgentDeskIdleTimeout)},clearItemsBeforeMessageParsing(e){return s()((function(e){let{dispatch:t}=e;return function*(){t("updateQuickReplyOptions",[]),t("updateActionableNBAOptions",[]),t("updateNonActionableNBAOptions",[]),t("throttleIdleChatTimeout"),yield t("setIdleTimerForSurvey"),t("overlayIdleChatTimeout"),t("updateEndChatModalStatus",!1)}()})).apply(this,arguments)},sendIoTEvent(e,t){return s()((function(e,t){let{event_name:n,data:i}=t;return function*(){yield O.a.publishToIoT({isEvent:!0,tabId:m.a.getSessionStorageData("tabId"),event_type:n,payload:i})}()})).apply(this,arguments)},sendIoTMessage:(e,t)=>s()((function*(){yield O.a.publishToIoT(t)}))(),enableTempDisabledInputField(e){return s()((function(e){let{dispatch:t}=e;return function*(){const e={eventData:{eventType:_.e.ENABLE_INPUT_FIELD,subType:_.e.ENABLE_CHAT_INPUT_FIELD},eventName:_.e.INFO};t("updateInputFieldTempDisableStatus",!1),yield t("sendIoTEvent",{event_name:"INPUT_FIELD_TEMPORARY_DISABLE",data:!1}),t("sendEvent",e)}()})).apply(this,arguments)},handleBackToBotTrigger(e,t){let{dispatch:n}=e;new y.a({name:"NET-57075 handleBackToBotTrigger",message:"Bot resumed - calling endChatWithLiveAgent with attributes: "+JSON.stringify(t),logLevel:"info",service:"Action"}),Object(v.b)("Resume bot","Bot is resumed"),n("updateControlType",_.h.BOT),n("throttleIdleChatTimeout"),n("setIdleTimerForSurvey"),d.a.prototype.$liveAgent.endChatWithLiveAgent(t)},processChunkResponse(e,t){let{commit:n,dispatch:i,rootState:o}=e;const a=Object(g.a)(t,!0,!1),s=E()(a.messages);if(s.length>0){G({commit:n,dispatch:i,rootState:o},a,s,0,[]);Object(v.e)(t.ownerType)&&i("handleBackToBotTrigger")}},processQuickReplies(e,t){let{dispatch:n,rootState:i}=e,{delay:o,messages:a,timerIds:s}=t;q({rootState:i,dispatch:n},o,a,s)},removeStreamingFromAttachment(e,t){let{commit:n}=e;t.attachment.text="",t.attachment.isStreaming=!1,t.attachment.isPartialStreaming=!1,n("UPDATE_TEXT_CHUNK_MESSAGE",t)},addFeedbackforLastAttachment(e){let{commit:t}=e;t("ADD_FEEDBACK_FOR_LAST_ATTACHMENT")},updateMessageInLastChat(e,t){let{commit:n}=e;n("UPDATE_LAST_CHAT_MESSAGE",t)},sendQuickReplyMessage(e,t){return s()((function(e,t){let{rootState:n,dispatch:i}=e;return function*(){X(t,n,i)||(yield i("sendMessage",t))}()})).apply(this,arguments)}};const $=function(e){var t;return(null===(t=e.widgetConfig)||void 0===t?void 0:t.isSensitiveDataMaskingEnabled)||!1},V=function(e,t,n){if(!e)throw Error("User Id not generated properly");if(!(t||null!=n&&n.length))throw Error("Please type valid message or attachment")},H=function(e,t,n,i){let{commit:o,dispatch:a}=e;null==t||t.forEach((function(e,s){const l=setTimeout((function(){if(!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(i);s===t.length-1?a("updateTypingIndicatorStatus",!1):(b.a.getters.isTypingIndicatorEnabled&&a("updateTypingIndicatorStatus",!0),Object(T.updateUnreadIndicator)(!0)),o("UPDATE_LAST_CHAT_MESSAGE",e)}),n*s);i.push(l)})),Object(T.setNewUnreadMessagesText)(),z(n*t.length-1)},G=function(e,t,n,i,o,a){let{commit:s,dispatch:l}=e;t.messages=[],s("UPDATE_CHATS",t);let c=0;return n.forEach((function(e,t){const u=i*t+a,d=setTimeout((function(){if(!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(o);t===n.length-1?l("updateTypingIndicatorStatus",!1):(b.a.getters.isTypingIndicatorEnabled&&l("updateTypingIndicatorStatus",!0),Object(T.updateUnreadIndicator)(!0)),Q(n,t)&&(e.messageValue.isLastChunk=!0),s("UPDATE_LAST_CHAT_MESSAGE",e)}),u);c+=u,o.push(d)})),Object(T.setNewUnreadMessagesText)(),z(i*n.length-1),c},W=function(e,t,n,i,o,a){let{commit:s,dispatch:l}=e;const c=n.some((function(e){return"AudioResponse"===e.type}));t.messages=[],s("UPDATE_CHATS",t);let u=a;null==n||n.forEach((function(e,t){e.messageValue.isStreaming=!0,b.a.getters.textToSpeechOrationResponse&&(e.audioMessageFound=c);let a=0;if(t>0){a=i;const e=n[t-1];if("TextResponse"===e.type){var d,h;const t=(null===(d=Object(T.getDataInChunks)(null==e||null===(h=e.messageValue)||void 0===h?void 0:h.text))||void 0===d?void 0:d.length)||0,n=_.h.STREAM_TIME_FOR_EACH_CHUNK*t;a=Math.max(n,i)}}const p=setTimeout((function(){if(!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(o);t===n.length-1?l("updateTypingIndicatorStatus",!1):(b.a.getters.isTypingIndicatorEnabled&&l("updateTypingIndicatorStatus",!0),Object(T.updateUnreadIndicator)(!0)),Q(n,t)&&(e.messageValue.isLastChunk=!0),s("UPDATE_LAST_CHAT_MESSAGE",e)}),a+u);u+=a,o.push(p)}));let d=0;if(n.length>1){const e=n[n.length-1];if("TextResponse"===e.type){var h,p;const t=(null===(h=Object(T.getDataInChunks)(null==e||null===(p=e.messageValue)||void 0===p?void 0:p.text))||void 0===h?void 0:h.length)||0,n=_.h.STREAM_TIME_FOR_EACH_CHUNK*t;d=Math.max(n,i)}const t=setTimeout((function(){if(!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(o);l("updateTypingIndicatorStatus",!1)}),d+u);u+=d,o.push(t)}return Object(T.setNewUnreadMessagesText)(),z(u),u},K=function(e,t,n,i){let{dispatch:o}=e;const a=i||t*n.length;setTimeout((function(){o("endChat",{message:_.h.CHAT_ENDED,publishEventToIoT:!1}),o("updateEndChatCustomFieldStatus",!1)}),a)},q=function(e,t,n,i,o){let{dispatch:a}=e;const s=o||Math.max(t*(n.length-1),500+D.a.getTotalDelay()),l=setTimeout((function(){if(a("updateTypingIndicatorStatus",!1),!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(i);const e=Object(T.extractQuickReplyOptions)(n);a("updateQuickReplyOptions",e),Object(T.handleScrollToLastUserMessage)(),Object(T.updateUnreadIndicator)(!0)}),s);i.push(l),setTimeout((function(){Object(T.focusOnChatInputField)(!0)}),s+1e3)},z=function(e){setTimeout((function(){Object(T.focusOnChatInputField)(!0)}),e)},Y=function(e,t,n,i,o){var a;let{dispatch:l}=e;const c=o||Math.max(t*(n.length-1),2e3+D.a.getTotalDelay()),u=Object(T.extractNBAOptions)(n);let d;if(null!==(a=Object.keys(u))&&void 0!==a&&a.length){const{nonActionableNBAOptions:e}=u;if(null!=e&&e.length){const t=e.map((function(e){return e.url}));d=Object(I.a)({requestBody:t})}}const h=setTimeout(s()((function*(){var e;if(l("updateTypingIndicatorStatus",!1),!Object(r.a)(_.i.SESSION.CONVERSATION_ID))return Object(T.clearAllSetTimeout)(i);if(null!==(e=Object.keys(u))&&void 0!==e&&e.length){var t,n;const{actionableNBAOptions:e=[],nonActionableNBAOptions:i=[]}=u;l("updateActionableNBAOptions",e),l("updateNonActionableNBAOptions",i),null===(t=d)||void 0===t||null===(n=t.then((function(e){const t=null==i?void 0:i.map((function(t,n){var i;const o=null==e||null===(i=e[n])||void 0===i?void 0:i.value,a=(null==o?void 0:o.image)||(null==o?void 0:o.logo),s=null==o?void 0:o.description,r=null==o?void 0:o.title,l=j(j({},t),{},{image:a,isProcessed:!0});return!l.label&&r&&(l.label=r),!l.longText&&s&&(l.longText=s),l}));(null==t?void 0:t.length)&&l("updateNonActionableNBAOptions",t)})))||void 0===n||n.catch((function(e){console.log(e)}))}else l("updateActionableNBAOptions",[]),l("updateNonActionableNBAOptions",[]);Object(T.handleScrollToLastUserMessage)(),Object(T.updateUnreadIndicator)(!0)})),c);i.push(h)};function Q(e,t){for(let a=(null==e?void 0:e.length)-1;a>=0;a--){var n,i,o;if("TextResponse"===(null===(n=e[a])||void 0===n?void 0:n.type)&&null!==(i=e[a])&&void 0!==i&&null!==(o=i.messageValue)&&void 0!==o&&o.text)return t===a}return!1}const X=function(e,t,n){return!!Object.keys(t.termsAndConditions.terms).length&&(n("updateQuickReplyOnTermsClosureState",e),!0)};const J={[k.a.SIGN_IN]:function(e,t){var n,i,o;let{commit:a,dispatch:s,rootState:r}=e;localStorage.setItem(k.a.ISAUTH,!0);const l=null===(n=r.widgetConfig)||void 0===n?void 0:n.loggedInUtterence;Object(T.showMessageSeparatorPill)({message:k.a.SUCCESSFULLY_SIGNED_IN,isEndChatSeparator:!1});const c=null==t||null===(i=t.eventObject)||void 0===i||null===(o=i.eventData)||void 0===o?void 0:o.userdetails;if(c){const{authenticatedConversationId:e}=t.eventObject.eventData,{externalId:n}=c;a("UPDATE_EXTERNAL_ID",n),s("setOauthUserLoggedIn",e),s("updateTermsAndConditions"),localStorage.setItem(k.a.USER_DETAILS,JSON.stringify(c))}Object(T.emitOauthEvents)("SIGNED_IN"),s("sendProactiveGreetingUtterances",l)},[k.a.SIGN_OUT]:function(e){let{dispatch:t}=e;Object(T.showMessageSeparatorPill)({message:k.a.SUCCESSFULLY_SIGNED_OUT,isEndChatSeparator:!1}),Object(T.emitOauthEvents)("SIGNED_OUT"),t("setOauthlogoutWidget")},[k.a.SIGN_IN_FAILURE]:function(){Object(T.showMessageSeparatorPill)({message:k.a.SIGN_IN_AUTHENTICATION_FAILED,isEndChatSeparator:!1}),localStorage.setItem(k.a.ISAUTH,k.a.FAIL)},[k.a.SIGN_OUT_FAILURE]:function(){Object(T.showMessageSeparatorPill)({message:k.a.SIGN_OUT_AUTHENTICATION_FAILED,isEndChatSeparator:!1})}}},754:function(e,t,n){"use strict";n.r(t);n(306);var i=n(9),o=n.n(i),a=n(14),s=n(1),r=n(116);const l={install(e){e.prototype.$segment=r.a}};a.a.use(l);a.a.segmentPlugin;var c=n(237),u=(n(501),n(502),n(503),n(504),n(3)),d=n.n(u),h=n(5),p=n(0),g=n(2),m={data:()=>({isUserInactive:!1}),watch:{"$store.state.isOverlayActive":function(){this.isUserInactive=this.$store.state.isOverlayActive;const{footerStatus:e}=this.$store.state.widgetConfig;this.$store.state.isOverlayActive&&!this.$store.state.widgetConfig.inactiveOverlay.showButtons&&this.$store.dispatch("endChat",{message:Object(g.getConstantValue)(p.h.SESSION_HAS_EXPIRED)}),e?e&&e===p.h.DISABLED?this.$store.dispatch("updateInputFieldDisableStatus",!0):e&&e===p.h.HIDDEN&&this.$store.dispatch("updateInputFieldHiddenStatus",!0):this.$store.dispatch("updateInputFieldDisableStatus",this.isUserInactive)}},computed:{isSlotPresent(){return this.$slots.default},overlayResumeButtonText(){var e,t;return null!==(e=this.$store.state.widgetConfig)&&void 0!==e&&null!==(t=e.inactiveOverlay)&&void 0!==t&&t.resumeButtonText?p.t.INACTIVE_OVERLAY_RESUME_BUTTON_TEXT:""},overlayRestartButtonText(){var e,t;return null!==(e=this.$store.state.widgetConfig)&&void 0!==e&&null!==(t=e.inactiveOverlay)&&void 0!==t&&t.restartButtonText?p.t.INACTIVE_OVERLAY_RESTART_BUTTON_TEXT:""},overlayDescriptionText(){var e,t;return null!==(e=this.$store.state.widgetConfig)&&void 0!==e&&null!==(t=e.inactiveOverlay)&&void 0!==t&&t.descriptionText?p.t.INACTIVE_OVERLAY_DESCRIPTION_TEXT:""},showOverlayButtons(){var e,t;return null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.inactiveOverlay)||void 0===t?void 0:t.showButtons}},methods:{continueConversation(){var e=this;return d()((function*(){e.$store.dispatch("updateOverlayStatus",!1),h.a.setLocalStorageData("overlayStatus",!1),e.$store.dispatch("overlayIdleChatTimeout"),e.$store.dispatch("throttleIdleChatTimeout"),e.$store.dispatch("setIdleTimerForSurvey"),yield e.$store.dispatch("sendIoTEvent",{event_name:"OVERLAY_STATUS_RESUME",data:!1})}))()},restartConversation(){var e=this;return d()((function*(){e.$store.dispatch("updateOverlayStatus",!1),h.a.setLocalStorageData("overlayStatus",!1),e.$store.dispatch("clearChats"),e.$store.dispatch("endChat",{message:Object(g.getConstantValue)(p.h.CHAT_ENDED),publishEventToIoT:!1}),yield e.$store.dispatch("sendIoTEvent",{event_name:"OVERLAY_STATUS_RESTART",data:!1})}))()}}},f=(n(505),n(8)),E=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"overlay-container"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUserInactive||e.isSlotPresent,expression:"isUserInactive || isSlotPresent"}],staticClass:"overlayDiv"},[t("p",{directives:[{name:"t",rawName:"v-t",value:e.overlayDescriptionText,expression:"overlayDescriptionText"}],staticClass:"descriptionText"}),e._v(" "),e.showOverlayButtons?t("button",{directives:[{name:"t",rawName:"v-t",value:e.overlayResumeButtonText,expression:"overlayResumeButtonText"}],staticClass:"resumeButton",on:{click:function(t){return e.continueConversation()}}}):e._e(),e._v(" "),e.showOverlayButtons?t("button",{directives:[{name:"t",rawName:"v-t",value:e.overlayRestartButtonText,expression:"overlayRestartButtonText"}],staticClass:"restartButton",on:{click:function(t){return e.restartConversation()}}}):e._e(),e._v(" "),e._t("default")],2)])}),[],!1,null,null,null).exports,v=n(22),T=n(296),_=n(297),S=n(298),b=n(109),O=n(11),I=n(242),y=n(169),A=n(25);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var N={mixins:[A.a],components:{CustomCheckbox:T.a,CustomInput:_.a,InputError:S.a,BaseIcon:v.a},created(){this.email=this.userEmail||"",this.constantStrings=p.h},data:()=>({sendTranscriptCheckbox:!1,email:"",downloadStatus:p.h.INACTIVE,error:{errorState:!1,errorMessage:""}}),computed:{isDownloadInactive(){return this.downloadStatus===p.h.INACTIVE},isDownloadActive(){return this.downloadStatus===p.h.ACTIVE},isDownloadCompleted(){return this.downloadStatus===p.h.COMPLETED},getDownloadIcon(){return this.isDownloadCompleted?"FormSubmittedIcon":this.isDownloadActive?"LoaderIcon":"FileDownload"},getTextForDownloadButton(){return this.isDownloadCompleted?Object(g.getTranslation)(p.h.DOWNLOADED):this.isDownloadActive?Object(g.getTranslation)(p.h.DOWNLOADING):Object(g.getTranslation)(p.h.DOWNLOAD)},isDownloadTranscriptEnabled(){var e,t,n,i;return this.getEndChatModalOnChatRestart?!(null===(t=this.$store.state.widgetConfig)||void 0===t||null===(n=t.restartChat)||void 0===n||null===(i=n.showWarning)||void 0===i||!i.downloadTranscript):null===(e=this.$store.state.widgetConfig.endChat)||void 0===e?void 0:e.downloadTranscript},isMobileScreenOrCompactWidget(){return"mobile"===Object(g.getDeviceType)()||!this.$store.state.isChatWidgetFullScreen},getEmailPlaceholder:()=>Object(g.getTranslation)(p.h.ENTER_EMAIL_ID),getEmailAddressLabel:()=>Object(g.getTranslation)(p.h.EMAIL_ADDRESS_LABEL),endChat(){return this.getEndChatModalOnChatRestart?p.h.RESTART_PRIMARY_BTN_TEXT:p.t.END_CHAT_BUTTON_CTA},endChatDiscalimer(){return this.getEndChatModalOnChatRestart?p.t.RESTART_CHAT_DESCRIPTION:p.h.END_CHAT_DISCLAIMER},getCancelBtnCTA(){return this.getEndChatModalOnChatRestart?p.t.RESTART_CHAT_WARNING_SECONDARY_CTA:p.h.END_CHAT_CANCEL_BUTTON_CTA},getConfirmBtnCTA(){return this.getEndChatModalOnChatRestart?p.t.RESTART_CHAT_WARNING_PRIMARY_CTA:p.h.END_CHAT_CONFIRM_BUTTON_CTA},isSendTranscriptEnabled(){var e,t,n,i,o;return this.getEndChatModalOnChatRestart?!(null===(n=this.$store.state.widgetConfig)||void 0===n||null===(i=n.restartChat)||void 0===i||null===(o=i.showWarning)||void 0===o||!o.isSendTranscriptEnabled):!this.$store.state.widgetConfig.endChat||(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.endChat)||void 0===t?void 0:t.isSendTranscriptEnabled)},endChatLabel:()=>Object(g.getTranslation)(p.t.END_CHAT_SEND_TRANSCRIPT_CTA)||"Send to email",endChatQuery(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.endChat)||void 0===t?void 0:t.endChatQuery)||"End Chat"},userEmail(){return this.$store.state.user.email},getEndChatModalOnChatRestart(){var e,t;return null===(e=this.$store.state)||void 0===e||null===(t=e.showEndChatFlow)||void 0===t?void 0:t.isChatRestart},getTranscriptLabel:()=>p.h.TRANSCRIPT_LABEL,isEventAnalyticsMP(){var e;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.eventAnalyticsMP)||!1}},methods:{isConfirmDisabled(){return!Object(g.hasConversationInitiated)()||!this.isEmailValid()},isEmailValid(){return!(this.sendTranscriptCheckbox&&(!this.email||this.error.errorState))},handleCheckbox(e){this.sendTranscriptCheckbox=e},handleFormInput(e){this.email=e},handleOnKeyUp(){b.a.isEmail(this.email)?this.resetError():this.error={errorState:!0,errorMessage:Object(g.getTranslation)(p.h.MAIL_VALIDATION_MESSAGE)}},handleEndChat(){var e=this;return d()((function*(){try{var t,n,i,a;if(e.handleOnKeyUp(),e.sendTranscriptCheckbox&&!e.error.errorState)e.isEventAnalyticsMP&&e.$segment.global.sendEvent("end_chat_send_transcript",{email:e.email}),e.$store.dispatch("updateUserEmail",e.email),e.getEndChatModalOnChatRestart||(yield e.$store.dispatch("sendMessage",{userMessage:{payload:Object(g.getTranslation)(p.t.END_CHAT_QUERY)},hide:!0})),null!==(t=e.$store)&&void 0!==t&&null!==(n=t.state)&&void 0!==n&&null!==(i=n.widgetConfig)&&void 0!==i&&null!==(a=i.sendTranscriptEmailSetup)&&void 0!==a&&a.enable&&(yield e.$store.dispatch("transcriptMessage"));const s=Object(g.isEndChatSuveyValid)(),r=!s&&!Object(g.isEndChatGreetingValid)(e.isSendTranscriptEnabled)&&!e.getEndChatModalOnChatRestart;if(s&&e.$store.dispatch("updateTriggerMinimizeValidState",!0),e.isEventAnalyticsMP&&e.$segment.global.sendEvent("end_chat_button_click"),yield e.$store.dispatch("endChat",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({message:e.sendTranscriptCheckbox?p.h.CHAT_ENDED_WITH_TRANSCRIPT:p.h.CHAT_ENDED,showSessionRestartGreeting:!0,hideEndChatGreeting:e.isSendTranscriptEnabled},e.getEndChatModalOnChatRestart&&{clearConversation:!0,hidePill:!0,restartChat:!0})),e.getEndChatModalOnChatRestart){const t={eventType:p.e.WIDGET_EVENT,subType:p.h.CHAT_RESTART};e.$store.dispatch("sendEvent",{eventData:t})}r&&e.$store.dispatch("minimizeCW"),Object(g.emitEventToParentWindow)(p.o.END_CHAT_CONFIRM,Object(g.getEventDataPoints)()),e.sendTranscriptCheckbox&&Object(g.emitEventToParentWindow)(p.o.END_CHAT_WITH_TRANSCRIPT,Object(g.getEventDataPoints)())}catch(e){console.log(e.message),new O.a({name:"EndChat",message:"Error while ending chat. "+e.message})}finally{e.handleClose(!1)}}))()},handleClose(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEventAnalyticsMP&&this.$segment.global.sendEvent("end_chat_cancel_click"),this.getEndChatModalOnChatRestart&&this.$store.dispatch("updateEndChatModalOnChatRestart",!1),this.$store.dispatch("updateEndChatModalStatus",e),this.$nextTick((function(){var e;null===(e=document.getElementById("header-close-btn"))||void 0===e||e.focus()})),t&&Object(g.emitEventToParentWindow)(p.o.END_CHAT_CANCEL,Object(g.getEventDataPoints)())},resetError(){this.error={errorState:!1,errorMessage:""}},downloadTranscript:e=>d()((function*(){const t=yield y.a.get(e,{responseType:"blob"}),n=new Blob([t.data]),i=document.createElement("a");i.href=URL.createObjectURL(n);const o=new Date,a="LatestTranscript "+o.getDate()+"_"+(o.getMonth()+1)+"_"+o.getFullYear()+"__"+o.getHours()+"_"+o.getMinutes()+"_"+o.getSeconds();i.download=a+".txt",document.body.appendChild(i),i.click(),document.body.removeChild(i)}))(),handleDownload(){var e=this;return d()((function*(){try{if(!e.isDownloadInactive)return;e.isEventAnalyticsMP&&e.$segment.global.sendEvent("end_chat_download_transcript");const t=(new Date).getTime();e.downloadStatus=p.h.ACTIVE;const n=yield Object(I.a)(!1),i=document.createElement("a"),o=new Blob([n],{type:"text/plain"});i.href=URL.createObjectURL(o);const a=new Date,s="Transcript "+a.getDate()+"_"+(a.getMonth()+1)+"_"+a.getFullYear()+"__"+a.getHours()+"_"+a.getMinutes()+"_"+a.getSeconds();i.download=s+".txt",i.click(),URL.revokeObjectURL(i.href);const r=(new Date).getTime();setTimeout((function(){e.downloadStatus=p.h.COMPLETED}),Math.max(1e3-(r-t),0)),Object(g.emitEventToParentWindow)(p.o.DOWNLOAD_TRANSCRIPT,Object(g.getEventDataPoints)())}catch(t){e.downloadStatus=p.h.INACTIVE,console.log(t.message),new O.a({name:"EndChat",message:"Error while downloading transcript. "+t.message})}}))()}}},D=(n(510),Object(f.a)(N,(function(){var e=this,t=e._self._c;return t("div",{ref:"end-chat-wrapper",staticClass:"end-chat-wrapper"},[t("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"end-chat-container",class:{"end-chat-container-compact":e.isMobileScreenOrCompactWidget}},[e.isMobileScreenOrCompactWidget?e._e():t("div",{staticClass:"close-icon-container",on:{click:function(t){return e.handleClose(!1,!0)}}},[t("BaseIcon",{attrs:{name:"CloseIcon",fill:e.isDownloadActive?"#FFFFFF":"#6D6D6D"}})],1),e._v(" "),t("p",{directives:[{name:"t",rawName:"v-t",value:e.endChat,expression:"endChat"}],staticClass:"end-chat-text",class:{"end-chat-text-compact":e.isMobileScreenOrCompactWidget},style:{fontSize:e.getFontSizeForChatInterface("title")}}),e._v(" "),t("p",{directives:[{name:"t",rawName:"v-t",value:e.endChatDiscalimer,expression:"endChatDiscalimer"}],staticClass:"disclaimer-text",class:{"disclaimer-text-compact":e.isMobileScreenOrCompactWidget},style:{fontSize:e.getFontSizeForChatInterface("bodyText")}}),e._v(" "),e.isSendTranscriptEnabled||e.isDownloadTranscriptEnabled?t("div",{staticClass:"transcript-outer-container",class:{"transcript-container-style":!e.isMobileScreenOrCompactWidget},style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[t("p",{directives:[{name:"t",rawName:"v-t",value:e.getTranscriptLabel,expression:"getTranscriptLabel"}],staticClass:"transcript-container-header"}),e._v(" "),t("div",{staticClass:"transcript-container-content"},[e.isSendTranscriptEnabled?t("div",{staticClass:"send-transcript-inner-container"},[t("div",{staticClass:"send-transcript-container-content"},[t("CustomCheckbox",{attrs:{checked:e.sendTranscriptCheckbox,label:e.endChatLabel,handleCheckbox:e.handleCheckbox,isDisabled:e.isDownloadActive,index:0}})],1)]):e._e(),e._v(" "),e.isDownloadTranscriptEnabled?t("div",{staticClass:"download-transcript-outer-container"},[t("button",{ref:"submitButton",staticClass:"download-transcript-btn",class:{"download-transcript-btn-disabled":!e.isDownloadInactive},on:{click:e.handleDownload}},[t("BaseIcon",{class:{"submit-icon":e.isDownloadCompleted,"inactive-icon":e.isDownloadInactive,"active-icon":e.isDownloadActive},attrs:{name:e.getDownloadIcon}}),e._v(" "),t("p",{class:{"inactive-text":e.isDownloadInactive},style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v(e._s(e.getTextForDownloadButton))])],1)]):e._e()]),e._v(" "),e.sendTranscriptCheckbox?t("div",{staticClass:"custom-input-outer-wrapper"},[t("CustomInput",{attrs:{showRequiredSign:!1,placeholder:e.getEmailPlaceholder,label:e.getEmailAddressLabel,labelFor:"email",value:e.email,handleFormInput:e.handleFormInput,handleOnKeyUp:e.handleOnKeyUp,isInvalid:e.error.errorState,showLabel:!1,isDisabled:e.isDownloadActive}}),e._v(" "),e.error.errorState?t("InputError",{attrs:{errorMessage:e.error.errorMessage}}):e._e()],1):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"buttons-outer-container",class:{"buttons-outer-container-compact":e.isMobileScreenOrCompactWidget},style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[t("button",{directives:[{name:"t",rawName:"v-t",value:e.getCancelBtnCTA,expression:"getCancelBtnCTA"}],staticClass:"tab-focused-btn btn cancel-btn",class:{"cancel-btn-compact":e.isMobileScreenOrCompactWidget,"btn-disabled":e.isDownloadActive},on:{click:function(t){return e.handleClose(!1,!0)}}}),e._v(" "),t("button",{directives:[{name:"t",rawName:"v-t",value:e.getConfirmBtnCTA,expression:"getConfirmBtnCTA"}],ref:"confirm-btn",staticClass:"tab-focused-btn btn confirm-btn",class:{"btn-disabled":e.isConfirmDisabled()||e.isDownloadActive,"confirm-btn-compact":e.isMobileScreenOrCompactWidget},attrs:{disabled:e.isConfirmDisabled()},on:{click:e.handleEndChat}})])])])}),[],!1,null,null,null).exports),R=n(172),w={name:"SourcesOverlay",mixins:[A.a],components:{ButtonGroup:R.a,BaseIcon:v.a},computed:{crossIcon(){return this.$cdn+"/images/cross_dark.svg"},getSources(){var e,t;return null===(e=this.$store.state.knowledgeAISourcesState)||void 0===e||null===(t=e.multiSources)||void 0===t?void 0:t.sources},multiSourceText(){var e,t;return(null===(e=this.$store.state.knowledgeAISourcesState)||void 0===e||null===(t=e.multiSources)||void 0===t?void 0:t.multiSourceText)||"Sources"}},methods:{handleCrossButtonClicked(){this.$store.dispatch("updateKnowledgeAISources",{isEnabled:!1,sources:[]})}}},L=(n(512),Object(f.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"sources-overlay-header"},[t("p",{staticClass:"sources-overlay-header-label",style:{fontSize:e.getFontSizeForResponse("title",!1)}},[e._v("Sources And Brands")]),e._v(" "),t("button",{staticClass:"sources-overlay-close-btn",on:{click:function(t){return t.stopPropagation(),e.handleCrossButtonClicked()}}},[t("div",{staticClass:"icon"},[t("BaseIcon",{attrs:{name:"CloseIcon"}})],1)])]),e._v(" "),t("div",{staticClass:"sources-overlay-body"},[t("div",{staticClass:"content-container"},[t("p",{staticClass:"sources-overlay-content-label",style:{fontSize:e.getFontSizeForResponse("bodyText",!1)}},[e._v(e._s(e.multiSourceText))]),e._v(" "),t("ButtonGroup",{attrs:{buttons:e.getSources}})],1)])])}),[],!1,null,"df679e40",null).exports),P=n(304),U={name:"NBAOverlay",mixins:[A.a],components:{BaseIcon:v.a,NonActionableNBALink:P.default},computed:{crossIcon(){return this.$cdn+"/images/cross_dark.svg"},getNonActionableNBALinks(){return this.$store.state.nonActionableNBAOptions},getHeading(){var e,t,n;return(null===(e=this.$store.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.nbaConfig)||void 0===n?void 0:n.heading)||p.h.ARTICLES_OFFERS},getNbaStaticLinks(){var e,t,n;return null===(e=this.$store.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.nbaConfig)||void 0===n?void 0:n.staticLinks}},methods:{handleCrossButtonClicked(){this.$store.dispatch("updateNonActionableNBAOverlayEnabled",!1)}}},F=(n(523),Object(f.a)(U,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"nba-overlay-wrapper"},[t("div",{staticClass:"nba-overlay-header"},[t("p",{staticClass:"nba-overlay-header-label",style:{fontSize:e.getFontSizeForResponse("title",!1)}},[e._v(e._s(e.getHeading))]),e._v(" "),t("button",{staticClass:"nba-overlay-close-btn",on:{click:function(t){return t.stopPropagation(),e.handleCrossButtonClicked()}}},[t("div",{staticClass:"icon"},[t("BaseIcon",{attrs:{name:"CloseIcon"}})],1)])]),e._v(" "),t("div",{staticClass:"nba-overlay-body"},[t("div",{staticClass:"content-container"},[t("NonActionableNBALink",{attrs:{linkData:e.getNonActionableNBALinks,staticLinkData:e.getNbaStaticLinks}})],1)])])}),[],!1,null,"35176b8e",null).exports),M=n(166),k={mixins:[A.a],components:{CloudOffline:M.default,BaseIcon:v.a},props:{textMessage:{type:String,default:""}},computed:{isFormSubmissionSuccessBanner(){return!0===this.$store.state.formSubmissionStatus.loader&&"success"===this.$store.state.formSubmissionStatus.status},isFormSubmissionErrorBanner(){return!0===this.$store.state.formSubmissionStatus.loader&&"error"===this.$store.state.formSubmissionStatus.status},isFormSubmissionWarningBanner(){return!0===this.$store.state.formSubmissionStatus.loader&&"warning"===this.$store.state.formSubmissionStatus.status},getFormStatus(){return!0===this.$store.state.formSubmissionStatus.loader&&this.$store.state.formSubmissionStatus.text},showBanner(){return!this.$store.state.connectionStatus},getDynamicStyle(){return this.$store.state.isChatWidgetFullScreen?{position:"absolute","z-index":"1000",width:"100%"}:{position:"absolute","z-index":"1000"}}},mounted(){var e=this;this.$nextTick((function(){const t=e.$refs.bannerRef;if(Array.isArray(t)){var n;const e=t.find((function(e){return null!==(null==e?void 0:e.offsetParent)}));null==e||null===(n=e.focus)||void 0===n||n.call(e)}else{var i;null==t||null===(i=t.focus)||void 0===i||i.call(t)}}))},methods:{handleCross(){this.$store.state.formSubmissionStatus.loader=!1}}},B=(n(524),{components:{Banner:Object(f.a)(k,(function(){var e=this,t=e._self._c;return t("div",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e.showBanner?t("div",{ref:"bannerRef",staticClass:"banner-container",attrs:{tabindex:"0","data-testid":"banner-container"}},[t("div",{staticClass:"banner-icon"},[t("CloudOffline")],1),e._v(" "),t("div",{staticClass:"banner-text",attrs:{"data-testid":"banner-text"}},[e._v("\n       "+e._s(e.textMessage)+"\n     ")])]):e._e(),e._v(" "),e.isFormSubmissionSuccessBanner?t("div",{ref:"bannerRef",staticClass:"banner-container-form",style:e.getDynamicStyle,attrs:{tabindex:"0"}},[t("div",[t("BaseIcon",{attrs:{name:"CheckCircle",height:"20px",width:"20px",fill:"#008A00","aria-label":"check icon"}})],1),e._v(" "),t("div",{staticClass:"banner-form-text"},[e._v(" \n         "+e._s(e.getFormStatus)+"\n        ")]),e._v(" "),t("div",{attrs:{onclick:"handleCross"}},[t("BaseIcon",{attrs:{name:"CrossFill",height:"20px",width:"20px",fill:"#008A00","aria-label":"check icon"}})],1)]):e._e(),e._v(" "),e.isFormSubmissionErrorBanner?t("div",{ref:"bannerRef",staticClass:"banner-container-form error-container",style:e.getDynamicStyle,attrs:{tabindex:"0"}},[t("div",[t("BaseIcon",{attrs:{name:"WarningAmberBlack",height:"20px",width:"20px",fill:"#008A00","aria-label":"check icon"}})],1),e._v(" "),t("div",{staticClass:"banner-form-text"},[e._v(" \n          "+e._s(e.getFormStatus)+"\n        ")]),e._v(" "),t("div",{on:{click:e.handleCross}},[t("BaseIcon",{attrs:{name:"CrossFill",height:"20px",width:"20px",fill:"#008A00","aria-label":"check icon"}})],1)]):e._e(),e._v(" "),e.isFormSubmissionWarningBanner?t("div",{ref:"bannerRef",staticClass:"banner-container-form warning-container",style:e.getDynamicStyle,attrs:{tabindex:"0"}},[t("div",{staticClass:"message-container"},[t("BaseIcon",{attrs:{name:"WarningAmberBlack",height:"20px",width:"20px",fill:"#F06C00","aria-label":"check icon"}}),e._v(" "),t("div",{staticClass:"banner-form-text"},[e._v(" \n        "+e._s(e.getFormStatus)+"\n       ")])],1),e._v(" "),t("div",{on:{click:e.handleCross}},[t("BaseIcon",{attrs:{name:"CrossFill",height:"20px",width:"20px",fill:"#008A00","aria-label":"check icon"}})],1)]):e._e()])}),[],!1,null,"5f66979a",null).exports},data:()=>({text:p.h.OFFLINE_BANNER_TEXT})}),j=Object(f.a)(B,(function(){return(0,this._self._c)("Banner",{attrs:{textMessage:this.$t(this.text)}})}),[],!1,null,null,null).exports,x={mixins:[A.a],data:()=>({showOptions:!1}),mounted(){this.$refs["menu-option-modal"].focus()},computed:{isKnowledgeAIEnabled(){return this.$store.getters.isKnowledgeAiEnabled},isDisneyDemoBot(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.brandGPT)||void 0===t?void 0:t.enable)||!1},options(){return this.$store.state.quickMenuState.options},closeIcon(){return this.$cdn+"/images/close_icon.svg"},menuHeading(){return this.$store.state.quickMenuState.type},showQuickMenu(){return this.$store.state.quickMenuState.visible},isEventAnalyticsMP(){var e;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.eventAnalyticsMP)||!1}},methods:{handleFocusChange(e){this.$nextTick((function(){var t;e?null===(t=document.getElementById("quick-menu-options-btn"))||void 0===t||t.focus():Object(g.focusOnChatInputField)()}))},quickMenuClickHandler(e,t){this.isDisneyDemoBot?this.handleEndChat():(this.isEventAnalyticsMP&&this.$segment.global.sendEvent("quick_menu_click"),this.$store.state.quickMenuClickHandler(e,t),this.handleMenuClose(!1))},handleMenuClose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$store.dispatch("updateQuickMenuVisibility",!1),this.handleFocusChange(e)},handleEndChat(){try{this.$store.dispatch("endChat",{message:p.h.CHAT_ENDED,showSessionRestartGreeting:!0,hideEndChatGreeting:!0})}catch(e){console.log(e.message),new O.a({name:"EndChat",message:"Error while ending chat. "+e.message})}finally{this.handleMenuClose(!1),this.$store.commit("CLEAR_CHATS")}}}},$=(n(525),Object(f.a)(x,(function(){var e=this,t=e._self._c;return t("div",{ref:"menu-option-modal",staticClass:"menu-options-modal",class:{"knowledgeAI-menu-options-modal":e.isKnowledgeAIEnabled},attrs:{tabindex:"0"}},[t("div",{staticClass:"menu-header"},[t("div",{directives:[{name:"t",rawName:"v-t",value:e.menuHeading,expression:"menuHeading"}],staticClass:"heading",class:{"knowledgeAI-heading":e.isKnowledgeAIEnabled},style:{fontSize:e.getFontSizeForChatInterface("title")},attrs:{id:"menu-heading"}}),e._v(" "),t("button",{staticClass:"tab-focused-btn",attrs:{"aria-label":"close menu"},on:{click:function(t){return e.handleMenuClose()}}},[t("div",{staticClass:"close-modal"},[t("img",{attrs:{src:e.closeIcon,alt:"close menu"}})])])]),e._v(" "),t("ul",{staticClass:"menu-options",attrs:{"aria-labelledby":"menu-heading"}},e._l(e.options,(function(n,i){return t("li",{key:i,attrs:{role:"menuitem"}},[t("button",{directives:[{name:"t",rawName:"v-t",value:n.label,expression:"option.label"}],staticClass:"tab-focused-btn menu-option",class:{"knowledgeAI-menu-option":e.isKnowledgeAIEnabled},style:{fontSize:e.getFontSizeForChatInterface("bodyText")},on:{click:function(t){return e.quickMenuClickHandler(n,i)}}})])})),0)])}),[],!1,null,"03dbd118",null).exports),V=n(171),H=n(295),G=n(59),W=n(299),K=n(92),q=n(159),z=n(160),Y=n(161),Q=n(120),X=n(165),J=n(162),Z={components:{BaseIcon:v.a,NotificationIcon:q.default,CustomSwitch:W.a,NavigateNext:Y.default,GlobeIcon:Q.default,ExitIcon:X.default,ResetIcon:z.default,NavigateBack:J.default},data:()=>({showLanguageMenu:!1,propsForOptionItems:K.a.DEFAULT_CONFIG}),mounted(){var e;null===(e=this.$refs["menu-option-modal"])||void 0===e||e.focus()},watch:{sound:{handler(e){localStorage.setItem("sound",e)},immediate:!0},defaultSound:{handler(e){this.$store.dispatch("updateNotificationSound",e)},immediate:!0}},computed:{sound:{get:function(){return this.$store.state.notificationSound},set:function(e){e&&G.a.play(p.y.TOGGLE),this.$store.dispatch("updateNotificationSound",e)}},getOptionItems(){var e;return(null===(e=this.propsForOptionItems)||void 0===e?void 0:e.options())||[]},showResetChat(){var e;const{isEnabled:t,placement:n=p.h.RESTART_CHAT_PLACEMENT_INPUT_FIELD}=(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.restartChat)||{};return t&&n===p.h.RESTART_CHAT_PLACEMENT_MENU&&Object(g.isTypeBOT)(this.$store.state.controlType)},showSound(){return this.$store.getters.isSoundEnable||!0},defaultSound(){if(this.showSound){const e=localStorage.getItem("sound");return e?"true"===e:this.$store.getters.isSoundOnByDefault}return!1},templateStrings(){var e;return{END_CHAT:p.t.END_CHAT_BUTTON_CTA,SOUND:p.h.SOUND,CHANGE_LANGUAGE:`${Object(g.getTranslation)(p.h.LANGUAGE)} - ${null===(e=this.$i18n.locale)||void 0===e?void 0:e.toUpperCase()}`,RESTART_CHAT_LABEL:p.h.RESTART_PRIMARY_BTN_TEXT}},menuHeading(){return this.showLanguageMenu?this.propsForOptionItems.title():"Settings"},closeIcon(){return this.$cdn+"/images/close_icon.svg"},multilingualEnabled(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.multilingual)||void 0===t?void 0:t.enabled)||!1},primaryThemeColor(){var e,t;return null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.color},isSendTranscriptEnabled(){var e,t;return!this.$store.state.widgetConfig.endChat||(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.endChat)||void 0===t?void 0:t.isSendTranscriptEnabled)},hasChatsInitiated(){return(this.$store.state.chats||[]).some((function(e){var t;return(null==e||null===(t=e.content)||void 0===t?void 0:t.message)!==p.h.RESTART_CHAT_LABEL}))}},methods:{handleCloseDrawer(){this.$store.dispatch("toggleShowHeaderDrawer")},changeSoundState(){this.$refs["custom-switch"].toggle()},handleResetChat(){var e=this;return d()((function*(){var t,n;const{isEnabled:i}=(null===(t=e.$store.state.widgetConfig)||void 0===t||null===(n=t.restartChat)||void 0===n?void 0:n.showWarning)||{};if(i)e.$store.dispatch("updateEndChatModalOnChatRestart",!0),e.$store.dispatch("updateEndChatModalStatus",!0);else{yield e.$store.dispatch("endChat",{message:p.h.RESTART_CHAT_LABEL,showSessionRestartGreeting:!0,hideEndChatGreeting:e.isSendTranscriptEnabled,restartChat:!0,clearConversation:!0,hidePill:!0});const t={eventType:p.e.WIDGET_EVENT,subType:p.h.CHAT_RESTART};e.$store.dispatch("sendEvent",{eventData:t}),e.$store.dispatch("toggleShowHeaderDrawer")}}))()},handleShowLanguageMenu(){this.showLanguageMenu=!this.showLanguageMenu,this.propsForOptionItems=K.a.LANGUAGE_CONFIG},handleOptionItemClick(e){this.propsForOptionItems.clickHandler(e),this.showLanguageMenu=!this.showLanguageMenu},isConditionMatched(e){return this.propsForOptionItems.activeClassConditions.enabled&&this.propsForOptionItems.activeClassConditions.condition(e)},handleBackIcon(){this.showLanguageMenu=!this.showLanguageMenu,this.$store.dispatch("toggleShowHeaderDrawer")}}},ee=(n(534),Object(f.a)(Z,(function(){var e=this,t=e._self._c;return t("div",{ref:"menu-option-modal",staticClass:"menu-options-modal",attrs:{tabindex:"0"}},[t("div",{staticClass:"menu-header"},[t("div",{staticClass:"heading-container"},[e.showLanguageMenu?t("span",{staticClass:"back_icon",on:{click:function(t){return t.stopPropagation(),e.handleBackIcon.apply(null,arguments)}}},[t("NavigateBack",{attrs:{fillColor:e.primaryThemeColor}})],1):e._e(),e._v(" "),e.showLanguageMenu?t("span",{staticClass:"item_icon"},[t(e.propsForOptionItems.icon,{tag:"component"})],1):e._e(),e._v(" "),t("div",{directives:[{name:"t",rawName:"v-t",value:e.menuHeading,expression:"menuHeading"}],staticClass:"heading",attrs:{id:"menu-heading"}})]),e._v(" "),t("button",{staticClass:"tab-focused-btn",attrs:{"aria-label":"close menu"},on:{click:function(t){return t.stopPropagation(),e.handleCloseDrawer()}}},[t("div",{staticClass:"close-modal"},[t("BaseIcon",{attrs:{name:"closeIcon"}})],1)])]),e._v(" "),e.showLanguageMenu?t("ul",{staticClass:"menu-options",attrs:{"aria-labelledby":"menu-heading"}},e._l(e.getOptionItems,(function(n){return t("li",{key:n.label,staticClass:"language-item",class:{active:e.isConditionMatched(n)},on:{click:function(t){return t.stopPropagation(),e.handleOptionItemClick(n)}}},[t("span",{staticClass:"dot",class:e.isConditionMatched(n)?"active_dot":"inactive_dot"}),e._v(" "),t("span",{staticClass:"language-label"},[e._v(e._s(n.label))])])})),0):t("ul",{staticClass:"menu-options",attrs:{"aria-labelledby":"menu-heading"}},[e.multilingualEnabled?t("li",{staticClass:"menu-item",attrs:{role:"menuitem","data-testId":e.templateStrings.CHANGE_LANGUAGE}},[t("button",{staticClass:"tab-focused-btn wd100 change_language_row",on:{click:function(t){return t.stopPropagation(),e.handleShowLanguageMenu.apply(null,arguments)}}},[t("div",{staticClass:"list-item"},[t("GlobeIcon",{staticClass:"label-icon change-language-globe-icon"}),e._v(" "),t("p",{directives:[{name:"t",rawName:"v-t",value:e.templateStrings.CHANGE_LANGUAGE,expression:"templateStrings.CHANGE_LANGUAGE"}]})],1),e._v(" "),t("NavigateNext",{staticClass:"navigate_next_icon",attrs:{fill:"#2C2C2C"}})],1)]):e._e(),e._v(" "),e.showSound?t("li",{staticClass:"menu-item",attrs:{"aria-checked":"true",role:"menuitem switch","data-testId":e.templateStrings.SOUND}},[t("button",{staticClass:"tab-focused-btn wd100",on:{click:function(t){return t.stopPropagation(),e.changeSoundState.apply(null,arguments)}}},[t("div",{staticClass:"list-item"},[t("NotificationIcon",{staticClass:"label-icon sound-notification-icon"}),e._v(" "),t("div",{staticClass:"switch-container"},[t("p",{directives:[{name:"t",rawName:"v-t",value:e.templateStrings.SOUND,expression:"templateStrings.SOUND"}]}),e._v(" "),t("button",{staticClass:"tab-focused-btn",on:{click:function(t){return t.stopPropagation(),e.changeSoundState.apply(null,arguments)}}},[t("CustomSwitch",{ref:"custom-switch",model:{value:e.sound,callback:function(t){e.sound=t},expression:"sound"}})],1)])],1)])]):e._e(),e._v(" "),e.showResetChat&&e.hasChatsInitiated?t("li",{staticClass:"menu-item",attrs:{role:"menuitem","data-testId":e.templateStrings.RESTART_CHAT_LABEL}},[t("button",{staticClass:"tab-focused-btn wd100",on:{click:function(t){return t.stopPropagation(),e.handleResetChat.apply(null,arguments)}}},[t("div",{staticClass:"list-item"},[t("ResetIcon",{staticClass:"label-icon reset-chat-icon"}),e._v(" "),t("p",{directives:[{name:"t",rawName:"v-t",value:e.templateStrings.RESTART_CHAT_LABEL,expression:"templateStrings.RESTART_CHAT_LABEL"}],staticClass:"reset-chat-label"})],1)])]):e._e()])])}),[],!1,null,"6b5e51ae",null).exports),te={mixins:[A.a],components:{BaseIcon:v.a},data:()=>({timeLeft:"",intervalTimerId:""}),mounted(){var e=this;this.updateDisplayTimeLeft(),this.intervalTimerId=setInterval((function(){e.updateDisplayTimeLeft()}),1e3)},computed:{isMobileScreenOrCompactWidget(){return"mobile"===Object(g.getDeviceType)()||!this.$store.state.isChatWidgetFullScreen},getAlertTitle(){return this.$store.state.alerts.highPriorityAlert.title},getAlertDetails(){return this.$store.state.alerts.highPriorityAlert.details},isAlertButtonEnabled(){var e;return null===(e=this.$store.state.alerts.highPriorityAlert.button)||void 0===e?void 0:e.isEnabled},getAlertButtonLabel(){var e;return null===(e=this.$store.state.alerts.highPriorityAlert.button)||void 0===e?void 0:e.label},getAlertButtonURL(){var e;return null===(e=this.$store.state.alerts.highPriorityAlert.button)||void 0===e?void 0:e.url},getEndAlertTimestampWithLocalTimezone(){return Object(g.convertUTCTimestampToLocalTimestamp)(this.$store.state.alerts.highPriorityAlert.schedule.startEndDateTime[1]-this.$store.state.alerts.highPriorityAlert.schedule.utcOffsetInMs)}},methods:{sanitizeFontStyles(e){return e?(this.$store.getters.isFontFamilyChatInterfaceOverrideEnabled&&(e=e.replace(/font-family:[^;"]*;?/gi,"")),this.$store.getters.isFontSizeChatInterfaceOverrideEnabled&&(e=e.replace(/font-size:[^;"]*;?/gi,"")),e):""},handleCloseClicked(){this.$store.dispatch("minimizeCW"),Object(g.emitEventToParentWindow)(p.o.MINIMIZE_CHAT_WIDGET,Object(g.getEventDataPoints)())},updateDisplayTimeLeft(){const e=this.getEndAlertTimestampWithLocalTimezone-Date.now();if(e<0)return"";const t=Math.floor(e/1e3)%60,n=Math.floor(e/6e4)%60,i=Math.floor(e/36e5)%24,o=Math.floor(e/864e5),a=[];o>0&&a.push(`${o} day${o>1?"s":""}`),i>0&&a.push(`${i} hour${i>1?"s":""}`),n>0&&a.push(`${n} minute${n>1?"s":""}`),t>0&&a.push(`${t} second${t>1?"s":""}`),this.timeLeft=a.length>0?a.join(", "):""},handleAlertButtonClicked(){window.open(this.getAlertButtonURL,"noopener","noreferrer")}},beforeDestroy(){this.intervalTimerId&&clearInterval(this.intervalTimerId)}},ne=(n(535),Object(f.a)(te,(function(){var e,t=this,n=t._self._c;return n("div",{ref:"high-priority-alert-wrapper",staticClass:"high-priority-alert-wrapper"},[n("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"high-priority-alert-container",class:{"high-priority-alert-container-compact":t.isMobileScreenOrCompactWidget}},[n("div",{staticClass:"alert-content",style:{fontSize:t.getFontSizeForChatInterface("bodyText")}},[n("div",{staticClass:"alert-header"},[n("BaseIcon",{attrs:{name:"WarningIcon",width:"24px",height:"24px",fill:"#E22C2C"}}),t._v(" "),n("p",{staticClass:"header-text",style:{fontSize:t.getFontSizeForChatInterface("title")}},[t._v("\n                    "+t._s(t.getAlertTitle)+"\n                ")])],1),t._v(" "),n("div",{staticClass:"details",domProps:{innerHTML:t._s(t.sanitizeFontStyles(t.getAlertDetails))}}),t._v(" "),t.isAlertButtonEnabled&&null!==(e=t.getAlertButtonLabel)&&void 0!==e&&e.length?n("div",{staticClass:"card-button",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.handleAlertButtonClicked.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.handleAlertButtonClicked.apply(null,arguments))}}},[t._v("\n                "+t._s(t.getAlertButtonLabel)+"\n            ")]):t._e(),t._v(" "),n("div",{staticClass:"close-btn",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.handleCloseClicked.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.handleCloseClicked.apply(null,arguments))}}},[t._v("\n                Chat Later\n            ")]),t._v(" "),n("div",{staticClass:"alert-timeleft-container",style:{fontSize:t.getFontSizeForChatInterface("smallBodyText")}},[t._v("\n                Chat will be available in "+t._s(t.timeLeft)+"\n            ")])])])])}),[],!1,null,null,null).exports),ie={mixins:[A.a],components:{BaseIcon:v.a},data:()=>({setTimeoutTimerId:""}),mounted(){var e=this;this.isDurationTypeSeconds&&(this.setTimeoutTimerId=setTimeout((function(){e.handleCloseClicked()}),1e3*this.getDurationInSeconds))},computed:{isMobileScreenOrCompactWidget(){return"mobile"===Object(g.getDeviceType)()||!this.$store.state.isChatWidgetFullScreen},isDurationTypeSeconds(){return"seconds"===this.$store.state.alerts.mediumPriorityAlert.schedule.durationType},getDurationInSeconds(){return this.$store.state.alerts.mediumPriorityAlert.schedule.alertDuration},getAlertTitle(){return this.$store.state.alerts.mediumPriorityAlert.title},getAlertDetails(){return this.$store.state.alerts.mediumPriorityAlert.details},isAlertButtonEnabled(){var e;return null===(e=this.$store.state.alerts.mediumPriorityAlert.button)||void 0===e?void 0:e.isEnabled},getAlertButtonLabel(){var e;return null===(e=this.$store.state.alerts.mediumPriorityAlert.button)||void 0===e?void 0:e.label},getAlertButtonURL(){var e;return null===(e=this.$store.state.alerts.mediumPriorityAlert.button)||void 0===e?void 0:e.url}},methods:{sanitizeFontStyles(e){return e?(this.$store.getters.isFontFamilyChatInterfaceOverrideEnabled&&(e=e.replace(/font-family:[^;"]*;?/gi,"")),this.$store.getters.isFontSizeChatInterfaceOverrideEnabled&&(e=e.replace(/font-size:[^;"]*;?/gi,"")),e):""},handleAlertButtonClicked(){window.open(this.getAlertButtonURL,"noopener","noreferrer")},handleCloseClicked(){this.$store.dispatch("updateMediumPriorityAlertState",{})}}},oe=(n(536),Object(f.a)(ie,(function(){var e,t=this,n=t._self._c;return n("div",{ref:"medium-priority-alert-wrapper",staticClass:"medium-priority-alert-wrapper"},[n("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"medium-priority-alert-container",class:{"medium-priority-alert-container-compact":t.isMobileScreenOrCompactWidget}},[n("div",{staticClass:"alert-content",style:{fontSize:t.getFontSizeForChatInterface("bodyText")}},[n("div",{staticClass:"alert-header"},[n("BaseIcon",{attrs:{name:"WarningIcon",width:"24px",height:"24px",fill:"#F06C00"}}),t._v(" "),n("p",{staticClass:"header-text",style:{fontSize:t.getFontSizeForChatInterface("title")}},[t._v("\n                    "+t._s(t.getAlertTitle)+"\n                ")])],1),t._v(" "),n("div",{staticClass:"details",domProps:{innerHTML:t._s(t.sanitizeFontStyles(t.getAlertDetails))}}),t._v(" "),t.isAlertButtonEnabled&&null!==(e=t.getAlertButtonLabel)&&void 0!==e&&e.length?n("div",{staticClass:"card-button",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.handleAlertButtonClicked.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.handleAlertButtonClicked.apply(null,arguments))}}},[t._v("\n                "+t._s(t.getAlertButtonLabel)+"\n            ")]):t._e(),t._v(" "),n("div",{staticClass:"close-btn",attrs:{role:"button",tabindex:"0"},on:{click:function(e){return e.stopPropagation(),t.handleCloseClicked.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.handleCloseClicked.apply(null,arguments))}}},[t._v("\n                Close\n            ")])])])])}),[],!1,null,null,null).exports),ae={mixins:[A.a],data:()=>({}),computed:{isEventAnalyticsMP(){var e;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.eventAnalyticsMP)||!1},botResponseBubbleColor(){var e;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.botResponseBubbleColor)||"#1E6FF1"},isMobileScreenOrCompactWidget(){return"mobile"===Object(g.getDeviceType)()||!this.$store.state.isChatWidgetFullScreen},getTermsAndConditionsTitle(){return this.$store.state.termsAndConditions.terms.title},getTermsAndConditionsDetails(){return this.$store.state.termsAndConditions.terms.details},getTermsAndConditionsConfirmButtonLabel(){return this.$store.state.termsAndConditions.terms.button.confirmButtonText},getTermsAndConditionsCloseButtonLabel(){return this.$store.state.termsAndConditions.terms.button.closeButtonText}},methods:{sanitizeFontStyles(e){return e?(this.$store.getters.isFontFamilyChatInterfaceOverrideEnabled&&(e=e.replace(/font-family:[^;"]*;?/gi,"")),this.$store.getters.isFontSizeChatInterfaceOverrideEnabled&&(e=e.replace(/font-size:[^;"]*;?/gi,"")),e):""},handleTermsAndConditionsButtonClicked(){this.sendMixPanelEvent(p.o.TERMS_AND_CONDITION_ACCEPTED),this.$store.state.termsAndConditionsAccepted=!0,this.$store.dispatch("updateTermsState",{})},handleCloseClicked(){this.sendMixPanelEvent(p.o.TERMS_AND_CONDITION_REFUSED),this.$store.dispatch("minimizeCW"),Object(g.emitEventToParentWindow)(p.o.MINIMIZE_CHAT_WIDGET,Object(g.getEventDataPoints)())},sendMixPanelEvent(e){this.isEventAnalyticsMP&&this.$segment.global.sendEvent(e)}},mounted(){this.sendMixPanelEvent(p.o.TERMS_AND_CONDITION_LOADED)}},se=(n(537),Object(f.a)(ae,(function(){var e=this,t=e._self._c;return t("div",{ref:"terms-and-conditions-wrapper",staticClass:"terms-and-conditions-wrapper"},[t("div",{directives:[{name:"focus-trap",rawName:"v-focus-trap"}],staticClass:"terms-and-conditions-container",class:{"terms-and-conditions-container-compact":e.isMobileScreenOrCompactWidget}},[t("div",{staticClass:"terms-and-conditions-content",style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[t("div",{staticClass:"terms-and-conditions-header"},[t("p",{staticClass:"header-text",style:{fontSize:e.getFontSizeForChatInterface("title")}},[e._v("\n                    "+e._s(e.getTermsAndConditionsTitle)+"\n                ")])]),e._v(" "),t("div",{staticClass:"details",domProps:{innerHTML:e._s(e.sanitizeFontStyles(e.getTermsAndConditionsDetails))}}),e._v(" "),t("div",{staticClass:"card-button",style:{backgroundColor:e.botResponseBubbleColor,color:"#FFFFFF"},attrs:{role:"button",tabindex:"0"},on:{click:function(t){return t.stopPropagation(),e.handleTermsAndConditionsButtonClicked.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleTermsAndConditionsButtonClicked.apply(null,arguments))}}},[e._v("\n                "+e._s(e.getTermsAndConditionsConfirmButtonLabel)+"\n            ")]),e._v(" "),t("div",{staticClass:"close-btn",style:{color:e.botResponseBubbleColor},attrs:{role:"button",tabindex:"0"},on:{click:function(t){return t.stopPropagation(),e.handleCloseClicked.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleCloseClicked.apply(null,arguments))}}},[e._v("\n                "+e._s(e.getTermsAndConditionsCloseButtonLabel)+"\n            ")])])])])}),[],!1,null,null,null).exports),re={name:"VisitorInfoForm",mixins:[A.a],components:{Overlay:E,BaseIcon:v.a},data:()=>({visitorInfo:"",jsonError:!1}),computed:{visitorInfoFromState(){return this.$store.state.visitorInfoForm.visitorInfoDetails?JSON.stringify(this.$store.state.visitorInfoForm.visitorInfoDetails,null,2):""},isVisitorInfoChanged(){return this.visitorInfoFromState!==this.visitorInfo},visitorInfoPlaceholder:()=>'{\n"user_email": "andy@email.com",\n"user_member_number": "ABC123"\n}'},mounted(){this.visitorInfo=this.visitorInfoFromState},methods:{handleCancel(){this.$store.dispatch("showVisitorInfoForm",!1)},handleSubmit(){try{const e=JSON.parse(this.visitorInfo);if(Array.isArray(e))throw new Error;this.jsonError=!1,this.$store.dispatch("updateVisitorInfoForm",e),this.$store.dispatch("showVisitorInfoForm",!1)}catch{return void(this.jsonError=!0)}Object(g.showMessageSeparatorPill)({message:"Visitor information updated",isEndChatSeparator:!1})}}},le=(n(538),Object(f.a)(re,(function(){var e=this,t=e._self._c;return t("Overlay",[e._t("content",(function(){return[t("div",{staticClass:"visitorInfoForm",style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[t("div",{staticClass:"header"},[t("div",{on:{click:e.handleCancel}},[t("BaseIcon",{staticClass:"close-icon",attrs:{name:"CloseIcon"}})],1),e._v(" "),t("p",{style:{fontSize:e.getFontSizeForChatInterface("title")}},[e._v("Visitor information")])]),e._v(" "),t("div",{staticClass:"form-detail"},[t("p",{style:{fontSize:e.getFontSizeForChatInterface("smallBodyText")}},[e._v("Use visitor details to generate a response.")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.visitorInfo,expression:"visitorInfo"}],attrs:{placeholder:e.visitorInfoPlaceholder},domProps:{value:e.visitorInfo},on:{input:function(t){t.target.composing||(e.visitorInfo=t.target.value)}}}),e._v(" "),e.jsonError?t("p",{staticClass:"error"},[e._v("\n          Enter a valid json\n        ")]):e._e()]),e._v(" "),t("div",{staticClass:"footer"},[t("button",{staticClass:"cancel-btn",on:{click:e.handleCancel}},[e._v("\n          Cancel\n        ")]),e._v(" "),t("button",{staticClass:"submit-btn",attrs:{disabled:!e.isVisitorInfoChanged},on:{click:e.handleSubmit}},[e._v("\n          Submit\n        ")])])])]}))],2)}),[],!1,null,"31f46e00",null).exports),ce={name:"ViewVisitorInfo",mixins:[A.a],components:{BaseIcon:v.a},data:()=>({isMaximized:!1}),computed:{visitorInfoDetails(){return JSON.stringify(this.$store.state.visitorInfoForm.visitorInfoDetails,null,2)}},methods:{handleDeleteVisitorInfo(){this.$store.dispatch("updateVisitorInfoForm",""),Object(g.showMessageSeparatorPill)({message:"Visitor information discarded",isEndChatSeparator:!1})},handleToggleMaxMinVisitorInfo(){this.isMaximized=!this.isMaximized}}},ue=(n(539),Object(f.a)(ce,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"view-visitor-info-wrapper"},[t("div",{staticClass:"view-visitor-info-min"},[t("div",{staticClass:"visitor-info-header"},[t("BaseIcon",{attrs:{name:"BadgeIcon",fill:"#1E6FF1"}}),e._v(" "),t("p",{style:{fontSize:e.getFontSizeForChatInterface("bodyText")}},[e._v("Visitor info")])],1),e._v(" "),t("div",{staticClass:"btn-grp"},[t("div",{on:{click:e.handleDeleteVisitorInfo}},[t("BaseIcon",{attrs:{name:"DeleteIcon",fill:"#6B6D7C"}})],1),e._v(" "),t("div",{on:{click:e.handleToggleMaxMinVisitorInfo}},[e.isMaximized?t("BaseIcon",{attrs:{name:"ArrowBackIcon",fill:"#6B6D7C",height:"16"}}):t("BaseIcon",{attrs:{name:"ArrowForwardIcon",fill:"#6B6D7C",height:"16"}})],1)])]),e._v(" "),e.isMaximized?t("div",{staticClass:"visitor-details"},[t("pre",{style:{fontSize:e.getFontSizeForChatInterface("smallBodyText")}},[e._v(e._s(e.visitorInfoDetails))])]):e._e()])}),[],!1,null,"0727696e",null).exports);var de={components:{Header:function(){return n.e(8).then(n.bind(null,941))},ChatView:function(){return n.e(2).then(n.bind(null,944))},Footer:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,942))},Overlay:E,SourcesOverlay:L,Banner:j,QuickMenu:$,NBAOverlay:F,NonActionableNBALink:function(){return Promise.resolve().then(n.bind(null,304))},Preloader:V.a,EndChat:D,SurveyForm:H.a,HeaderMenuDrawer:ee,BaseIcon:v.a,HighPriorityAlerts:ne,MediumPriorityAlerts:oe,TermsAndConditions:se,VisitorInfoForm:le,ViewVisitorInfo:ue},data:()=>({isUserInactive:!1,isNonActionableNBAValidWithDelay:!1,timeoutId:"",showSurvey:!1,isDragDropActive:!1}),mounted(){this.$refs.chatWindowContainer.focus()},watch:{"$store.state.isOverlayActive":function(){this.isUserInactive=this.$store.state.isOverlayActive},"$store.state.isMqttConnected":function(){this.isWidgetConfigLoaded&&(this.$store.dispatch("fetchHistory"),this.$store.dispatch("triggerProActiveGreetings"))},isWidgetConfigLoaded:function(e){e&&this.$store.getters.isKnowledgeAiEnabled&&(this.$store.dispatch("toggleChatWindowStatus",!0),this.$store.dispatch("updateUnreadMessagesState",{enabled:!1}))},isNonActionableNBAValid(e,t){var n=this;if(this.timeoutId&&clearTimeout(this.timeoutId),e)this.isNonActionableNBAValidWithDelay=!0;else if(!e&&t){const e=setTimeout((function(){n.isNonActionableNBAValidWithDelay=!1}),500);this.timeoutId=e}},isSurveyValid(e){this.showSurvey=e},isAlertOrTermsActive:{handler:function(e,t){const n=this.$store.state.alerts.triggerGreeting||this.$store.state.termsAndConditions.triggerGreeting;0===e&&0!==t&&n&&("proactive"===n?this.$store.dispatch("triggerProActiveGreetings"):"calloutbubble"===n&&this.$store.dispatch("triggerCalloutBubbleGreetings"),this.$store.dispatch("updateGreetingTriggerOnAlertClosureState",""),this.$store.dispatch("updateGreetingTriggerOnTermsClosureState",""));const i=this.$store.state.termsAndConditions.quickReply;0===e&&0!==t&&i&&(this.$store.dispatch("sendMessage",i),this.$store.dispatch("updateQuickReplyOnTermsClosureState",null))}}},computed:{isAlertOrTermsActive(){return this.showHighPriorityAlert||this.showMediumPriorityAlert||this.showTermsAndConditions},showHighPriorityAlert(){var e;return null===(e=Object.keys(this.$store.state.alerts.highPriorityAlert))||void 0===e?void 0:e.length},showMediumPriorityAlert(){var e;return!this.isSurveyValid&&!this.showHighPriorityAlert&&!this.showTermsAndConditions&&(null===(e=Object.keys(this.$store.state.alerts.mediumPriorityAlert))||void 0===e?void 0:e.length)},showTermsAndConditions(){var e;return!this.isSurveyValid&&!this.showHighPriorityAlert&&(null===(e=Object.keys(this.$store.state.termsAndConditions.terms))||void 0===e?void 0:e.length)},getGenericDocIcon(){return this.$cdn+"/images/generic-doc.svg"},getDropAreaText:()=>p.h.DROP_AREA_TEXT_CW,isMultiAttachmentEnabled(){var e;return null===(e=this.$store.state.widgetConfig.fileSharing)||void 0===e?void 0:e.multiAttachment},isFileSharingEnabled(){var e;return null===(e=this.$store.state.widgetConfig.fileSharing)||void 0===e?void 0:e.isEnabled},isSurveyValid(){return this.$store.state.surveyFormState.isValid},getSurveyMessage(){return this.$store.state.surveyFormState.data},getIsSurveySubmitted(){return this.$store.state.surveyFormState.isSurveySubmitted||!1},getSurveySubmittedValues(){return this.$store.state.surveyFormState.submittedValues||{}},getIsSurveyFirstResponse(){return this.$store.state.surveyFormState.isFirstResponse},isFormSubmissionBanner(){return!0===this.$store.state.formSubmissionStatus.loader},isSourcesOverlayEnabled(){return this.$store.state.knowledgeAISourcesState.isEnabled&&!this.$store.state.isChatWidgetFullScreen},isDisneyDemoBot(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.brandGPT)||void 0===t?void 0:t.enable)||!1},getStyles(){if(this.isDisneyDemoBot){var e,t;return{backgroundImage:`url(${null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.brandGPT)||void 0===t?void 0:t.backgroundImage})`}}return{}},clearConversation(){return this.$store.state.clearConversationState.clearConversation},showBanner(){return!this.$store.state.connectionStatus},isChatboxactive(){return this.$store.state.isWindowMaximized},showQuickMenu(){return this.$store.state.quickMenuState.visible},showDrawerHeader(){return this.$store.state.headerDrawerState.show},isWidgetConfigLoaded(){var e;return(null===(e=Object.keys(this.$store.state.widgetConfig))||void 0===e?void 0:e.length)>0&&this.$store.state.isMqttConnected},isNbaOverlayEnabled(){return this.$store.state.nonActionableNBAOverlayEnabled&&!this.$store.state.isChatWidgetFullScreen},isNonActionableNBAValid(){var e,t,n,i,o,a;return this.$store.state.isChatWidgetFullScreen&&((null===(e=this.$store.state)||void 0===e||null===(t=e.nonActionableNBAOptions)||void 0===t?void 0:t.length)||(null===(n=this.$store.state)||void 0===n||null===(i=n.widgetConfig)||void 0===i||null===(o=i.nbaConfig)||void 0===o||null===(a=o.staticLinks)||void 0===a?void 0:a.length))},getNonActionableNBALinks(){return this.$store.state.nonActionableNBAOptions},getHeading(){var e,t,n;return(null===(e=this.$store.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.nbaConfig)||void 0===n?void 0:n.heading)||p.h.ARTICLES_OFFERS},getNbaStaticLinks(){var e,t,n;return null===(e=this.$store.state)||void 0===e||null===(t=e.widgetConfig)||void 0===t||null===(n=t.nbaConfig)||void 0===n?void 0:n.staticLinks},showEndChat(){return this.$store.state.showEndChatFlow.enableWidget},showVisitorInfoForm(){var e;return null===(e=this.$store.state.visitorInfoForm)||void 0===e?void 0:e.isOpen},isValidVisitorInfo(){var e;return null===(e=this.$store.state.visitorInfoForm)||void 0===e?void 0:e.visitorInfoDetails},hideHeader(){return this.$store.getters.isResponseAnalyzerEnabled}},methods:{isFormDragDropPresent:()=>document.getElementsByClassName("drag-drop-wrapper-active").length,handleOutsideClick(){this.$store.dispatch("updateQuickMenuVisibility",!1)},handleChatWindowClose(){this.$store.dispatch("updateEndChatModalStatus",!1)},handleDrawerOutsideClick(){this.$store.dispatch("toggleShowHeaderDrawer")},handleDragLeave(e){const t=this.$refs.chatWindowContainer.getBoundingClientRect();(e.clientY<t.top||e.clientY>=t.bottom||e.clientX<t.left||e.clientX>=t.right)&&this.handleMouseLeave()},handleMouseLeave(){if(this.isDragDropActive){this.$refs.chatWindowContainer.classList.remove("drag-drop-active"),this.isDragDropActive=!1}},dragOverHandler(e){if(e.preventDefault(),this.isFileSharingEnabled&&!this.isFormDragDropPresent()){this.$refs.chatWindowContainer.classList.add("drag-drop-active"),this.isDragDropActive=!0}},dropHandler(e){try{if(e.preventDefault(),this.handleMouseLeave(),!this.isDropValid())return;const t=e.dataTransfer.items;!t||t.length>1&&!this.isMultiAttachmentEnabled||[...t].forEach((function(e){"file"===e.kind&&Object(g.uploadFile)(e.getAsFile())}))}catch(e){console.log("Error While Uploading",e),new O.a({name:"Action",message:"Error while uploading files: "+e,error:e})}finally{e.target.value=""}},isDropValid(){return this.isFileSharingEnabled&&!this.isFormDragDropPresent()&&!(this.$store.state.inputFieldDisableStatus||this.$store.state.inputFieldTempDisableStatus||this.$store.state.inputFieldStreamingDisableStatus||this.$store.state.footer.disableInputOnSend.state||this.$store.state.widgetConfig.footerStatus===p.h.DISABLED)}}};n(540);var he={components:{ChatWindowMaximized:Object(f.a)(de,(function(){var e=this,t=this,n=t._self._c;return n("div",{ref:"chatWindowContainer",staticClass:"chat-window-container",class:[t.isChatboxactive?"chatbox-open":"",t.isDisneyDemoBot?"disney-demo":""],style:t.getStyles,attrs:{"aria-label":"Netomi Chat AI Interface",tabindex:"0"},on:{drop:function(t){return e.dropHandler(t)},dragover:function(t){return e.dragOverHandler(t)},dragleave:function(t){return e.handleDragLeave(t)}}},[t.isWidgetConfigLoaded?t._e():n("Preloader"),t._v(" "),t.isWidgetConfigLoaded&&t.showEndChat?n("EndChat"):t._e(),t._v(" "),t.isWidgetConfigLoaded&&t.showHighPriorityAlert?n("HighPriorityAlerts"):t._e(),t._v(" "),t.isWidgetConfigLoaded&&t.showTermsAndConditions?n("TermsAndConditions"):t._e(),t._v(" "),t.isWidgetConfigLoaded&&t.showMediumPriorityAlert?n("MediumPriorityAlerts"):t._e(),t._v(" "),t.showSurvey?n("SurveyForm",{attrs:{showOnlySurvey:!0,message:t.getSurveyMessage,isFirstResponse:t.getIsSurveyFirstResponse,isSurveySubmitted:t.getIsSurveySubmitted,submittedValues:t.getSurveySubmittedValues}}):t._e(),t._v(" "),t.isWidgetConfigLoaded&&!t.hideHeader?n("Header"):t._e(),t._v(" "),t.isFormSubmissionBanner?n("Banner"):t._e(),t._v(" "),t.showBanner&&t.isWidgetConfigLoaded?n("Banner"):t._e(),t._v(" "),t.isDragDropActive&&t.isWidgetConfigLoaded?n("Overlay",[t._t("content",(function(){return[n("div",{staticClass:"drop-area-container-overlay"}),t._v(" "),n("div",{staticClass:"drop-area-container"},[n("div",{staticClass:"drop-area-icon-container"},[n("BaseIcon",{attrs:{name:"Squircle"}}),t._v(" "),n("img",{attrs:{src:t.getGenericDocIcon,alt:"icon"}}),t._v(" "),n("p",{directives:[{name:"t",rawName:"v-t",value:t.getDropAreaText,expression:"getDropAreaText"}]})],1)])]}))],2):t._e(),t._v(" "),t.isWidgetConfigLoaded?n("div",{staticClass:"chat-window-inner-container",class:{"inner-partitions":t.isNonActionableNBAValidWithDelay}},[n("div",{staticClass:"chat-window-partition",class:{"chat-window-left-partition":t.isNonActionableNBAValidWithDelay}},[t.showVisitorInfoForm?n("VisitorInfoForm"):t._e(),t._v(" "),t.isValidVisitorInfo?n("ViewVisitorInfo"):t._e(),t._v(" "),t.isSourcesOverlayEnabled?n("SourcesOverlay"):t._e(),t._v(" "),t.isNbaOverlayEnabled?n("NBAOverlay"):t._e(),t._v(" "),n("Overlay",{directives:[{name:"show",rawName:"v-show",value:t.isUserInactive,expression:"isUserInactive"}]}),t._v(" "),n("ChatView",{directives:[{name:"show",rawName:"v-show",value:!(t.isSourcesOverlayEnabled||t.isNbaOverlayEnabled),expression:"!(isSourcesOverlayEnabled || isNbaOverlayEnabled)"}],key:t.clearConversation,attrs:{showBlankScreen:t.isAlertOrTermsActive>0}}),t._v(" "),t.showQuickMenu?n("QuickMenu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleOutsideClick,expression:"handleOutsideClick"}]}):t._e(),t._v(" "),t.showDrawerHeader?n("HeaderMenuDrawer",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleDrawerOutsideClick,expression:"handleDrawerOutsideClick"}]}):t._e(),t._v(" "),n("Footer",{directives:[{name:"show",rawName:"v-show",value:!(t.isSourcesOverlayEnabled||t.isNbaOverlayEnabled||t.showDrawerHeader),expression:"!(isSourcesOverlayEnabled || isNbaOverlayEnabled || showDrawerHeader)"}]})],1),t._v(" "),n("Transition",{attrs:{name:"slide"}},[t.isNonActionableNBAValid?n("div",{staticClass:"non-actionable-nba-container"},[n("p",{staticClass:"nba-header-label"},[t._v(t._s(t.getHeading))]),t._v(" "),n("NonActionableNBALink",{attrs:{linkData:t.getNonActionableNBALinks,staticLinkData:t.getNbaStaticLinks}})],1):t._e()])],1):t._e()],1)}),[],!1,null,"8d48ef16",null).exports,ChatWindowMinimized:function(){return n.e(3).then(n.bind(null,943))}},computed:{isWindowMaximized(){return this.$store.state.isWindowMaximized},isCalloutBubbleEnabled(){var e;return(null===(e=this.$store.state)||void 0===e?void 0:e.isCalloutBubbleEnabled)&&!this.$store.getters.isKnowledgeAiEnabled}}},pe=(n(541),Object(f.a)(he,(function(){var e=this._self._c;return e("div",{staticClass:"chat-window-wrapper"},[this.isWindowMaximized?e("ChatWindowMaximized",{class:[this.isWindowMaximized?"chatbox-open":""]}):this._e(),this._v(" "),e("ChatWindowMinimized")],1)}),[],!1,null,"46e039c2",null).exports),ge=n(19),me=n(30),fe=n(267),Ee=n.n(fe),ve=n(24);var Te={addStorageListener(){window.addEventListener("storage",(function(e){if(e.key===p.h.CONNECTION_STATUS_LABEL){const t=e.newValue===p.A.ONLINE;s.a.dispatch("updateInternetConnectionStatus",t)}if(function(e){var t;const n=null===(t=Object(me.j)())||void 0===t?void 0:t.agentDeskChannelName;return e.key===p.h.CONNECTION_STATUS_LABEL&&e.newValue===p.A.ONLINE&&e.oldValue===p.A.OFFLINE&&!Object(g.isTypeBOT)()&&n&&n===p.h.ZENDESK}(e)&&Object(g.isEndChatTriggerValidOnConnectionUpdate)()){const e=this.setInterval((function(){Ee.a.getConnectionStatus()===ve.a.ZENDESK.CONNECTION_STATUS.CONNECTED&&(s.a.dispatch("endChat",{message:p.h.CHAT_ENDED,showSessionRestartGreeting:!0,hideEndChatGreeting:!1}),clearInterval(e))}),500)}if(function(e){return e.key===p.h.CONNECTION_STATUS_LABEL&&e.newValue===p.A.ONLINE&&e.oldValue===p.A.OFFLINE&&h.a.getSessionStorageData("userInteracted")}(e))return s.a.dispatch("triggerProActiveGreetings"),void s.a.dispatch("triggerCalloutBubbleGreetings");e.key===ge.a.KEY_PREFIX+"widgetConfig"&&function(e,t){if(e&&t)try{const n=JSON.parse(e),i=JSON.parse(t);if(Object(g.isBotRefIdOrWidgetIdChanged)(n,i))throw new Error}catch{s.a.dispatch("endChat",{message:p.h.SESSION_HAS_EXPIRED,showSessionRestartGreeting:!1,publishEventToIoT:!1,hideEndChatGreeting:!0})}}(e.oldValue,e.newValue)}))}};n(542);const _e=window.parent.document.getElementById("netomiChatWindow").getAttribute("botRefId"),Se=new BroadcastChannel("netomiWebWidget_"+_e);a.a.prototype.broadcastChannel=Se;var be=n(164),Oe={components:{ChatWindowWrapper:pe},created(){var e=this;return d()((function*(){Te.addStorageListener(),Object(g.emitEventToParentWindow)(p.o.TRIGGER_PENDING_EVENTS_BEFORE_INIT),yield e.$store.dispatch("init"),e.handleFontFamilyAndSizeChange(),e.handleThemeColorChange(e.themeColor),e.handleUserChatAndBotLinksColorChange(e.userChatAndBotLinksColor),Object(g.emitEventToParentWindow)(p.o.TRIGGER_PENDING_EVENTS)}))()},mounted(){var e=this;if(this._browserFontSizeSettingVisibilityHandler=function(){"visible"===document.visibilityState&&Object(be.getBrowserFontSizeSetting)(e.$store)},document.addEventListener("visibilitychange",this._browserFontSizeSettingVisibilityHandler),this.isDisneyDemoBot){var t,n;document.documentElement.style.setProperty("--disney-gradient-color",null===(t=this.$store.state.widgetConfig)||void 0===t||null===(n=t.brandGPT)||void 0===n?void 0:n.primaryColor)}},beforeDestroy(){document.removeEventListener("visibilitychange",this._browserFontSizeSettingVisibilityHandler)},computed:{isDisneyDemoBot(){var e,t;return(null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.brandGPT)||void 0===t?void 0:t.enable)||!1},themeColor(){var e,t;return null===(e=this.$store.state.widgetConfig)||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.color},userChatAndBotLinksColor(){var e;return null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.botResponseBubbleColor},globalBorderRadius(){var e;return(null===(e=this.$store.state.widgetConfig)||void 0===e?void 0:e.borderRadius)||"medium"}},watch:{themeColor(e){this.handleThemeColorChange(e)},userChatAndBotLinksColor(e){this.handleUserChatAndBotLinksColorChange(e)},globalBorderRadius(e){const t={none:0,small:4,medium:8,large:16};if(!(e in t))return;const n=t[e],i="large"===e,o=document.documentElement.style;o.setProperty("--radius-chat-outer-curve",n+"px"),o.setProperty("--radius-chat-inner-icon",n+"px"),o.setProperty("--radius-chat-header-icon",n+(i?8:0)+"px"),o.setProperty("--radius-chat-inner-component",n+(i?4:0)+"px")}},methods:{handleFontFamilyAndSizeChange(){let e=this.$store.getters.getCustomFontFamily;if(e="Custom"!==e?p.l[e]:this.$store.getters.getUserDefinedFontFamily,this.$store.getters.isFontFamilyWFContentOverrideEnabled){document.documentElement.style.setProperty("--font-family-WF-response",e);const t="attachment-intent-response-font-family-style";let n=document.getElementById(t);n&&n.parentNode.removeChild(n),n=document.createElement("style"),n.id=t,n.innerHTML=".attachment-intent-response { font-family: var(--font-family-WF-response) !important; } .attachment-intent-response * { font-family: inherit !important; }",document.head.appendChild(n)}document.documentElement.style.setProperty("--font-family-non-WF-response",e)},handleThemeColorChange(e){document.documentElement.style.setProperty("--widget-primary-color",e||Object(g.getThemeDefaultColor)()),document.documentElement.style.setProperty("--widget-primary-background-color",Object(g.addAlphaInHexColor)(e||Object(g.getThemeDefaultColor)("--widget-primary-background-color"))),document.documentElement.style.setProperty("--widget-text-color",this.$store.getters.getColor)},handleUserChatAndBotLinksColorChange(e){document.documentElement.style.setProperty("--user-chat-color",e||Object(g.getThemeDefaultColor)("--user-chat-color")),document.documentElement.style.setProperty("--bot-links-color",e||Object(g.getThemeDefaultColor)("--bot-links-color")),document.documentElement.style.setProperty("--button-links-hover-background-color",Object(g.addAlphaInHexColor)(e||Object(g.getThemeDefaultColor)("--button-links-hover-background-color")))}}},Ie=Object(f.a)(Oe,(function(){return(0,this._self._c)("ChatWindowWrapper")}),[],!1,null,null,null).exports,ye=n(23),Ae=n(33),Ce=n(16);function Ne(){return(Ne=d()((function*(){s.a.dispatch("backToBotAction")}))).apply(this,arguments)}function De(){return(De=d()((function*(){s.a.dispatch("removeChatWidget")}))).apply(this,arguments)}window.addEventListener("message",(function(e){if(e.data&&Re[e.data.type]){const t=e.data.type,n=e.data;t===p.d.LOGIN_USING_OAUTH||t===p.d.LOGOUT_USING_OAUTH?s.a.dispatch(Re[t],n):Re[t](n)}}),{passive:!0});const Re={[p.o.HIDE_SUPPORT_ICON]:function(){s.a.dispatch("updateSupportIconState",{visible:!1})},[p.o.SEND_LOG_TO_DATADOG]:function(e){let{messageInfo:t}=e;new Ce.a({name:t.name,message:t.message,logLevel:t.logLevel,service:t.service})},[p.o.SEND_MESSAGE_IN_WIDGET]:function(e){const{messageInfo:{text:t,label:n}}=e,i={userMessage:{payload:t,label:n}};s.a.dispatch("sendMessage",i)},[p.o.END_SESSION]:function(e){const{messageInfo:t}=e;s.a.dispatch("endChat",t)},[p.o.OPEN_WIDGET]:function(e){const t=void 0===e.isFullScreen?s.a.state.widgetConfig.isDefaultFullScreen:e.isFullScreen;s.a.dispatch("updateWidgetStatus",{status:Ae.a.OPEN,isFullScreen:t})},[p.o.CLOSE_WIDGET]:function(e){s.a.dispatch("updateWidgetStatus",{status:Ae.a.CLOSE,isFullScreen:e.isFullScreen})},[p.o.ACCEPT_TOKEN_IN_WIDGET]:function(e){const{messageInfo:t}=e;s.a.dispatch("updateTokenInWidget",t)},[p.o.ACCEPT_VISITOR_INFO]:function(e){const{messageInfo:t}=e;s.a.dispatch("updateWidgetVisitorInfo",t)},[p.o.SHOW_CALLOUT_BUBBLE]:function(e){const{messageInfo:t}=e;s.a.dispatch("showCalloutBubbleFromPubsub",t)},[p.o.CHANGE_LOCALE]:function(e){const t=null==e?void 0:e.messageInfo;s.a.dispatch("updateLocale",t)},[p.d.LOGIN_WIDGET]:function(e){const{messageInfo:t}=e;s.a.dispatch("setUserLoggedIn",t)},[p.d.LOGIN_USING_OAUTH]:"loginUsingOauth",[p.d.LOGOUT_USING_OAUTH]:"logoutUsingOauth",[p.d.LOGOUT_WIDGET]:function(){s.a.dispatch("logoutWidget")},[p.o.BACK_TO_BOT]:function(){return Ne.apply(this,arguments)},[p.o.SHOW_EXTERNAL_HEADER_TEXT]:function(e){new Ce.a({message:"Show External Header Text function called with argument: "+JSON.stringify(e),logLevel:"info",name:"showExternalHeaderText",service:"External Event"});const{messageInfo:t}=e;s.a.dispatch("showExternalHeaderText",t)},[p.o.HIDE_HEADER_MENU_BUTTONS]:function(){new Ce.a({message:"Hide Header Menu Buttons function called",logLevel:"info",name:"hideHeaderMenuButtons",service:"External Event"}),s.a.dispatch("showHeaderMenuButtons",!1)},[p.o.PROMPT_TEST_DETAILS]:function(e){new Ce.a({message:"Accept Prompt Test Details function called with argument: "+JSON.stringify(e),logLevel:"info",name:"acceptPromptTestDetails",service:"External Event"});const{messageInfo:t}=e;s.a.dispatch("updatePromptTestDetails",t),s.a.dispatch("setIsCalloutBubbleEnabled",!1)},[p.o.REMOVE_WIDGET]:function(){return De.apply(this,arguments)},[p.o.SET_CALLOUT_BUBBLE_CONFIG]:function(e){let{messageInfo:t}=e;s.a.dispatch("setCalloutBubbleConfig",t)},[p.o.SHOW_VISITOR_INFO_BUTTON]:function(){new Ce.a({message:"Show Visitor Info Button function called",logLevel:"info",name:"showVisitorInfoButton",service:"External Event"}),s.a.dispatch("showVisitorInfoButton",!0)},[p.o.RA_SHOW_VISITOR_INFO_FORM]:function(){new Ce.a({message:"Show Visitor Info Form function called",logLevel:"info",name:"responseAnalyzerShowVisitorInfoForm",service:"External Event"}),s.a.dispatch("showVisitorInfoForm",!0)},[p.o.CHANGE_BOT_CONFIG]:function(e){let{messageInfo:t}=e;s.a.dispatch("updateBotConfig",t)}};var we=n(37);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{getFontSize:Ue}=n(164);a.a.prototype.$getFontSize=Ue,a.a.prototype.$cdn=window.parent.document.getElementById("netomiChatWindow").getAttribute("sdk_cdn");const Fe=we.a.i18n,Me=new a.a(Pe(Pe({store:s.a},Ie),{},{i18n:Fe}));a.a.config.errorHandler=function(e){throw new ye.a({name:"Vue",message:e.message,stackTrace:e.stack})},a.a.directive("focus-trap",c.a),a.a.directive("click-outside",{bind:function(e,t,n){window.event=function(i){e==i.target||e.contains(i.target)||n.context[t.expression](i)},window.parent.document.addEventListener("click",window.event),document.body.addEventListener("click",window.event)},unbind:function(){window.parent.document.removeEventListener("click",window.event),document.body.removeEventListener("click",window.event)}}),Me.$mount("#app")},77:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return E})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return _}));var i=n(9),o=n.n(i),a=n(14),s=n(1);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c="RENDER_BROADCAST_MESSAGE",u="CLEAR_CHATS_ACROSS_TABS",d="HANDLE_FORM_CONTROLS_ACROSS_TABS",h="HANDLE_FORM_SUBMISSION_ACROSS_TABS",p="HANDLE_FORM_CONTROLS_CLICKED_ACROSS_TABS",g={renderUserMessage(e){s.a.dispatch("renderBroadcastMessage",e)},broadcastEndChat(e){s.a.dispatch("endChatAcrossTabs",e)},handleFormControls(e){s.a.dispatch("updateShowFormControls",e)},handleFormControlsClicked(e){s.a.dispatch("updateFormControlsClicked",e)},handleFormSubmission(e){s.a.dispatch("updateLastFormSubmission",l(l({},e),{},{updateAcrossTabs:!0}))}},m=function(){return{[c]:g.renderUserMessage,[u]:g.broadcastEndChat,[d]:g.handleFormControls,[h]:g.handleFormSubmission,[p]:g.handleFormControlsClicked}};function f(e){S({type:c,data:e})}function E(e){S({type:u,data:e})}function v(e){S({type:d,data:e})}function T(e){S({type:h,data:e})}function _(e){S({type:p,data:e})}const S=function(e){const t=a.a.prototype.broadcastChannel;t&&t.postMessage(e)}},80:function(e,t,n){"use strict";t.a={Arial:"arial, helvetica, sans-serif","Arial Black":"'arial black', 'avant garde'","Cosmic Sans MS":"'comic sans ms', sans-serif","Courier New":"'courier new', courier",Georgia:"georgia, palatino",Helvetica:"helvetica",Inter:"inter, sans-serif",Lato:"lato, sans-serif",Poppins:"poppins, sans-serif","Proxima Nova":"proxima-nova, sans-serif",Symbol:"symbol",Tahoma:"tahoma, arial, helvetica, sans-serif","Times New Roman":"'times new roman', times","Trebuchet MS":"'trebuchet ms', geneva",Verdana:"verdana, geneva"}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(3),o=n.n(i),a=n(11),s=n(15),r=n(2),l=n(13);function c(e){return u.apply(this,arguments)}function u(){return(u=o()((function*(e){let t={};try{var n;t=null===(n=(yield s.a.request({method:"post",url:"/api/urlDetails",data:e,headers:Object(l.a)(),cancelToken:Object(r.cancelHTTPRequests)()})).data)||void 0===n?void 0:n.payload}catch(e){throw new a.a({name:"Get NBA URls info",message:"Error while fetching urls. "+e.message})}return t}))).apply(this,arguments)}},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(9),o=n.n(i),a=n(57),s=n.n(a),r=n(1),l=n(2),c=n(0),u=n(6),d=n(3),h=n.n(d),p=n(15),g=n(13);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){return(E=h()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(t,n,i){const o=(null==e||null===(t=e.requestBody)||void 0===t?void 0:t.conversationId)||Object(u.a)(c.i.SESSION.CONVERSATION_ID),a=(null==e||null===(n=e.requestBody)||void 0===n?void 0:n.botRefId)||r.a.state.botRefId,s=(null==e||null===(i=e.requestBody)||void 0===i?void 0:i.logLevel)||"info";e.requestBody=f(f({},e.requestBody),{},{conversationId:o,botRefId:a});try{return yield p.a.request({method:"post",url:"/api/datadog",data:e,params:{logLevel:s},headers:Object(g.a)(),cancelToken:Object(l.cancelHTTPRequests)()})}catch(e){console.log(e.message)}}()}))).apply(this,arguments)}var v=n(5);const T=["name","message"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class b{constructor(e){var t,n,i,o,a,d,h;let{name:p=null,message:g=null}=e,m=s()(e,T);this.name=p||this.constructor.name,this.message=g||"Something bad happened",this.extraLogProperties=m;const f=Object(l.getSdkCDNFromIframe)(),E=""!==f?new URL(f).hostname:"/";this.mandatoryLogProperties={errorOrigin:"NETOMI",botRefId:null===r.a||void 0===r.a||null===(t=r.a.state)||void 0===t?void 0:t.botRefId,conversationId:Object(u.b)(c.i.SESSION.CONVERSATION_ID),domainURL:window.parent.location.hostname,href:null===(n=window.parent.location)||void 0===n?void 0:n.href,hostingEndPoint:E,userAgent:JSON.stringify(null===r.a||void 0===r.a||null===(i=r.a.state)||void 0===i?void 0:i.deviceDetails),internetEffectiveType:null===(o=navigator)||void 0===o||null===(a=o.connection)||void 0===a?void 0:a.effectiveType,userId:null===r.a||void 0===r.a||null===(d=r.a.state)||void 0===d||null===(h=d.user)||void 0===h?void 0:h.id}}getLoggingProperties(e){let{logLevel:t}=e;return{requestBody:S(S({message:this.message,name:this.name,ip:r.a.state.userIPAddress,tabId:v.a.getSessionStorageData("tabId"),logLevel:t||"info",createdAt:""+new Date(parseInt(Object(u.b)(c.i.SESSION.CREATED_AT)))},this.mandatoryLogProperties),this.extraLogProperties)}}sendLogs(e){var t;null!==(t=r.a.state)&&void 0!==t&&t.connectionStatus&&function(){E.apply(this,arguments)}(this.getLoggingProperties(e))}}},92:function(e,t,n){"use strict";var i,o=n(3),a=n.n(o),s=n(5),r=n(1),l=n(0),c=n(37),u=n(2);t.a={DEFAULT_CONFIG:{title:function(){},options:function(){},clickHandler:function(){}},LANGUAGE_CONFIG:{icon:"GlobeIcon",title:function(){var e;return`${Object(u.getTranslation)(l.h.LANGUAGE)} - ${null===(e=c.a.i18n.locale)||void 0===e?void 0:e.toUpperCase()}`},options:function(){var e,t;return null===(e=r.a.state.widgetConfig)||void 0===e||null===(t=e.multilingual)||void 0===t?void 0:t.languages},clickHandler:(i=a()((function(e){let{code:t}=e;return function*(){yield Promise.all([c.a.loadBotConstantLocaleMessages(t),c.a.loadBotJsonConfigLocaleMessages(t)]),s.a.setLocalStorageData(l.h.CURRENT_LOCALE,t),c.a.setI18nLanguage(t)}()})),function(e){return i.apply(this,arguments)}),activeClassConditions:{enabled:!0,condition:function(e){return e.code===c.a.i18n.locale}}}}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return E}));var i=n(9),o=n.n(i),a=n(3),s=n.n(a),r=n(11),l=n(15),c=n(2),u=n(13);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){return g.apply(this,arguments)}function g(){return(g=s()((function*(){let e={};try{var t;e=null===(t=(yield l.a.request({method:"get",url:"/api/resources/bots",headers:h({"Cache-Control":"no-cache"},Object(u.a)()),cancelToken:Object(c.cancelHTTPRequests)()})).data)||void 0===t?void 0:t.payload}catch(e){throw new r.a({name:"Get bot details",message:"Error while fetching bot details. "+e.message})}return e}))).apply(this,arguments)}function m(){return f.apply(this,arguments)}function f(){return(f=s()((function*(){let e=null;try{var t,n;e=null===(t=(yield l.a.request({method:"get",url:"/api/resources/last-request-id",headers:h({"Cache-Control":"no-cache"},Object(u.a)()),cancelToken:Object(c.cancelHTTPRequests)()})).data)||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.lastRequestId}catch(e){throw new r.a({name:"Last RequestID",message:"Error while fetching last requestId. "+e.message})}return e}))).apply(this,arguments)}function E(){return v.apply(this,arguments)}function v(){return(v=s()((function*(){try{var e,t;return(null===(e=(yield l.a.request({method:"get",url:"/api/v1/bot-pci-policy",headers:h({"Cache-Control":"no-cache"},Object(u.a)()),cancelToken:Object(c.cancelHTTPRequests)()})).data)||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.maskingFieldSetting)||{}}catch(e){throw new r.a({name:"Bot PCI Policy",message:"Error while fetching Bot PCI Policy "+e.message})}}))).apply(this,arguments)}},94:function(e,t,n){"use strict";const i=new class{constructor(){var e=this;this.messageQueue=[],this.iframeLoaded=!1,this.targetWindow=null,window.addEventListener("message",(function(t){var n;"CALLOUT_IFRAME_READY"===(null==t||null===(n=t.data)||void 0===n?void 0:n.eventType)&&(e.resolveTargetWindow(),e.iframeLoaded=!0,e.flushQueue())}))}resolveTargetWindow(){try{var e;const t=null===(e=window.top)||void 0===e?void 0:e.frames;t&&(this.targetWindow=t["netomi-callout-bubble"]||this.targetWindow)}catch(e){}return this.targetWindow}flushQueue(){for(this.targetWindow||this.resolveTargetWindow();this.targetWindow&&this.messageQueue.length>0;){const e=this.messageQueue.shift();try{this.targetWindow.postMessage(e,"*")}catch(t){this.messageQueue.unshift(e);break}}}sendMessageToIframe(e){if(this.targetWindow||this.resolveTargetWindow(),this.targetWindow&&this.iframeLoaded)try{this.targetWindow.postMessage(e,"*")}catch(t){this.messageQueue.push(e)}else this.messageQueue.push(e)}sendMessage(e){this.sendMessageToIframe(e)}};t.a=i},95:function(e,t){e.exports={title:{default:"18px",medium:"16px",small:"14px"},bodyText:{default:"16px",medium:"14px",small:"12px"},smallBodyText:{default:"14px",medium:"12px",small:"10px"},quickReplies:{default:"16px",medium:"14px",small:"12px"},pills:{default:"14px",medium:"12px",small:"10px"},hoverText:{default:"12px",medium:"10px",small:"10px"},headerTitleFull:{default:"24px",medium:"22px",small:"18px"},supportText:{default:"20px",medium:"18px",small:"16px"}}},96:function(e,t,n){"use strict";var i=n(2),o=n(1);t.a=new class{constructor(){this.websocket=null,this.onMessageCallback=null,this.onCloseCallback=null,this.onErrorCallback=null}init(e){var t=this;let{onMessageCallback:n,onMessageCompleteCallback:a,onCloseCallback:s}=e;if(this.websocket&&this.websocket.readyState===WebSocket.OPEN)return;const{voice_id:r,model_id:l,stability:c,speed:u,similarity_boost:d,style:h,apply_text_normalization:p}=Object(i.getElevenLabsConnectionConfigs)(),g=`wss://api.elevenlabs.io/v1/text-to-speech/${r}/stream-input?model_id=${l}&inactivity_timeout=180&apply_text_normalization=${p}`,m=o.a.state.ttsToken;this.websocket=new WebSocket(g),this.websocket.onopen=function(){t.websocket.send(JSON.stringify({text:" ",xi_api_key:m,voice_settings:{stability:c,speed:u,similarity_boost:d,style:h}}))},this.websocket.onmessage=function(e){n(e.data),a(e.data)},this.websocket.onerror=function(e){s(e)}}sendMessage(e){const{stability:t,speed:n,similarity_boost:o,style:a}=Object(i.getElevenLabsConnectionConfigs)();this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({text:e,flush:!0,voice_settings:{stability:t,speed:n,similarity_boost:o,style:a}}))}closeConnection(){this.websocket&&this.websocket.close()}}}});